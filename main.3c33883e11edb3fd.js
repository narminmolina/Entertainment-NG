"use strict";(self.webpackChunkentertainment_app_ng=self.webpackChunkentertainment_app_ng||[]).push([[179],{2011:(Et,Se,F)=>{F.d(Se,{Dh:()=>he,GT:()=>se,cc:()=>Re,hO:()=>ze,on:()=>K,pX:()=>ue,xv:()=>me});var d=F(4650),j=F(9260),P=F(2122);Et=F.hmd(Et);const ie=["ngOnDestroy"],ue=(Ae,Te,Le,xe={})=>new Proxy(Ae,{get:(Pe,Me)=>Le.runOutsideAngular(()=>{var He;if(Ae[Me])return!(null===(He=xe?.spy)||void 0===He)&&He.get&&xe.spy.get(Me,Ae[Me]),Ae[Me];if(ie.indexOf(Me)>-1)return()=>{};const ee=Te.toPromise().then(le=>{const we=le&&le[Me];return"function"==typeof we?we.bind(le):we&&we.then?we.then(Ye=>Le.run(()=>Ye)):Le.run(()=>we)});return new Proxy(()=>{},{get:(le,we)=>ee[we],apply:(le,we,Ye)=>ee.then(qe=>{var Pt;const rt=qe&&qe(...Ye);return!(null===(Pt=xe?.spy)||void 0===Pt)&&Pt.apply&&xe.spy.apply(Me,Ye,rt),rt})})})}),se=(Ae,Te)=>{Te.forEach(Le=>{Object.getOwnPropertyNames(Le.prototype||Le).forEach(xe=>{Object.defineProperty(Ae.prototype,xe,Object.getOwnPropertyDescriptor(Le.prototype||Le,xe))})})};class _e{constructor(Te){return Te}}const he=new d.OlP("angularfire2.app.options"),me=new d.OlP("angularfire2.app.name");function K(Ae,Te,Le){const Pe="object"==typeof Le&&Le||{};Pe.name=Pe.name||"string"==typeof Le&&Le||"[DEFAULT]";const He=j.Z.apps.filter(ee=>ee&&ee.name===Pe.name)[0]||Te.runOutsideAngular(()=>j.Z.initializeApp(Ae,Pe));try{JSON.stringify(Ae)!==JSON.stringify(He.options)&&q("error",`${He.name} Firebase App already initialized with different options${Et.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new _e(He)}const q=(Ae,...Te)=>{(0,d.X6Q)()&&typeof console<"u"&&console[Ae](...Te)},J={provide:_e,useFactory:K,deps:[he,d.R0b,[new d.FiY,me]]};let ze=(()=>{class Ae{constructor(Le){j.Z.registerVersion("angularfire",P.q4.full,"core"),j.Z.registerVersion("angularfire",P.q4.full,"app-compat"),j.Z.registerVersion("angular",d.q4F.full,Le.toString())}static initializeApp(Le,xe){return{ngModule:Ae,providers:[{provide:he,useValue:Le},{provide:me,useValue:xe}]}}}return Ae.\u0275fac=function(Le){return new(Le||Ae)(d.LFG(d.Lbi))},Ae.\u0275mod=d.oAB({type:Ae}),Ae.\u0275inj=d.cJS({providers:[J]}),Ae})();function Re(Ae,Te,Le,xe,Pe){const[,Me,He]=globalThis.\u0275AngularfireInstanceCache.find(ee=>ee[0]===Ae)||[];if(Me)return function Ke(Ae,Te){try{return Ae.toString()===Te.toString()}catch{return Ae===Te}}(Pe,He)||(ye("error",`${Te} was already initialized on the ${Le} Firebase App with different settings.${ct?" You may need to reload as Firebase is not HMR aware.":""}`),ye("warn",{is:Pe,was:He})),Me;{const ee=xe();return globalThis.\u0275AngularfireInstanceCache.push([Ae,ee,Pe]),ee}}const ct=!!Et.hot,ye=(Ae,...Te)=>{(0,d.X6Q)()&&typeof console<"u"&&console[Ae](...Te)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(Et,Se,F)=>{F.d(Se,{q4:()=>_g,iC:()=>Na,HU:()=>_i,vb:()=>on,JM:()=>pd,u3:()=>gd});var d=F(4650),j=F(259),P=F(5861),ie=F(9681),ue=F(2090),se=F(4859),_e=F(1877),he=F(8766);const me="@firebase/installations",K="0.6.3",J=`w:${K}`,ze="FIS_v2",Te=new ue.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Le(D){return D instanceof ue.ZR&&D.code.includes("request-failed")}function xe({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function Pe(D){return{token:D.token,requestStatus:2,expiresIn:qe(D.expiresIn),creationTime:Date.now()}}function Me(D,T){return He.apply(this,arguments)}function He(){return(He=(0,P.Z)(function*(D,T){const $=(yield T.json()).error;return Te.create("request-failed",{requestName:D,serverCode:$.code,serverMessage:$.message,serverStatus:$.status})})).apply(this,arguments)}function ee({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function le(D,{refreshToken:T}){const x=ee(D);return x.append("Authorization",function Pt(D){return`${ze} ${D}`}(T)),x}function we(D){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,P.Z)(function*(D){const T=yield D();return T.status>=500&&T.status<600?D():T})).apply(this,arguments)}function qe(D){return Number(D.replace("s","000"))}function rt(D,T){return ce.apply(this,arguments)}function ce(){return(ce=(0,P.Z)(function*({appConfig:D,heartbeatServiceProvider:T},{fid:x}){const $=xe(D),X=ee(D),oe=T.getImmediate({optional:!0});if(oe){const bt=yield oe.getHeartbeatsHeader();bt&&X.append("x-firebase-client",bt)}const ht={method:"POST",headers:X,body:JSON.stringify({fid:x,authVersion:ze,appId:D.appId,sdkVersion:J})},pt=yield we(()=>fetch($,ht));if(pt.ok){const bt=yield pt.json();return{fid:bt.fid||x,registrationStatus:2,refreshToken:bt.refreshToken,authToken:Pe(bt.authToken)}}throw yield Me("Create Installation",pt)})).apply(this,arguments)}function ge(D){return new Promise(T=>{setTimeout(T,D)})}const ke=/^[cdef][\w-]{21}$/;function $e(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const x=function it(D){return function be(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return ke.test(x)?x:""}catch{return""}}function Qe(D){return`${D.appName}!${D.appId}`}const _n=new Map;function Mt(D,T){const x=Qe(D);fn(x,T),function Mn(D,T){const x=function pn(){return!Dn&&"BroadcastChannel"in self&&(Dn=new BroadcastChannel("[Firebase] FID Change"),Dn.onmessage=D=>{fn(D.data.key,D.data.fid)}),Dn}();x&&x.postMessage({key:D,fid:T}),function rr(){0===_n.size&&Dn&&(Dn.close(),Dn=null)}()}(x,T)}function fn(D,T){const x=_n.get(D);if(x)for(const $ of x)$(T)}let Dn=null;const Zn="firebase-installations-store";let di=null;function Li(){return di||(di=(0,he.X3)("firebase-installations-database",1,{upgrade:(D,T)=>{0===T&&D.createObjectStore(Zn)}})),di}function wn(D,T){return pr.apply(this,arguments)}function pr(){return(pr=(0,P.Z)(function*(D,T){const x=Qe(D),X=(yield Li()).transaction(Zn,"readwrite"),oe=X.objectStore(Zn),Ie=yield oe.get(x);return yield oe.put(T,x),yield X.done,(!Ie||Ie.fid!==T.fid)&&Mt(D,T.fid),T})).apply(this,arguments)}function dt(D){return gr.apply(this,arguments)}function gr(){return(gr=(0,P.Z)(function*(D){const T=Qe(D),$=(yield Li()).transaction(Zn,"readwrite");yield $.objectStore(Zn).delete(T),yield $.done})).apply(this,arguments)}function Sr(D,T){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,P.Z)(function*(D,T){const x=Qe(D),X=(yield Li()).transaction(Zn,"readwrite"),oe=X.objectStore(Zn),Ie=yield oe.get(x),ht=T(Ie);return void 0===ht?yield oe.delete(x):yield oe.put(ht,x),yield X.done,ht&&(!Ie||Ie.fid!==ht.fid)&&Mt(D,ht.fid),ht})).apply(this,arguments)}function Qn(D){return ei.apply(this,arguments)}function ei(){return(ei=(0,P.Z)(function*(D){let T;const x=yield Sr(D.appConfig,$=>{const X=Ut($),oe=wt(D,X);return T=oe.registrationPromise,oe.installationEntry});return""===x.fid?{installationEntry:yield T}:{installationEntry:x,registrationPromise:T}})).apply(this,arguments)}function Ut(D){return sr(D||{fid:$e(),registrationStatus:0})}function wt(D,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(Te.create("app-offline"))};const x={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},$=function kt(D,T){return In.apply(this,arguments)}(D,x);return{installationEntry:x,registrationPromise:$}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:ir(D)}:{installationEntry:T}}function In(){return(In=(0,P.Z)(function*(D,T){try{const x=yield rt(D,T);return wn(D.appConfig,x)}catch(x){throw Le(x)&&409===x.customData.serverCode?yield dt(D.appConfig):yield wn(D.appConfig,{fid:T.fid,registrationStatus:0}),x}})).apply(this,arguments)}function ir(D){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,P.Z)(function*(D){let T=yield hi(D.appConfig);for(;1===T.registrationStatus;)yield ge(100),T=yield hi(D.appConfig);if(0===T.registrationStatus){const{installationEntry:x,registrationPromise:$}=yield Qn(D);return $||x}return T})).apply(this,arguments)}function hi(D){return Sr(D,T=>{if(!T)throw Te.create("installation-not-found");return sr(T)})}function sr(D){return function Ui(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function Wt(D,T){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,P.Z)(function*({appConfig:D,heartbeatServiceProvider:T},x){const $=Qt(D,x),X=le(D,x),oe=T.getImmediate({optional:!0});if(oe){const bt=yield oe.getHeartbeatsHeader();bt&&X.append("x-firebase-client",bt)}const ht={method:"POST",headers:X,body:JSON.stringify({installation:{sdkVersion:J,appId:D.appId}})},pt=yield we(()=>fetch($,ht));if(pt.ok)return Pe(yield pt.json());throw yield Me("Generate Auth Token",pt)})).apply(this,arguments)}function Qt(D,{fid:T}){return`${xe(D)}/${T}/authTokens:generate`}function Vr(D){return jn.apply(this,arguments)}function jn(){return(jn=(0,P.Z)(function*(D,T=!1){let x;const $=yield Sr(D.appConfig,oe=>{if(!nn(oe))throw Te.create("not-registered");const Ie=oe.authToken;if(!T&&G(Ie))return oe;if(1===Ie.requestStatus)return x=Ge(D,T),oe;{if(!navigator.onLine)throw Te.create("app-offline");const ht=Q(oe);return x=Rt(D,ht),ht}});return x?yield x:$.authToken})).apply(this,arguments)}function Ge(D,T){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,P.Z)(function*(D,T){let x=yield st(D.appConfig);for(;1===x.authToken.requestStatus;)yield ge(100),x=yield st(D.appConfig);const $=x.authToken;return 0===$.requestStatus?Vr(D,T):$})).apply(this,arguments)}function st(D){return Sr(D,T=>{if(!nn(T))throw Te.create("not-registered");return function B(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function Rt(D,T){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,P.Z)(function*(D,T){try{const x=yield Wt(D,T),$=Object.assign(Object.assign({},T),{authToken:x});return yield wn(D.appConfig,$),x}catch(x){if(!Le(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const $=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield wn(D.appConfig,$)}else yield dt(D.appConfig);throw x}})).apply(this,arguments)}function nn(D){return void 0!==D&&2===D.registrationStatus}function G(D){return 2===D.requestStatus&&!function H(D){const T=Date.now();return T<D.creationTime||D.creationTime+D.expiresIn<T+36e5}(D)}function Q(D){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:T})}function V(){return(V=(0,P.Z)(function*(D){const T=D,{installationEntry:x,registrationPromise:$}=yield Qn(T);return $?$.catch(console.error):Vr(T).catch(console.error),x.fid})).apply(this,arguments)}function Oe(){return(Oe=(0,P.Z)(function*(D,T=!1){const x=D;return yield mt(x),(yield Vr(x,T)).token})).apply(this,arguments)}function mt(D){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,P.Z)(function*(D){const{registrationPromise:T}=yield Qn(D);T&&(yield T)})).apply(this,arguments)}function yl(D){return Te.create("missing-app-config-values",{valueName:D})}const _l="installations",To=D=>{const T=D.getProvider("app").getImmediate(),x=function Co(D){if(!D||!D.options)throw yl("App Configuration");if(!D.name)throw yl("App Name");const T=["projectId","apiKey","appId"];for(const x of T)if(!D.options[x])throw yl(x);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(T);return{app:T,appConfig:x,heartbeatServiceProvider:(0,ie._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},Gc=D=>{const T=D.getProvider("app").getImmediate(),x=(0,ie._getProvider)(T,_l).getImmediate();return{getId:()=>function N(D){return V.apply(this,arguments)}(x),getToken:X=>function ae(D){return Oe.apply(this,arguments)}(x,X)}};(function vl(){(0,ie._registerComponent)(new se.wA(_l,To,"PUBLIC")),(0,ie._registerComponent)(new se.wA("installations-internal",Gc,"PRIVATE"))})(),(0,ie.registerVersion)(me,K),(0,ie.registerVersion)(me,K,"esm2017");const tu="@firebase/remote-config",Hn=new ue.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class cs{constructor(T,x,$,X){this.client=T,this.storage=x,this.storageCache=$,this.logger=X}isCachedDataFresh(T,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const $=Date.now()-x,X=$<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${$}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${X}.`),X}fetch(T){var x=this;return(0,P.Z)(function*(){const[$,X]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(X&&x.isCachedDataFresh(T.cacheMaxAgeMillis,$))return X;T.eTag=X&&X.eTag;const oe=yield x.client.fetch(T),Ie=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===oe.status&&Ie.push(x.storage.setLastSuccessfulFetchResponse(oe)),yield Promise.all(Ie),oe})()}}function pi(D=navigator){return D.languages&&D.languages[0]||D.language}class Di{constructor(T,x,$,X,oe,Ie){this.firebaseInstallations=T,this.sdkVersion=x,this.namespace=$,this.projectId=X,this.apiKey=oe,this.appId=Ie}fetch(T){var x=this;return(0,P.Z)(function*(){const[$,X]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),Ie=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,ht={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},pt={sdk_version:x.sdkVersion,app_instance_id:$,app_instance_id_token:X,app_id:x.appId,language_code:pi()},bt={method:"POST",headers:ht,body:JSON.stringify(pt)},Jt=fetch(Ie,bt),Ft=new Promise((Wr,Nr)=>{T.signal.addEventListener(()=>{const ns=new Error("The operation was aborted.");ns.name="AbortError",Nr(ns)})});let ii;try{yield Promise.race([Jt,Ft]),ii=yield Jt}catch(Wr){let Nr="fetch-client-network";throw"AbortError"===Wr?.name&&(Nr="fetch-timeout"),Hn.create(Nr,{originalErrorMessage:Wr?.message})}let Bn=ii.status;const Gs=ii.headers.get("ETag")||void 0;let xu,qo;if(200===ii.status){let Wr;try{Wr=yield ii.json()}catch(Nr){throw Hn.create("fetch-client-parse",{originalErrorMessage:Nr?.message})}xu=Wr.entries,qo=Wr.state}if("INSTANCE_STATE_UNSPECIFIED"===qo?Bn=500:"NO_CHANGE"===qo?Bn=304:("NO_TEMPLATE"===qo||"EMPTY_CONFIG"===qo)&&(xu={}),304!==Bn&&200!==Bn)throw Hn.create("fetch-status",{httpStatus:Bn});return{status:Bn,eTag:Gs,config:xu}})()}}class Xn{constructor(T,x){this.client=T,this.storage=x}fetch(T){var x=this;return(0,P.Z)(function*(){const $=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(T,$)})()}attemptFetch(T,{throttleEndTimeMillis:x,backoffCount:$}){var X=this;return(0,P.Z)(function*(){yield function El(D,T){return new Promise((x,$)=>{const X=Math.max(T-Date.now(),0),oe=setTimeout(x,X);D.addEventListener(()=>{clearTimeout(oe),$(Hn.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,x);try{const oe=yield X.client.fetch(T);return yield X.storage.deleteThrottleMetadata(),oe}catch(oe){if(!function xn(D){if(!(D instanceof ue.ZR&&D.customData))return!1;const T=Number(D.customData.httpStatus);return 429===T||500===T||503===T||504===T}(oe))throw oe;const Ie={throttleEndTimeMillis:Date.now()+(0,ue.$s)($),backoffCount:$+1};return yield X.storage.setThrottleMetadata(Ie),X.attemptFetch(T,Ie)}})()}}class su{constructor(T,x,$,X,oe){this.app=T,this._client=x,this._storageCache=$,this._storage=X,this._logger=oe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ds(D,T){const x=D.target.error||void 0;return Hn.create(T,{originalErrorMessage:x&&x?.message})}const Ci="app_namespace_store";class mi{constructor(T,x,$,X=function gi(){return new Promise((D,T)=>{try{const x=indexedDB.open("firebase_remote_config",1);x.onerror=$=>{T(ds($,"storage-open"))},x.onsuccess=$=>{D($.target.result)},x.onupgradeneeded=$=>{0===$.oldVersion&&$.target.result.createObjectStore(Ci,{keyPath:"compositeKey"})}}catch(x){T(Hn.create("storage-open",{originalErrorMessage:x?.message}))}})}()){this.appId=T,this.appName=x,this.namespace=$,this.openDbPromise=X}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var x=this;return(0,P.Z)(function*(){const $=yield x.openDbPromise;return new Promise((X,oe)=>{const ht=$.transaction([Ci],"readonly").objectStore(Ci),pt=x.createCompositeKey(T);try{const bt=ht.get(pt);bt.onerror=Jt=>{oe(ds(Jt,"storage-get"))},bt.onsuccess=Jt=>{const Ft=Jt.target.result;X(Ft?Ft.value:void 0)}}catch(bt){oe(Hn.create("storage-get",{originalErrorMessage:bt?.message}))}})})()}set(T,x){var $=this;return(0,P.Z)(function*(){const X=yield $.openDbPromise;return new Promise((oe,Ie)=>{const pt=X.transaction([Ci],"readwrite").objectStore(Ci),bt=$.createCompositeKey(T);try{const Jt=pt.put({compositeKey:bt,value:x});Jt.onerror=Ft=>{Ie(ds(Ft,"storage-set"))},Jt.onsuccess=()=>{oe()}}catch(Jt){Ie(Hn.create("storage-set",{originalErrorMessage:Jt?.message}))}})})()}delete(T){var x=this;return(0,P.Z)(function*(){const $=yield x.openDbPromise;return new Promise((X,oe)=>{const ht=$.transaction([Ci],"readwrite").objectStore(Ci),pt=x.createCompositeKey(T);try{const bt=ht.delete(pt);bt.onerror=Jt=>{oe(ds(Jt,"storage-delete"))},bt.onsuccess=()=>{X()}}catch(bt){oe(Hn.create("storage-delete",{originalErrorMessage:bt?.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class hs{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,P.Z)(function*(){const x=T.storage.getLastFetchStatus(),$=T.storage.getLastSuccessfulFetchTimestampMillis(),X=T.storage.getActiveConfig(),oe=yield x;oe&&(T.lastFetchStatus=oe);const Ie=yield $;Ie&&(T.lastSuccessfulFetchTimestampMillis=Ie);const ht=yield X;ht&&(T.activeConfig=ht)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function ig(){return ou.apply(this,arguments)}function ou(){return(ou=(0,P.Z)(function*(){if(!(0,ue.hl)())return!1;try{return yield(0,ue.eu)()}catch{return!1}})).apply(this,arguments)}!function _a(){(0,ie._registerComponent)(new se.wA("remote-config",function D(T,{instanceIdentifier:x}){const $=T.getProvider("app").getImmediate(),X=T.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Hn.create("registration-window");if(!(0,ue.hl)())throw Hn.create("indexed-db-unavailable");const{projectId:oe,apiKey:Ie,appId:ht}=$.options;if(!oe)throw Hn.create("registration-project-id");if(!Ie)throw Hn.create("registration-api-key");if(!ht)throw Hn.create("registration-app-id");const pt=new mi(ht,$.name,x=x||"firebase"),bt=new hs(pt),Jt=new _e.Yd(tu);Jt.logLevel=_e.in.ERROR;const Ft=new Di(X,ie.SDK_VERSION,x,oe,Ie,ht),ii=new Xn(Ft,pt),Bn=new cs(ii,pt,bt,Jt),Gs=new su($,Bn,bt,pt,Jt);return function Rn(D){const T=(0,ue.m9)(D);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(Gs),Gs},"PUBLIC").setMultipleInstances(!0)),(0,ie.registerVersion)(tu,"0.4.3"),(0,ie.registerVersion)(tu,"0.4.3","esm2017")}();const fs="/firebase-messaging-sw.js",Mo="/firebase-cloud-messaging-push-scope",va="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Wc="google.c.a.c_id",og="google.c.a.c_l",ag="google.c.a.ts",Ea="google.c.a.e";var Xi=(()=>{return(D=Xi||(Xi={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",Xi;var D})();function no(D){const T=new Uint8Array(D);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ug(D){const x=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),$=atob(x),X=new Uint8Array($.length);for(let oe=0;oe<$.length;++oe)X[oe]=$.charCodeAt(oe);return X}const au="fcm_token_details_db",uu="fcm_token_object_Store";function qc(D){return lu.apply(this,arguments)}function lu(){return lu=(0,P.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(oe=>oe.name).includes(au))return null;let T=null;return(yield(0,he.X3)(au,5,{upgrade:($=(0,P.Z)(function*(X,oe,Ie,ht){var pt;if(oe<2||!X.objectStoreNames.contains(uu))return;const bt=ht.objectStore(uu),Jt=yield bt.index("fcmSenderId").get(D);if(yield bt.clear(),Jt)if(2===oe){const Ft=Jt;if(!Ft.auth||!Ft.p256dh||!Ft.endpoint)return;T={token:Ft.fcmToken,createTime:null!==(pt=Ft.createTime)&&void 0!==pt?pt:Date.now(),subscriptionOptions:{auth:Ft.auth,p256dh:Ft.p256dh,endpoint:Ft.endpoint,swScope:Ft.swScope,vapidKey:"string"==typeof Ft.vapidKey?Ft.vapidKey:no(Ft.vapidKey)}}}else if(3===oe){const Ft=Jt;T={token:Ft.fcmToken,createTime:Ft.createTime,subscriptionOptions:{auth:no(Ft.auth),p256dh:no(Ft.p256dh),endpoint:Ft.endpoint,swScope:Ft.swScope,vapidKey:no(Ft.vapidKey)}}}else if(4===oe){const Ft=Jt;T={token:Ft.fcmToken,createTime:Ft.createTime,subscriptionOptions:{auth:no(Ft.auth),p256dh:no(Ft.p256dh),endpoint:Ft.endpoint,swScope:Ft.swScope,vapidKey:no(Ft.vapidKey)}}}}),function(oe,Ie,ht,pt){return $.apply(this,arguments)})})).close(),yield(0,he.Lj)(au),yield(0,he.Lj)("fcm_vapid_details_db"),yield(0,he.Lj)("undefined"),Il(T)?T:null;var $}),lu.apply(this,arguments)}function Il(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:T}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const Ro="firebase-messaging-store";let xo=null;function Oo(){return xo||(xo=(0,he.X3)("firebase-messaging-database",1,{upgrade:(D,T)=>{0===T&&D.createObjectStore(Ro)}})),xo}function cu(D){return io.apply(this,arguments)}function io(){return(io=(0,P.Z)(function*(D){const T=so(D),$=yield(yield Oo()).transaction(Ro).objectStore(Ro).get(T);if($)return $;{const X=yield qc(D.appConfig.senderId);if(X)return yield No(D,X),X}})).apply(this,arguments)}function No(D,T){return du.apply(this,arguments)}function du(){return(du=(0,P.Z)(function*(D,T){const x=so(D),X=(yield Oo()).transaction(Ro,"readwrite");return yield X.objectStore(Ro).put(T,x),yield X.done,T})).apply(this,arguments)}function hu(D){return wa.apply(this,arguments)}function wa(){return(wa=(0,P.Z)(function*(D){const T=so(D),$=(yield Oo()).transaction(Ro,"readwrite");yield $.objectStore(Ro).delete(T),yield $.done})).apply(this,arguments)}function so({appConfig:D}){return D.appId}const zn=new ue.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Dl(D,T){return Un.apply(this,arguments)}function Un(){return(Un=(0,P.Z)(function*(D,T){const x=yield ps(D),$=gu(T),X={method:"POST",headers:x,body:JSON.stringify($)};let oe;try{oe=yield(yield fetch(pu(D.appConfig),X)).json()}catch(Ie){throw zn.create("token-subscribe-failed",{errorInfo:Ie?.toString()})}if(oe.error)throw zn.create("token-subscribe-failed",{errorInfo:oe.error.message});if(!oe.token)throw zn.create("token-subscribe-no-token");return oe.token})).apply(this,arguments)}function fu(D,T){return ks.apply(this,arguments)}function ks(){return(ks=(0,P.Z)(function*(D,T){const x=yield ps(D),$=gu(T.subscriptionOptions),X={method:"PATCH",headers:x,body:JSON.stringify($)};let oe;try{oe=yield(yield fetch(`${pu(D.appConfig)}/${T.token}`,X)).json()}catch(Ie){throw zn.create("token-update-failed",{errorInfo:Ie?.toString()})}if(oe.error)throw zn.create("token-update-failed",{errorInfo:oe.error.message});if(!oe.token)throw zn.create("token-update-no-token");return oe.token})).apply(this,arguments)}function wr(D,T){return ba.apply(this,arguments)}function ba(){return(ba=(0,P.Z)(function*(D,T){const $={method:"DELETE",headers:yield ps(D)};try{const oe=yield(yield fetch(`${pu(D.appConfig)}/${T}`,$)).json();if(oe.error)throw zn.create("token-unsubscribe-failed",{errorInfo:oe.error.message})}catch(X){throw zn.create("token-unsubscribe-failed",{errorInfo:X?.toString()})}})).apply(this,arguments)}function pu({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function ps(D){return ar.apply(this,arguments)}function ar(){return(ar=(0,P.Z)(function*({appConfig:D,installations:T}){const x=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function gu({p256dh:D,auth:T,endpoint:x,vapidKey:$}){const X={web:{endpoint:x,auth:T,p256dh:D}};return $!==va&&(X.web.applicationPubKey=$),X}const oo=6048e5;function Bh(D){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,P.Z)(function*(D){const T=yield jh(D.swRegistration,D.vapidKey),x={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:T.endpoint,auth:no(T.getKey("auth")),p256dh:no(T.getKey("p256dh"))},$=yield cu(D.firebaseDependencies);if($){if(Zc($.subscriptionOptions,x))return Date.now()>=$.createTime+oo?Ht(D,{token:$.token,createTime:Date.now(),subscriptionOptions:x}):$.token;try{yield wr(D.firebaseDependencies,$.token)}catch(X){console.warn(X)}return $h(D.firebaseDependencies,x)}return $h(D.firebaseDependencies,x)})).apply(this,arguments)}function Cl(D){return ao.apply(this,arguments)}function ao(){return(ao=(0,P.Z)(function*(D){const T=yield cu(D.firebaseDependencies);T&&(yield wr(D.firebaseDependencies,T.token),yield hu(D.firebaseDependencies));const x=yield D.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function Ht(D,T){return Po.apply(this,arguments)}function Po(){return(Po=(0,P.Z)(function*(D,T){try{const x=yield fu(D.firebaseDependencies,T),$=Object.assign(Object.assign({},T),{token:x,createTime:Date.now()});return yield No(D.firebaseDependencies,$),x}catch(x){throw yield Cl(D),x}})).apply(this,arguments)}function $h(D,T){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,P.Z)(function*(D,T){const $={token:yield Dl(D,T),createTime:Date.now(),subscriptionOptions:T};return yield No(D,$),$.token})).apply(this,arguments)}function jh(D,T){return Da.apply(this,arguments)}function Da(){return(Da=(0,P.Z)(function*(D,T){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ug(T)})})).apply(this,arguments)}function Zc(D,T){return T.vapidKey===D.vapidKey&&T.endpoint===D.endpoint&&T.auth===D.auth&&T.p256dh===D.p256dh}function Tl(D){const T={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function Hh(D,T){if(!T.notification)return;D.notification={};const x=T.notification.title;x&&(D.notification.title=x);const $=T.notification.body;$&&(D.notification.body=$);const X=T.notification.image;X&&(D.notification.image=X);const oe=T.notification.icon;oe&&(D.notification.icon=oe)}(T,D),function ve(D,T){T.data&&(D.data=T.data)}(T,D),function rn(D,T){var x,$,X,oe,Ie;if(!(T.fcmOptions||null!==(x=T.notification)&&void 0!==x&&x.click_action))return;D.fcmOptions={};const ht=null!==(X=null===($=T.fcmOptions)||void 0===$?void 0:$.link)&&void 0!==X?X:null===(oe=T.notification)||void 0===oe?void 0:oe.click_action;ht&&(D.fcmOptions.link=ht);const pt=null===(Ie=T.fcmOptions)||void 0===Ie?void 0:Ie.analytics_label;pt&&(D.fcmOptions.analyticsLabel=pt)}(T,D),T}function zh(D){return"object"==typeof D&&!!D&&Wc in D}function Yc(D,T){const x=[];for(let $=0;$<D.length;$++)x.push(D.charAt($)),$<T.length&&x.push(T.charAt($));return x.join("")}function Sl(D){return zn.create("missing-app-config-values",{valueName:D})}Yc("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Yc("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ko{constructor(T,x,$){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const X=function ur(D){if(!D||!D.options)throw Sl("App Configuration Object");if(!D.name)throw Sl("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:x}=D;for(const $ of T)if(!x[$])throw Sl($);return{appName:D.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:X,installations:x,analyticsProvider:$}}_delete(){return Promise.resolve()}}function $i(D){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,P.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(fs,{scope:Mo}),D.swRegistration.update().catch(()=>{})}catch(T){throw zn.create("failed-service-worker-registration",{browserErrorMessage:T?.message})}})).apply(this,arguments)}function Qc(D,T){return mu.apply(this,arguments)}function mu(){return(mu=(0,P.Z)(function*(D,T){if(!T&&!D.swRegistration&&(yield $i(D)),T||!D.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw zn.create("invalid-sw-registration");D.swRegistration=T}})).apply(this,arguments)}function Gh(D,T){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,P.Z)(function*(D,T){T?D.vapidKey=T:D.vapidKey||(D.vapidKey=va)})).apply(this,arguments)}function Hr(){return(Hr=(0,P.Z)(function*(D,T){if(!navigator)throw zn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw zn.create("permission-blocked");return yield Gh(D,T?.vapidKey),yield Qc(D,T?.serviceWorkerRegistration),Bh(D)})).apply(this,arguments)}function Uo(D,T,x){return gs.apply(this,arguments)}function gs(){return(gs=(0,P.Z)(function*(D,T,x){const $=Fs(T);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent($,{message_id:x[Wc],message_name:x[og],message_time:x[ag],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Fs(D){switch(D){case Xi.NOTIFICATION_CLICKED:return"notification_open";case Xi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Vo(){return(Vo=(0,P.Z)(function*(D,T){const x=T.data;if(!x.isFirebaseMessaging)return;D.onMessageHandler&&x.messageType===Xi.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(Tl(x)):D.onMessageHandler.next(Tl(x)));const $=x.data;zh($)&&"1"===$[Ea]&&(yield Uo(D,x.messageType,$))})).apply(this,arguments)}const Al="@firebase/messaging",Ls=D=>{const T=new ko(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function Xc(D,T){return Vo.apply(this,arguments)}(T,x)),T},Ca=D=>{const T=D.getProvider("messaging").getImmediate();return{getToken:$=>function Rr(D,T){return Hr.apply(this,arguments)}(T,$)}};function Ml(){return Jc.apply(this,arguments)}function Jc(){return(Jc=(0,P.Z)(function*(){try{yield(0,ue.eu)()}catch{return!1}return typeof window<"u"&&(0,ue.hl)()&&(0,ue.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function qh(){(0,ie._registerComponent)(new se.wA("messaging",Ls,"PUBLIC")),(0,ie._registerComponent)(new se.wA("messaging-internal",Ca,"PRIVATE")),(0,ie.registerVersion)(Al,"0.12.3"),(0,ie.registerVersion)(Al,"0.12.3","esm2017")}();const td="analytics",ni="firebase_id",nd="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Zh="https://www.googletagmanager.com/gtag/js",xr=new _e.Yd("@firebase/analytics");function Yh(D){return Promise.all(D.map(T=>T.catch(x=>x)))}function fg(D,T){const x=document.createElement("script");x.src=`${Zh}?l=${D}&id=${T}`,x.async=!0,document.head.appendChild(x)}function Ta(D,T,x,$,X,oe){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,P.Z)(function*(D,T,x,$,X,oe){const Ie=$[X];try{if(Ie)yield T[Ie];else{const pt=(yield Yh(x)).find(bt=>bt.measurementId===X);pt&&(yield T[pt.appId])}}catch(ht){xr.error(ht)}D("config",X,oe)})).apply(this,arguments)}function uo(D,T,x,$,X){return Us.apply(this,arguments)}function Us(){return(Us=(0,P.Z)(function*(D,T,x,$,X){try{let oe=[];if(X&&X.send_to){let Ie=X.send_to;Array.isArray(Ie)||(Ie=[Ie]);const ht=yield Yh(x);for(const pt of Ie){const bt=ht.find(Ft=>Ft.measurementId===pt),Jt=bt&&T[bt.appId];if(!Jt){oe=[];break}oe.push(Jt)}}0===oe.length&&(oe=Object.values(T)),yield Promise.all(oe),D("event",$,X||{})}catch(oe){xr.error(oe)}})).apply(this,arguments)}function ys(D){const T=window.document.getElementsByTagName("script");for(const x of Object.values(T))if(x.src&&x.src.includes(Zh)&&x.src.includes(D))return x;return null}const zr=new ue.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),id=new class pg{constructor(T={},x=1e3){this.throttleMetadata=T,this.intervalMillis=x}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,x){this.throttleMetadata[T]=x}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function Vs(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function Rl(D){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,P.Z)(function*(D){var T;const{appId:x,apiKey:$}=D,X={method:"GET",headers:Vs($)},oe=nd.replace("{app-id}",x),Ie=yield fetch(oe,X);if(200!==Ie.status&&304!==Ie.status){let ht="";try{const pt=yield Ie.json();null!==(T=pt.error)&&void 0!==T&&T.message&&(ht=pt.error.message)}catch{}throw zr.create("config-fetch-failed",{httpStatus:Ie.status,responseMessage:ht})}return Ie.json()})).apply(this,arguments)}function vu(D){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,P.Z)(function*(D,T=id,x){const{appId:$,apiKey:X,measurementId:oe}=D.options;if(!$)throw zr.create("no-app-id");if(!X){if(oe)return{measurementId:oe,appId:$};throw zr.create("no-api-key")}const Ie=T.getThrottleMetadata($)||{backoffCount:0,throttleEndTimeMillis:Date.now()},ht=new $o;return setTimeout((0,P.Z)(function*(){ht.abort()}),void 0!==x?x:6e4),Eu({appId:$,apiKey:X,measurementId:oe},Ie,ht,T)})).apply(this,arguments)}function Eu(D,T,x){return ji.apply(this,arguments)}function ji(){return(ji=(0,P.Z)(function*(D,{throttleEndTimeMillis:T,backoffCount:x},$,X=id){var oe;const{appId:Ie,measurementId:ht}=D;try{yield wu($,T)}catch(pt){if(ht)return xr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ht} provided in the "measurementId" field in the local Firebase config. [${pt?.message}]`),{appId:Ie,measurementId:ht};throw pt}try{const pt=yield Rl(D);return X.deleteThrottleMetadata(Ie),pt}catch(pt){const bt=pt;if(!xl(bt)){if(X.deleteThrottleMetadata(Ie),ht)return xr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ht} provided in the "measurementId" field in the local Firebase config. [${bt?.message}]`),{appId:Ie,measurementId:ht};throw pt}const Jt=503===Number(null===(oe=bt?.customData)||void 0===oe?void 0:oe.httpStatus)?(0,ue.$s)(x,X.intervalMillis,30):(0,ue.$s)(x,X.intervalMillis),Ft={throttleEndTimeMillis:Date.now()+Jt,backoffCount:x+1};return X.setThrottleMetadata(Ie,Ft),xr.debug(`Calling attemptFetch again in ${Jt} millis`),Eu(D,Ft,$,X)}})).apply(this,arguments)}function wu(D,T){return new Promise((x,$)=>{const X=Math.max(T-Date.now(),0),oe=setTimeout(x,X);D.addEventListener(()=>{clearTimeout(oe),$(zr.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function xl(D){if(!(D instanceof ue.ZR&&D.customData))return!1;const T=Number(D.customData.httpStatus);return 429===T||500===T||503===T||504===T}class $o{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}let Ol,Ho;function jo(){return(jo=(0,P.Z)(function*(D,T,x,$,X){if(X&&X.global)D("event",x,$);else{const oe=yield T;D("event",x,Object.assign(Object.assign({},$),{send_to:oe}))}})).apply(this,arguments)}function Pl(D){Ho=D}function Iu(D){Ol=D}function kl(){return Du.apply(this,arguments)}function Du(){return(Du=(0,P.Z)(function*(){if(!(0,ue.hl)())return xr.warn(zr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ue.eu)()}catch(D){return xr.warn(zr.create("indexeddb-unavailable",{errorInfo:D?.toString()}).message),!1}return!0})).apply(this,arguments)}function Cu(){return(Cu=(0,P.Z)(function*(D,T,x,$,X,oe,Ie){var ht;const pt=vu(D);pt.then(Bn=>{x[Bn.measurementId]=Bn.appId,D.options.measurementId&&Bn.measurementId!==D.options.measurementId&&xr.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${Bn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Bn=>xr.error(Bn)),T.push(pt);const bt=kl().then(Bn=>{if(Bn)return $.getId()}),[Jt,Ft]=yield Promise.all([pt,bt]);ys(oe)||fg(oe,Jt.measurementId),Ho&&(X("consent","default",Ho),Pl(void 0)),X("js",new Date);const ii=null!==(ht=Ie?.config)&&void 0!==ht?ht:{};return ii.origin="firebase",ii.update=!0,null!=Ft&&(ii[ni]=Ft),X("config",Jt.measurementId,ii),Ol&&(X("set",Ol),Iu(void 0)),Jt.measurementId})).apply(this,arguments)}class Tu{constructor(T){this.app=T}_delete(){return delete Hi[this.app.options.appId],Promise.resolve()}}let Hi={},Xh=[];const ho={};let Fl,yi,es="dataLayer",Es=!1;function zo(D,T,x){!function Ll(){const D=[];if((0,ue.ru)()&&D.push("This is a browser extension environment."),(0,ue.zI)()||D.push("Cookies are not available."),D.length>0){const T=D.map(($,X)=>`(${X+1}) ${$}`).join(" "),x=zr.create("invalid-analytics-context",{errorInfo:T});xr.warn(x.message)}}();const $=D.options.appId;if(!$)throw zr.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw zr.create("no-api-key");xr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Hi[$])throw zr.create("already-exists",{id:$});if(!Es){!function rd(D){let T=[];Array.isArray(window[D])?T=window[D]:window[D]=T}(es);const{wrappedGtag:oe,gtagCore:Ie}=function Qh(D,T,x,$,X){let oe=function(...Ie){window[$].push(arguments)};return window[X]&&"function"==typeof window[X]&&(oe=window[X]),window[X]=function Bo(D,T,x,$){function oe(){return(oe=(0,P.Z)(function*(Ie,ht,pt){try{"event"===Ie?yield uo(D,T,x,ht,pt):"config"===Ie?yield Ta(D,T,x,$,ht,pt):"consent"===Ie?D("consent","update",pt):D("set",ht)}catch(bt){xr.error(bt)}})).apply(this,arguments)}return function X(Ie,ht,pt){return oe.apply(this,arguments)}}(oe,D,T,x),{gtagCore:oe,wrappedGtag:window[X]}}(Hi,Xh,ho,es,"gtag");yi=oe,Fl=Ie,Es=!0}return Hi[$]=function od(D,T,x,$,X,oe,Ie){return Cu.apply(this,arguments)}(D,Xh,ho,T,Fl,es,x),new Tu(D)}function ud(){return $s.apply(this,arguments)}function $s(){return($s=(0,P.Z)(function*(){if((0,ue.ru)()||!(0,ue.zI)()||!(0,ue.hl)())return!1;try{return yield(0,ue.eu)()}catch{return!1}})).apply(this,arguments)}const gn="@firebase/analytics";!function dd(){(0,ie._registerComponent)(new se.wA(td,(T,{options:x})=>zo(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,ie._registerComponent)(new se.wA("analytics-internal",function D(T){try{const x=T.getProvider(td).getImmediate();return{logEvent:($,X,oe)=>function ef(D,T,x,$){D=(0,ue.m9)(D),function lo(D,T,x,$,X){return jo.apply(this,arguments)}(yi,Hi[D.app.options.appId],T,x,$).catch(X=>xr.error(X))}(x,$,X,oe)}}catch(x){throw zr.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,ie.registerVersion)(gn,"0.9.3"),(0,ie.registerVersion)(gn,"0.9.3","esm2017")}();var mg=F(4408),Mu=F(7565);const Zy=new class tf extends Mu.v{}(class Au extends mg.o{constructor(T,x){super(T,x),this.scheduler=T,this.work=x}schedule(T,x=0){return x>0?super.schedule(T,x):(this.delay=x,this.state=T,this.scheduler.flush(this),this)}execute(T,x){return x>0||this.closed?super.execute(T,x):this._execute(T,x)}requestAsyncId(T,x,$=0){return null!=$&&$>0||null==$&&this.delay>0?super.requestAsyncId(T,x,$):(T.flush(this),0)}});var yg=F(4986),Wo=F(9751),Gn=F(8505),Vl=F(9468),xa=F(5363);const _g=new d.GfV("7.5.0"),Or="__angularfire_symbol__analyticsIsSupportedValue",ws="__angularfire_symbol__analyticsIsSupported",Bl="__angularfire_symbol__remoteConfigIsSupportedValue",Oa="__angularfire_symbol__remoteConfigIsSupported",Hs="__angularfire_symbol__messagingIsSupportedValue",hd="__angularfire_symbol__messagingIsSupported";function pd(D,T,x){if(T){if(1===T.length)return T[0];const oe=T.filter(Ie=>Ie.app===x);if(1===oe.length)return oe[0]}return x.container.getProvider(D).getImmediate({optional:!0})}globalThis[ws]||(globalThis[ws]=ud().then(D=>globalThis[Or]=D).catch(()=>globalThis[Or]=!1)),globalThis[hd]||(globalThis[hd]=Ml().then(D=>globalThis[Hs]=D).catch(()=>globalThis[Hs]=!1)),globalThis[Oa]||(globalThis[Oa]=ig().then(D=>globalThis[Bl]=D).catch(()=>globalThis[Bl]=!1));const on=(D,T)=>{const x=T?[T]:(0,j.C6)(),$=[];return x.forEach(X=>{X.container.getProvider(D).instances.forEach(Ie=>{$.includes(Ie)||$.push(Ie)})}),$};function ts(){}class ft{constructor(T,x=Zy){this.zone=T,this.delegate=x}now(){return this.delegate.now()}schedule(T,x,$){const X=this.zone;return this.delegate.schedule(function(Ie){X.runGuarded(()=>{T.apply(this,[Ie])})},x,$)}}class zi{constructor(T){this.zone=T,this.task=null}call(T,x){const $=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ts,{},ts,ts)),x.pipe((0,Gn.b)({next:$,complete:$,error:$})).subscribe(T).add($)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let _i=(()=>{class D{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new ft(Zone.current)),this.insideAngular=x.run(()=>new ft(Zone.current,yg.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(x){return new(x||D)(d.LFG(d.R0b))},D.\u0275prov=d.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function bs(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function Ru(D){return bs().ngZone.runOutsideAngular(()=>D())}function lr(D){return bs().ngZone.run(()=>D())}function Na(D){return bs(),function Hl(D){return function(x){return(x=x.lift(new zi(D.ngZone))).pipe((0,Vl.R)(D.outsideAngular),(0,xa.Q)(D.insideAngular))}}(bs())(D)}const zs=(D,T)=>function(){const $=arguments;return T&&setTimeout(()=>{"scheduled"===T.state&&T.invoke()},10),lr(()=>D.apply(void 0,$))},gd=(D,T)=>function(){let x;const $=arguments;for(let oe=0;oe<arguments.length;oe++)"function"==typeof $[oe]&&(T&&(x||(x=lr(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ts,{},ts,ts)))),$[oe]=zs($[oe],x));const X=Ru(()=>D.apply(this,$));if(!T){if(X instanceof Wo.y){const oe=bs();return X.pipe((0,Vl.R)(oe.outsideAngular),(0,xa.Q)(oe.insideAngular))}return lr(()=>X)}return X instanceof Wo.y?X.pipe(Na):X instanceof Promise?lr(()=>new Promise((oe,Ie)=>X.then(ht=>lr(()=>oe(ht)),ht=>lr(()=>Ie(ht))))):"function"==typeof X&&x?function(){return setTimeout(()=>{x&&"scheduled"===x.state&&x.invoke()},10),X.apply(this,arguments)}:lr(()=>X)}},2722:(Et,Se,F)=>{F.d(Se,{$:()=>pu,A:()=>q,B:()=>Re,G:()=>Gc,H:()=>On,J:()=>Xn,L:()=>G,M:()=>ou,N:()=>sg,P:()=>yg,Q:()=>Wc,R:()=>cd,T:()=>og,U:()=>va,V:()=>Xi,W:()=>no,X:()=>qc,Y:()=>ti,Z:()=>Dl,_:()=>fu,a:()=>Aa,a0:()=>Bh,a1:()=>Cl,a2:()=>Ht,a3:()=>$h,a4:()=>jh,a5:()=>Zc,a6:()=>Hh,a7:()=>ve,a8:()=>zh,a9:()=>Yc,aA:()=>H,aB:()=>ht,aC:()=>lr,aD:()=>Ru,aE:()=>yr,aI:()=>Vs,aL:()=>Ea,aa:()=>$i,ab:()=>Qc,ac:()=>Gh,af:()=>Uo,ag:()=>Fs,ah:()=>Xc,ak:()=>Ro,al:()=>yu,an:()=>Zh,ao:()=>Sa,ap:()=>we,aq:()=>vt,ar:()=>mt,as:()=>Le,at:()=>fo,au:()=>qo,av:()=>Cn,aw:()=>xe,ax:()=>ee,ay:()=>ii,az:()=>qe,b:()=>zr,c:()=>Oa,d:()=>fd,e:()=>hd,f:()=>Na,g:()=>x,h:()=>gd,i:()=>Du,j:()=>oe,k:()=>ff,l:()=>js,m:()=>Sw,n:()=>mf,o:()=>he,r:()=>mg,s:()=>Ky,u:()=>Zy});var d=F(5861),j=F(2090),P=F(9681),ie=F(1877),ue=F(655),se=F(4859);const he={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},q={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Re=function J(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ke=function ze(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ct=new j.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ae=new ie.Yd("@firebase/auth");function Te(v,...g){Ae.logLevel<=ie.in.ERROR&&Ae.error(`Auth (${P.SDK_VERSION}): ${v}`,...g)}function Le(v,...g){throw He(v,...g)}function xe(v,...g){return He(v,...g)}function Pe(v,g,m){const w=Object.assign(Object.assign({},Ke()),{[g]:m});return new j.LL("auth","Firebase",w).create(g,{appName:v.name})}function Me(v,g,m){if(!(g instanceof m))throw m.name!==g.constructor.name&&Le(v,"argument-error"),Pe(v,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function He(v,...g){if("string"!=typeof v){const m=g[0],w=[...g.slice(1)];return w[0]&&(w[0].appName=v.name),v._errorFactory.create(m,...w)}return ct.create(v,...g)}function ee(v,g,...m){if(!v)throw He(g,...m)}function le(v){const g="INTERNAL ASSERTION FAILED: "+v;throw Te(g),new Error(g)}function we(v,g){v||le(g)}const Ye=new Map;function qe(v){we(v instanceof Function,"Expected a class definition");let g=Ye.get(v);return g?(we(g instanceof v,"Instance stored in cache mismatched with class"),g):(g=new v,Ye.set(v,g),g)}function ce(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function ge(){return"http:"===be()||"https:"===be()}function be(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class $e{constructor(g,m){this.shortDelay=g,this.longDelay=m,we(m>g,"Short delay should be less than long delay!"),this.isMobile=(0,j.uI)()||(0,j.b$)()}get(){return function ke(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ge()||(0,j.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function it(v,g){we(v.emulator,"Emulator should always be set here");const{url:m}=v.emulator;return g?`${m}${g.startsWith("/")?g.slice(1):g}`:m}class Qe{static initialize(g,m,w){this.fetchImpl=g,m&&(this.headersImpl=m),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void le("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void le("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void le("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const _n={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Mt=new $e(3e4,6e4);function Ct(v,g){return v.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:v.tenantId}):g}function ut(v,g,m,w){return fn.apply(this,arguments)}function fn(){return(fn=(0,d.Z)(function*(v,g,m,w,R={}){return Mn(v,R,(0,d.Z)(function*(){let k={},te={};w&&("GET"===g?te=w:k={body:JSON.stringify(w)});const Ne=(0,j.xO)(Object.assign({key:v.config.apiKey},te)).slice(1),ot=yield v._getAdditionalHeaders();return ot["Content-Type"]="application/json",v.languageCode&&(ot["X-Firebase-Locale"]=v.languageCode),Qe.fetch()(Jr(v,v.config.apiHost,m,Ne),Object.assign({method:g,headers:ot,referrerPolicy:"no-referrer"},k))}))})).apply(this,arguments)}function Mn(v,g,m){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,d.Z)(function*(v,g,m){v._canInitEmulator=!1;const w=Object.assign(Object.assign({},_n),g);try{const R=new Fi(v),k=yield Promise.race([m(),R.promise]);R.clearNetworkTimeout();const te=yield k.json();if("needConfirmation"in te)throw Zn(v,"account-exists-with-different-credential",te);if(k.ok&&!("errorMessage"in te))return te;{const Ne=k.ok?te.errorMessage:te.error.message,[ot,_t]=Ne.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ot)throw Zn(v,"credential-already-in-use",te);if("EMAIL_EXISTS"===ot)throw Zn(v,"email-already-in-use",te);if("USER_DISABLED"===ot)throw Zn(v,"user-disabled",te);const en=w[ot]||ot.toLowerCase().replace(/[_\s]+/g,"-");if(_t)throw Pe(v,en,_t);Le(v,en)}}catch(R){if(R instanceof j.ZR)throw R;Le(v,"network-request-failed")}})).apply(this,arguments)}function pn(v,g,m,w){return rr.apply(this,arguments)}function rr(){return(rr=(0,d.Z)(function*(v,g,m,w,R={}){const k=yield ut(v,g,m,w,R);return"mfaPendingCredential"in k&&Le(v,"multi-factor-auth-required",{_serverResponse:k}),k})).apply(this,arguments)}function Jr(v,g,m,w){const R=`${g}${m}?${w}`;return v.config.emulator?it(v.config,R):`${v.config.apiScheme}://${R}`}class Fi{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((m,w)=>{this.timer=setTimeout(()=>w(xe(this.auth,"network-request-failed")),Mt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Zn(v,g,m){const w={appName:v.name};m.email&&(w.email=m.email),m.phoneNumber&&(w.phoneNumber=m.phoneNumber);const R=xe(v,g,w);return R.customData._tokenResponse=m,R}function Li(){return(Li=(0,d.Z)(function*(v,g){return ut(v,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function wn(v,g){return pr.apply(this,arguments)}function pr(){return(pr=(0,d.Z)(function*(v,g){return ut(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function dt(v,g){return gr.apply(this,arguments)}function gr(){return(gr=(0,d.Z)(function*(v,g){return ut(v,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function Sr(v){if(v)try{const g=new Date(Number(v));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function ei(){return(ei=(0,d.Z)(function*(v,g=!1){const m=(0,j.m9)(v),w=yield m.getIdToken(g),R=wt(w);ee(R&&R.exp&&R.auth_time&&R.iat,m.auth,"internal-error");const k="object"==typeof R.firebase?R.firebase:void 0,te=k?.sign_in_provider;return{claims:R,token:w,authTime:Sr(Ut(R.auth_time)),issuedAtTime:Sr(Ut(R.iat)),expirationTime:Sr(Ut(R.exp)),signInProvider:te||null,signInSecondFactor:k?.sign_in_second_factor||null}})).apply(this,arguments)}function Ut(v){return 1e3*Number(v)}function wt(v){const[g,m,w]=v.split(".");if(void 0===g||void 0===m||void 0===w)return Te("JWT malformed, contained fewer than 3 sections"),null;try{const R=(0,j.tV)(m);return R?JSON.parse(R):(Te("Failed to decode base64 JWT payload"),null)}catch(R){return Te("Caught error parsing JWT payload as JSON",R?.toString()),null}}function In(v,g){return ir.apply(this,arguments)}function ir(){return(ir=(0,d.Z)(function*(v,g,m=!1){if(m)return g;try{return yield g}catch(w){throw w instanceof j.ZR&&Nn(w)&&v.auth.currentUser===v&&(yield v.auth.signOut()),w}})).apply(this,arguments)}function Nn({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class hi{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var m;if(g){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const R=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,R)}}schedule(g=!1){var m=this;if(!this.isRunning)return;const w=this.getInterval(g);this.timerId=setTimeout((0,d.Z)(function*(){yield m.iteration()}),w)}iteration(){var g=this;return(0,d.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m?.code&&g.schedule(!0))}g.schedule()})()}}class sr{constructor(g,m){this.createdAt=g,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=Sr(this.lastLoginAt),this.creationTime=Sr(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Ui(v){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,d.Z)(function*(v){var g;const m=v.auth,w=yield v.getIdToken(),R=yield In(v,dt(m,{idToken:w}));ee(R?.users.length,m,"internal-error");const k=R.users[0];v._notifyReloadListener(k);const te=null!==(g=k.providerUserInfo)&&void 0!==g&&g.length?jn(k.providerUserInfo):[],Ne=Vr(v.providerData,te),en=!!v.isAnonymous&&!(v.email&&k.passwordHash||Ne?.length),Tn={uid:k.localId,displayName:k.displayName||null,photoURL:k.photoUrl||null,email:k.email||null,emailVerified:k.emailVerified||!1,phoneNumber:k.phoneNumber||null,tenantId:k.tenantId||null,providerData:Ne,metadata:new sr(k.createdAt,k.lastLoginAt),isAnonymous:en};Object.assign(v,Tn)})).apply(this,arguments)}function Qt(){return(Qt=(0,d.Z)(function*(v){const g=(0,j.m9)(v);yield Ui(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function Vr(v,g){return[...v.filter(w=>!g.some(R=>R.providerId===w.providerId)),...g]}function jn(v){return v.map(g=>{var{providerId:m}=g,w=(0,ue._T)(g,["providerId"]);return{providerId:m,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function Ce(){return(Ce=(0,d.Z)(function*(v,g){const m=yield Mn(v,{},(0,d.Z)(function*(){const w=(0,j.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:R,apiKey:k}=v.config,te=Jr(v,R,"/v1/token",`key=${k}`),Ne=yield v._getAdditionalHeaders();return Ne["Content-Type"]="application/x-www-form-urlencoded",Qe.fetch()(te,{method:"POST",headers:Ne,body:w})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class st{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){ee(g.idToken,"internal-error"),ee(typeof g.idToken<"u","internal-error"),ee(typeof g.refreshToken<"u","internal-error");const m="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function kt(v){const g=wt(v);return ee(g,"internal-error"),ee(typeof g.exp<"u","internal-error"),ee(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,m)}getToken(g,m=!1){var w=this;return(0,d.Z)(function*(){return ee(!w.accessToken||w.refreshToken,g,"user-token-expired"),m||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(g,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,m){var w=this;return(0,d.Z)(function*(){const{accessToken:R,refreshToken:k,expiresIn:te}=yield function Ge(v,g){return Ce.apply(this,arguments)}(g,m);w.updateTokensAndExpiration(R,k,Number(te))})()}updateTokensAndExpiration(g,m,w){this.refreshToken=m||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(g,m){const{refreshToken:w,accessToken:R,expirationTime:k}=m,te=new st;return w&&(ee("string"==typeof w,"internal-error",{appName:g}),te.refreshToken=w),R&&(ee("string"==typeof R,"internal-error",{appName:g}),te.accessToken=R),k&&(ee("number"==typeof k,"internal-error",{appName:g}),te.expirationTime=k),te}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new st,this.toJSON())}_performRefresh(){return le("not implemented")}}function Rt(v,g){ee("string"==typeof v||typeof v>"u","internal-error",{appName:g})}class Nt{constructor(g){var{uid:m,auth:w,stsTokenManager:R}=g,k=(0,ue._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new hi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=w,this.stsTokenManager=R,this.accessToken=R.accessToken,this.displayName=k.displayName||null,this.email=k.email||null,this.emailVerified=k.emailVerified||!1,this.phoneNumber=k.phoneNumber||null,this.photoURL=k.photoURL||null,this.isAnonymous=k.isAnonymous||!1,this.tenantId=k.tenantId||null,this.providerData=k.providerData?[...k.providerData]:[],this.metadata=new sr(k.createdAt||void 0,k.lastLoginAt||void 0)}getIdToken(g){var m=this;return(0,d.Z)(function*(){const w=yield In(m,m.stsTokenManager.getToken(m.auth,g));return ee(w,m.auth,"internal-error"),m.accessToken!==w&&(m.accessToken=w,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),w})()}getIdTokenResult(g){return function Qn(v){return ei.apply(this,arguments)}(this,g)}reload(){return function Vi(v){return Qt.apply(this,arguments)}(this)}_assign(g){this!==g&&(ee(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(m=>Object.assign({},m)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new Nt(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,m=!1){var w=this;return(0,d.Z)(function*(){let R=!1;g.idToken&&g.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(g),R=!0),m&&(yield Ui(w)),yield w.auth._persistUserIfCurrent(w),R&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var g=this;return(0,d.Z)(function*(){const m=yield g.getIdToken();return yield In(g,function di(v,g){return Li.apply(this,arguments)}(g.auth,{idToken:m})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,m){var w,R,k,te,Ne,ot,_t,en;const Tn=null!==(w=m.displayName)&&void 0!==w?w:void 0,si=null!==(R=m.email)&&void 0!==R?R:void 0,Ds=null!==(k=m.phoneNumber)&&void 0!==k?k:void 0,Yo=null!==(te=m.photoURL)&&void 0!==te?te:void 0,Fa=null!==(Ne=m.tenantId)&&void 0!==Ne?Ne:void 0,La=null!==(ot=m._redirectEventId)&&void 0!==ot?ot:void 0,Pu=null!==(_t=m.createdAt)&&void 0!==_t?_t:void 0,yf=null!==(en=m.lastLoginAt)&&void 0!==en?en:void 0,{uid:ku,emailVerified:bg,isAnonymous:Ig,providerData:_f,stsTokenManager:ql}=m;ee(ku&&ql,g,"internal-error");const Jy=st.fromJSON(this.name,ql);ee("string"==typeof ku,g,"internal-error"),Rt(Tn,g.name),Rt(si,g.name),ee("boolean"==typeof bg,g,"internal-error"),ee("boolean"==typeof Ig,g,"internal-error"),Rt(Ds,g.name),Rt(Yo,g.name),Rt(Fa,g.name),Rt(La,g.name),Rt(Pu,g.name),Rt(yf,g.name);const vf=new Nt({uid:ku,auth:g,email:si,emailVerified:bg,displayName:Tn,isAnonymous:Ig,photoURL:Yo,phoneNumber:Ds,tenantId:Fa,stsTokenManager:Jy,createdAt:Pu,lastLoginAt:yf});return _f&&Array.isArray(_f)&&(vf.providerData=_f.map(Dg=>Object.assign({},Dg))),La&&(vf._redirectEventId=La),vf}static _fromIdTokenResponse(g,m,w=!1){return(0,d.Z)(function*(){const R=new st;R.updateFromServerResponse(m);const k=new Nt({uid:m.localId,auth:g,stsTokenManager:R,isAnonymous:w});return yield Ui(k),k})()}}const G=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(m,w){var R=this;return(0,d.Z)(function*(){R.storage[m]=w})()}_get(m){var w=this;return(0,d.Z)(function*(){const R=w.storage[m];return void 0===R?null:R})()}_remove(m){var w=this;return(0,d.Z)(function*(){delete w.storage[m]})()}_addListener(m,w){}_removeListener(m,w){}}return v.type="NONE",v})();function H(v,g,m){return`firebase:${v}:${g}:${m}`}class Q{constructor(g,m,w){this.persistence=g,this.auth=m,this.userKey=w;const{config:R,name:k}=this.auth;this.fullUserKey=H(this.userKey,R.apiKey,k),this.fullPersistenceKey=H("persistence",R.apiKey,k),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,d.Z)(function*(){const m=yield g.persistence._get(g.fullUserKey);return m?Nt._fromJSON(g.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var m=this;return(0,d.Z)(function*(){if(m.persistence===g)return;const w=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=g,w?m.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,m,w="authUser"){return(0,d.Z)(function*(){if(!m.length)return new Q(qe(G),g,w);const R=(yield Promise.all(m.map(function(){var _t=(0,d.Z)(function*(en){if(yield en._isAvailable())return en});return function(en){return _t.apply(this,arguments)}}()))).filter(_t=>_t);let k=R[0]||qe(G);const te=H(w,g.config.apiKey,g.name);let Ne=null;for(const _t of m)try{const en=yield _t._get(te);if(en){const Tn=Nt._fromJSON(g,en);_t!==k&&(Ne=Tn),k=_t;break}}catch{}const ot=R.filter(_t=>_t._shouldAllowMigration);return k._shouldAllowMigration&&ot.length?(k=ot[0],Ne&&(yield k._set(te,Ne.toJSON())),yield Promise.all(m.map(function(){var _t=(0,d.Z)(function*(en){if(en!==k)try{yield en._remove(te)}catch{}});return function(en){return _t.apply(this,arguments)}}())),new Q(k,g,w)):new Q(k,g,w)})()}}function B(v){const g=v.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Oe(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(N(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(Ze(g))return"Blackberry";if(jt(g))return"Webos";if(V(g))return"Safari";if((g.includes("chrome/")||ae(g))&&!g.includes("edge/"))return"Chrome";if(mt(g))return"Android";{const w=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===w?.length)return w[1]}return"Other"}function N(v=(0,j.z$)()){return/firefox\//i.test(v)}function V(v=(0,j.z$)()){const g=v.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function ae(v=(0,j.z$)()){return/crios\//i.test(v)}function Oe(v=(0,j.z$)()){return/iemobile/i.test(v)}function mt(v=(0,j.z$)()){return/android/i.test(v)}function Ze(v=(0,j.z$)()){return/blackberry/i.test(v)}function jt(v=(0,j.z$)()){return/webos/i.test(v)}function vt(v=(0,j.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function Cn(v=(0,j.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}function Br(v=(0,j.z$)()){return vt(v)||mt(v)||jt(v)||Ze(v)||/windows phone/i.test(v)||Oe(v)}function Co(v,g=[]){let m;switch(v){case"Browser":m=B((0,j.z$)());break;case"Worker":m=`${B((0,j.z$)())}-${v}`;break;default:m=v}const w=g.length?g.join(","):"FirebaseCore-web";return`${m}/JsCore/${P.SDK_VERSION}/${w}`}class yl{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,m){const w=k=>new Promise((te,Ne)=>{try{te(g(k))}catch(ot){Ne(ot)}});w.onAbort=m,this.queue.push(w);const R=this.queue.length-1;return()=>{this.queue[R]=()=>Promise.resolve()}}runMiddleware(g){var m=this;return(0,d.Z)(function*(){if(m.auth.currentUser===g)return;const w=[];try{for(const R of m.queue)yield R(g),R.onAbort&&w.push(R.onAbort)}catch(R){w.reverse();for(const k of w)try{k()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:R?.message})}})()}}class _l{constructor(g,m,w){this.app=g,this.heartbeatServiceProvider=m,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new To(this),this.idTokenSubscription=new To(this),this.beforeStateQueue=new yl(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ct,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(g,m){var w=this;return m&&(this._popupRedirectResolver=qe(m)),this._initializationPromise=this.queue((0,d.Z)(function*(){var R,k;if(!w._deleted&&(w.persistenceManager=yield Q.create(w,g),!w._deleted)){if(null!==(R=w._popupRedirectResolver)&&void 0!==R&&R._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch{}yield w.initializeCurrentUser(m),w.lastNotifiedUid=(null===(k=w.currentUser)||void 0===k?void 0:k.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,d.Z)(function*(){if(g._deleted)return;const m=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||m){if(g.currentUser&&m&&g.currentUser.uid===m.uid)return g._currentUser._assign(m),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(m,!0)}})()}initializeCurrentUser(g){var m=this;return(0,d.Z)(function*(){var w;const R=yield m.assertedPersistence.getCurrentUser();let k=R,te=!1;if(g&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const Ne=null===(w=m.redirectUser)||void 0===w?void 0:w._redirectEventId,ot=k?._redirectEventId,_t=yield m.tryRedirectSignIn(g);(!Ne||Ne===ot)&&_t?.user&&(k=_t.user,te=!0)}if(!k)return m.directlySetCurrentUser(null);if(!k._redirectEventId){if(te)try{yield m.beforeStateQueue.runMiddleware(k)}catch(Ne){k=R,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(Ne))}return k?m.reloadAndSetCurrentUserOrClear(k):m.directlySetCurrentUser(null)}return ee(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===k._redirectEventId?m.directlySetCurrentUser(k):m.reloadAndSetCurrentUserOrClear(k)})()}tryRedirectSignIn(g){var m=this;return(0,d.Z)(function*(){let w=null;try{w=yield m._popupRedirectResolver._completeRedirectFn(m,g,!0)}catch{yield m._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(g){var m=this;return(0,d.Z)(function*(){try{yield Ui(g)}catch(w){if("auth/network-request-failed"!==w?.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function Be(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var g=this;return(0,d.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var m=this;return(0,d.Z)(function*(){const w=g?(0,j.m9)(g):null;return w&&ee(w.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(w&&w._clone(m))})()}_updateCurrentUser(g,m=!1){var w=this;return(0,d.Z)(function*(){if(!w._deleted)return g&&ee(w.tenantId===g.tenantId,w,"tenant-id-mismatch"),m||(yield w.beforeStateQueue.runMiddleware(g)),w.queue((0,d.Z)(function*(){yield w.directlySetCurrentUser(g),w.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,d.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var m=this;return this.queue((0,d.Z)(function*(){yield m.assertedPersistence.setPersistence(qe(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new j.LL("auth","Firebase",g())}onAuthStateChanged(g,m,w){return this.registerStateListener(this.authStateSubscription,g,m,w)}beforeAuthStateChanged(g,m){return this.beforeStateQueue.pushCallback(g,m)}onIdTokenChanged(g,m,w){return this.registerStateListener(this.idTokenSubscription,g,m,w)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,m){var w=this;return(0,d.Z)(function*(){const R=yield w.getOrInitRedirectPersistenceManager(m);return null===g?R.removeCurrentUser():R.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var m=this;return(0,d.Z)(function*(){if(!m.redirectPersistenceManager){const w=g&&qe(g)||m._popupRedirectResolver;ee(w,m,"argument-error"),m.redirectPersistenceManager=yield Q.create(m,[qe(w._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(g){var m=this;return(0,d.Z)(function*(){var w,R;return m._isInitialized&&(yield m.queue((0,d.Z)(function*(){}))),(null===(w=m._currentUser)||void 0===w?void 0:w._redirectEventId)===g?m._currentUser:(null===(R=m.redirectUser)||void 0===R?void 0:R._redirectEventId)===g?m.redirectUser:null})()}_persistUserIfCurrent(g){var m=this;return(0,d.Z)(function*(){if(g===m.currentUser)return m.queue((0,d.Z)(function*(){return m.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(m=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,m,w,R){if(this._deleted)return()=>{};const k="function"==typeof m?m:m.next.bind(m),te=this._isInitialized?Promise.resolve():this._initializationPromise;return ee(te,this,"internal-error"),te.then(()=>k(this.currentUser)),"function"==typeof m?g.addObserver(m,w,R):g.addObserver(m)}directlySetCurrentUser(g){var m=this;return(0,d.Z)(function*(){m.currentUser&&m.currentUser!==g&&m._currentUser._stopProactiveRefresh(),g&&m.isProactiveRefreshEnabled&&g._startProactiveRefresh(),m.currentUser=g,g?yield m.assertedPersistence.setCurrentUser(g):yield m.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Co(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,d.Z)(function*(){var m;const w={"X-Client-Version":g.clientVersion};g.app.options.appId&&(w["X-Firebase-gmpid"]=g.app.options.appId);const R=yield null===(m=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return R&&(w["X-Firebase-Client"]=R),w})()}}function yr(v){return(0,j.m9)(v)}class To{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,j.ne)(m=>this.observer=m)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Gc(v,g,m){const w=yr(v);ee(w._canInitEmulator,w,"emulator-config-failed"),ee(/^https?:\/\//.test(g),w,"invalid-emulator-scheme");const R=!!m?.disableWarnings,k=vl(g),{host:te,port:Ne}=function tu(v){const g=vl(v),m=/(\/\/)?([^?#/]+)/.exec(v.substr(g.length));if(!m)return{host:"",port:null};const w=m[2].split("@").pop()||"",R=/^(\[[^\]]+\])(:|$)/.exec(w);if(R){const k=R[1];return{host:k,port:So(w.substr(k.length+1))}}{const[k,te]=w.split(":");return{host:k,port:So(te)}}}(g);w.config.emulator={url:`${k}//${te}${null===Ne?"":`:${Ne}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:te,port:Ne,protocol:k.replace(":",""),options:Object.freeze({disableWarnings:R})}),R||function hn(){function v(){const g=document.createElement("p"),m=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}function vl(v){const g=v.indexOf(":");return g<0?"":v.substr(0,g+1)}function So(v){if(!v)return null;const g=Number(v);return isNaN(g)?null:g}class On{constructor(g,m){this.providerId=g,this.signInMethod=m}toJSON(){return le("not implemented")}_getIdTokenResponse(g){return le("not implemented")}_linkToIdToken(g,m){return le("not implemented")}_getReauthenticationResolver(g){return le("not implemented")}}function Ar(v,g){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,d.Z)(function*(v,g){return ut(v,"POST","/v1/accounts:resetPassword",Ct(v,g))})).apply(this,arguments)}function $r(v,g){return fi.apply(this,arguments)}function fi(){return(fi=(0,d.Z)(function*(v,g){return ut(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function lt(v,g){return $t.apply(this,arguments)}function $t(){return($t=(0,d.Z)(function*(v,g){return ut(v,"POST","/v1/accounts:update",Ct(v,g))})).apply(this,arguments)}function Mr(){return(Mr=(0,d.Z)(function*(v,g){return pn(v,"POST","/v1/accounts:signInWithPassword",Ct(v,g))})).apply(this,arguments)}function Qi(v,g){return or.apply(this,arguments)}function or(){return(or=(0,d.Z)(function*(v,g){return ut(v,"POST","/v1/accounts:sendOobCode",Ct(v,g))})).apply(this,arguments)}function jr(v,g){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,d.Z)(function*(v,g){return Qi(v,g)})).apply(this,arguments)}function nu(v,g){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,d.Z)(function*(v,g){return Qi(v,g)})).apply(this,arguments)}function Xt(v,g){return ma.apply(this,arguments)}function ma(){return(ma=(0,d.Z)(function*(v,g){return Qi(v,g)})).apply(this,arguments)}function Ao(v,g){return ya.apply(this,arguments)}function ya(){return(ya=(0,d.Z)(function*(v,g){return Qi(v,g)})).apply(this,arguments)}function _r(){return(_r=(0,d.Z)(function*(v,g){return pn(v,"POST","/v1/accounts:signInWithEmailLink",Ct(v,g))})).apply(this,arguments)}function cs(){return(cs=(0,d.Z)(function*(v,g){return pn(v,"POST","/v1/accounts:signInWithEmailLink",Ct(v,g))})).apply(this,arguments)}class pi extends On{constructor(g,m,w,R=null){super("password",w),this._email=g,this._password=m,this._tenantId=R}static _fromEmailAndPassword(g,m){return new pi(g,m,"password")}static _fromEmailAndCode(g,m,w=null){return new pi(g,m,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(g){var m=this;return(0,d.Z)(function*(){switch(m.signInMethod){case"password":return function Pn(v,g){return Mr.apply(this,arguments)}(g,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function ls(v,g){return _r.apply(this,arguments)}(g,{email:m._email,oobCode:m._password});default:Le(g,"internal-error")}})()}_linkToIdToken(g,m){var w=this;return(0,d.Z)(function*(){switch(w.signInMethod){case"password":return $r(g,{idToken:m,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function ru(v,g){return cs.apply(this,arguments)}(g,{idToken:m,email:w._email,oobCode:w._password});default:Le(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function Di(v,g){return El.apply(this,arguments)}function El(){return(El=(0,d.Z)(function*(v,g){return pn(v,"POST","/v1/accounts:signInWithIdp",Ct(v,g))})).apply(this,arguments)}class Xn extends On{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const m=new Xn(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(m.idToken=g.idToken),g.accessToken&&(m.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(m.nonce=g.nonce),g.pendingToken&&(m.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(m.accessToken=g.oauthToken,m.secret=g.oauthTokenSecret):Le("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g,{providerId:w,signInMethod:R}=m,k=(0,ue._T)(m,["providerId","signInMethod"]);if(!w||!R)return null;const te=new Xn(w,R);return te.idToken=k.idToken||void 0,te.accessToken=k.accessToken||void 0,te.secret=k.secret,te.nonce=k.nonce,te.pendingToken=k.pendingToken||null,te}_getIdTokenResponse(g){return Di(g,this.buildRequest())}_linkToIdToken(g,m){const w=this.buildRequest();return w.idToken=m,Di(g,w)}_getReauthenticationResolver(g){const m=this.buildRequest();return m.autoCreate=!1,Di(g,m)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),g.postBody=(0,j.xO)(m)}return g}}function wl(v,g){return iu.apply(this,arguments)}function iu(){return(iu=(0,d.Z)(function*(v,g){return ut(v,"POST","/v1/accounts:sendVerificationCode",Ct(v,g))})).apply(this,arguments)}function ds(){return(ds=(0,d.Z)(function*(v,g){return pn(v,"POST","/v1/accounts:signInWithPhoneNumber",Ct(v,g))})).apply(this,arguments)}function vr(){return(vr=(0,d.Z)(function*(v,g){const m=yield pn(v,"POST","/v1/accounts:signInWithPhoneNumber",Ct(v,g));if(m.temporaryProof)throw Zn(v,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const rg={USER_NOT_FOUND:"user-not-found"};function mi(){return(mi=(0,d.Z)(function*(v,g){return pn(v,"POST","/v1/accounts:signInWithPhoneNumber",Ct(v,Object.assign(Object.assign({},g),{operation:"REAUTH"})),rg)})).apply(this,arguments)}class hs extends On{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,m){return new hs({verificationId:g,verificationCode:m})}static _fromTokenResponse(g,m){return new hs({phoneNumber:g,temporaryProof:m})}_getIdTokenResponse(g){return function su(v,g){return ds.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,m){return function Ci(v,g){return vr.apply(this,arguments)}(g,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function gi(v,g){return mi.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:m,verificationId:w,verificationCode:R}=this.params;return g&&m?{temporaryProof:g,phoneNumber:m}:{sessionInfo:w,code:R}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:m,verificationCode:w,phoneNumber:R,temporaryProof:k}=g;return w||m||R||k?new hs({verificationId:m,verificationCode:w,phoneNumber:R,temporaryProof:k}):null}}class Er{constructor(g){var m,w,R,k,te,Ne;const ot=(0,j.zd)((0,j.pd)(g)),_t=null!==(m=ot.apiKey)&&void 0!==m?m:null,en=null!==(w=ot.oobCode)&&void 0!==w?w:null,Tn=function _a(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(R=ot.mode)&&void 0!==R?R:null);ee(_t&&en&&Tn,"argument-error"),this.apiKey=_t,this.operation=Tn,this.code=en,this.continueUrl=null!==(k=ot.continueUrl)&&void 0!==k?k:null,this.languageCode=null!==(te=ot.languageCode)&&void 0!==te?te:null,this.tenantId=null!==(Ne=ot.tenantId)&&void 0!==Ne?Ne:null}static parseLink(g){const m=function bl(v){const g=(0,j.zd)((0,j.pd)(v)).link,m=g?(0,j.zd)((0,j.pd)(g)).deep_link_id:null,w=(0,j.zd)((0,j.pd)(v)).deep_link_id;return(w?(0,j.zd)((0,j.pd)(w)).link:null)||w||m||g||v}(g);try{return new Er(m)}catch{return null}}}let ou=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(m,w){return pi._fromEmailAndPassword(m,w)}static credentialWithLink(m,w){const R=Er.parseLink(w);return ee(R,"argument-error"),pi._fromEmailAndCode(m,R.code,R.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class fs{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class Mo extends fs{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class va extends Mo{static credentialFromJSON(g){const m="string"==typeof g?JSON.parse(g):g;return ee("providerId"in m&&"signInMethod"in m,"argument-error"),Xn._fromParams(m)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return ee(g.idToken||g.accessToken,"argument-error"),Xn._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return va.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return va.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:m,oauthAccessToken:w,oauthTokenSecret:R,pendingToken:k,nonce:te,providerId:Ne}=g;if(!w&&!R&&!m&&!k||!Ne)return null;try{return new va(Ne)._credential({idToken:m,accessToken:w,nonce:te,pendingToken:k})}catch{return null}}}let sg=(()=>{class v extends Mo{constructor(){super("facebook.com")}static credential(m){return Xn._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),Wc=(()=>{class v extends Mo{constructor(){super("google.com"),this.addScope("profile")}static credential(m,w){return Xn._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:w})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:w,oauthAccessToken:R}=m;if(!w&&!R)return null;try{return v.credential(w,R)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),og=(()=>{class v extends Mo{constructor(){super("github.com")}static credential(m){return Xn._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class Ea extends On{constructor(g,m){super(g,g),this.pendingToken=m}_getIdTokenResponse(g){return Di(g,this.buildRequest())}_linkToIdToken(g,m){const w=this.buildRequest();return w.idToken=m,Di(g,w)}_getReauthenticationResolver(g){const m=this.buildRequest();return m.autoCreate=!1,Di(g,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g,{providerId:w,signInMethod:R,pendingToken:k}=m;return w&&R&&k&&w===R?new Ea(w,k):null}static _create(g,m){return new Ea(g,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Xi extends fs{constructor(g){ee(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return Xi.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return Xi.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const m=Ea.fromJSON(g);return ee(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:m,providerId:w}=g;if(!m||!w)return null;try{return Ea._create(w,m)}catch{return null}}}let no=(()=>{class v extends Mo{constructor(){super("twitter.com")}static credential(m,w){return Xn._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:w})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:w,oauthTokenSecret:R}=m;if(!w||!R)return null;try{return v.credential(w,R)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function ug(v,g){return au.apply(this,arguments)}function au(){return(au=(0,d.Z)(function*(v,g){return pn(v,"POST","/v1/accounts:signUp",Ct(v,g))})).apply(this,arguments)}class Ti{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,m,w,R=!1){return(0,d.Z)(function*(){const k=yield Nt._fromIdTokenResponse(g,w,R),te=uu(w);return new Ti({user:k,providerId:te,_tokenResponse:w,operationType:m})})()}static _forOperation(g,m,w){return(0,d.Z)(function*(){yield g._updateTokensIfNecessary(w,!0);const R=uu(w);return new Ti({user:g,providerId:R,_tokenResponse:w,operationType:m})})()}}function uu(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function qc(v){return lu.apply(this,arguments)}function lu(){return(lu=(0,d.Z)(function*(v){var g;const m=yr(v);if(yield m._initializationPromise,null!==(g=m.currentUser)&&void 0!==g&&g.isAnonymous)return new Ti({user:m.currentUser,providerId:null,operationType:"signIn"});const w=yield ug(m,{returnSecureToken:!0}),R=yield Ti._fromIdTokenResponse(m,"signIn",w,!0);return yield m._updateCurrentUser(R.user),R})).apply(this,arguments)}class Il extends j.ZR{constructor(g,m,w,R){var k;super(m.code,m.message),this.operationType=w,this.user=R,Object.setPrototypeOf(this,Il.prototype),this.customData={appName:g.name,tenantId:null!==(k=g.tenantId)&&void 0!==k?k:void 0,_serverResponse:m.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(g,m,w,R){return new Il(g,m,w,R)}}function Kc(v,g,m,w){return("reauthenticate"===g?m._getReauthenticationResolver(v):m._getIdTokenResponse(v)).catch(k=>{throw"auth/multi-factor-auth-required"===k.code?Il._fromErrorAndOperation(v,k,g,w):k})}function ro(v){return new Set(v.map(({providerId:g})=>g).filter(g=>!!g))}function Ro(v,g){return xo.apply(this,arguments)}function xo(){return(xo=(0,d.Z)(function*(v,g){const m=(0,j.m9)(v);yield io(!0,m,g);const{providerUserInfo:w}=yield wn(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[g]}),R=ro(w||[]);return m.providerData=m.providerData.filter(k=>R.has(k.providerId)),R.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function Oo(v,g){return cu.apply(this,arguments)}function cu(){return(cu=(0,d.Z)(function*(v,g,m=!1){const w=yield In(v,g._linkToIdToken(v.auth,yield v.getIdToken()),m);return Ti._forOperation(v,"link",w)})).apply(this,arguments)}function io(v,g,m){return No.apply(this,arguments)}function No(){return(No=(0,d.Z)(function*(v,g,m){yield Ui(g);const R=!1===v?"provider-already-linked":"no-such-provider";ee(ro(g.providerData).has(m)===v,g.auth,R)})).apply(this,arguments)}function du(v,g){return hu.apply(this,arguments)}function hu(){return(hu=(0,d.Z)(function*(v,g,m=!1){const{auth:w}=v,R="reauthenticate";try{const k=yield In(v,Kc(w,R,g,v),m);ee(k.idToken,w,"internal-error");const te=wt(k.idToken);ee(te,w,"internal-error");const{sub:Ne}=te;return ee(v.uid===Ne,w,"user-mismatch"),Ti._forOperation(v,R,k)}catch(k){throw"auth/user-not-found"===k?.code&&Le(w,"user-mismatch"),k}})).apply(this,arguments)}function wa(v,g){return so.apply(this,arguments)}function so(){return(so=(0,d.Z)(function*(v,g,m=!1){const w="signIn",R=yield Kc(v,w,g),k=yield Ti._fromIdTokenResponse(v,w,R);return m||(yield v._updateCurrentUser(k.user)),k})).apply(this,arguments)}function ti(v,g){return zn.apply(this,arguments)}function zn(){return(zn=(0,d.Z)(function*(v,g){return wa(yr(v),g)})).apply(this,arguments)}function Dl(v,g){return Un.apply(this,arguments)}function Un(){return(Un=(0,d.Z)(function*(v,g){const m=(0,j.m9)(v);return yield io(!1,m,g.providerId),Oo(m,g)})).apply(this,arguments)}function fu(v,g){return ks.apply(this,arguments)}function ks(){return(ks=(0,d.Z)(function*(v,g){return du((0,j.m9)(v),g)})).apply(this,arguments)}function wr(v,g){return ba.apply(this,arguments)}function ba(){return(ba=(0,d.Z)(function*(v,g){return pn(v,"POST","/v1/accounts:signInWithCustomToken",Ct(v,g))})).apply(this,arguments)}function pu(v,g){return ps.apply(this,arguments)}function ps(){return(ps=(0,d.Z)(function*(v,g){const m=yr(v),w=yield wr(m,{token:g,returnSecureToken:!0}),R=yield Ti._fromIdTokenResponse(m,"signIn",w);return yield m._updateCurrentUser(R.user),R})).apply(this,arguments)}class ar{constructor(g,m){this.factorId=g,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(g,m){return"phoneInfo"in m?gu._fromServerResponse(g,m):Le(g,"internal-error")}}class gu extends ar{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,m){return new gu(m)}}function oo(v,g,m){var w;ee((null===(w=m.url)||void 0===w?void 0:w.length)>0,v,"invalid-continue-uri"),ee(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),g.continueUrl=m.url,g.dynamicLinkDomain=m.dynamicLinkDomain,g.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(ee(m.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),g.iOSBundleId=m.iOS.bundleId),m.android&&(ee(m.android.packageName.length>0,v,"missing-android-pkg-name"),g.androidInstallApp=m.android.installApp,g.androidMinimumVersionCode=m.android.minimumVersion,g.androidPackageName=m.android.packageName)}function Bh(v,g,m){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,d.Z)(function*(v,g,m){const w=(0,j.m9)(v),R={requestType:"PASSWORD_RESET",email:g};m&&oo(w,R,m),yield nu(w,R)})).apply(this,arguments)}function Cl(v,g,m){return ao.apply(this,arguments)}function ao(){return(ao=(0,d.Z)(function*(v,g,m){yield Ar((0,j.m9)(v),{oobCode:g,newPassword:m})})).apply(this,arguments)}function Ht(v,g){return Po.apply(this,arguments)}function Po(){return(Po=(0,d.Z)(function*(v,g){yield lt((0,j.m9)(v),{oobCode:g})})).apply(this,arguments)}function $h(v,g){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,d.Z)(function*(v,g){const m=(0,j.m9)(v),w=yield Ar(m,{oobCode:g}),R=w.requestType;switch(ee(R,m,"internal-error"),R){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ee(w.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ee(w.mfaInfo,m,"internal-error");default:ee(w.email,m,"internal-error")}let k=null;return w.mfaInfo&&(k=ar._fromServerResponse(yr(m),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:k},operation:R}})).apply(this,arguments)}function jh(v,g){return Da.apply(this,arguments)}function Da(){return(Da=(0,d.Z)(function*(v,g){const{data:m}=yield $h((0,j.m9)(v),g);return m.email})).apply(this,arguments)}function Zc(v,g,m){return Tl.apply(this,arguments)}function Tl(){return(Tl=(0,d.Z)(function*(v,g,m){const w=yr(v),R=yield ug(w,{returnSecureToken:!0,email:g,password:m}),k=yield Ti._fromIdTokenResponse(w,"signIn",R);return yield w._updateCurrentUser(k.user),k})).apply(this,arguments)}function Hh(v,g,m){return ti((0,j.m9)(v),ou.credential(g,m))}function ve(v,g,m){return rn.apply(this,arguments)}function rn(){return(rn=(0,d.Z)(function*(v,g,m){const w=(0,j.m9)(v),R={requestType:"EMAIL_SIGNIN",email:g};ee(m.handleCodeInApp,w,"argument-error"),m&&oo(w,R,m),yield Xt(w,R)})).apply(this,arguments)}function zh(v,g){return"EMAIL_SIGNIN"===Er.parseLink(g)?.operation}function Yc(v,g,m){return ur.apply(this,arguments)}function ur(){return(ur=(0,d.Z)(function*(v,g,m){const w=(0,j.m9)(v),R=ou.credentialWithLink(g,m||ce());return ee(R._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),ti(w,R)})).apply(this,arguments)}function Sl(v,g){return ko.apply(this,arguments)}function ko(){return(ko=(0,d.Z)(function*(v,g){return ut(v,"POST","/v1/accounts:createAuthUri",Ct(v,g))})).apply(this,arguments)}function $i(v,g){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,d.Z)(function*(v,g){const w={identifier:g,continueUri:ge()?ce():"http://localhost"},{signinMethods:R}=yield Sl((0,j.m9)(v),w);return R||[]})).apply(this,arguments)}function Qc(v,g){return mu.apply(this,arguments)}function mu(){return(mu=(0,d.Z)(function*(v,g){const m=(0,j.m9)(v),R={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};g&&oo(m.auth,R,g);const{email:k}=yield jr(m.auth,R);k!==v.email&&(yield v.reload())})).apply(this,arguments)}function Gh(v,g,m){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,d.Z)(function*(v,g,m){const w=(0,j.m9)(v),k={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:g};m&&oo(w.auth,k,m);const{email:te}=yield Ao(w.auth,k);te!==v.email&&(yield v.reload())})).apply(this,arguments)}function Rr(v,g){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,d.Z)(function*(v,g){return ut(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Uo(v,g){return gs.apply(this,arguments)}function gs(){return(gs=(0,d.Z)(function*(v,{displayName:g,photoURL:m}){if(void 0===g&&void 0===m)return;const w=(0,j.m9)(v),k={idToken:yield w.getIdToken(),displayName:g,photoUrl:m,returnSecureToken:!0},te=yield In(w,Rr(w.auth,k));w.displayName=te.displayName||null,w.photoURL=te.photoUrl||null;const Ne=w.providerData.find(({providerId:ot})=>"password"===ot);Ne&&(Ne.displayName=w.displayName,Ne.photoURL=w.photoURL),yield w._updateTokensIfNecessary(te)})).apply(this,arguments)}function Fs(v,g){return Vo((0,j.m9)(v),g,null)}function Xc(v,g){return Vo((0,j.m9)(v),null,g)}function Vo(v,g,m){return Al.apply(this,arguments)}function Al(){return(Al=(0,d.Z)(function*(v,g,m){const{auth:w}=v,k={idToken:yield v.getIdToken(),returnSecureToken:!0};g&&(k.email=g),m&&(k.password=m);const te=yield In(v,$r(w,k));yield v._updateTokensIfNecessary(te,!0)})).apply(this,arguments)}class Ls{constructor(g,m,w={}){this.isNewUser=g,this.providerId=m,this.profile=w}}class Ca extends Ls{constructor(g,m,w,R){super(g,m,w),this.username=R}}class qh extends Ls{constructor(g,m){super(g,"facebook.com",m)}}class Ml extends Ca{constructor(g,m){super(g,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class Jc extends Ls{constructor(g,m){super(g,"google.com",m)}}class Kh extends Ca{constructor(g,m,w){super(g,"twitter.com",m,w)}}function yu(v){const{user:g,_tokenResponse:m}=v;return g.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function Wh(v){var g,m;if(!v)return null;const{providerId:w}=v,R=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},k=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!w&&v?.idToken){const te=null===(m=null===(g=wt(v.idToken))||void 0===g?void 0:g.firebase)||void 0===m?void 0:m.sign_in_provider;if(te)return new Ls(k,"anonymous"!==te&&"custom"!==te?te:null)}if(!w)return null;switch(w){case"facebook.com":return new qh(k,R);case"github.com":return new Ml(k,R);case"google.com":return new Jc(k,R);case"twitter.com":return new Kh(k,R,v.screenName||null);case"custom":case"anonymous":return new Ls(k,null);default:return new Ls(k,w,R)}}(m)}class En{constructor(g,m,w){this.type=g,this.credential=m,this.auth=w}static _fromIdtoken(g,m){return new En("enroll",g,m)}static _fromMfaPendingCredential(g){return new En("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var m,w;if(g?.multiFactorSession){if(null!==(m=g.multiFactorSession)&&void 0!==m&&m.pendingCredential)return En._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(w=g.multiFactorSession)&&void 0!==w&&w.idToken)return En._fromIdtoken(g.multiFactorSession.idToken)}return null}}class nd{constructor(g,m,w){this.session=g,this.hints=m,this.signInResolver=w}static _fromError(g,m){const w=yr(g),R=m.customData._serverResponse,k=(R.mfaInfo||[]).map(Ne=>ar._fromServerResponse(w,Ne));ee(R.mfaPendingCredential,w,"internal-error");const te=En._fromMfaPendingCredential(R.mfaPendingCredential);return new nd(te,k,function(){var Ne=(0,d.Z)(function*(ot){const _t=yield ot._process(w,te);delete R.mfaInfo,delete R.mfaPendingCredential;const en=Object.assign(Object.assign({},R),{idToken:_t.idToken,refreshToken:_t.refreshToken});switch(m.operationType){case"signIn":const Tn=yield Ti._fromIdTokenResponse(w,m.operationType,en);return yield w._updateCurrentUser(Tn.user),Tn;case"reauthenticate":return ee(m.user,w,"internal-error"),Ti._forOperation(m.user,m.operationType,en);default:Le(w,"internal-error")}});return function(ot){return Ne.apply(this,arguments)}}())}resolveSignIn(g){var m=this;return(0,d.Z)(function*(){return m.signInResolver(g)})()}}function Zh(v,g){var m;const w=(0,j.m9)(v),R=g;return ee(g.customData.operationType,w,"argument-error"),ee(null===(m=R.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,w,"argument-error"),nd._fromError(w,R)}function xr(v,g){return ut(v,"POST","/v2/accounts/mfaEnrollment:start",Ct(v,g))}class rd{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(w=>ar._fromServerResponse(g.auth,w)))})}static _fromUser(g){return new rd(g)}getSession(){var g=this;return(0,d.Z)(function*(){return En._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,m){var w=this;return(0,d.Z)(function*(){const R=g,k=yield w.getSession(),te=yield In(w.user,R._process(w.user.auth,k,m));return yield w.user._updateTokensIfNecessary(te),w.user.reload()})()}unenroll(g){var m=this;return(0,d.Z)(function*(){const w="string"==typeof g?g:g.uid,R=yield m.user.getIdToken();try{const k=yield In(m.user,function fg(v,g){return ut(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Ct(v,g))}(m.user.auth,{idToken:R,mfaEnrollmentId:w}));m.enrolledFactors=m.enrolledFactors.filter(({uid:te})=>te!==w),yield m.user._updateTokensIfNecessary(k),yield m.user.reload()}catch(k){throw k}})()}}const Ta=new WeakMap;function Sa(v){const g=(0,j.m9)(v);return Ta.has(g)||Ta.set(g,rd._fromUser(g)),Ta.get(g)}const uo="__sak";class Us{constructor(g,m){this.storageRetriever=g,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(uo,"1"),this.storage.removeItem(uo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,m){return this.storage.setItem(g,JSON.stringify(m)),Promise.resolve()}_get(g){const m=this.storage.getItem(g);return Promise.resolve(m?JSON.parse(m):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const zr=(()=>{class v extends Us{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,w)=>this.onStorageEvent(m,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Bo(){const v=(0,j.z$)();return V(v)||vt(v)}()&&function ml(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Br(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const w of Object.keys(this.listeners)){const R=this.storage.getItem(w),k=this.localCache[w];R!==k&&m(w,k,R)}}onStorageEvent(m,w=!1){if(!m.key)return void this.forAllChangedKeys((Ne,ot,_t)=>{this.notifyListeners(Ne,_t)});const R=m.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ne=this.storage.getItem(R);if(m.newValue!==Ne)null!==m.newValue?this.storage.setItem(R,m.newValue):this.storage.removeItem(R);else if(this.localCache[R]===m.newValue&&!w)return}const k=()=>{const Ne=this.storage.getItem(R);!w&&this.localCache[R]===Ne||this.notifyListeners(R,Ne)},te=this.storage.getItem(R);!function Bt(){return(0,j.w1)()&&10===document.documentMode}()||te===m.newValue||m.newValue===m.oldValue?k():setTimeout(k,10)}notifyListeners(m,w){this.localCache[m]=w;const R=this.listeners[m];if(R)for(const k of Array.from(R))k(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,w,R)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:w,newValue:R}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(w)}_removeListener(m,w){this.listeners[m]&&(this.listeners[m].delete(w),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,w){var R=()=>super._set,k=this;return(0,d.Z)(function*(){yield R().call(k,m,w),k.localCache[m]=JSON.stringify(w)})()}_get(m){var w=()=>super._get,R=this;return(0,d.Z)(function*(){const k=yield w().call(R,m);return R.localCache[m]=JSON.stringify(k),k})()}_remove(m){var w=()=>super._remove,R=this;return(0,d.Z)(function*(){yield w().call(R,m),delete R.localCache[m]})()}}return v.type="LOCAL",v})(),Aa=(()=>{class v extends Us{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,w){}_removeListener(m,w){}}return v.type="SESSION",v})();let id=(()=>{class v{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const w=this.receivers.find(k=>k.isListeningto(m));if(w)return w;const R=new v(m);return this.receivers.push(R),R}isListeningto(m){return this.eventTarget===m}handleEvent(m){var w=this;return(0,d.Z)(function*(){const R=m,{eventId:k,eventType:te,data:Ne}=R.data,ot=w.handlersMap[te];if(!ot?.size)return;R.ports[0].postMessage({status:"ack",eventId:k,eventType:te});const _t=Array.from(ot).map(function(){var Tn=(0,d.Z)(function*(si){return si(R.origin,Ne)});return function(si){return Tn.apply(this,arguments)}}()),en=yield function pg(v){return Promise.all(v.map(function(){var g=(0,d.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(w){return{fulfilled:!1,reason:w}}});return function(m){return g.apply(this,arguments)}}()))}(_t);R.ports[0].postMessage({status:"done",eventId:k,eventType:te,response:en})})()}_subscribe(m,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(w)}_unsubscribe(m,w){this.handlersMap[m]&&w&&this.handlersMap[m].delete(w),(!w||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function Vs(v="",g=10){let m="";for(let w=0;w<g;w++)m+=Math.floor(10*Math.random());return v+m}class Rl{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,m,w=50){var R=this;return(0,d.Z)(function*(){const k=typeof MessageChannel<"u"?new MessageChannel:null;if(!k)throw new Error("connection_unavailable");let te,Ne;return new Promise((ot,_t)=>{const en=Vs("",20);k.port1.start();const Tn=setTimeout(()=>{_t(new Error("unsupported_event"))},w);Ne={messageChannel:k,onMessage(si){const Ds=si;if(Ds.data.eventId===en)switch(Ds.data.status){case"ack":clearTimeout(Tn),te=setTimeout(()=>{_t(new Error("timeout"))},3e3);break;case"done":clearTimeout(te),ot(Ds.data.response);break;default:clearTimeout(Tn),clearTimeout(te),_t(new Error("invalid_response"))}}},R.handlers.add(Ne),k.port1.addEventListener("message",Ne.onMessage),R.target.postMessage({eventType:g,eventId:en,data:m},[k.port2])}).finally(()=>{Ne&&R.removeMessageHandler(Ne)})})()}}function Vn(){return window}function Ji(){return typeof Vn().WorkerGlobalScope<"u"&&"function"==typeof Vn().importScripts}function ji(){return(ji=(0,d.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const $o="firebaseLocalStorageDb",lo="firebaseLocalStorage",jo="fbase_key";class Bs{constructor(g){this.request=g}toPromise(){return new Promise((g,m)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function co(v,g){return v.transaction([lo],g?"readwrite":"readonly").objectStore(lo)}function _s(){const v=indexedDB.open($o,1);return new Promise((g,m)=>{v.addEventListener("error",()=>{m(v.error)}),v.addEventListener("upgradeneeded",()=>{const w=v.result;try{w.createObjectStore(lo,{keyPath:jo})}catch(R){m(R)}}),v.addEventListener("success",(0,d.Z)(function*(){const w=v.result;w.objectStoreNames.contains(lo)?g(w):(w.close(),yield function Nl(){const v=indexedDB.deleteDatabase($o);return new Bs(v).toPromise()}(),g(yield _s()))}))})}function bu(v,g,m){return ri.apply(this,arguments)}function ri(){return(ri=(0,d.Z)(function*(v,g,m){const w=co(v,!0).put({[jo]:g,value:m});return new Bs(w).toPromise()})).apply(this,arguments)}function vs(){return(vs=(0,d.Z)(function*(v,g){const m=co(v,!1).get(g),w=yield new Bs(m).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function Ho(v,g){const m=co(v,!0).delete(g);return new Bs(m).toPromise()}const Du=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,d.Z)(function*(){return m.db||(m.db=yield _s()),m.db})()}_withRetries(m){var w=this;return(0,d.Z)(function*(){let R=0;for(;;)try{const k=yield w._openDb();return yield m(k)}catch(k){if(R++>3)throw k;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,d.Z)(function*(){return Ji()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,d.Z)(function*(){m.receiver=id._getInstance(function xl(){return Ji()?self:null}()),m.receiver._subscribe("keyChanged",function(){var w=(0,d.Z)(function*(R,k){return{keyProcessed:(yield m._poll()).includes(k.key)}});return function(R,k){return w.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var w=(0,d.Z)(function*(R,k){return["keyChanged"]});return function(R,k){return w.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,d.Z)(function*(){var w,R;if(m.activeServiceWorker=yield function Eu(){return ji.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new Rl(m.activeServiceWorker);const k=yield m.sender._send("ping",{},800);k&&null!==(w=k[0])&&void 0!==w&&w.fulfilled&&null!==(R=k[0])&&void 0!==R&&R.value.includes("keyChanged")&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var w=this;return(0,d.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function wu(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:m},w.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const m=yield _s();return yield bu(m,uo,"1"),yield Ho(m,uo),!0}catch{}return!1})()}_withPendingWrite(m){var w=this;return(0,d.Z)(function*(){w.pendingWrites++;try{yield m()}finally{w.pendingWrites--}})()}_set(m,w){var R=this;return(0,d.Z)(function*(){return R._withPendingWrite((0,d.Z)(function*(){return yield R._withRetries(k=>bu(k,m,w)),R.localCache[m]=w,R.notifyServiceWorker(m)}))})()}_get(m){var w=this;return(0,d.Z)(function*(){const R=yield w._withRetries(k=>function sd(v,g){return vs.apply(this,arguments)}(k,m));return w.localCache[m]=R,R})()}_remove(m){var w=this;return(0,d.Z)(function*(){return w._withPendingWrite((0,d.Z)(function*(){return yield w._withRetries(R=>Ho(R,m)),delete w.localCache[m],w.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,d.Z)(function*(){const w=yield m._withRetries(te=>{const Ne=co(te,!1).getAll();return new Bs(Ne).toPromise()});if(!w)return[];if(0!==m.pendingWrites)return[];const R=[],k=new Set;for(const{fbase_key:te,value:Ne}of w)k.add(te),JSON.stringify(m.localCache[te])!==JSON.stringify(Ne)&&(m.notifyListeners(te,Ne),R.push(te));for(const te of Object.keys(m.localCache))m.localCache[te]&&!k.has(te)&&(m.notifyListeners(te,null),R.push(te));return R})()}notifyListeners(m,w){this.localCache[m]=w;const R=this.listeners[m];if(R)for(const k of Array.from(R))k(w)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(w)}_removeListener(m,w){this.listeners[m]&&(this.listeners[m].delete(w),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function od(v,g){return ut(v,"POST","/v2/accounts/mfaSignIn:start",Ct(v,g))}function Hi(){return(Hi=(0,d.Z)(function*(v){return(yield ut(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ho(v){return new Promise((g,m)=>{const w=document.createElement("script");w.setAttribute("src",v),w.onload=g,w.onerror=R=>{const k=xe("internal-error");k.customData=R,m(k)},w.type="text/javascript",w.charset="UTF-8",function Xh(){var v,g;return null!==(g=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==g?g:document}().appendChild(w)})}function es(v){return`__${v}${Math.floor(1e6*Math.random())}`}const yi=1e12;class Es{constructor(g){this.auth=g,this.counter=yi,this._widgets=new Map}render(g,m){const w=this.counter;return this._widgets.set(w,new gg(g,this.auth.name,m||{})),this.counter++,w}reset(g){var m;const w=g||yi;null===(m=this._widgets.get(w))||void 0===m||m.delete(),this._widgets.delete(w)}getResponse(g){var m;return(null===(m=this._widgets.get(g||yi))||void 0===m?void 0:m.getResponse())||""}execute(g){var m=this;return(0,d.Z)(function*(){var w;return null===(w=m._widgets.get(g||yi))||void 0===w||w.execute(),""})()}}class gg{constructor(g,m,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const R="string"==typeof g?document.getElementById(g):g;ee(R,"argument-error",{appName:m}),this.container=R,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Ll(v){const g=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<v;w++)g.push(m.charAt(Math.floor(Math.random()*m.length)));return g.join("")}(50);const{callback:g,"expired-callback":m}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const zo=es("rcb"),Jh=new $e(3e4,6e4);class ud{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=Vn().grecaptcha)||void 0===g||!g.render)}load(g,m=""){return ee(function $s(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(m),g,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(Vn().grecaptcha):new Promise((w,R)=>{const k=Vn().setTimeout(()=>{R(xe(g,"network-request-failed"))},Jh.get());Vn()[zo]=()=>{Vn().clearTimeout(k),delete Vn()[zo];const Ne=Vn().grecaptcha;if(!Ne)return void R(xe(g,"internal-error"));const ot=Ne.render;Ne.render=(_t,en)=>{const Tn=ot(_t,en);return this.counter++,Tn},this.hostLanguage=m,w(Ne)},ho(`https://www.google.com/recaptcha/api.js??${(0,j.xO)({onload:zo,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(k),R(xe(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var m;return!(null===(m=Vn().grecaptcha)||void 0===m||!m.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Su{load(g){return(0,d.Z)(function*(){return new Es(g)})()}clearedOneInstance(){}}const Go="recaptcha",ld={theme:"light",type:"image"};class cd{constructor(g,m=Object.assign({},ld),w){this.parameters=m,this.type=Go,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=yr(w),this.isInvisible="invisible"===this.parameters.size,ee(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const R="string"==typeof g?document.getElementById(g):g;ee(R,this.auth,"argument-error"),this.container=R,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Su:new ud,this.validateStartingState()}verify(){var g=this;return(0,d.Z)(function*(){g.assertNotDestroyed();const m=yield g.render(),w=g.getAssertedRecaptcha();return w.getResponse(m)||new Promise(k=>{const te=Ne=>{Ne&&(g.tokenChangeListeners.delete(te),k(Ne))};g.tokenChangeListeners.add(te),g.isInvisible&&w.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){ee(!this.parameters.sitekey,this.auth,"argument-error"),ee(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ee(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return m=>{if(this.tokenChangeListeners.forEach(w=>w(m)),"function"==typeof g)g(m);else if("string"==typeof g){const w=Vn()[g];"function"==typeof w&&w(m)}}}assertNotDestroyed(){ee(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,d.Z)(function*(){if(yield g.init(),!g.widgetId){let m=g.container;if(!g.isInvisible){const w=document.createElement("div");m.appendChild(w),m=w}g.widgetId=g.getAssertedRecaptcha().render(m,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,d.Z)(function*(){ee(ge()&&!Ji(),g.auth,"internal-error"),yield function Ma(){let v=null;return new Promise(g=>{"complete"!==document.readyState?(v=()=>g(),window.addEventListener("load",v)):g()}).catch(g=>{throw v&&window.removeEventListener("load",v),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const m=yield function Tu(v){return Hi.apply(this,arguments)}(g.auth);ee(m,g.auth,"internal-error"),g.parameters.sitekey=m})()}getAssertedRecaptcha(){return ee(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ef{constructor(g,m){this.verificationId=g,this.onConfirmation=m}confirm(g){const m=hs._fromVerification(this.verificationId,g);return this.onConfirmation(m)}}function Ky(v,g,m){return gn.apply(this,arguments)}function gn(){return(gn=(0,d.Z)(function*(v,g,m){const w=yr(v),R=yield Mu(w,g,(0,j.m9)(m));return new ef(R,k=>ti(w,k))})).apply(this,arguments)}function js(v,g,m){return dd.apply(this,arguments)}function dd(){return(dd=(0,d.Z)(function*(v,g,m){const w=(0,j.m9)(v);yield io(!1,w,"phone");const R=yield Mu(w.auth,g,(0,j.m9)(m));return new ef(R,k=>Dl(w,k))})).apply(this,arguments)}function mg(v,g,m){return Au.apply(this,arguments)}function Au(){return(Au=(0,d.Z)(function*(v,g,m){const w=(0,j.m9)(v),R=yield Mu(w.auth,g,(0,j.m9)(m));return new ef(R,k=>fu(w,k))})).apply(this,arguments)}function Mu(v,g,m){return tf.apply(this,arguments)}function tf(){return(tf=(0,d.Z)(function*(v,g,m){var w;const R=yield m.verify();try{let k;if(ee("string"==typeof R,v,"argument-error"),ee(m.type===Go,v,"argument-error"),k="string"==typeof g?{phoneNumber:g}:g,"session"in k){const te=k.session;if("phoneNumber"in k)return ee("enroll"===te.type,v,"internal-error"),(yield xr(v,{idToken:te.credential,phoneEnrollmentInfo:{phoneNumber:k.phoneNumber,recaptchaToken:R}})).phoneSessionInfo.sessionInfo;{ee("signin"===te.type,v,"internal-error");const Ne=(null===(w=k.multiFactorHint)||void 0===w?void 0:w.uid)||k.multiFactorUid;return ee(Ne,v,"missing-multi-factor-info"),(yield od(v,{mfaPendingCredential:te.credential,mfaEnrollmentId:Ne,phoneSignInInfo:{recaptchaToken:R}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:te}=yield wl(v,{phoneNumber:k.phoneNumber,recaptchaToken:R});return te}}finally{m._reset()}})).apply(this,arguments)}function Zy(v,g){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,d.Z)(function*(v,g){yield Oo((0,j.m9)(v),g)})).apply(this,arguments)}let yg=(()=>{class v{constructor(m){this.providerId=v.PROVIDER_ID,this.auth=yr(m)}verifyPhoneNumber(m,w){return Mu(this.auth,m,(0,j.m9)(w))}static credential(m,w){return hs._fromVerification(m,w)}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:w,temporaryProof:R}=m;return w&&R?hs._fromTokenResponse(w,R):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function Wo(v,g){return g?qe(g):(ee(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class Gn extends On{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return Di(g,this._buildIdpRequest())}_linkToIdToken(g,m){return Di(g,this._buildIdpRequest(m))}_getReauthenticationResolver(g){return Di(g,this._buildIdpRequest())}_buildIdpRequest(g){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(m.idToken=g),m}}function Vl(v){return wa(v.auth,new Gn(v),v.bypassAuthState)}function xa(v){const{auth:g,user:m}=v;return ee(m,g,"internal-error"),du(m,new Gn(v),v.bypassAuthState)}function _g(v){return Or.apply(this,arguments)}function Or(){return(Or=(0,d.Z)(function*(v){const{auth:g,user:m}=v;return ee(m,g,"internal-error"),Oo(m,new Gn(v),v.bypassAuthState)})).apply(this,arguments)}class ws{constructor(g,m,w,R,k=!1){this.auth=g,this.resolver=w,this.user=R,this.bypassAuthState=k,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var g=this;return new Promise(function(){var m=(0,d.Z)(function*(w,R){g.pendingPromise={resolve:w,reject:R};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(k){g.reject(k)}});return function(w,R){return m.apply(this,arguments)}}())}onAuthEvent(g){var m=this;return(0,d.Z)(function*(){const{urlResponse:w,sessionId:R,postBody:k,tenantId:te,error:Ne,type:ot}=g;if(Ne)return void m.reject(Ne);const _t={auth:m.auth,requestUri:w,sessionId:R,tenantId:te||void 0,postBody:k||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(ot)(_t))}catch(en){m.reject(en)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return Vl;case"linkViaPopup":case"linkViaRedirect":return _g;case"reauthViaPopup":case"reauthViaRedirect":return xa;default:Le(this.auth,"internal-error")}}resolve(g){we(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){we(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Bl=new $e(2e3,1e4);function Oa(v,g,m){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,d.Z)(function*(v,g,m){const w=yr(v);Me(v,g,fs);const R=Wo(w,m);return new Gr(w,"signInViaPopup",g,R).executeNotNull()})).apply(this,arguments)}function hd(v,g,m){return $l.apply(this,arguments)}function $l(){return($l=(0,d.Z)(function*(v,g,m){const w=(0,j.m9)(v);Me(w.auth,g,fs);const R=Wo(w.auth,m);return new Gr(w.auth,"reauthViaPopup",g,R,w).executeNotNull()})).apply(this,arguments)}function fd(v,g,m){return nf.apply(this,arguments)}function nf(){return(nf=(0,d.Z)(function*(v,g,m){const w=(0,j.m9)(v);Me(w.auth,g,fs);const R=Wo(w.auth,m);return new Gr(w.auth,"linkViaPopup",g,R,w).executeNotNull()})).apply(this,arguments)}let Gr=(()=>{class v extends ws{constructor(m,w,R,k,te){super(m,w,k,te),this.provider=R,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var m=this;return(0,d.Z)(function*(){const w=yield m.execute();return ee(w,m.auth,"internal-error"),w})()}onExecution(){var m=this;return(0,d.Z)(function*(){we(1===m.filter.length,"Popup operations only handle one event");const w=Vs();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],w),m.authWindow.associatedEvent=w,m.resolver._originValidation(m.auth).catch(R=>{m.reject(R)}),m.resolver._isIframeWebStorageSupported(m.auth,R=>{R||m.reject(xe(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(xe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const m=()=>{var w,R;this.pollId=null!==(R=null===(w=this.authWindow)||void 0===w?void 0:w.window)&&void 0!==R&&R.closed?window.setTimeout(()=>{this.pollId=null,this.reject(xe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,Bl.get())};m()}}return v.currentPopupAction=null,v})();const on=new Map;class ts extends ws{constructor(g,m,w=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,w),this.eventId=null}execute(){var g=()=>super.execute,m=this;return(0,d.Z)(function*(){let w=on.get(m.auth._key());if(!w){try{const k=(yield function ft(v,g){return zi.apply(this,arguments)}(m.resolver,m.auth))?yield g().call(m):null;w=()=>Promise.resolve(k)}catch(R){w=()=>Promise.reject(R)}on.set(m.auth._key(),w)}return m.bypassAuthState||on.set(m.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(g){var m=()=>super.onAuthEvent,w=this;return(0,d.Z)(function*(){if("signInViaRedirect"===g.type)return m().call(w,g);if("unknown"!==g.type){if(g.eventId){const R=yield w.auth._redirectUserForId(g.eventId);if(R)return w.user=R,m().call(w,g);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function zi(){return(zi=(0,d.Z)(function*(v,g){const m=jl(g),w=rf(v);if(!(yield w._isAvailable()))return!1;const R="true"===(yield w._get(m));return yield w._remove(m),R})).apply(this,arguments)}function _i(v,g){return bs.apply(this,arguments)}function bs(){return(bs=(0,d.Z)(function*(v,g){return rf(v)._set(jl(g),"true")})).apply(this,arguments)}function Ru(){on.clear()}function lr(v,g){on.set(v._key(),g)}function rf(v){return qe(v._redirectPersistence)}function jl(v){return H("pendingRedirect",v.config.apiKey,v.name)}function Na(v,g,m){return function Hl(v,g,m){return zs.apply(this,arguments)}(v,g,m)}function zs(){return(zs=(0,d.Z)(function*(v,g,m){const w=yr(v);Me(v,g,fs),yield w._initializationPromise;const R=Wo(w,m);return yield _i(R,w),R._openRedirect(w,g,"signInViaRedirect")})).apply(this,arguments)}function gd(v,g,m){return function D(v,g,m){return T.apply(this,arguments)}(v,g,m)}function T(){return(T=(0,d.Z)(function*(v,g,m){const w=(0,j.m9)(v);Me(w.auth,g,fs),yield w.auth._initializationPromise;const R=Wo(w.auth,m);yield _i(R,w.auth);const k=yield bt(w);return R._openRedirect(w.auth,g,"reauthViaRedirect",k)})).apply(this,arguments)}function x(v,g,m){return function $(v,g,m){return X.apply(this,arguments)}(v,g,m)}function X(){return(X=(0,d.Z)(function*(v,g,m){const w=(0,j.m9)(v);Me(w.auth,g,fs),yield w.auth._initializationPromise;const R=Wo(w.auth,m);yield io(!1,w,g.providerId),yield _i(R,w.auth);const k=yield bt(w);return R._openRedirect(w.auth,g,"linkViaRedirect",k)})).apply(this,arguments)}function oe(v,g){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,d.Z)(function*(v,g){return yield yr(v)._initializationPromise,ht(v,g,!1)})).apply(this,arguments)}function ht(v,g){return pt.apply(this,arguments)}function pt(){return(pt=(0,d.Z)(function*(v,g,m=!1){const w=yr(v),R=Wo(w,g),te=yield new ts(w,R,m).execute();return te&&!m&&(delete te.user._redirectEventId,yield w._persistUserIfCurrent(te.user),yield w._setRedirectUser(null,g)),te})).apply(this,arguments)}function bt(v){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,d.Z)(function*(v){const g=Vs(`${v.uid}:::`);return v._redirectEventId=g,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),g})).apply(this,arguments)}class ii{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let m=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(g,w)&&(m=!0,this.sendToConsumer(g,w),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function xu(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Gs(v);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=g,m=!0)),m}sendToConsumer(g,m){var w;if(g.error&&!Gs(g)){const R=(null===(w=g.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";m.onError(xe(this.auth,R))}else m.onAuthEvent(g)}isEventForConsumer(g,m){const w=null===m.eventId||!!g.eventId&&g.eventId===m.eventId;return m.filter.includes(g.type)&&w}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Bn(g))}saveEventToCache(g){this.cachedEventUids.add(Bn(g)),this.lastProcessedEventTime=Date.now()}}function Bn(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(g=>g).join("-")}function Gs({type:v,error:g}){return"unknown"===v&&"auth/no-auth-event"===g?.code}function qo(v){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,d.Z)(function*(v,g={}){return ut(v,"GET","/v1/projects",g)})).apply(this,arguments)}const Nr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ns=/^https?/;function cr(){return(cr=(0,d.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:g}=yield qo(v);for(const m of g)try{if(vg(m))return}catch{}Le(v,"unauthorized-domain")})).apply(this,arguments)}function vg(v){const g=ce(),{protocol:m,hostname:w}=new URL(g);if(v.startsWith("chrome-extension://")){const te=new URL(v);return""===te.hostname&&""===w?"chrome-extension:"===m&&v.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===m&&te.hostname===w}if(!ns.test(m))return!1;if(Nr.test(v))return w===v;const R=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+R+"|"+R+")$","i").test(w)}const af=new $e(3e4,6e4);function Pr(){const v=Vn().___jsl;if(v?.H)for(const g of Object.keys(v.H))if(v.H[g].r=v.H[g].r||[],v.H[g].L=v.H[g].L||[],v.H[g].r=[...v.H[g].L],v.CP)for(let m=0;m<v.CP.length;m++)v.CP[m]=null}let Ko=null;function vi(v){return Ko=Ko||function Pa(v){return new Promise((g,m)=>{var w,R,k;function te(){Pr(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{Pr(),m(xe(v,"network-request-failed"))},timeout:af.get()})}if(null!==(R=null===(w=Vn().gapi)||void 0===w?void 0:w.iframes)&&void 0!==R&&R.Iframe)g(gapi.iframes.getContext());else{if(null===(k=Vn().gapi)||void 0===k||!k.load){const Ne=es("iframefcb");return Vn()[Ne]=()=>{gapi.load?te():m(xe(v,"network-request-failed"))},ho(`https://apis.google.com/js/api.js?onload=${Ne}`).catch(ot=>m(ot))}te()}}).catch(g=>{throw Ko=null,g})}(v),Ko}const Si=new $e(5e3,15e3),Tw={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Zo=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ka(v){const g=v.config;ee(g.authDomain,v,"auth-domain-config-required");const m=g.emulator?it(g,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,w={apiKey:g.apiKey,appName:v.name,v:P.SDK_VERSION},R=Zo.get(v.config.apiHost);R&&(w.eid=R);const k=v._getFrameworks();return k.length&&(w.fw=k.join(",")),`${m}?${(0,j.xO)(w).slice(1)}`}function Ws(){return Ws=(0,d.Z)(function*(v){const g=yield vi(v),m=Vn().gapi;return ee(m,v,"internal-error"),g.open({where:document.body,url:ka(v),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Tw,dontclear:!0},w=>new Promise(function(){var R=(0,d.Z)(function*(k,te){yield w.restyle({setHideOnLeave:!1});const Ne=xe(v,"network-request-failed"),ot=Vn().setTimeout(()=>{te(Ne)},Si.get());function _t(){Vn().clearTimeout(ot),k(w)}w.ping(_t).then(_t,()=>{te(Ne)})});return function(k,te){return R.apply(this,arguments)}}()))}),Ws.apply(this,arguments)}const Yy={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class cf{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function fo(v,g,m,w,R,k){ee(v.config.authDomain,v,"auth-domain-config-required"),ee(v.config.apiKey,v,"invalid-api-key");const te={apiKey:v.config.apiKey,appName:v.name,authType:m,redirectUrl:w,v:P.SDK_VERSION,eventId:R};if(g instanceof fs){g.setDefaultLanguage(v.languageCode),te.providerId=g.providerId||"",(0,j.xb)(g.getCustomParameters())||(te.customParameters=JSON.stringify(g.getCustomParameters()));for(const[ot,_t]of Object.entries(k||{}))te[ot]=_t}if(g instanceof Mo){const ot=g.getScopes().filter(_t=>""!==_t);ot.length>0&&(te.scopes=ot.join(","))}v.tenantId&&(te.tid=v.tenantId);const Ne=te;for(const ot of Object.keys(Ne))void 0===Ne[ot]&&delete Ne[ot];return`${function df({config:v}){return v.emulator?it(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,j.xO)(Ne).slice(1)}`}const hf="webStorageSupport",ff=class qs{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Aa,this._completeRedirectFn=ht,this._overrideRedirectResult=lr}_openPopup(g,m,w,R){var k=this;return(0,d.Z)(function*(){var te;we(null===(te=k.eventManagers[g._key()])||void 0===te?void 0:te.manager,"_initialize() not called before _openPopup()");const Ne=fo(g,m,w,ce(),R);return function Gi(v,g,m,w=500,R=600){const k=Math.max((window.screen.availHeight-R)/2,0).toString(),te=Math.max((window.screen.availWidth-w)/2,0).toString();let Ne="";const ot=Object.assign(Object.assign({},Yy),{width:w.toString(),height:R.toString(),top:k,left:te}),_t=(0,j.z$)().toLowerCase();m&&(Ne=ae(_t)?"_blank":m),N(_t)&&(g=g||"http://localhost",ot.scrollbars="yes");const en=Object.entries(ot).reduce((si,[Ds,Yo])=>`${si}${Ds}=${Yo},`,"");if(function mr(v=(0,j.z$)()){var g;return vt(v)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(_t)&&"_self"!==Ne)return function qt(v,g){const m=document.createElement("a");m.href=v,m.target=g;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(w)}(g||"",Ne),new cf(null);const Tn=window.open(g||"",Ne,en);ee(Tn,v,"popup-blocked");try{Tn.focus()}catch{}return new cf(Tn)}(g,Ne,Vs())})()}_openRedirect(g,m,w,R){var k=this;return(0,d.Z)(function*(){return yield k._originValidation(g),function vu(v){Vn().location.href=v}(fo(g,m,w,ce(),R)),new Promise(()=>{})})()}_initialize(g){const m=g._key();if(this.eventManagers[m]){const{manager:R,promise:k}=this.eventManagers[m];return R?Promise.resolve(R):(we(k,"If manager is not set, promise should be"),k)}const w=this.initAndGetManager(g);return this.eventManagers[m]={promise:w},w.catch(()=>{delete this.eventManagers[m]}),w}initAndGetManager(g){var m=this;return(0,d.Z)(function*(){const w=yield function kr(v){return Ws.apply(this,arguments)}(g),R=new ii(g);return w.register("authEvent",k=>(ee(k?.authEvent,g,"invalid-auth-event"),{status:R.onEvent(k.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[g._key()]={manager:R},m.iframes[g._key()]=w,R})()}_isIframeWebStorageSupported(g,m){this.iframes[g._key()].send(hf,{type:hf},R=>{var k;const te=null===(k=R?.[0])||void 0===k?void 0:k[hf];void 0!==te&&m(!!te),Le(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const m=g._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function sf(v){return cr.apply(this,arguments)}(g)),this.originValidationPromises[m]}get _shouldInitProactively(){return Br()||V()||vt()}};class pf{constructor(g){this.factorId=g}_process(g,m,w){switch(m.type){case"enroll":return this._finalizeEnroll(g,m.credential,w);case"signin":return this._finalizeSignIn(g,m.credential);default:return le("unexpected MultiFactorSessionType")}}}class yd extends pf{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new yd(g)}_finalizeEnroll(g,m,w){return function Yh(v,g){return ut(v,"POST","/v2/accounts/mfaEnrollment:finalize",Ct(v,g))}(g,{idToken:m,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,m){return function Cu(v,g){return ut(v,"POST","/v2/accounts/mfaSignIn:finalize",Ct(v,g))}(g,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Sw=(()=>{class v{constructor(){}static assertion(m){return yd._fromCredential(m)}}return v.FACTOR_ID="phone",v})();var vn="@firebase/auth";class Wl{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var m=this;return(0,d.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const m=this.auth.onIdTokenChanged(w=>{g(w?.stsTokenManager.accessToken||null)});this.internalListeners.set(g,m),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const m=this.internalListeners.get(g);m&&(this.internalListeners.delete(g),m(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const wg=(0,j.Pz)("authIdTokenMaxAge")||300;let _d=null;const Xy=v=>function(){var g=(0,d.Z)(function*(m){const w=m&&(yield m.getIdTokenResult()),R=w&&((new Date).getTime()-Date.parse(w.issuedAtTime))/1e3;if(R&&R>wg)return;const k=w?.token;_d!==k&&(_d=k,yield fetch(v,{method:k?"POST":"DELETE",headers:k?{Authorization:`Bearer ${k}`}:{}}))});return function(m){return g.apply(this,arguments)}}();function mf(v=(0,P.getApp)()){const g=(0,P._getProvider)(v,"auth");if(g.isInitialized())return g.getImmediate();const m=function Pt(v,g){const m=(0,P._getProvider)(v,"auth");if(m.isInitialized()){const R=m.getImmediate(),k=m.getOptions();if((0,j.vZ)(k,g??{}))return R;Le(R,"already-initialized")}return m.initialize({options:g})}(v,{popupRedirectResolver:ff,persistence:[Du,zr,Aa]}),w=(0,j.Pz)("authTokenSyncURL");if(w){const k=Xy(w);(function dg(v,g,m){(0,j.m9)(v).beforeAuthStateChanged(g,m)})(m,k,()=>k(m.currentUser)),function cg(v,g,m,w){(0,j.m9)(v).onIdTokenChanged(g,m,w)}(m,te=>k(te))}const R=(0,j.q4)("auth");return R&&Gc(m,`http://${R}`),m}!function qr(v){(0,P._registerComponent)(new se.wA("auth",(g,{options:m})=>{const w=g.getProvider("app").getImmediate(),R=g.getProvider("heartbeat"),{apiKey:k,authDomain:te}=w.options;return((Ne,ot)=>{ee(k&&!k.includes(":"),"invalid-api-key",{appName:Ne.name}),ee(!te?.includes(":"),"argument-error",{appName:Ne.name});const _t={apiKey:k,authDomain:te,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Co(v)},en=new _l(Ne,ot,_t);return function rt(v,g){const m=g?.persistence||[],w=(Array.isArray(m)?m:[m]).map(qe);g?.errorMap&&v._updateErrorMap(g.errorMap),v._initializeWithPersistence(w,g?.popupRedirectResolver)}(en,m),en})(w,R)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,m,w)=>{g.getProvider("auth-internal").initialize()})),(0,P._registerComponent)(new se.wA("auth-internal",g=>{const m=yr(g.getProvider("auth").getImmediate());return new Wl(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,P.registerVersion)(vn,"0.21.3",function gf(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,P.registerVersion)(vn,"0.21.3","esm2017")}("Browser")},2090:(Et,Se,F)=>{F.d(Se,{$s:()=>st,BH:()=>Pe,G6:()=>be,L:()=>he,LL:()=>_n,P0:()=>Te,Pz:()=>xe,Sg:()=>Me,UG:()=>le,US:()=>se,ZB:()=>q,ZR:()=>Qe,aH:()=>Le,b$:()=>qe,eu:()=>Be,hl:()=>ke,jU:()=>we,m9:()=>nn,ne:()=>ei,pd:()=>Yn,q4:()=>Ae,r3:()=>Fi,ru:()=>Ye,tV:()=>me,uI:()=>ee,vZ:()=>wn,w1:()=>rt,xO:()=>gr,xb:()=>di,z$:()=>He,zI:()=>$e,zd:()=>Sr});const ie=function(G){const H=[];let Q=0;for(let B=0;B<G.length;B++){let N=G.charCodeAt(B);N<128?H[Q++]=N:N<2048?(H[Q++]=N>>6|192,H[Q++]=63&N|128):55296==(64512&N)&&B+1<G.length&&56320==(64512&G.charCodeAt(B+1))?(N=65536+((1023&N)<<10)+(1023&G.charCodeAt(++B)),H[Q++]=N>>18|240,H[Q++]=N>>12&63|128,H[Q++]=N>>6&63|128,H[Q++]=63&N|128):(H[Q++]=N>>12|224,H[Q++]=N>>6&63|128,H[Q++]=63&N|128)}return H},se={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(G,H){if(!Array.isArray(G))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Q=H?this.byteToCharMapWebSafe_:this.byteToCharMap_,B=[];for(let N=0;N<G.length;N+=3){const V=G[N],ae=N+1<G.length,Oe=ae?G[N+1]:0,mt=N+2<G.length,Ze=mt?G[N+2]:0;let Cn=(15&Oe)<<2|Ze>>6,mr=63&Ze;mt||(mr=64,ae||(Cn=64)),B.push(Q[V>>2],Q[(3&V)<<4|Oe>>4],Q[Cn],Q[mr])}return B.join("")},encodeString(G,H){return this.HAS_NATIVE_SUPPORT&&!H?btoa(G):this.encodeByteArray(ie(G),H)},decodeString(G,H){return this.HAS_NATIVE_SUPPORT&&!H?atob(G):function(G){const H=[];let Q=0,B=0;for(;Q<G.length;){const N=G[Q++];if(N<128)H[B++]=String.fromCharCode(N);else if(N>191&&N<224){const V=G[Q++];H[B++]=String.fromCharCode((31&N)<<6|63&V)}else if(N>239&&N<365){const mt=((7&N)<<18|(63&G[Q++])<<12|(63&G[Q++])<<6|63&G[Q++])-65536;H[B++]=String.fromCharCode(55296+(mt>>10)),H[B++]=String.fromCharCode(56320+(1023&mt))}else{const V=G[Q++],ae=G[Q++];H[B++]=String.fromCharCode((15&N)<<12|(63&V)<<6|63&ae)}}return H.join("")}(this.decodeStringToByteArray(G,H))},decodeStringToByteArray(G,H){this.init_();const Q=H?this.charToByteMapWebSafe_:this.charToByteMap_,B=[];for(let N=0;N<G.length;){const V=Q[G.charAt(N++)],Oe=N<G.length?Q[G.charAt(N)]:0;++N;const Ze=N<G.length?Q[G.charAt(N)]:64;++N;const vt=N<G.length?Q[G.charAt(N)]:64;if(++N,null==V||null==Oe||null==Ze||null==vt)throw Error();B.push(V<<2|Oe>>4),64!==Ze&&(B.push(Oe<<4&240|Ze>>2),64!==vt&&B.push(Ze<<6&192|vt))}return B},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let G=0;G<this.ENCODED_VALS.length;G++)this.byteToCharMap_[G]=this.ENCODED_VALS.charAt(G),this.charToByteMap_[this.byteToCharMap_[G]]=G,this.byteToCharMapWebSafe_[G]=this.ENCODED_VALS_WEBSAFE.charAt(G),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[G]]=G,G>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(G)]=G,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(G)]=G)}}},he=function(G){return function(G){const H=ie(G);return se.encodeByteArray(H,!0)}(G).replace(/\./g,"")},me=function(G){try{return se.decodeString(G,!0)}catch(H){console.error("base64Decode failed: ",H)}return null};function q(G,H){if(!(H instanceof Object))return H;switch(H.constructor){case Date:return new Date(H.getTime());case Object:void 0===G&&(G={});break;case Array:G=[];break;default:return H}for(const Q in H)!H.hasOwnProperty(Q)||!J(Q)||(G[Q]=q(G[Q],H[Q]));return G}function J(G){return"__proto__"!==G}const ye=()=>{try{return function ze(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const G=process.env.__FIREBASE_DEFAULTS__;return G?JSON.parse(G):void 0})()||(()=>{if(typeof document>"u")return;let G;try{G=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const H=G&&me(G[1]);return H&&JSON.parse(H)})()}catch(G){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${G}`)}},Ae=G=>{var H,Q;return null===(Q=null===(H=ye())||void 0===H?void 0:H.emulatorHosts)||void 0===Q?void 0:Q[G]},Te=G=>{const H=Ae(G);if(!H)return;const Q=H.lastIndexOf(":");if(Q<=0||Q+1===H.length)throw new Error(`Invalid host ${H} with no separate hostname and port!`);const B=parseInt(H.substring(Q+1),10);return"["===H[0]?[H.substring(1,Q-1),B]:[H.substring(0,Q),B]},Le=()=>{var G;return null===(G=ye())||void 0===G?void 0:G.config},xe=G=>{var H;return null===(H=ye())||void 0===H?void 0:H[`_${G}`]};class Pe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((H,Q)=>{this.resolve=H,this.reject=Q})}wrapCallback(H){return(Q,B)=>{Q?this.reject(Q):this.resolve(B),"function"==typeof H&&(this.promise.catch(()=>{}),1===H.length?H(Q):H(Q,B))}}}function Me(G,H){if(G.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const B=H||"demo-project",N=G.iat||0,V=G.sub||G.user_id;if(!V)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ae=Object.assign({iss:`https://securetoken.google.com/${B}`,aud:B,iat:N,exp:N+3600,auth_time:N,sub:V,user_id:V,firebase:{sign_in_provider:"custom",identities:{}}},G);return[he(JSON.stringify({alg:"none",type:"JWT"})),he(JSON.stringify(ae)),""].join(".")}function He(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ee(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(He())}function le(){var G;const H=null===(G=ye())||void 0===G?void 0:G.forceEnvironment;if("node"===H)return!0;if("browser"===H)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function we(){return"object"==typeof self&&self.self===self}function Ye(){const G="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof G&&void 0!==G.id}function qe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function rt(){const G=He();return G.indexOf("MSIE ")>=0||G.indexOf("Trident/")>=0}function be(){return!le()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ke(){try{return"object"==typeof indexedDB}catch{return!1}}function Be(){return new Promise((G,H)=>{try{let Q=!0;const B="validate-browser-context-for-indexeddb-analytics-module",N=self.indexedDB.open(B);N.onsuccess=()=>{N.result.close(),Q||self.indexedDB.deleteDatabase(B),G(!0)},N.onupgradeneeded=()=>{Q=!1},N.onerror=()=>{var V;H((null===(V=N.error)||void 0===V?void 0:V.message)||"")}}catch(Q){H(Q)}})}function $e(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Qe extends Error{constructor(H,Q,B){super(Q),this.code=H,this.customData=B,this.name="FirebaseError",Object.setPrototypeOf(this,Qe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_n.prototype.create)}}class _n{constructor(H,Q,B){this.service=H,this.serviceName=Q,this.errors=B}create(H,...Q){const B=Q[0]||{},N=`${this.service}/${H}`,V=this.errors[H],ae=V?function Mt(G,H){return G.replace(Ct,(Q,B)=>{const N=H[B];return null!=N?String(N):`<${B}?>`})}(V,B):"Error";return new Qe(N,`${this.serviceName}: ${ae} (${N}).`,B)}}const Ct=/\{\$([^}]+)}/g;function Fi(G,H){return Object.prototype.hasOwnProperty.call(G,H)}function di(G){for(const H in G)if(Object.prototype.hasOwnProperty.call(G,H))return!1;return!0}function wn(G,H){if(G===H)return!0;const Q=Object.keys(G),B=Object.keys(H);for(const N of Q){if(!B.includes(N))return!1;const V=G[N],ae=H[N];if(pr(V)&&pr(ae)){if(!wn(V,ae))return!1}else if(V!==ae)return!1}for(const N of B)if(!Q.includes(N))return!1;return!0}function pr(G){return null!==G&&"object"==typeof G}function gr(G){const H=[];for(const[Q,B]of Object.entries(G))Array.isArray(B)?B.forEach(N=>{H.push(encodeURIComponent(Q)+"="+encodeURIComponent(N))}):H.push(encodeURIComponent(Q)+"="+encodeURIComponent(B));return H.length?"&"+H.join("&"):""}function Sr(G){const H={};return G.replace(/^\?/,"").split("&").forEach(B=>{if(B){const[N,V]=B.split("=");H[decodeURIComponent(N)]=decodeURIComponent(V)}}),H}function Yn(G){const H=G.indexOf("?");if(!H)return"";const Q=G.indexOf("#",H);return G.substring(H,Q>0?Q:void 0)}function ei(G,H){const Q=new Ut(G,H);return Q.subscribe.bind(Q)}class Ut{constructor(H,Q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Q,this.task.then(()=>{H(this)}).catch(B=>{this.error(B)})}next(H){this.forEachObserver(Q=>{Q.next(H)})}error(H){this.forEachObserver(Q=>{Q.error(H)}),this.close(H)}complete(){this.forEachObserver(H=>{H.complete()}),this.close()}subscribe(H,Q,B){let N;if(void 0===H&&void 0===Q&&void 0===B)throw new Error("Missing Observer.");N=function kt(G,H){if("object"!=typeof G||null===G)return!1;for(const Q of H)if(Q in G&&"function"==typeof G[Q])return!0;return!1}(H,["next","error","complete"])?H:{next:H,error:Q,complete:B},void 0===N.next&&(N.next=In),void 0===N.error&&(N.error=In),void 0===N.complete&&(N.complete=In);const V=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?N.error(this.finalError):N.complete()}catch{}}),this.observers.push(N),V}unsubscribeOne(H){void 0===this.observers||void 0===this.observers[H]||(delete this.observers[H],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(H){if(!this.finalized)for(let Q=0;Q<this.observers.length;Q++)this.sendOne(Q,H)}sendOne(H,Q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[H])try{Q(this.observers[H])}catch(B){typeof console<"u"&&console.error&&console.error(B)}})}close(H){this.finalized||(this.finalized=!0,void 0!==H&&(this.finalError=H),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function In(){}function st(G,H=1e3,Q=2){const B=H*Math.pow(Q,G),N=Math.round(.5*B*(Math.random()-.5)*2);return Math.min(144e5,B+N)}function nn(G){return G&&G._delegate?G._delegate:G}},491:(Et,Se,F)=>{var d=F(4650);let j=null;function P(){return j}class ue{}const se=new d.OlP("DocumentToken");let _e=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function he(){return(0,d.LFG)(K)}()},providedIn:"platform"}),n})();const me=new d.OlP("Location Initialized");let K=(()=>{class n extends _e{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){q()?this._history.pushState(t,r,i):this._location.hash=i}replaceState(t,r,i){q()?this._history.replaceState(t,r,i):this._location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(se))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function J(){return new K((0,d.LFG)(se))}()},providedIn:"platform"}),n})();function q(){return!!window.history.pushState}function ze(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Re(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ke(n){return n&&"?"!==n[0]?"?"+n:n}let ct=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(Ae)},providedIn:"root"}),n})();const ye=new d.OlP("appBaseHref");let Ae=(()=>{class n extends ct{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,d.f3M)(se).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return ze(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ke(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const l=this.prepareExternalUrl(i+Ke(a));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){const l=this.prepareExternalUrl(i+Ke(a));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(_e),d.LFG(ye,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Te=(()=>{class n extends ct{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=ze(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let l=this.prepareExternalUrl(i+Ke(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){let l=this.prepareExternalUrl(i+Ke(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(_e),d.LFG(ye,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Le=(()=>{class n{constructor(t){this._subject=new d.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function He(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(Re(Me(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ke(r))}normalize(t){return n.stripTrailingSlash(function Pe(n,e){return n&&new RegExp(`^${n}([/;?#]|$)`).test(e)?e.substring(n.length):e}(this._basePath,Me(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ke(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ke(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Ke,n.joinWithSlash=ze,n.stripTrailingSlash=Re,n.\u0275fac=function(t){return new(t||n)(d.LFG(ct))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function xe(){return new Le((0,d.LFG)(ct))}()},providedIn:"root"}),n})();function Me(n){return n.replace(/\/index.html$/,"")}function $r(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}const fi=/\s+/,lt=[];let $t=(()=>{class n{constructor(t,r,i,a){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=a,this.initialClasses=lt,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(fi):lt}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(fi):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,Boolean(t[r]));this._applyStateDiff()}_updateState(t,r){const i=this.stateMap.get(t);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(fi).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.ZZ4),d.Y36(d.aQg),d.Y36(d.SBq),d.Y36(d.Qsj))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class or{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let jr=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new or(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===a?void 0:a);else if(null!==a){const f=r.get(a);r.move(f,l),Rn(f,i)}});for(let i=0,a=r.length;i<a;i++){const f=r.get(i).context;f.index=i,f.count=a,f.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Rn(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Rn(n,e){n.context.$implicit=e.item}let Ii=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Xt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){ma("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){ma("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Xt{constructor(){this.$implicit=null,this.ngIf=null}}function ma(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,d.AaK)(e)}'.`)}let au=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const Ti="browser";function Kc(n){return"server"===n}let Oo=(()=>{class n{}return n.\u0275prov=(0,d.Yz7)({token:n,providedIn:"root",factory:()=>new cu((0,d.LFG)(se),window)}),n})();class cu{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function No(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const l=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=io(this.window.history)||io(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function io(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class hu{}class uo extends ue{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Us extends uo{static makeCurrent(){!function ie(n){j||(j=n)}(new Us)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Qh(){return Bo=Bo||document.querySelector("base"),Bo?Bo.getAttribute("href"):null}();return null==t?null:function _u(n){ys=ys||document.createElement("a"),ys.setAttribute("href",n);const e=ys.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Bo=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return $r(document.cookie,e)}}let ys,Bo=null;const zr=new d.OlP("TRANSITION_ID"),Aa=[{provide:d.ip1,useFactory:function qy(n,e,t){return()=>{t.get(d.CZH).donePromise.then(()=>{const r=P(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[zr,se,d.zs3],multi:!0}];let id=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Vs=new d.OlP("EventManagerPlugins");let Rl=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const l=i[a];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Vs),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class Vn{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=P().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let vu=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Ji=(()=>{class n extends vu{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const l=this._doc.createElement("style");l.textContent=a,i.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Eu),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Eu))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(se))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function Eu(n){P().remove(n)}const ji={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},wu=/%COMP%/g;function co(n,e){return e.flat(100).map(t=>t.replace(wu,n))}function Nl(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let _s=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new bu(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case d.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Ho(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case d.ifc.ShadowDom:return new Pl(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=co(r.id,r.styles);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Rl),d.LFG(Ji),d.LFG(d.AFp))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class bu{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(ji[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(vs(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(vs(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=ji[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=ji[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,r,i&d.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Nl(r)):this.eventManager.addEventListener(e,t,Nl(r))}}function vs(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Ho extends bu{constructor(e,t,r,i){super(e),this.component=r;const a=co(i+"-"+r.id,r.styles);t.addStyles(a),this.contentAttr=function jo(n){return"_ngcontent-%COMP%".replace(wu,n)}(i+"-"+r.id),this.hostAttr=function Bs(n){return"_nghost-%COMP%".replace(wu,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Pl extends bu{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=co(i.id,i.styles);for(let l=0;l<a.length;l++){const f=document.createElement("style");f.textContent=a[l],this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Iu=(()=>{class n extends Vn{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(se))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const kl=["alt","control","meta","shift"],Du={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},od={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Cu=(()=>{class n extends Vn{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),l=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(t,a.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let l="",f=r.indexOf("code");if(f>-1&&(r.splice(f,1),l="code."),kl.forEach(E=>{const C=r.indexOf(E);C>-1&&(r.splice(C,1),l+=E+".")}),l+=a,0!=r.length||0===a.length)return null;const y={};return y.domEventName=i,y.fullKey=l,y}static matchEventFullKeyCode(t,r){let i=Du[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),kl.forEach(l=>{l!==i&&(0,od[l])(t)&&(a+=l+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{n.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(se))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const gg=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:Ti},{provide:d.g9A,useValue:function ad(){Us.makeCurrent()},multi:!0},{provide:se,useFactory:function yi(){return(0,d.RDi)(document),document},deps:[]}]),Ll=new d.OlP(""),zo=[{provide:d.rWj,useClass:class pg{addToWindow(e){d.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(r=>{const i=d.dqk.getAllAngularTestabilities();let a=i.length,l=!1;const f=function(y){l=l||y,a--,0==a&&r(l)};i.forEach(function(y){y.whenStable(f)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?P().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:d.lri,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]}],Jh=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function Fl(){return new d.qLn},deps:[]},{provide:Vs,useClass:Iu,multi:!0,deps:[se,d.R0b,d.Lbi]},{provide:Vs,useClass:Cu,multi:!0,deps:[se]},{provide:_s,useClass:_s,deps:[Rl,Ji,d.AFp]},{provide:d.FYo,useExisting:_s},{provide:vu,useExisting:Ji},{provide:Ji,useClass:Ji,deps:[se]},{provide:Rl,useClass:Rl,deps:[Vs,d.R0b]},{provide:hu,useClass:id,deps:[]},[]];let Ul=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId},{provide:zr,useExisting:d.AFp},Aa]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ll,12))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[...Jh,...zo],imports:[au,d.hGG]}),n})(),ld=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(se))},n.\u0275prov=d.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Go(){return new ld((0,d.LFG)(se))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;let fd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(t){let r=null;return r=t?new(t||n):d.LFG(Gr),r},providedIn:"root"}),n})(),Gr=(()=>{class n extends fd{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case d.q3G.NONE:return r;case d.q3G.HTML:return(0,d.qzn)(r,"HTML")?(0,d.z3N)(r):(0,d.EiD)(this._doc,String(r)).toString();case d.q3G.STYLE:return(0,d.qzn)(r,"Style")?(0,d.z3N)(r):r;case d.q3G.SCRIPT:if((0,d.qzn)(r,"Script"))return(0,d.z3N)(r);throw new Error("unsafe value used in a script context");case d.q3G.URL:return(0,d.qzn)(r,"URL")?(0,d.z3N)(r):(0,d.mCW)(String(r));case d.q3G.RESOURCE_URL:if((0,d.qzn)(r,"ResourceURL"))return(0,d.z3N)(r);throw new Error(`unsafe value used in a resource URL context (see ${d.JZr})`);default:throw new Error(`Unexpected SecurityContext ${t} (see ${d.JZr})`)}}bypassSecurityTrustHtml(t){return(0,d.JVY)(t)}bypassSecurityTrustStyle(t){return(0,d.L6k)(t)}bypassSecurityTrustScript(t){return(0,d.eBb)(t)}bypassSecurityTrustUrl(t){return(0,d.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,d.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(se))},n.\u0275prov=d.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function nf(n){return new Gr(n.get(se))}(d.LFG(d.zs3)),r},providedIn:"root"}),n})();var on=F(8996),ts=F(7669);function ft(...n){const e=(0,ts.yG)(n);return(0,on.D)(n,e)}var zi=F(7579);class _i extends zi.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Ru=(0,F(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var lr=F(9751);const{isArray:rf}=Array,{getPrototypeOf:jl,prototype:Na,keys:Hl}=Object;function zs(n){if(1===n.length){const e=n[0];if(rf(e))return{args:e,keys:null};if(function gd(n){return n&&"object"==typeof n&&jl(n)===Na}(e)){const t=Hl(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var D=F(4671),T=F(4004);const{isArray:x}=Array;function X(n){return(0,T.U)(e=>function $(n,e){return x(e)?n(...e):n(e)}(n,e))}function oe(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var Ie=F(5403),ht=F(9672);function pt(...n){const e=(0,ts.yG)(n),t=(0,ts.jO)(n),{args:r,keys:i}=zs(n);if(0===r.length)return(0,on.D)([],e);const a=new lr.y(function bt(n,e,t=D.y){return r=>{Jt(e,()=>{const{length:i}=n,a=new Array(i);let l=i,f=i;for(let y=0;y<i;y++)Jt(e,()=>{const E=(0,on.D)(n[y],e);let C=!1;E.subscribe((0,Ie.x)(r,M=>{a[y]=M,C||(C=!0,f--),f||r.next(t(a.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>oe(i,l):D.y));return t?a.pipe(X(t)):a}function Jt(n,e,t){n?(0,ht.f)(t,n,e):e()}var Ft=F(8189);function Bn(...n){return function ii(){return(0,Ft.J)(1)}()((0,on.D)(n,(0,ts.yG)(n)))}var Gs=F(8421);function xu(n){return new lr.y(e=>{(0,Gs.Xf)(n()).subscribe(e)})}var qo=F(9635),Wr=F(576);function Nr(n,e){const t=(0,Wr.m)(n)?n:()=>n,r=i=>i.error(t());return new lr.y(e?i=>e.schedule(r,0,i):r)}var ns=F(515),sf=F(727),cr=F(4482);function vg(){return(0,cr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Ie.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class af extends lr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,cr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new sf.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Ie.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=sf.w0.EMPTY)}return e}refCount(){return vg()(this)}}function Pr(n,e){return(0,cr.e)((t,r)=>{let i=null,a=0,l=!1;const f=()=>l&&!i&&r.complete();t.subscribe((0,Ie.x)(r,y=>{i?.unsubscribe();let E=0;const C=a++;(0,Gs.Xf)(n(y,C)).subscribe(i=(0,Ie.x)(r,M=>r.next(e?e(y,M,C,E++):M),()=>{i=null,f()}))},()=>{l=!0,f()}))})}function Pa(n){return n<=0?()=>ns.E:(0,cr.e)((e,t)=>{let r=0;e.subscribe((0,Ie.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Ko(...n){const e=(0,ts.yG)(n);return(0,cr.e)((t,r)=>{(e?Bn(n,t,e):Bn(n,t)).subscribe(r)})}function vi(n,e){return(0,cr.e)((t,r)=>{let i=0;t.subscribe((0,Ie.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var Si=F(5577);function uf(n){return(0,cr.e)((e,t)=>{let r=!1;e.subscribe((0,Ie.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function md(n=Tw){return(0,cr.e)((e,t)=>{let r=!1;e.subscribe((0,Ie.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Tw(){return new Ru}function Zo(n,e){const t=arguments.length>=2;return r=>r.pipe(n?vi((i,a)=>n(i,a,r)):D.y,Pa(1),t?uf(e):md(()=>new Ru))}function ka(n,e){return(0,Wr.m)(e)?(0,Si.z)(n,e,1):(0,Si.z)(n,1)}var kr=F(8505);function Ws(n){return(0,cr.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,Ie.x)(t,void 0,void 0,l=>{a=(0,Gs.Xf)(n(l,Ws(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function Yy(n,e,t,r,i){return(a,l)=>{let f=t,y=e,E=0;a.subscribe((0,Ie.x)(l,C=>{const M=E++;y=f?n(y,C,M):(f=!0,C),r&&l.next(y)},i&&(()=>{f&&l.next(y),l.complete()})))}}function Ou(n,e){return(0,cr.e)(Yy(n,e,arguments.length>=2,!0))}function zl(n){return n<=0?()=>ns.E:(0,cr.e)((e,t)=>{let r=[];e.subscribe((0,Ie.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function lf(n,e){const t=arguments.length>=2;return r=>r.pipe(n?vi((i,a)=>n(i,a,r)):D.y,zl(1),t?uf(e):md(()=>new Ru))}function Gi(n){return(0,cr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const qt="primary",Gl=Symbol("RouteTitle");class Qy{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function fo(n){return new Qy(n)}function df(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const l=r[a],f=n[a];if(l.startsWith(":"))i[l.substring(1)]=f;else if(l!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function qs(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!ff(n[i],e[i]))return!1;return!0}function ff(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function pf(n){return Array.prototype.concat.apply([],n)}function yd(n){return n.length>0?n[n.length-1]:null}function vn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Is(n){return(0,d.CqO)(n)?n:(0,d.QGY)(n)?(0,on.D)(Promise.resolve(n)):ft(n)}const Wl=!1,gf={exact:function _d(n,e,t){if(!te(n.segments,e.segments)||!g(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!_d(n.children[r],e.children[r],t))return!1;return!0},subset:mf},qr={exact:function wg(n,e){return qs(n,e)},subset:function Xy(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>ff(n[t],e[t]))},ignored:()=>!0};function Nu(n,e,t){return gf[t.paths](n.root,e.root,t.matrixParams)&&qr[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function mf(n,e,t){return v(n,e,e.segments,t)}function v(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!te(i,t)||e.hasChildren()||!g(i,t,r))}if(n.segments.length===t.length){if(!te(n.segments,t)||!g(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!mf(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(te(n.segments,i)&&g(n.segments,i,r)&&n.children[qt])&&v(n.children[qt],e,a,r)}}function g(n,e,t){return e.every((r,i)=>qr[t](n[i].parameters,r.parameters))}class m{constructor(e=new w([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=fo(this.queryParams)),this._queryParamMap}toString(){return en.serialize(this)}}class w{constructor(e,t){this.segments=e,this.children=t,this.parent=null,vn(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Tn(this)}}class R{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=fo(this.parameters)),this._parameterMap}toString(){return ku(this)}}function te(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let ot=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return new _t},providedIn:"root"}),n})();class _t{parse(e){const t=new Aw(e);return new m(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${si(e.root,!0)}`,r=function Ig(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Yo(t)}=${Yo(i)}`).join("&"):`${Yo(t)}=${Yo(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Fa(n){return encodeURI(n)}(e.fragment)}`:""}`}}const en=new _t;function Tn(n){return n.segments.map(e=>ku(e)).join("/")}function si(n,e){if(!n.hasChildren())return Tn(n);if(e){const t=n.children[qt]?si(n.children[qt],!1):"",r=[];return vn(n.children,(i,a)=>{a!==qt&&r.push(`${a}:${si(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Ne(n,e){let t=[];return vn(n.children,(r,i)=>{i===qt&&(t=t.concat(e(r,i)))}),vn(n.children,(r,i)=>{i!==qt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===qt?[si(n.children[qt],!1)]:[`${i}:${si(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[qt]?`${Tn(n)}/${t[0]}`:`${Tn(n)}/(${t.join("//")})`}}function Ds(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Yo(n){return Ds(n).replace(/%3B/gi,";")}function La(n){return Ds(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Pu(n){return decodeURIComponent(n)}function yf(n){return Pu(n.replace(/\+/g,"%20"))}function ku(n){return`${La(n.path)}${function bg(n){return Object.keys(n).map(e=>`;${La(e)}=${La(n[e])}`).join("")}(n.parameters)}`}const _f=/^[^\/()?;=#]+/;function ql(n){const e=n.match(_f);return e?e[0]:""}const Jy=/^[^=?&#]+/,Dg=/^[^&#]+/;class Aw{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new w([],{}):new w([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[qt]=new w(e,t)),r}parseSegment(){const e=ql(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new d.vHH(4009,Wl);return this.capture(e),new R(Pu(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=ql(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=ql(this.remaining);i&&(r=i,this.capture(r))}e[Pu(t)]=Pu(r)}parseQueryParam(e){const t=function vf(n){const e=n.match(Jy);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function e_(n){const e=n.match(Dg);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=yf(t),a=yf(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=ql(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new d.vHH(4010,Wl);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=qt);const l=this.parseChildren();t[a]=1===Object.keys(l).length?l[qt]:new w([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new d.vHH(4011,Wl)}}function Ef(n){return n.segments.length>0?new w([],{[qt]:n}):n}function Cg(n){const e={};for(const r of Object.keys(n.children)){const a=Cg(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function dC(n){if(1===n.numberOfChildren&&n.children[qt]){const e=n.children[qt];return new w(n.segments.concat(e.segments),e.children)}return n}(new w(n.segments,e))}function Fu(n){return n instanceof m}function hC(n,e,t,r,i){if(0===t.length)return Ed(e.root,e.root,e.root,r,i);const a=function r_(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new n_(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,l)=>{if("object"==typeof a&&null!=a){if(a.outlets){const f={};return vn(a.outlets,(y,E)=>{f[E]="string"==typeof y?y.split("/"):y}),[...i,{outlets:f}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===l?(a.split("/").forEach((f,y)=>{0==y&&"."===f||(0==y&&""===f?t=!0:".."===f?e++:""!=f&&i.push(f))}),i):[...i,a]},[]);return new n_(t,e,r)}(t);return a.toRoot()?Ed(e.root,e.root,new w([],{}),r,i):function l(y){const E=function Ag(n,e,t,r){if(n.isAbsolute)return new Uu(e.root,!0,0);if(-1===r)return new Uu(t,t===e.root,0);return function wf(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new d.vHH(4005,!1);i=r.segments.length}return new Uu(r,!1,i-a)}(t,r+(Sg(n.commands[0])?0:1),n.numberOfDoubleDots)}(a,e,n.snapshot?._urlSegment,y),C=E.processChildren?Vu(E.segmentGroup,E.index,a.commands):bf(E.segmentGroup,E.index,a.commands);return Ed(e.root,E.segmentGroup,C,r,i)}(n.snapshot?._lastPathIndex)}function Sg(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Lu(n){return"object"==typeof n&&null!=n&&n.outlets}function Ed(n,e,t,r,i){let l,a={};r&&vn(r,(y,E)=>{a[E]=Array.isArray(y)?y.map(C=>`${C}`):`${y}`}),l=n===e?t:t_(n,e,t);const f=Ef(Cg(l));return new m(f,a,i)}function t_(n,e,t){const r={};return vn(n.children,(i,a)=>{r[a]=i===e?t:t_(i,e,t)}),new w(n.segments,r)}class n_{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Sg(r[0]))throw new d.vHH(4003,!1);const i=r.find(Lu);if(i&&i!==yd(r))throw new d.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Uu{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function bf(n,e,t){if(n||(n=new w([],{})),0===n.segments.length&&n.hasChildren())return Vu(n,e,t);const r=function i_(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const l=n.segments[i],f=t[r];if(Lu(f))break;const y=`${f}`,E=r<t.length-1?t[r+1]:null;if(i>0&&void 0===y)break;if(y&&E&&"object"==typeof E&&void 0===E.outlets){if(!Nw(y,E,l))return a;r+=2}else{if(!Nw(y,{},l))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new w(n.segments.slice(0,r.pathIndex),{});return a.children[qt]=new w(n.segments.slice(r.pathIndex),n.children),Vu(a,0,i)}return r.match&&0===i.length?new w(n.segments,{}):r.match&&!n.hasChildren()?Kl(n,e,t):r.match?Vu(n,0,i):Kl(n,e,t)}function Vu(n,e,t){if(0===t.length)return new w(n.segments,{});{const r=function Ow(n){return Lu(n[0])?n[0].outlets:{[qt]:n}}(t),i={};return!r[qt]&&n.children[qt]&&1===n.numberOfChildren&&0===n.children[qt].segments.length?Vu(n.children[qt],e,t):(vn(r,(a,l)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[l]=bf(n.children[l],e,a))}),vn(n.children,(a,l)=>{void 0===r[l]&&(i[l]=a)}),new w(n.segments,i))}}function Kl(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(Lu(a)){const y=fC(a.outlets);return new w(r,y)}if(0===i&&Sg(t[0])){r.push(new R(n.segments[e].path,s_(t[0]))),i++;continue}const l=Lu(a)?a.outlets[qt]:`${a}`,f=i<t.length-1?t[i+1]:null;l&&f&&Sg(f)?(r.push(new R(l,s_(f))),i+=2):(r.push(new R(l,{})),i++)}return new w(r,{})}function fC(n){const e={};return vn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Kl(new w([],{}),0,t))}),e}function s_(n){const e={};return vn(n,(t,r)=>e[r]=`${t}`),e}function Nw(n,e,t){return n==t.path&&qs(e,t.parameters)}const If="imperative";class Qo{constructor(e,t){this.id=e,this.url=t}}class Mg extends Qo{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Bu extends Qo{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Zl extends Qo{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Rg extends Qo{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class $u extends Qo{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class pC extends Qo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gC extends Qo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class nx extends Qo{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class mC extends Qo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class o_ extends Qo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yC{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Pw{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class xg{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class a_{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class kw{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Fw{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class u_{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let _C=(()=>{class n{createUrlTree(t,r,i,a,l,f){return hC(t||r.root,i,a,l,f)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),vC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(e){return _C.\u0275fac(e)},providedIn:"root"}),n})();class Lw{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=po(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=po(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=ju(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return ju(e,this._root).map(t=>t.value)}}function po(n,e){if(n===e.value)return e;for(const t of e.children){const r=po(n,t);if(r)return r}return null}function ju(n,e){if(n===e.value)return[e];for(const t of e.children){const r=ju(n,t);if(r.length)return r.unshift(e),r}return[]}class Ua{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function wd(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Uw extends Lw{constructor(e,t){super(e),this.snapshot=t,c_(this,e)}toString(){return this.snapshot.toString()}}function Vw(n,e){const t=function EC(n,e){const l=new Og([],{},{},"",{},qt,e,null,n.root,-1,{});return new Bw("",new Ua(l,[]))}(n,e),r=new _i([new R("",{})]),i=new _i({}),a=new _i({}),l=new _i({}),f=new _i(""),y=new bd(r,i,l,f,a,qt,e,t.root);return y.snapshot=t.root,new Uw(new Ua(y,[]),t)}class bd{constructor(e,t,r,i,a,l,f,y){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=f,this.title=this.data?.pipe((0,T.U)(E=>E[Gl]))??ft(void 0),this._futureSnapshot=y}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,T.U)(e=>fo(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,T.U)(e=>fo(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function l_(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function wC(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Og{get title(){return this.data?.[Gl]}constructor(e,t,r,i,a,l,f,y,E,C,M){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=f,this.routeConfig=y,this._urlSegment=E,this._lastPathIndex=C,this._resolve=M}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=fo(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=fo(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Bw extends Lw{constructor(e,t){super(t),this.url=e,c_(this,t)}toString(){return Df(this._root)}}function c_(n,e){e.value._routerState=n,e.children.forEach(t=>c_(n,t))}function Df(n){const e=n.children.length>0?` { ${n.children.map(Df).join(", ")} } `:"";return`${n.value}${e}`}function go(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,qs(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),qs(e.params,t.params)||n.params.next(t.params),function hf(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!qs(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),qs(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Ql(n,e){const t=qs(n.params,e.params)&&function k(n,e){return te(n,e)&&n.every((t,r)=>qs(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Ql(n.parent,e.parent))}function Id(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function jw(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Id(n,r,i);return Id(n,r)})}(n,e,t);return new Ua(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const l=a.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(f=>Id(n,f)),l}}const r=function sx(n){return new bd(new _i(n.url),new _i(n.params),new _i(n.queryParams),new _i(n.fragment),new _i(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>Id(n,a));return new Ua(r,i)}}const Hw="ngNavigationCancelingError";function bC(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Fu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Ng(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function Ng(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Hw]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Pg(n){return IC(n)&&Fu(n.url)}function IC(n){return n&&n[Hw]}class ox{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Dd,this.attachRef=null}}let Dd=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new ox,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const kg=!1;let d_=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=qt,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.parentContexts=(0,d.f3M)(Dd),this.location=(0,d.f3M)(d.s_b),this.changeDetector=(0,d.f3M)(d.sBO),this.environmentInjector=(0,d.f3M)(d.lqb)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new d.vHH(4012,kg);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new d.vHH(4012,kg);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new d.vHH(4012,kg);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new d.vHH(4013,kg);this._activatedRoute=t;const i=this.location,l=t.snapshot.component,f=this.parentContexts.getOrCreateContext(this.name).children,y=new DC(t,f,i.injector);if(r&&function CC(n){return!!n.resolveComponentFactory}(r)){const E=r.resolveComponentFactory(l);this.activated=i.createComponent(E,i.length,y)}else this.activated=i.createComponent(l,{index:i.length,injector:y,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[d.TTD]}),n})();class DC{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===bd?this.route:e===Dd?this.childContexts:this.parent.get(e,t)}}let Fg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[d.jDz],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},dependencies:[d_],encapsulation:2}),n})();function Cf(n,e){return n.providers&&!n._injector&&(n._injector=(0,d.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function p_(n){const e=n.children&&n.children.map(p_),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==qt&&(t.component=Fg),t}function Ks(n){return n.outlet||qt}function Ww(n,e){const t=n.filter(r=>Ks(r)===e);return t.push(...n.filter(r=>Ks(r)!==e)),t}function Tf(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class ux{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),go(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=wd(t);e.children.forEach(a=>{const l=a.value.outlet;this.deactivateRoutes(a,i[l],r),delete i[l]}),vn(i,(a,l)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=wd(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);if(r&&r.outlet){const l=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:f})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=wd(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=wd(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new Fw(a.value.snapshot))}),e.children.length&&this.forwardEvent(new a_(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(go(i),i===a)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(f.contexts),l.attachRef=f.componentRef,l.route=f.route.value,l.outlet&&l.outlet.attach(f.componentRef,f.route.value),go(f.route.value),this.activateChildRoutes(e,null,l.children)}else{const f=Tf(i.snapshot),y=f?.get(d._Vd)??null;l.attachRef=null,l.route=i,l.resolver=y,l.injector=f,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class AC{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Hu{constructor(e,t){this.component=e,this.route=t}}function g_(n,e,t){const r=n._root;return Cd(r,e?e._root:null,t,[r.value])}function Xl(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,d.Z0I)(n)?e.get(n):n:r}function Cd(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=wd(e);return n.children.forEach(l=>{(function MC(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,l=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(l&&a.routeConfig===l.routeConfig){const y=function RC(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!te(n.url,e.url);case"pathParamsOrQueryParamsChange":return!te(n.url,e.url)||!qs(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ql(n,e)||!qs(n.queryParams,e.queryParams);default:return!Ql(n,e)}}(l,a,a.routeConfig.runGuardsAndResolvers);y?i.canActivateChecks.push(new AC(r)):(a.data=l.data,a._resolvedData=l._resolvedData),Cd(n,e,a.component?f?f.children:null:t,r,i),y&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new Hu(f.outlet.component,l))}else l&&Td(e,f,i),i.canActivateChecks.push(new AC(r)),Cd(n,null,a.component?f?f.children:null:t,r,i)})(l,a[l.value.outlet],t,r.concat([l.value]),i),delete a[l.value.outlet]}),vn(a,(l,f)=>Td(l,t.getContext(f),i)),i}function Td(n,e,t){const r=wd(n),i=n.value;vn(r,(a,l)=>{Td(a,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new Hu(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Sd(n){return"function"==typeof n}function v_(n){return n instanceof Ru||"EmptyError"===n?.name}const Ad=Symbol("INITIAL_VALUE");function Va(){return Pr(n=>pt(n.map(e=>e.pipe(Pa(1),Ko(Ad)))).pipe((0,T.U)(e=>{for(const t of e)if(!0!==t){if(t===Ad)return Ad;if(!1===t||t instanceof m)return t}return!0}),vi(e=>e!==Ad),Pa(1)))}function tc(n){return(0,qo.z)((0,kr.b)(e=>{if(Fu(e))throw bC(0,e)}),(0,T.U)(e=>!0===e))}const b_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Xw(n,e,t,r,i){const a=Sf(n,e,t);return a.matched?function FC(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?ft(i.map(l=>{const f=Xl(l,n);return Is(function Zw(n){return n&&Sd(n.canMatch)}(f)?f.canMatch(e,t):n.runInContext(()=>f(e,t)))})).pipe(Va(),tc()):ft(!0)}(r=Cf(e,r),e,t).pipe((0,T.U)(l=>!0===l?a:{...b_})):ft(a)}function Sf(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...b_}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||df)(t,n,e);if(!i)return{...b_};const a={};vn(i.posParams,(f,y)=>{a[y]=f.path});const l=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function Ug(n,e,t,r){if(t.length>0&&function e0(n,e,t){return t.some(r=>Vg(n,e,r)&&Ks(r)!==qt)}(n,t,r)){const a=new w(e,function LC(n,e,t,r){const i={};i[qt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&Ks(a)!==qt){const l=new w([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[Ks(a)]=l}return i}(n,e,r,new w(t,n.children)));return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:[]}}if(0===t.length&&function cx(n,e,t){return t.some(r=>Vg(n,e,r))}(n,t,r)){const a=new w(n.segments,function Jw(n,e,t,r,i){const a={};for(const l of r)if(Vg(n,t,l)&&!i[Ks(l)]){const f=new w([],{});f._sourceSegment=n,f._segmentIndexShift=e.length,a[Ks(l)]=f}return{...i,...a}}(n,e,t,r,n.children));return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}const i=new w(n.segments,n.children);return i._sourceSegment=n,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:t}}function Vg(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Md(n,e,t,r){return!!(Ks(n)===r||r!==qt&&Vg(e,t,n))&&("**"===n.path||Sf(e,n,t).matched)}function t0(n,e,t){return 0===e.length&&!n.children[t]}const Ba=!1;class zu{constructor(e){this.segmentGroup=e||null}}class n0{constructor(e){this.urlTree=e}}function Rd(n){return Nr(new zu(n))}function r0(n){return Nr(new n0(n))}class o0{constructor(e,t,r,i,a){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0}apply(){const e=Ug(this.urlTree.root,[],[],this.config).segmentGroup,t=new w(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,qt).pipe((0,T.U)(a=>this.createUrlTree(Cg(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ws(a=>{if(a instanceof n0)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof zu?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,qt).pipe((0,T.U)(i=>this.createUrlTree(Cg(i),e.queryParams,e.fragment))).pipe(Ws(i=>{throw i instanceof zu?this.noMatchError(i):i}))}noMatchError(e){return new d.vHH(4002,Ba)}createUrlTree(e,t,r){const i=Ef(e);return new m(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,T.U)(a=>new w([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,on.D)(i).pipe(ka(a=>{const l=r.children[a],f=Ww(t,a);return this.expandSegmentGroup(e,f,l,a).pipe((0,T.U)(y=>({segment:y,outlet:a})))}),Ou((a,l)=>(a[l.outlet]=l.segment,a),{}),lf())}expandSegment(e,t,r,i,a,l){return(0,on.D)(r).pipe(ka(f=>this.expandSegmentAgainstRoute(e,t,r,f,i,a,l).pipe(Ws(E=>{if(E instanceof zu)return ft(null);throw E}))),Zo(f=>!!f),Ws((f,y)=>{if(v_(f))return t0(t,i,a)?ft(new w([],{})):Rd(t);throw f}))}expandSegmentAgainstRoute(e,t,r,i,a,l,f){return Md(i,t,a,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,l):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l):Rd(t):Rd(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?r0(a):this.lineralizeSegments(r,a).pipe((0,Si.z)(l=>{const f=new w(l,{});return this.expandSegment(e,f,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){const{matched:f,consumedSegments:y,remainingSegments:E,positionalParamSegments:C}=Sf(t,i,a);if(!f)return Rd(t);const M=this.applyRedirectCommands(y,i.redirectTo,C);return i.redirectTo.startsWith("/")?r0(M):this.lineralizeSegments(i,M).pipe((0,Si.z)(L=>this.expandSegment(e,t,r,L.concat(E),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){return"**"===r.path?(e=Cf(r,e),r.loadChildren?(r._loadedRoutes?ft({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,T.U)(f=>(r._loadedRoutes=f.routes,r._loadedInjector=f.injector,new w(i,{})))):ft(new w(i,{}))):Xw(t,r,i,e).pipe(Pr(({matched:l,consumedSegments:f,remainingSegments:y})=>l?this.getChildConfig(e=r._injector??e,r,i).pipe((0,Si.z)(C=>{const M=C.injector??e,L=C.routes,{segmentGroup:z,slicedSegments:W}=Ug(t,f,y,L),ne=new w(z.segments,z.children);if(0===W.length&&ne.hasChildren())return this.expandChildren(M,L,ne).pipe((0,T.U)(tt=>new w(f,tt)));if(0===L.length&&0===W.length)return ft(new w(f,{}));const fe=Ks(r)===a;return this.expandSegment(M,ne,L,W,fe?qt:a,!0).pipe((0,T.U)(at=>new w(f.concat(at.segments),at.children)))})):Rd(t)))}getChildConfig(e,t,r){return t.children?ft({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?ft({routes:t._loadedRoutes,injector:t._loadedInjector}):function Qw(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?ft(!0):ft(i.map(l=>{const f=Xl(l,n);return Is(function lx(n){return n&&Sd(n.canLoad)}(f)?f.canLoad(e,t):n.runInContext(()=>f(e,t)))})).pipe(Va(),tc())}(e,t,r).pipe((0,Si.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,kr.b)(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function VC(n){return Nr(Ng(Ba,3))}())):ft({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return ft(r);if(i.numberOfChildren>1||!i.children[qt])return Nr(new d.vHH(4e3,Ba));i=i.children[qt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new m(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return vn(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const f=i.substring(1);r[a]=t[f]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let l={};return vn(t.children,(f,y)=>{l[y]=this.createSegmentGroup(e,f,r,i)}),new w(a,l)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new d.vHH(4001,Ba);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class BC{}class $C{constructor(e,t,r,i,a,l,f){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=a,this.paramsInheritanceStrategy=l,this.urlSerializer=f}recognize(){const e=Ug(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,qt).pipe((0,T.U)(t=>{if(null===t)return null;const r=new Og([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},qt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Ua(r,t),a=new Bw(this.url,i);return this.inheritParamsAndData(a._root),a}))}inheritParamsAndData(e){const t=e.value,r=l_(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,on.D)(Object.keys(r.children)).pipe(ka(i=>{const a=r.children[i],l=Ww(t,i);return this.processSegmentGroup(e,l,a,i)}),Ou((i,a)=>i&&a?(i.push(...a),i):null),function Eg(n,e=!1){return(0,cr.e)((t,r)=>{let i=0;t.subscribe((0,Ie.x)(r,a=>{const l=n(a,i++);(l||e)&&r.next(a),!l&&r.complete()}))})}(i=>null!==i),uf(null),lf(),(0,T.U)(i=>{if(null===i)return null;const a=a0(i);return function jC(n){n.sort((e,t)=>e.value.outlet===qt?-1:t.value.outlet===qt?1:e.value.outlet.localeCompare(t.value.outlet))}(a),a}))}processSegment(e,t,r,i,a){return(0,on.D)(t).pipe(ka(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,i,a)),Zo(l=>!!l),Ws(l=>{if(v_(l))return t0(r,i,a)?ft([]):ft(null);throw l}))}processSegmentAgainstRoute(e,t,r,i,a){if(t.redirectTo||!Md(t,r,i,a))return ft(null);let l;if("**"===t.path){const f=i.length>0?yd(i).parameters:{},y=nc(r)+i.length;l=ft({snapshot:new Og(i,f,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,l0(t),Ks(t),t.component??t._loadedComponent??null,t,u0(r),y,c0(t)),consumedSegments:[],remainingSegments:[]})}else l=Xw(r,t,i,e).pipe((0,T.U)(({matched:f,consumedSegments:y,remainingSegments:E,parameters:C})=>{if(!f)return null;const M=nc(r)+y.length;return{snapshot:new Og(y,C,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,l0(t),Ks(t),t.component??t._loadedComponent??null,t,u0(r),M,c0(t)),consumedSegments:y,remainingSegments:E}}));return l.pipe(Pr(f=>{if(null===f)return ft(null);const{snapshot:y,consumedSegments:E,remainingSegments:C}=f;e=t._injector??e;const M=t._loadedInjector??e,L=function HC(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:z,slicedSegments:W}=Ug(r,E,C,L.filter(fe=>void 0===fe.redirectTo));if(0===W.length&&z.hasChildren())return this.processChildren(M,L,z).pipe((0,T.U)(fe=>null===fe?null:[new Ua(y,fe)]));if(0===L.length&&0===W.length)return ft([new Ua(y,[])]);const ne=Ks(t)===a;return this.processSegment(M,L,z,W,ne?qt:a).pipe((0,T.U)(fe=>null===fe?null:[new Ua(y,fe)]))}))}}function zC(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function a0(n){const e=[],t=new Set;for(const r of n){if(!zC(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=a0(r.children);e.push(new Ua(r.value,i))}return e.filter(r=>!t.has(r))}function u0(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function nc(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function l0(n){return n.data||{}}function c0(n){return n.resolve||{}}function p0(n){return"string"==typeof n.title||null===n.title}function $g(n){return Pr(e=>{const t=n(e);return t?(0,on.D)(t).pipe((0,T.U)(()=>e)):ft(e)})}const Ai=new d.OlP("ROUTES");let C_=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ft(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Is(t.loadComponent()).pipe((0,T.U)(y0),(0,kr.b)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),Gi(()=>{this.componentLoaders.delete(t)})),i=new af(r,()=>new zi.x).pipe(vg());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ft({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,T.U)(f=>{this.onLoadEndListener&&this.onLoadEndListener(r);let y,E,C=!1;Array.isArray(f)?E=f:(y=f.create(t).injector,E=pf(y.get(Ai,[],d.XFs.Self|d.XFs.Optional)));return{routes:E.map(p_),injector:y}}),Gi(()=>{this.childrenLoaders.delete(r)})),l=new af(a,()=>new zi.x).pipe(vg());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return Is(t()).pipe((0,T.U)(y0),(0,Si.z)(i=>i instanceof d.YKP||Array.isArray(i)?ft(i):(0,on.D)(this.compiler.compileModuleAsync(i))))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.zs3),d.LFG(d.Sil))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function y0(n){return function m0(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Hg=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new zi.x,this.configLoader=(0,d.f3M)(C_),this.environmentInjector=(0,d.f3M)(d.lqb),this.urlSerializer=(0,d.f3M)(ot),this.rootContexts=(0,d.f3M)(Dd),this.navigationId=0,this.afterPreactivation=()=>ft(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new Pw(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new yC(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new _i({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:If,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(vi(r=>0!==r.id),(0,T.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),Pr(r=>{let i=!1,a=!1;return ft(r).pipe((0,kr.b)(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Pr(l=>{const f=t.browserUrlTree.toString(),y=!t.navigated||l.extractedUrl.toString()!==f||f!==t.currentUrlTree.toString();if(!y&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const C="";return this.events.next(new Rg(l.id,t.serializeUrl(r.rawUrl),C,0)),t.rawUrlTree=l.rawUrl,l.resolve(null),ns.E}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return _0(l.source)&&(t.browserUrlTree=l.extractedUrl),ft(l).pipe(Pr(C=>{const M=this.transitions?.getValue();return this.events.next(new Mg(C.id,this.urlSerializer.serialize(C.extractedUrl),C.source,C.restoredState)),M!==this.transitions?.getValue()?ns.E:Promise.resolve(C)}),function I_(n,e,t,r){return Pr(i=>function s0(n,e,t,r,i){return new o0(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,T.U)(a=>({...i,urlAfterRedirects:a}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),(0,kr.b)(C=>{this.currentNavigation={...this.currentNavigation,finalUrl:C.urlAfterRedirects},r.urlAfterRedirects=C.urlAfterRedirects}),function dx(n,e,t,r,i){return(0,Si.z)(a=>function Af(n,e,t,r,i,a,l="emptyOnly"){return new $C(n,e,t,r,i,l,a).recognize().pipe(Pr(f=>null===f?function D_(n){return new lr.y(e=>e.error(n))}(new BC):ft(f)))}(n,e,t,a.urlAfterRedirects,r.serialize(a.urlAfterRedirects),r,i).pipe((0,T.U)(l=>({...a,targetSnapshot:l}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,kr.b)(C=>{if(r.targetSnapshot=C.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!C.extras.skipLocationChange){const L=t.urlHandlingStrategy.merge(C.urlAfterRedirects,C.rawUrl);t.setBrowserUrl(L,C)}t.browserUrlTree=C.urlAfterRedirects}const M=new pC(C.id,this.urlSerializer.serialize(C.extractedUrl),this.urlSerializer.serialize(C.urlAfterRedirects),C.targetSnapshot);this.events.next(M)}));if(y&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:C,extractedUrl:M,source:L,restoredState:z,extras:W}=l,ne=new Mg(C,this.urlSerializer.serialize(M),L,z);this.events.next(ne);const fe=Vw(M,this.rootComponentType).snapshot;return ft(r={...l,targetSnapshot:fe,urlAfterRedirects:M,extras:{...W,skipLocationChange:!1,replaceUrl:!1}})}{const C="";return this.events.next(new Rg(l.id,t.serializeUrl(r.extractedUrl),C,1)),t.rawUrlTree=l.rawUrl,l.resolve(null),ns.E}}),(0,kr.b)(l=>{const f=new gC(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(f)}),(0,T.U)(l=>r={...l,guards:g_(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function NC(n,e){return(0,Si.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:l}}=t;return 0===l.length&&0===a.length?ft({...t,guardsResult:!0}):function E_(n,e,t,r){return(0,on.D)(n).pipe((0,Si.z)(i=>function kC(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?ft(a.map(f=>{const y=Tf(e)??i,E=Xl(f,y);return Is(function __(n){return n&&Sd(n.canDeactivate)}(E)?E.canDeactivate(n,e,t,r):y.runInContext(()=>E(n,e,t,r))).pipe(Zo())})).pipe(Va()):ft(!0)}(i.component,i.route,t,e,r)),Zo(i=>!0!==i,!0))}(l,r,i,n).pipe((0,Si.z)(f=>f&&function m_(n){return"boolean"==typeof n}(f)?function Lg(n,e,t,r){return(0,on.D)(e).pipe(ka(i=>Bn(function Yw(n,e){return null!==n&&e&&e(new xg(n)),ft(!0)}(i.route.parent,r),function ec(n,e){return null!==n&&e&&e(new kw(n)),ft(!0)}(i.route,r),function PC(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(l=>function Kw(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>xu(()=>ft(l.guards.map(y=>{const E=Tf(l.node)??t,C=Xl(y,E);return Is(function xC(n){return n&&Sd(n.canActivateChild)}(C)?C.canActivateChild(r,n):E.runInContext(()=>C(r,n))).pipe(Zo())})).pipe(Va())));return ft(a).pipe(Va())}(n,i.path,t),function w_(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ft(!0);const i=r.map(a=>xu(()=>{const l=Tf(e)??t,f=Xl(a,l);return Is(function y_(n){return n&&Sd(n.canActivate)}(f)?f.canActivate(e,n):l.runInContext(()=>f(e,n))).pipe(Zo())}));return ft(i).pipe(Va())}(n,i.route,t))),Zo(i=>!0!==i,!0))}(r,a,n,e):ft(f)),(0,T.U)(f=>({...t,guardsResult:f})))})}(this.environmentInjector,l=>this.events.next(l)),(0,kr.b)(l=>{if(r.guardsResult=l.guardsResult,Fu(l.guardsResult))throw bC(0,l.guardsResult);const f=new nx(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(f)}),vi(l=>!!l.guardsResult||(t.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),$g(l=>{if(l.guards.canActivateChecks.length)return ft(l).pipe((0,kr.b)(f=>{const y=new mC(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(y)}),Pr(f=>{let y=!1;return ft(f).pipe(function hx(n,e){return(0,Si.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ft(t);let a=0;return(0,on.D)(i).pipe(ka(l=>function d0(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!p0(i)&&(a[Gl]=i.title),function fx(n,e,t,r){const i=function h0(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return ft({});const a={};return(0,on.D)(i).pipe((0,Si.z)(l=>function f0(n,e,t,r){const i=Tf(e)??r,a=Xl(n,i);return Is(a.resolve?a.resolve(e,t):i.runInContext(()=>a(e,t)))}(n[l],e,t,r).pipe(Zo(),(0,kr.b)(f=>{a[l]=f}))),zl(1),function cf(n){return(0,T.U)(()=>n)}(a),Ws(l=>v_(l)?ns.E:Nr(l)))}(a,n,e,r).pipe((0,T.U)(l=>(n._resolvedData=l,n.data=l_(n,t).resolve,i&&p0(i)&&(n.data[Gl]=i.title),null)))}(l.route,r,n,e)),(0,kr.b)(()=>a++),zl(1),(0,Si.z)(l=>a===i.length?ft(t):ns.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,kr.b)({next:()=>y=!0,complete:()=>{y||(t.restoreHistory(f),this.cancelNavigationTransition(f,"",2))}}))}),(0,kr.b)(f=>{const y=new o_(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(y)}))}),$g(l=>{const f=y=>{const E=[];y.routeConfig?.loadComponent&&!y.routeConfig._loadedComponent&&E.push(this.configLoader.loadComponent(y.routeConfig).pipe((0,kr.b)(C=>{y.component=C}),(0,T.U)(()=>{})));for(const C of y.children)E.push(...f(C));return E};return pt(f(l.targetSnapshot.root)).pipe(uf(),Pa(1))}),$g(()=>this.afterPreactivation()),(0,T.U)(l=>{const f=function $w(n,e,t){const r=Id(n,e._root,t?t._root:void 0);return new Uw(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return r={...l,targetRouterState:f}}),(0,kr.b)(l=>{t.currentUrlTree=l.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),t.routerState=l.targetRouterState,"deferred"===t.urlUpdateStrategy&&(l.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,l),t.browserUrlTree=l.urlAfterRedirects)}),((n,e,t)=>(0,T.U)(r=>(new ux(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l)),(0,kr.b)({next:l=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new Bu(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{i=!0}}),Gi(()=>{i||a||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Ws(l=>{if(a=!0,IC(l)){Pg(l)||(t.navigated=!0,t.restoreHistory(r,!0));const f=new Zl(r.id,this.urlSerializer.serialize(r.extractedUrl),l.message,l.cancellationCode);if(this.events.next(f),Pg(l)){const y=t.urlHandlingStrategy.merge(l.url,t.rawUrlTree),E={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||_0(r.source)};t.scheduleNavigation(y,If,null,E,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const f=new $u(r.id,this.urlSerializer.serialize(r.extractedUrl),l,r.targetSnapshot??void 0);this.events.next(f);try{r.resolve(t.errorHandler(l))}catch(y){r.reject(y)}}return ns.E}))}))}cancelNavigationTransition(t,r,i){const a=new Zl(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(a),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function _0(n){return n!==If}let T_=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===qt);return r}getResolvedTitleForRoute(t){return t.data[Gl]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(qC)},providedIn:"root"}),n})(),qC=(()=>{class n extends T_{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ld))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),KC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(Yt)},providedIn:"root"}),n})();class ZC{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let Yt=(()=>{class n extends ZC{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Mf=new d.OlP("",{providedIn:"root",factory:()=>({})});let E0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(YC)},providedIn:"root"}),n})(),YC=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function b0(n){throw n}function QC(n,e,t){return e.parse("/")}const I0={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},XC={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Wi=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,d.f3M)(d.c2e),this.isNgZoneEnabled=!1,this.options=(0,d.f3M)(Mf,{optional:!0})||{},this.errorHandler=this.options.errorHandler||b0,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||QC,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,d.f3M)(E0),this.routeReuseStrategy=(0,d.f3M)(KC),this.urlCreationStrategy=(0,d.f3M)(vC),this.titleStrategy=(0,d.f3M)(T_),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=pf((0,d.f3M)(Ai,{optional:!0})??[]),this.navigationTransitions=(0,d.f3M)(Hg),this.urlSerializer=(0,d.f3M)(ot),this.location=(0,d.f3M)(Le),this.isNgZoneEnabled=(0,d.f3M)(d.R0b)instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new m,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Vw(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),If,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const a={replaceUrl:!0},l=i?.navigationId?i:null;if(i){const y={...i};delete y.navigationId,delete y.\u0275routerPageId,0!==Object.keys(y).length&&(a.state=y)}const f=this.parseUrl(t);this.scheduleNavigation(f,r,l,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(p_),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:l,queryParamsHandling:f,preserveFragment:y}=r,E=y?this.currentUrlTree.fragment:l;let C=null;switch(f){case"merge":C={...this.currentUrlTree.queryParams,...a};break;case"preserve":C=this.currentUrlTree.queryParams;break;default:C=a||null}return null!==C&&(C=this.removeEmptyProps(C)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,t,C,E??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Fu(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,If,null,r)}navigate(t,r={skipLocationChange:!1}){return function px(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new d.vHH(4008,!1)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...I0}:!1===r?{...XC}:r,Fu(t))return Nu(this.currentUrlTree,t,i);const a=this.parseUrl(t);return Nu(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}scheduleNavigation(t,r,i,a,l){if(this.disposed)return Promise.resolve(!1);let f,y,E,C;return l?(f=l.resolve,y=l.reject,E=l.promise):E=new Promise((M,L)=>{f=M,y=L}),C="computed"===this.canceledNavigationResolution?i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:C,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:a,resolve:f,reject:y,promise:E,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),E.catch(M=>Promise.reject(M))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===i?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Rf=(()=>{class n{constructor(t,r,i,a,l,f){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=l,this.locationStrategy=f,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new zi.x;const y=l.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===y||"area"===y,this.isAnchorElement?this.subscription=t.events.subscribe(E=>{E instanceof Bu&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,d.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,d.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,d.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,a,l){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||a||l||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,d.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,a=this.el.nativeElement;null!==r?i.setAttribute(a,t,r):i.removeAttribute(a,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Wi),d.Y36(bd),d.$8M("tabindex"),d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(ct))},n.\u0275dir=d.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&d.NdJ("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&t&&d.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[d.TTD]}),n})();class C0{}let JC=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(vi(t=>t instanceof Bu),ka(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,d.MMx)(a.providers,t,`Route: ${a.path}`));const l=a._injector??t,f=a._loadedInjector??l;a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent?i.push(this.preloadConfig(l,a)):(a.children||a._loadedRoutes)&&i.push(this.processRoutes(f,a.children??a._loadedRoutes))}return(0,on.D)(i).pipe((0,Ft.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):ft(null);const a=i.pipe((0,Si.z)(l=>null===l?ft(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,on.D)([a,l]).pipe((0,Ft.J)())}return a})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Wi),d.LFG(d.Sil),d.LFG(d.lqb),d.LFG(C0),d.LFG(C_))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const A0=new d.OlP("");let eT=(()=>{class n{constructor(t,r,i,a,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=a,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Mg?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Bu&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof u_&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new u_(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function xd(n,e){return{\u0275kind:n,\u0275providers:e}}function Of(){const n=(0,d.f3M)(d.zs3);return e=>{const t=n.get(d.z2F);if(e!==t.components[0])return;const r=n.get(Wi),i=n.get(M0);1===n.get(zg)&&r.initialNavigation(),n.get(R0,null,d.XFs.Optional)?.setUpPreloading(),n.get(A0,null,d.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const M0=new d.OlP("",{factory:()=>new zi.x}),zg=new d.OlP("",{providedIn:"root",factory:()=>1});const R0=new d.OlP("");function sT(n){return xd(0,[{provide:R0,useExisting:JC},{provide:C0,useExisting:n}])}const Gg=new d.OlP("ROUTER_FORROOT_GUARD"),_x=[Le,{provide:ot,useClass:_t},Wi,Dd,{provide:bd,useFactory:function S_(n){return n.routerState.root},deps:[Wi]},C_,[]];function M_(){return new d.PXZ("Router",Wi)}let x0=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[_x,[],{provide:Ai,multi:!0,useValue:t},{provide:Gg,useFactory:uT,deps:[[Wi,new d.FiY,new d.tp0]]},{provide:Mf,useValue:r||{}},r?.useHash?{provide:ct,useClass:Te}:{provide:ct,useClass:Ae},{provide:A0,useFactory:()=>{const n=(0,d.f3M)(Oo),e=(0,d.f3M)(d.R0b),t=(0,d.f3M)(Mf),r=(0,d.f3M)(Hg),i=(0,d.f3M)(ot);return t.scrollOffset&&n.setOffset(t.scrollOffset),new eT(i,r,n,e,t)}},r?.preloadingStrategy?sT(r.preloadingStrategy).\u0275providers:[],{provide:d.PXZ,multi:!0,useFactory:M_},r?.initialNavigation?N0(r):[],[{provide:P0,useFactory:Of},{provide:d.tb,multi:!0,useExisting:P0}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Ai,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Gg,8))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Fg]}),n})();function uT(n){return"guarded"}function N0(n){return["disabled"===n.initialNavigation?xd(3,[{provide:d.ip1,multi:!0,useFactory:()=>{const e=(0,d.f3M)(Wi);return()=>{e.setUpLocationChangeListener()}}},{provide:zg,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?xd(2,[{provide:zg,useValue:0},{provide:d.ip1,multi:!0,deps:[d.zs3],useFactory:e=>{const t=e.get(me,Promise.resolve());return()=>t.then(()=>new Promise(i=>{const a=e.get(Wi),l=e.get(M0);(function r(i){e.get(Wi).events.pipe(vi(l=>l instanceof Bu||l instanceof Zl||l instanceof $u),(0,T.U)(l=>l instanceof Bu||l instanceof Zl&&(0===l.code||1===l.code)&&null),vi(l=>null!==l),Pa(1)).subscribe(()=>{i()})})(()=>{i(!0)}),e.get(Hg).afterPreactivation=()=>(i(!0),l.closed?ft(void 0):l),a.initialNavigation()}))}}]).\u0275providers:[]]}const P0=new d.OlP("");var kd=F(6451),Fd=F(5363),Nf=F(6063);class x_ extends zi.x{constructor(e=1/0,t=1/0,r=Nf.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:l}=this;t||(r.push(e),!i&&r.push(a.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let l=0;l<a.length&&!e.closed;l+=r?1:2)e.next(a[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const l=t.now();let f=0;for(let y=1;y<r.length&&r[y]<=l;y+=2)f=y;f&&r.splice(0,f+1)}}}var Pf=F(3099);function O_(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,Pf.B)({connector:()=>new x_(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Wg(n,e){return(0,Wr.m)(e)?Pr(()=>n,e):Pr(()=>n)}var kf=F(9468),an=F(2122),Zs=F(2011),mo=F(259);class ic{constructor(e){return e}}class qg{constructor(){return(0,mo.C6)()}}const Kg=new d.OlP("angularfire2._apps"),k0={provide:ic,useFactory:function dT(n){return n&&1===n.length?n[0]:new ic((0,mo.Mq)())},deps:[[new d.FiY,Kg]]},hT={provide:qg,deps:[[new d.FiY,Kg]]};function fT(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new ic(r)}}let Cs=(()=>{class n{constructor(t){(0,mo.KN)("angularfire",an.q4.full,"core"),(0,mo.KN)("angularfire",an.q4.full,"app"),(0,mo.KN)("angular",d.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.Lbi))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[k0,hT]}),n})();const U0=(0,an.u3)(mo.ZF,!0);var Ee=F(5861),qi=F(9681),Ff=F(4859),sn=F(2090),Wu=F(1877);const N_=new Map,V0={activated:!1,tokenObservers:[]},pT={initialized:!1,enabled:!1};function Ei(n){return N_.get(n)||Object.assign({},V0)}function Ld(){return pT}class k_{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ee.Z)(function*(){t.stop();try{t.pending=new sn.BH,yield function _T(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new sn.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const oi=new sn.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Lf(n){if(!Ei(n).activated)throw oi.create("use-before-activation",{appName:n.name})}function H0(n,e){return Zg.apply(this,arguments)}function Zg(){return(Zg=(0,Ee.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const M=yield i.getHeartbeatsHeader();M&&(r["X-Firebase-Client"]=M)}const a={method:"POST",body:JSON.stringify(e),headers:r};let l,f;try{l=yield fetch(n,a)}catch(M){throw oi.create("fetch-network-error",{originalErrorMessage:M?.message})}if(200!==l.status)throw oi.create("fetch-status-error",{httpStatus:l.status});try{f=yield l.json()}catch(M){throw oi.create("fetch-parse-error",{originalErrorMessage:M?.message})}const y=f.ttl.match(/^([\d.]+)(s)$/);if(!y||!y[2]||isNaN(Number(y[1])))throw oi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});const E=1e3*Number(y[1]),C=Date.now();return{token:f.token,expireTimeMillis:C+E,issuedAtTimeMillis:C}})).apply(this,arguments)}function W0(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const qu="firebase-app-check-store";let Ku=null;function q0(){return Ku||(Ku=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(oi.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(qu,{keyPath:"compositeKey"})}}catch(t){e(oi.create("storage-open",{originalErrorMessage:t?.message}))}}),Ku)}function L_(){return(L_=(0,Ee.Z)(function*(n,e){const r=(yield q0()).transaction(qu,"readwrite"),a=r.objectStore(qu).put({compositeKey:n,value:e});return new Promise((l,f)=>{a.onsuccess=y=>{l()},r.onerror=y=>{var E;f(oi.create("storage-set",{originalErrorMessage:null===(E=y.target.error)||void 0===E?void 0:E.message}))}})})).apply(this,arguments)}const Vf=new Wu.Yd("@firebase/app-check");function B_(n,e){return(0,sn.hl)()?function Z0(n,e){return function Bd(n,e){return L_.apply(this,arguments)}(function Y0(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Vf.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Qg(){return Ld().enabled}function Q0(){return Bf.apply(this,arguments)}function Bf(){return(Bf=(0,Ee.Z)(function*(){const n=Ld();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const TT={error:"UNKNOWN_ERROR"};function ST(n){return sn.US.encodeString(JSON.stringify(n),!1)}function Xg(n){return $_.apply(this,arguments)}function $_(){return($_=(0,Ee.Z)(function*(n,e=!1){const t=n.app;Lf(t);const r=Ei(t);let a,i=r.token;if(i&&!$f(i)&&(r.token=void 0,i=void 0),!i){const y=yield r.cachedTokenPromise;y&&($f(y)?i=y:yield B_(t,void 0))}if(!e&&i&&$f(i))return{token:i.token};let f,l=!1;if(Qg()){r.exchangeTokenPromise||(r.exchangeTokenPromise=H0(W0(t,yield Q0()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const y=yield r.exchangeTokenPromise;return yield B_(t,y),r.token=y,{token:y.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=yield Ei(t).exchangeTokenPromise}catch(y){"appCheck/throttled"===y.code?Vf.warn(y.message):Vf.error(y),a=y}return i?a?f=$f(i)?{token:i.token,internalError:a}:G_(a):(f={token:i.token},r.token=i,yield B_(t,i)):f=G_(a),l&&J0(t,f),f})).apply(this,arguments)}function H_(n,e){const t=Ei(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function z_(n){const{app:e}=n,t=Ei(e);let r=t.tokenRefresher;r||(r=function X0(n){const{app:e}=n;return new k_((0,Ee.Z)(function*(){let r;if(r=Ei(e).token?yield Xg(n,!0):yield Xg(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Ei(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function J0(n,e){const t=Ei(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function $f(n){return n.expireTimeMillis-Date.now()>0}function G_(n){return{token:ST(TT),error:n}}class Jg{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Ei(this.app);for(const t of e)H_(this.app,t.next);return Promise.resolve()}}const K_="app-check-internal";!function tb(){(0,qi._registerComponent)(new Ff.wA("app-check",n=>function sc(n,e){return new Jg(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(K_).initialize()})),(0,qi._registerComponent)(new Ff.wA(K_,n=>function Dx(n){return{getToken:e=>Xg(n,e),addTokenListener:e=>function j_(n,e,t,r){const{app:i}=n,a=Ei(i);if(a.tokenObservers=[...a.tokenObservers,{next:t,error:r,type:e}],a.token&&$f(a.token)){const f=a.token;Promise.resolve().then(()=>{t({token:f.token}),z_(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>z_(n))}(n,"INTERNAL",e),removeTokenListener:e=>H_(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,qi.registerVersion)("@firebase/app-check","0.6.3")}();class dc{constructor(){return(0,an.vb)("app-check")}}typeof window<"u"&&window;var rb=F(9260);const rv=new d.OlP("angularfire2.auth.use-emulator"),iv=new d.OlP("angularfire2.auth.settings"),im=new d.OlP("angularfire2.auth.tenant-id"),sv=new d.OlP("angularfire2.auth.langugage-code"),ib=new d.OlP("angularfire2.auth.use-device-language"),ov=new d.OlP("angularfire.auth.persistence"),av=(n,e,t,r,i,a,l,f)=>(0,Zs.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const y=e.runOutsideAngular(()=>n.auth());if(t&&y.useEmulator(...t),r&&(y.tenantId=r),y.languageCode=i,a&&y.useDeviceLanguage(),l)for(const[E,C]of Object.entries(l))y.settings[E]=C;return f&&y.setPersistence(f),y},[t,r,i,a,l,f]);let sm=(()=>{class n{constructor(t,r,i,a,l,f,y,E,C,M,L,z){const W=new zi.x,ne=ft(void 0).pipe((0,Fd.Q)(l.outsideAngular),Pr(()=>a.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,9568)))),(0,T.U)(()=>(0,Zs.on)(t,a,r)),(0,T.U)(fe=>av(fe,a,f,E,C,M,y,L)),O_({bufferSize:1,refCount:!1}));if(Kc(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ft(null);else{ne.pipe(Zo()).subscribe();const je=ne.pipe(Pr(Xe=>Xe.getRedirectResult().then(At=>At,()=>null)),an.iC,O_({bufferSize:1,refCount:!1})),at=ne.pipe(Pr(Xe=>new lr.y(At=>({unsubscribe:a.runOutsideAngular(()=>Xe.onAuthStateChanged(xt=>At.next(xt),xt=>At.error(xt),()=>At.complete()))})))),tt=ne.pipe(Pr(Xe=>new lr.y(At=>({unsubscribe:a.runOutsideAngular(()=>Xe.onIdTokenChanged(xt=>At.next(xt),xt=>At.error(xt),()=>At.complete()))}))));this.authState=je.pipe(Wg(at),(0,kf.R)(l.outsideAngular),(0,Fd.Q)(l.insideAngular)),this.user=je.pipe(Wg(tt),(0,kf.R)(l.outsideAngular),(0,Fd.Q)(l.insideAngular)),this.idToken=this.user.pipe(Pr(Xe=>Xe?(0,on.D)(Xe.getIdToken()):ft(null))),this.idTokenResult=this.user.pipe(Pr(Xe=>Xe?(0,on.D)(Xe.getIdTokenResult()):ft(null))),this.credential=(0,kd.T)(je,W,this.authState.pipe(vi(Xe=>!Xe))).pipe((0,T.U)(Xe=>Xe?.user?Xe:null),(0,kf.R)(l.outsideAngular),(0,Fd.Q)(l.insideAngular))}return(0,Zs.pX)(this,ne,a,{spy:{apply:(fe,je,at)=>{(fe.startsWith("signIn")||fe.startsWith("createUser"))&&at.then(tt=>W.next(tt))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Zs.Dh),d.LFG(Zs.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(an.HU),d.LFG(rv,8),d.LFG(iv,8),d.LFG(im,8),d.LFG(sv,8),d.LFG(ib,8),d.LFG(ov,8),d.LFG(dc,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();var sb=F(4986);function om(){return(0,cr.e)((n,e)=>{let t,r=!1;n.subscribe((0,Ie.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function ab(n,e){return n===e}F(9568);var It,lb=F(3942),cb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ea={},am=am||{},Gt=cb||self;function zf(){}function Gf(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Qu(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var uv="closure_uid_"+(1e9*Math.random()>>>0),UT=0;function lv(n,e,t){return n.call.apply(n.bind,arguments)}function hc(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function ai(n,e,t){return(ai=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?lv:hc).apply(null,arguments)}function um(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Kr(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,a){for(var l=Array(arguments.length-2),f=2;f<arguments.length;f++)l[f-2]=arguments[f];return e.prototype[i].apply(r,l)}}function fc(){this.s=this.s,this.o=this.o}fc.prototype.s=!1,fc.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function Xu(n){Object.prototype.hasOwnProperty.call(n,uv)&&n[uv]||(n[uv]=++UT)}(this)},fc.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const db=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function cv(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function dv(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Gf(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let l=0;l<a;l++)n[i+l]=r[l]}else n.push(r)}}function Mi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Mi.prototype.h=function(){this.defaultPrevented=!0};var Zr=function(){if(!Gt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Gt.addEventListener("test",zf,e),Gt.removeEventListener("test",zf,e)}catch{}return n}();function Wf(n){return/^[\s\xa0]*$/.test(n)}var hb=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function hv(n,e){return n<e?-1:n>e?1:0}function qf(){var n=Gt.navigator;return n&&(n=n.userAgent)?n:""}function ta(n){return-1!=qf().indexOf(n)}function lm(n){return lm[" "](n),n}lm[" "]=zf;var Kf,n,zd=ta("Opera"),Gd=ta("Trident")||ta("MSIE"),pb=ta("Edge"),cm=pb||Gd,gb=ta("Gecko")&&!(-1!=qf().toLowerCase().indexOf("webkit")&&!ta("Edge"))&&!(ta("Trident")||ta("MSIE"))&&!ta("Edge"),mb=-1!=qf().toLowerCase().indexOf("webkit")&&!ta("Edge");function VT(){var n=Gt.document;return n?n.documentMode:void 0}e:{var Zf="",Qs=(n=qf(),gb?/rv:([^\);]+)(\)|;)/.exec(n):pb?/Edge\/([\d\.]+)/.exec(n):Gd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):mb?/WebKit\/(\S+)/.exec(n):zd?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Qs&&(Zf=Qs?Qs[1]:""),Gd){var fv=VT();if(null!=fv&&fv>parseFloat(Zf)){Kf=String(fv);break e}}Kf=Zf}var BT={};var yb=Gt.document&&Gd&&(VT()||parseInt(Kf,10))||void 0;function Wd(n,e){if(Mi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(gb){e:{try{lm(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:$T[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Wd.X.h.call(this)}}Kr(Wd,Mi);var $T={2:"touch",3:"pen",4:"mouse"};Wd.prototype.h=function(){Wd.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Yf="closure_listenable_"+(1e6*Math.random()|0),jT=0;function HT(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++jT,this.ba=this.ea=!1}function qd(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function pc(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function _b(n){const e={};for(const t in n)e[t]=n[t];return e}const pv="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function vb(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<pv.length;a++)t=pv[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Qf(n){this.src=n,this.g={},this.h=0}function dm(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=db(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(qd(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Kd(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ba&&a.listener==e&&a.capture==!!t&&a.ha==r)return i}return-1}Qf.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var l=Kd(n,e,r,i);return-1<l?(e=n[l],t||(e.ea=!1)):((e=new HT(e,this.src,a,!!r,i)).ea=t,n.push(e)),e};var gv="closure_lm_"+(1e6*Math.random()|0),hm={};function mv(n,e,t,r,i){if(r&&r.once)return yv(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)mv(n,e[a],t,r,i);return null}return t=_m(t),n&&n[Yf]?n.N(e,t,Qu(r)?!!r.capture:!!r,i):fm(n,e,t,!1,r,i)}function fm(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var l=Qu(i)?!!i.capture:!!i,f=mm(n);if(f||(n[gv]=f=new Qf(n)),(t=f.add(e,t,r,l,a)).proxy)return t;if(r=function pm(){const e=Eb;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Zr||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(vv(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function yv(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)yv(n,e[a],t,r,i);return null}return t=_m(t),n&&n[Yf]?n.O(e,t,Qu(r)?!!r.capture:!!r,i):fm(n,e,t,!0,r,i)}function _v(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)_v(n,e[a],t,r,i);else r=Qu(r)?!!r.capture:!!r,t=_m(t),n&&n[Yf]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Kd(a=n.g[e],t,r,i))&&(qd(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=mm(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Kd(e,t,r,i)),(t=-1<n?e[n]:null)&&gm(t))}function gm(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Yf])dm(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(vv(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=mm(e))?(dm(t,n),0==t.h&&(t.src=null,e[gv]=null)):qd(n)}}}function vv(n){return n in hm?hm[n]:hm[n]="on"+n}function Eb(n,e){if(n.ba)n=!0;else{e=new Wd(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&gm(n),n=t.call(r,e)}return n}function mm(n){return(n=n[gv])instanceof Qf?n:null}var ym="__closure_events_fn_"+(1e9*Math.random()>>>0);function _m(n){return"function"==typeof n?n:(n[ym]||(n[ym]=function(e){return n.handleEvent(e)}),n[ym])}function ui(){fc.call(this),this.i=new Qf(this),this.P=this,this.I=null}function bi(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Mi(e,n);else if(e instanceof Mi)e.target=e.target||n;else{var i=e;vb(e=new Mi(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var l=e.g=t[a];i=vm(l,r,!0,e)&&i}if(i=vm(l=e.g=n,r,!0,e)&&i,i=vm(l,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=vm(l=e.g=t[a],r,!1,e)&&i}function vm(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.ba&&l.capture==t){var f=l.listener,y=l.ha||l.src;l.ea&&dm(n.i,l),i=!1!==f.call(y,r)&&i}}return i&&!r.defaultPrevented}Kr(ui,fc),ui.prototype[Yf]=!0,ui.prototype.removeEventListener=function(n,e,t,r){_v(this,n,e,t,r)},ui.prototype.M=function(){if(ui.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)qd(t[r]);delete n.g[e],n.h--}}this.I=null},ui.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},ui.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Ev=Gt.JSON.stringify;function zT(){var n=Ib;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var wv,wb=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new WT,n=>n.reset());class WT{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function qT(n){Gt.setTimeout(()=>{throw n},0)}function bb(n,e){wv||function KT(){var n=Gt.Promise.resolve(void 0);wv=function(){n.then(ZT)}}(),bv||(wv(),bv=!0),Ib.add(n,e)}var bv=!1,Ib=new class GT{constructor(){this.h=this.g=null}add(e,t){const r=wb.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function ZT(){for(var n;n=zT();){try{n.h.call(n.g)}catch(t){qT(t)}var e=wb;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}bv=!1}function Em(n,e){ui.call(this),this.h=n||1,this.g=e||Gt,this.j=ai(this.lb,this),this.l=Date.now()}function Iv(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function Dv(n,e,t){if("function"==typeof n)t&&(n=ai(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=ai(n.handleEvent,n)}return 2147483647<Number(e)?-1:Gt.setTimeout(n,e||0)}function Cv(n){n.g=Dv(()=>{n.g=null,n.i&&(n.i=!1,Cv(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Kr(Em,ui),(It=Em.prototype).ca=!1,It.R=null,It.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),bi(this,"tick"),this.ca&&(Iv(this),this.start()))}},It.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},It.M=function(){Em.X.M.call(this),Iv(this),delete this.g};class Db extends fc{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Cv(this)}M(){super.M(),this.g&&(Gt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zd(n){fc.call(this),this.h=n,this.g={}}Kr(Zd,fc);var Tv=[];function Sv(n,e,t,r){Array.isArray(t)||(t&&(Tv[0]=t.toString()),t=Tv);for(var i=0;i<t.length;i++){var a=mv(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function Av(n){pc(n.g,function(e,t){this.g.hasOwnProperty(t)&&gm(e)},n),n.g={}}function Xf(){this.g=!0}function gc(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function mc(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var l=1;l<i.length;l++)i[l]=""}}}return Ev(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Zd.prototype.M=function(){Zd.X.M.call(this),Av(this)},Zd.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Xf.prototype.Aa=function(){this.g=!1},Xf.prototype.info=function(){};var yc={},Ab=null;function ja(){return Ab=Ab||new ui}function YT(n){Mi.call(this,yc.Pa,n)}function _c(n){const e=ja();bi(e,new YT(e))}function QT(n,e){Mi.call(this,yc.STAT_EVENT,n),this.stat=e}function Ri(n){const e=ja();bi(e,new QT(e,n))}function Mv(n,e){Mi.call(this,yc.Qa,n),this.size=e}function wm(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Gt.setTimeout(function(){n()},e)}yc.Pa="serverreachability",Kr(YT,Mi),yc.STAT_EVENT="statevent",Kr(QT,Mi),yc.Qa="timingevent",Kr(Mv,Mi);var Ot={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Mb={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Rv(){}function vc(){}Rv.prototype.h=null;var Wn,Jf={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Yd(){Mi.call(this,"d")}function Qd(){Mi.call(this,"c")}function xv(){}function Xd(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new Zd(this),this.O=XT,this.T=new Em(n=cm?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Ov}function Ov(){this.i=null,this.g="",this.h=!1}Kr(Yd,Mi),Kr(Qd,Mi),Kr(xv,Rv),xv.prototype.g=function(){return new XMLHttpRequest},xv.prototype.i=function(){return{}},Wn=new xv;var XT=45e3,bm={},ep={};function Im(n,e,t){n.K=1,n.v=Sm(za(e)),n.s=t,n.P=!0,Nv(n,null)}function Nv(n,e){n.F=Date.now(),Ha(n),n.A=za(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),th(t.i,"t",r),n.C=0,t=n.l.H,n.h=new Ov,n.g=Lm(n.l,t?e:null,!n.s),0<n.N&&(n.L=new Db(ai(n.La,n,n.g),n.N)),Sv(n.S,n.g,"readystatechange",n.ib),e=n.H?_b(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),_c(),function Cb(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var l="",f=a.split("&"),y=0;y<f.length;y++){var E=f[y].split("=");if(1<E.length){var C=E[0];E=E[1];var M=C.split("_");l=2<=M.length&&"type"==M[1]?l+(C+"=")+E+"&":l+(C+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.U,n.s)}function xb(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function Ob(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=JT(n,t),i==ep){4==e&&(n.o=4,Ri(14),r=!1),gc(n.j,n.m,null,"[Incomplete Response]");break}if(i==bm){n.o=4,Ri(15),gc(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}gc(n.j,n.m,i,null),Cm(n,i)}xb(n)&&i!=ep&&i!=bm&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ri(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),lp(e),e.K=!0,Ri(11))):(gc(n.j,n.m,t,"[Invalid Chunked Response]"),ra(n),tp(n))}function JT(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?ep:(t=Number(e.substring(t,r)),isNaN(t)?bm:(r+=1)+t>e.length?ep:(e=e.substr(r,t),n.C=r+t,e))}function Ha(n){n.V=Date.now()+n.O,Nb(n,n.O)}function Nb(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=wm(ai(n.gb,n),e)}function Dm(n){n.B&&(Gt.clearTimeout(n.B),n.B=null)}function tp(n){0==n.l.G||n.I||wc(n.l,n)}function ra(n){Dm(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Iv(n.T),Av(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Cm(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Lv(t.h,n)))if(!n.J&&Lv(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;cp(t),Nm(t)}Hv(t),Ri(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=wm(ai(t.cb,t),6e3));if(1>=Fv(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else bc(t,11)}else if((n.J||t.g==n)&&cp(t),!Wf(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let E=i[e];if(t.T=E[0],E=E[1],2==t.G)if("c"==E[0]){t.I=E[1],t.ka=E[2];const C=E[3];null!=C&&(t.ma=C,t.j.info("VER="+t.ma));const M=E[4];null!=M&&(t.Ca=M,t.j.info("SVER="+t.Ca));const L=E[5];null!=L&&"number"==typeof L&&0<L&&(t.J=r=1.5*L,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const z=n.g;if(z){const W=z.g?z.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(W){var a=r.h;a.g||-1==W.indexOf("spdy")&&-1==W.indexOf("quic")&&-1==W.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(Uv(a,a.h),a.h=null))}if(r.D){const ne=z.g?z.g.getResponseHeader("X-HTTP-Session-Id"):null;ne&&(r.za=ne,$n(r.F,r.D,ne))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var l=n;if((r=t).sa=Gv(r,r.H?r.ka:null,r.V),l.J){rh(r.h,l);var f=l,y=r.J;y&&f.setTimeout(y),f.B&&(Dm(f),Ha(f)),r.g=l}else Qb(r);0<t.i.length&&Pm(t)}else"stop"!=E[0]&&"close"!=E[0]||bc(t,7);else 3==t.G&&("stop"==E[0]||"close"==E[0]?"stop"==E[0]?bc(t,7):Om(t):"noop"!=E[0]&&t.l&&t.l.wa(E),t.A=0)}_c()}catch{}}function Fb(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Gf(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function kb(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Gf(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function Pb(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Gf(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(It=Xd.prototype).setTimeout=function(n){this.O=n},It.ib=function(n){n=n.target;const e=this.L;e&&3==Ga(n)?e.l():this.La(n)},It.La=function(n){try{if(n==this.g)e:{const C=Ga(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>C)&&(3!=C||cm||this.g&&(this.h.h||this.g.fa()||Kb(this.g)))){this.I||4!=C||7==e||_c(),Dm(this);var t=this.g.aa();this.Y=t;t:if(xb(this)){var r=Kb(this.g);n="";var i=r.length,a=4==Ga(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ra(this),tp(this);var l="";break t}this.h.i=new Gt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=200==t,function Tb(n,e,t,r,i,a,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+l})}(this.j,this.u,this.A,this.m,this.U,C,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var f,y=this.g;if((f=y.g?y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Wf(f)){var E=f;break t}}E=null}if(!(t=E)){this.i=!1,this.o=3,Ri(12),ra(this),tp(this);break e}gc(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Cm(this,t)}this.P?(Ob(this,C,l),cm&&this.i&&3==C&&(Sv(this.S,this.T,"tick",this.hb),this.T.start())):(gc(this.j,this.m,l,null),Cm(this,l)),4==C&&ra(this),this.i&&!this.I&&(4==C?wc(this.l,this):(this.i=!1,Ha(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Ri(12)):(this.o=0,Ri(13)),ra(this),tp(this)}}}catch{}},It.hb=function(){if(this.g){var n=Ga(this.g),e=this.g.fa();this.C<e.length&&(Dm(this),Ob(this,n,e),this.i&&4!=n&&Ha(this))}},It.cancel=function(){this.I=!0,ra(this)},It.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function Sb(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(_c(),Ri(17)),ra(this),this.o=2,tp(this)):Nb(this,this.V-n)};var Jd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ec(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Ec){this.h=void 0!==e?e:n.h,Tm(this,n.j),this.s=n.s,this.g=n.g,rp(this,n.m),this.l=n.l,e=n.i;var t=new Ju;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Pv(this,t),this.o=n.o}else n&&(t=String(n).match(Jd))?(this.h=!!e,Tm(this,t[1]||"",!0),this.s=eh(t[2]||""),this.g=eh(t[3]||"",!0),rp(this,t[4]),this.l=eh(t[5]||"",!0),Pv(this,t[6]||"",!0),this.o=eh(t[7]||"")):(this.h=!!e,this.i=new Ju(null,this.h))}function za(n){return new Ec(n)}function Tm(n,e,t){n.j=t?eh(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function rp(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Pv(n,e,t){e instanceof Ju?(n.i=e,function nS(n,e){e&&!n.j&&(el(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(Ub(this,r),th(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=ip(e,xx)),n.i=new Ju(e,n.h))}function $n(n,e,t){n.i.set(e,t)}function Sm(n){return $n(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function eh(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function ip(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,eS),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function eS(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Ec.prototype.toString=function(){var n=[],e=this.j;e&&n.push(ip(e,tS,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(ip(e,tS,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(ip(t,"/"==t.charAt(0)?Rx:Mx,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",ip(t,Lb)),n.join("")};var tS=/[#\/\?@]/g,Mx=/[#\?:]/g,Rx=/[#\?]/g,xx=/[#\?@]/g,Lb=/#/g;function Ju(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function el(n){n.g||(n.g=new Map,n.h=0,n.i&&function np(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Ub(n,e){el(n),e=nh(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function kv(n,e){return el(n),e=nh(n,e),n.g.has(e)}function th(n,e,t){Ub(n,e),0<t.length&&(n.i=null,n.g.set(nh(n,e),cv(t)),n.h+=t.length)}function nh(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Vb(n){this.l=n||Ox,n=Gt.PerformanceNavigationTiming?0<(n=Gt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Gt.g&&Gt.g.Ga&&Gt.g.Ga()&&Gt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(It=Ju.prototype).add=function(n,e){el(this),this.i=null,n=nh(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},It.forEach=function(n,e){el(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},It.oa=function(){el(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},It.W=function(n){el(this);let e=[];if("string"==typeof n)kv(this,n)&&(e=e.concat(this.g.get(nh(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},It.set=function(n,e){return el(this),this.i=null,kv(this,n=nh(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},It.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},It.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),l=this.W(r);for(r=0;r<l.length;r++){var i=a;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var Ox=10;function Bb(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Fv(n){return n.h?1:n.g?n.g.size:0}function Lv(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Uv(n,e){n.g?n.g.add(e):n.h=e}function rh(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function $b(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return cv(n.i)}function Am(){}function iS(){this.g=new Am}function jb(n,e,t){const r=t||"";try{Fb(n,function(i,a){let l=i;Qu(i)&&(l=Ev(i)),e.push(r+a+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function sp(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function op(n){this.l=n.ac||null,this.j=n.jb||!1}function ih(n,e){ui.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Vv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Vb.prototype.cancel=function(){if(this.i=$b(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Am.prototype.stringify=function(n){return Gt.JSON.stringify(n,void 0)},Am.prototype.parse=function(n){return Gt.JSON.parse(n,void 0)},Kr(op,Rv),op.prototype.g=function(){return new ih(this.l,this.j)},op.prototype.i=function(n){return function(){return n}}({}),Kr(ih,ui);var Vv=0;function Bv(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function sh(n){n.readyState=4,n.l=null,n.j=null,n.A=null,ap(n)}function ap(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(It=ih.prototype).open=function(n,e){if(this.readyState!=Vv)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,ap(this)},It.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Gt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},It.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,sh(this)),this.readyState=Vv},It.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,ap(this)),this.g&&(this.readyState=3,ap(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Gt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Bv(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},It.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?sh(this):ap(this),3==this.readyState&&Bv(this)}},It.Va=function(n){this.g&&(this.response=this.responseText=n,sh(this))},It.Ua=function(n){this.g&&(this.response=n,sh(this))},It.ga=function(){this.g&&sh(this)},It.setRequestHeader=function(n,e){this.v.append(n,e)},It.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},It.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(ih.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var oS=Gt.JSON.parse;function dr(n){ui.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Mm,this.K=this.L=!1}Kr(dr,ui);var Mm="",aS=/^https?$/i,Hb=["POST","PUT"];function zb(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Gb(n),Rm(n)}function Gb(n){n.D||(n.D=!0,bi(n,"complete"),bi(n,"error"))}function Wb(n){if(n.h&&typeof am<"u"&&(!n.C[1]||4!=Ga(n)||2!=n.aa()))if(n.v&&4==Ga(n))Dv(n.Ha,0,n);else if(bi(n,"readystatechange"),4==Ga(n)){n.h=!1;try{const f=n.aa();e:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===f){var i=String(n.H).match(Jd)[1]||null;if(!i&&Gt.self&&Gt.self.location){var a=Gt.self.location.protocol;i=a.substr(0,a.length-1)}r=!aS.test(i?i.toLowerCase():"")}t=r}if(t)bi(n,"complete"),bi(n,"success");else{n.m=6;try{var l=2<Ga(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.aa()+"]",Gb(n)}}finally{Rm(n)}}}function Rm(n,e){if(n.g){qb(n);const t=n.g,r=n.C[0]?zf:null;n.g=null,n.C=null,e||bi(n,"ready");try{t.onreadystatechange=r}catch{}}}function qb(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Gt.clearTimeout(n.A),n.A=null)}function Ga(n){return n.g?n.g.readyState:0}function Kb(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Mm:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function $v(n){let e="";return pc(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function xm(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=$v(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):$n(n,e,t))}function up(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Zb(n){this.Ca=0,this.i=[],this.j=new Xf,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=up("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=up("baseRetryDelayMs",5e3,n),this.bb=up("retryDelaySeedMs",1e4,n),this.$a=up("forwardChannelMaxRetries",2,n),this.ta=up("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new Vb(n&&n.concurrentRequestLimit),this.Fa=new iS,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Om(n){if(Yb(n),3==n.G){var e=n.U++,t=za(n.F);$n(t,"SID",n.I),$n(t,"RID",e),$n(t,"TYPE","terminate"),oh(n,t),(e=new Xd(n,n.j,e,void 0)).K=2,e.v=Sm(za(t)),t=!1,Gt.navigator&&Gt.navigator.sendBeacon&&(t=Gt.navigator.sendBeacon(e.v.toString(),"")),!t&&Gt.Image&&((new Image).src=e.v,t=!0),t||(e.g=Lm(e.l,null),e.g.da(e.v)),e.F=Date.now(),Ha(e)}lS(n)}function Nm(n){n.g&&(lp(n),n.g.cancel(),n.g=null)}function Yb(n){Nm(n),n.u&&(Gt.clearTimeout(n.u),n.u=null),cp(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Gt.clearTimeout(n.m),n.m=null)}function Pm(n){Bb(n.h)||n.m||(n.m=!0,bb(n.Ja,n),n.C=0)}function km(n,e){var t;t=e?e.m:n.U++;const r=za(n.F);$n(r,"SID",n.I),$n(r,"RID",t),$n(r,"AID",n.T),oh(n,r),n.o&&n.s&&xm(r,n.o,n.s),t=new Xd(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=Fm(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),Uv(n.h,t),Im(t,r,e)}function oh(n,e){n.ia&&pc(n.ia,function(t,r){$n(e,r,t)}),n.l&&Fb({},function(t,r){$n(e,r,t)})}function Fm(n,e,t){t=Math.min(n.i.length,t);var r=n.l?ai(n.l.Ra,n.l,n):null;e:{var i=n.i;let a=-1;for(;;){const l=["count="+t];-1==a?0<t?(a=i[0].h,l.push("ofs="+a)):a=0:l.push("ofs="+a);let f=!0;for(let y=0;y<t;y++){let E=i[y].h;const C=i[y].g;if(E-=a,0>E)a=Math.max(0,i[y].h-100),f=!1;else try{jb(C,l,"req"+E+"_")}catch{r&&r(C)}}if(f){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function Qb(n){n.g||n.u||(n.Z=1,bb(n.Ia,n),n.A=0)}function Hv(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=wm(ai(n.Ia,n),zv(n,n.A)),n.A++,0))}function lp(n){null!=n.B&&(Gt.clearTimeout(n.B),n.B=null)}function Xb(n){n.g=new Xd(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=za(n.sa);$n(e,"RID","rpc"),$n(e,"SID",n.I),$n(e,"CI",n.L?"0":"1"),$n(e,"AID",n.T),$n(e,"TYPE","xmlhttp"),oh(n,e),n.o&&n.s&&xm(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=Sm(za(e)),t.s=null,t.P=!0,Nv(t,n)}function cp(n){null!=n.v&&(Gt.clearTimeout(n.v),n.v=null)}function wc(n,e){var t=null;if(n.g==e){cp(n),lp(n),n.g=null;var r=2}else{if(!Lv(n.h,e))return;t=e.D,rh(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;bi(r=ja(),new Mv(r,t)),Pm(n)}else Qb(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function jv(n,e){return!(Fv(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=wm(ai(n.Ja,n,e),zv(n,n.C)),n.C++,0)))}(n,e)||2==r&&Hv(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:bc(n,5);break;case 4:bc(n,10);break;case 3:bc(n,6);break;default:bc(n,2)}}function zv(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function bc(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=ai(n.kb,n);t||(t=new Ec("//www.google.com/images/cleardot.gif"),Gt.location&&"http"==Gt.location.protocol||Tm(t,"https"),Sm(t)),function sS(n,e){const t=new Xf;if(Gt.Image){const r=new Image;r.onload=um(sp,t,r,"TestLoadImage: loaded",!0,e),r.onerror=um(sp,t,r,"TestLoadImage: error",!1,e),r.onabort=um(sp,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=um(sp,t,r,"TestLoadImage: timeout",!1,e),Gt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ri(2);n.G=0,n.l&&n.l.va(e),lS(n),Yb(n)}function lS(n){if(n.G=0,n.la=[],n.l){const e=$b(n.h);(0!=e.length||0!=n.i.length)&&(dv(n.la,e),dv(n.la,n.i),n.h.i.length=0,cv(n.i),n.i.length=0),n.l.ua()}}function Gv(n,e,t){var r=t instanceof Ec?za(t):new Ec(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),rp(r,r.m);else{var i=Gt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new Ec(null,void 0);r&&Tm(a,r),e&&(a.g=e),i&&rp(a,i),t&&(a.l=t),r=a}return e=n.za,(t=n.D)&&e&&$n(r,t,e),$n(r,"VER",n.ma),oh(n,r),r}function Lm(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new dr(t&&n.Da&&!n.ra?new op({jb:!0}):n.ra)).Ka(n.H),e}function Jb(){}function ah(){if(Gd&&!(10<=Number(yb)))throw Error("Environmental error: no available transport.")}function Ss(n,e){ui.call(this),this.g=new Zb(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!Wf(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Wf(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Ic(this)}function Wv(n){Yd.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Um(){Qd.call(this),this.status=1}function Ic(n){this.g=n}(It=dr.prototype).Ka=function(n){this.L=n},It.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Wn.g(),this.C=function Rb(n){return n.h||(n.h=n.i())}(this.u?this.u:Wn),this.g.onreadystatechange=ai(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void zb(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=Gt.FormData&&n instanceof Gt.FormData,!(0<=db(Hb,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,l]of t)this.g.setRequestHeader(a,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{qb(this),0<this.B&&((this.K=function uS(n){return Gd&&function na(){return function fb(n){var e=BT;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=hb(String(Kf)).split("."),t=hb("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",a=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=hv(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||hv(0==i[2].length,0==a[2].length)||hv(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ai(this.qa,this)):this.A=Dv(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){zb(this,a)}},It.qa=function(){typeof am<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,bi(this,"timeout"),this.abort(8))},It.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,bi(this,"complete"),bi(this,"abort"),Rm(this))},It.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Rm(this,!0)),dr.X.M.call(this)},It.Ha=function(){this.s||(this.F||this.v||this.l?Wb(this):this.fb())},It.fb=function(){Wb(this)},It.aa=function(){try{return 2<Ga(this)?this.g.status:-1}catch{return-1}},It.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},It.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),oS(e)}},It.Ea=function(){return this.m},It.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(It=Zb.prototype).ma=8,It.G=1,It.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new Xd(this,this.j,n,void 0);let a=this.s;if(this.S&&(a?(a=_b(a),vb(a,this.S)):a=this.S),null!==this.o||this.N||(i.H=a,a=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Fm(this,i,e),$n(t=za(this.F),"RID",n),$n(t,"CVER",22),this.D&&$n(t,"X-HTTP-Session-Id",this.D),oh(this,t),a&&(this.N?e="headers="+encodeURIComponent(String($v(a)))+"&"+e:this.o&&xm(t,this.o,a)),Uv(this.h,i),this.Ya&&$n(t,"TYPE","init"),this.O?($n(t,"$req",e),$n(t,"SID","null"),i.Z=!0,Im(i,t,null)):Im(i,t,e),this.G=2}}else 3==this.G&&(n?km(this,n):0==this.i.length||Bb(this.h)||km(this))},It.Ia=function(){if(this.u=null,Xb(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=wm(ai(this.eb,this),n)}},It.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Ri(10),Nm(this),Xb(this))},It.cb=function(){null!=this.v&&(this.v=null,Nm(this),Hv(this),Ri(19))},It.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Ri(2)):(this.j.info("Failed to ping google.com"),Ri(1))},(It=Jb.prototype).xa=function(){},It.wa=function(){},It.va=function(){},It.ua=function(){},It.Ra=function(){},ah.prototype.g=function(n,e){return new Ss(n,e)},Kr(Ss,ui),Ss.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Ri(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=Gv(n,null,n.V),Pm(n)},Ss.prototype.close=function(){Om(this.g)},Ss.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Ev(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&Pm(e)},Ss.prototype.M=function(){this.g.l=null,delete this.j,Om(this.g),delete this.g,Ss.X.M.call(this)},Kr(Wv,Yd),Kr(Um,Qd),Kr(Ic,Jb),Ic.prototype.xa=function(){bi(this.g,"a")},Ic.prototype.wa=function(n){bi(this.g,new Wv(n))},Ic.prototype.va=function(n){bi(this.g,new Um)},Ic.prototype.ua=function(){bi(this.g,"b")},ah.prototype.createWebChannel=ah.prototype.g,Ss.prototype.send=Ss.prototype.u,Ss.prototype.open=Ss.prototype.m,Ss.prototype.close=Ss.prototype.close,Ot.NO_ERROR=0,Ot.TIMEOUT=8,Ot.HTTP_ERROR=6,Mb.COMPLETE="complete",vc.EventType=Jf,Jf.OPEN="a",Jf.CLOSE="b",Jf.ERROR="c",Jf.MESSAGE="d",ui.prototype.listen=ui.prototype.N,dr.prototype.listenOnce=dr.prototype.O,dr.prototype.getLastError=dr.prototype.Oa,dr.prototype.getLastErrorCode=dr.prototype.Ea,dr.prototype.getStatus=dr.prototype.aa,dr.prototype.getResponseJson=dr.prototype.Sa,dr.prototype.getResponseText=dr.prototype.fa,dr.prototype.send=dr.prototype.da,dr.prototype.setWithCredentials=dr.prototype.Ka;var eI=ea.createWebChannelTransport=function(){return new ah},tI=ea.getStatEventTarget=function(){return ja()},Vm=ea.ErrorCode=Ot,cS=ea.EventType=Mb,dS=ea.Event=yc,nI=ea.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},hS=ea.FetchXmlHttpFactory=op,dp=ea.WebChannel=vc,Nx=ea.XhrIo=dr;const qv="@firebase/firestore";class li{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}li.UNAUTHENTICATED=new li(null),li.GOOGLE_CREDENTIALS=new li("google-credentials-uid"),li.FIRST_PARTY=new li("first-party-uid"),li.MOCK_USER=new li("mock-user");let uh="9.17.1";const Dc=new Wu.Yd("@firebase/firestore");function Kv(){return Dc.logLevel}function Ve(n,...e){if(Dc.logLevel<=Wu.in.DEBUG){const t=e.map(Zv);Dc.debug(`Firestore (${uh}): ${n}`,...t)}}function hr(n,...e){if(Dc.logLevel<=Wu.in.ERROR){const t=e.map(Zv);Dc.error(`Firestore (${uh}): ${n}`,...t)}}function Cc(n,...e){if(Dc.logLevel<=Wu.in.WARN){const t=e.map(Zv);Dc.warn(`Firestore (${uh}): ${n}`,...t)}}function Zv(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function gt(n="Unexpected state"){const e=`FIRESTORE (${uh}) INTERNAL ASSERTION FAILED: `+n;throw hr(e),new Error(e)}function Dt(n,e){n||gt()}function nt(n,e){return n}const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Fe extends sn.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Jn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Yv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class rI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(li.UNAUTHENTICATED))}shutdown(){}}class iI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class sI{constructor(e){this.t=e,this.currentUser=li.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=E=>this.i!==i?(i=this.i,t(E)):Promise.resolve();let l=new Jn;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Jn,e.enqueueRetryable(()=>a(this.currentUser))};const f=()=>{const E=l;e.enqueueRetryable((0,Ee.Z)(function*(){yield E.promise,yield a(r.currentUser)}))},y=E=>{Ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=E,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(E=>y(E)),setTimeout(()=>{if(!this.auth){const E=this.t.getImmediate({optional:!0});E?y(E):(Ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Jn)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Dt("string"==typeof r.accessToken),new Yv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Dt(null===e||"string"==typeof e),new li(e)}}class oI{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=li.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Dt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class gS{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new oI(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(li.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class aI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Px{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=a=>{null!=a.error&&Ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.A;return this.A=a.token,Ve("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.T.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.T.getImmediate({optional:!0});a?i(a):Ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Dt("string"==typeof t.token),this.A=t.token,new aI(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function mS(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class uI{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=mS(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Kt(n,e){return n<e?-1:n>e?1:0}function lh(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function ch(n){return n+"\0"}class qn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Fe(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Fe(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Fe(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Fe(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return qn.fromMillis(Date.now())}static fromDate(e){return qn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new qn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Kt(this.nanoseconds,e.nanoseconds):Kt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class St{constructor(e){this.timestamp=e}static fromTimestamp(e){return new St(e)}static min(){return new St(new qn(0,0))}static max(){return new St(new qn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class rs{constructor(e,t,r){void 0===t?t=0:t>e.length&&gt(),void 0===r?r=e.length-t:r>e.length-t&&gt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===rs.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof rs?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),l=t.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class mn extends rs{construct(e,t,r){return new mn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Fe(pe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new mn(t)}static emptyPath(){return new mn([])}}const Qv=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kn extends rs{construct(e,t,r){return new kn(e,t,r)}static isValidIdentifier(e){return Qv.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new kn(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Fe(pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new Fe(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[i+1];if("\\"!==y&&"."!==y&&"`"!==y)throw new Fe(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,i+=2}else"`"===f?(l=!l,i++):"."!==f||l?(r+=f,i++):(a(),i++)}if(a(),l)throw new Fe(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kn(t)}static emptyPath(){return new kn([])}}class Je{constructor(e){this.path=e}static fromPath(e){return new Je(mn.fromString(e))}static fromName(e){return new Je(mn.fromString(e).popFirst(5))}static empty(){return new Je(mn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===mn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return mn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Je(new mn(e.slice()))}}class Bm{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Xv(n){return n.fields.find(e=>2===e.kind)}function ia(n){return n.fields.filter(e=>2!==e.kind)}Bm.UNKNOWN_ID=-1;class jm{constructor(e,t){this.fieldPath=e,this.kind=t}}class dh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new dh(0,is.min())}}function Jv(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=St.fromTimestamp(1e9===r?new qn(t+1,0):new qn(t,r));return new is(i,Je.empty(),e)}function Hm(n){return new is(n.readTime,n.key,-1)}class is{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new is(St.min(),Je.empty(),-1)}static max(){return new is(St.max(),Je.empty(),-1)}}function hp(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Je.comparator(n.documentKey,e.documentKey),0!==t?t:Kt(n.largestBatchId,e.largestBatchId))}const zm="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class eE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function sa(n){return fp.apply(this,arguments)}function fp(){return fp=(0,Ee.Z)(function*(n){if(n.code!==pe.FAILED_PRECONDITION||n.message!==zm)throw n;Ve("LocalStore","Unexpectedly lost primary lease")}),fp.apply(this,arguments)}class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&gt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new de((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof de?t:de.resolve(t)}catch(t){return de.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):de.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):de.reject(t)}static resolve(e){return new de((t,r)=>{t(e)})}static reject(e){return new de((t,r)=>{r(e)})}static waitFor(e){return new de((t,r)=>{let i=0,a=0,l=!1;e.forEach(f=>{++i,f.next(()=>{++a,l&&a===i&&t()},y=>r(y))}),l=!0,a===i&&t()})}static or(e){let t=de.resolve(!1);for(const r of e)t=t.next(i=>i?de.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new de((r,i)=>{const a=e.length,l=new Array(a);let f=0;for(let y=0;y<a;y++){const E=y;t(e[E]).next(C=>{l[E]=C,++f,f===a&&r(l)},C=>i(C))}})}static doWhile(e,t){return new de((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class Gm{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Jn,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new hh(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=Wm(r.target.error);this.P.reject(new hh(e,i))}}static open(e,t,r,i){try{return new Gm(t,e.transaction(i,r))}catch(a){throw new hh(t,a)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Ve("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new lI(t)}}class yo{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===yo.D((0,sn.z$)())&&hr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ve("SimpleDb","Removing database:",e),Tc(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,sn.hl)())return!1;if(yo.N())return!0;const e=(0,sn.z$)(),t=yo.D(e),r=0<t&&t<10,i=yo.k(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,Ee.Z)(function*(){return t.db||(Ve("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=l=>{r(l.target.result)},a.onblocked=()=>{i(new hh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const f=l.target.error;i("VersionError"===f.name?new Fe(pe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new Fe(pe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new hh(e,f))},a.onupgradeneeded=l=>{Ve("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.S.$(l.target.result,a.transaction,l.oldVersion,t.version).next(()=>{Ve("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,Ee.Z)(function*(){const l="readonly"===t;let f=0;for(;;){++f;try{a.db=yield a.F(e);const y=Gm.open(a.db,e,l?"readonly":"readwrite",r),E=i(y).next(C=>(y.V(),C)).catch(C=>(y.abort(C),de.reject(C))).toPromise();return E.catch(()=>{}),yield y.v,E}catch(y){const E=y,C="FirebaseError"!==E.name&&f<3;if(Ve("SimpleDb","Transaction failed with error:",E.message,"Retrying:",C),a.close(),!C)return Promise.reject(E)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class _S{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return Tc(this.q.delete())}}class hh extends Fe{constructor(e,t){super(pe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function oa(n){return"IndexedDbTransactionError"===n.name}class lI{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ve("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ve("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Tc(r)}add(e){return Ve("SimpleDb","ADD",this.store.name,e,e),Tc(this.store.add(e))}get(e){return Tc(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ve("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ve("SimpleDb","DELETE",this.store.name,e),Tc(this.store.delete(e))}count(){return Ve("SimpleDb","COUNT",this.store.name),Tc(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.H(i,(l,f)=>{a.push(f)}).next(()=>a)}{const i=this.store.getAll(r.range);return new de((a,l)=>{i.onerror=f=>{l(f.target.error)},i.onsuccess=f=>{a(f.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new de((i,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}Y(e,t){Ve("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(a,l,f)=>f.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new de((r,i)=>{t.onerror=a=>{const l=Wm(a.target.error);i(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next(f=>{f?l.continue():r()}):r()}})}H(e,t){const r=[];return new de((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const f=l.target.result;if(!f)return void i();const y=new _S(f),E=t(f.primaryKey,f.value,y);if(E instanceof de){const C=E.catch(M=>(y.done(),de.reject(M)));r.push(C)}y.isDone?i():null===y.G?f.continue():f.continue(y.G)}}).next(()=>de.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Tc(n){return new de((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Wm(r.target.error);t(i)}})}let tE=!1;function Wm(n){const e=yo.D((0,sn.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Fe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return tE||(tE=!0,setTimeout(()=>{throw r},0)),r}}return n}class vS{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Ve("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ee.Z)(function*(){t.task=null;try{Ve("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){oa(r)?Ve("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield sa(r)}yield t.nt(6e4)}))}}class cI{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,Ee.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,a=!0;return de.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Ve("IndexBackiller",`Processing collection: ${l}`),this.rt(e,l,i).next(f=>{i-=f,r.add(l)});a=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.ot(i,a)).next(f=>(Ve("IndexBackiller",`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f))).next(()=>l.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,a)=>{const l=Hm(a);hp(l,r)>0&&(r=l)}),new is(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let ss=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ut(i),this.ct=i=>r.writeSequenceNumber(i))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return n.at=-1,n})();class ES{constructor(e,t,r,i,a,l,f,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=f,this.useFetchStreams=y}}class Wa{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Wa("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Wa&&e.projectId===this.projectId&&e.database===this.database}}function nE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function br(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Sc(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function pp(n){return null==n}function gp(n){return 0===n&&1/n==-1/0}function wS(n){return"number"==typeof n&&Number.isInteger(n)&&!gp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Lr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Lr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new Lr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Kt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Lr.EMPTY_BYTE_STRING=new Lr("");const dI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Js(n){if(Dt(!!n),"string"==typeof n){let e=0;const t=dI.exec(n);if(Dt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:fr(n.seconds),nanos:fr(n.nanos)}}function fr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function qa(n){return"string"==typeof n?Lr.fromBase64String(n):Lr.fromUint8Array(n)}function rE(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function iE(n){const e=n.mapValue.fields.__previous_value__;return rE(e)?iE(e):e}function mp(n){const e=Js(n.mapValue.fields.__local_write_time__.timestampValue);return new qn(e.seconds,e.nanos)}const tl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},qm={nullValue:"NULL_VALUE"};function Ka(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?rE(n)?4:fI(n)?9007199254740991:10:gt()}function _o(n,e){if(n===e)return!0;const t=Ka(n);if(t!==Ka(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return mp(n).isEqual(mp(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=Js(r.timestampValue),l=Js(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,qa(n.bytesValue).isEqual(qa(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return fr(r.geoPointValue.latitude)===fr(i.geoPointValue.latitude)&&fr(r.geoPointValue.longitude)===fr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return fr(r.integerValue)===fr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=fr(r.doubleValue),l=fr(i.doubleValue);return a===l?gp(a)===gp(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return lh(n.arrayValue.values||[],e.arrayValue.values||[],_o);case 10:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(nE(a)!==nE(l))return!1;for(const f in a)if(a.hasOwnProperty(f)&&(void 0===l[f]||!_o(a[f],l[f])))return!1;return!0}(n,e);default:return gt()}var i}function fh(n,e){return void 0!==(n.values||[]).find(t=>_o(t,e))}function vo(n,e){if(n===e)return 0;const t=Ka(n),r=Ka(e);if(t!==r)return Kt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Kt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const l=fr(i.integerValue||i.doubleValue),f=fr(a.integerValue||a.doubleValue);return l<f?-1:l>f?1:l===f?0:isNaN(l)?isNaN(f)?0:-1:1}(n,e);case 3:return Km(n.timestampValue,e.timestampValue);case 4:return Km(mp(n),mp(e));case 5:return Kt(n.stringValue,e.stringValue);case 6:return function(i,a){const l=qa(i),f=qa(a);return l.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),f=a.split("/");for(let y=0;y<l.length&&y<f.length;y++){const E=Kt(l[y],f[y]);if(0!==E)return E}return Kt(l.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const l=Kt(fr(i.latitude),fr(a.latitude));return 0!==l?l:Kt(fr(i.longitude),fr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const l=i.values||[],f=a.values||[];for(let y=0;y<l.length&&y<f.length;++y){const E=vo(l[y],f[y]);if(E)return E}return Kt(l.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===tl.mapValue&&a===tl.mapValue)return 0;if(i===tl.mapValue)return 1;if(a===tl.mapValue)return-1;const l=i.fields||{},f=Object.keys(l),y=a.fields||{},E=Object.keys(y);f.sort(),E.sort();for(let C=0;C<f.length&&C<E.length;++C){const M=Kt(f[C],E[C]);if(0!==M)return M;const L=vo(l[f[C]],y[E[C]]);if(0!==L)return L}return Kt(f.length,E.length)}(n.mapValue,e.mapValue);default:throw gt()}}function Km(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Kt(n,e);const t=Js(n),r=Js(e),i=Kt(t.seconds,r.seconds);return 0!==i?i:Kt(t.nanos,r.nanos)}function yp(n){return Zm(n)}function Zm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Js(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?qa(n.bytesValue).toBase64():"referenceValue"in n?Je.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const l of r.values||[])a?a=!1:i+=",",i+=Zm(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",l=!0;for(const f of i)l?l=!1:a+=",",a+=`${f}:${Zm(r.fields[f])}`;return a+"}"}(n.mapValue):gt();var e}function Ac(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Ym(n){return!!n&&"integerValue"in n}function aa(n){return!!n&&"arrayValue"in n}function hI(n){return!!n&&"nullValue"in n}function sE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ph(n){return!!n&&"mapValue"in n}function Qm(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return br(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Qm(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Qm(n.arrayValue.values[t]);return e}return Object.assign({},n)}function fI(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Lx(n){return"nullValue"in n?qm:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ac(Wa.empty(),Je.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:gt()}function bS(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ac(Wa.empty(),Je.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?tl:gt()}function pI(n,e){const t=vo(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function gI(n,e){const t=vo(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Za{constructor(e,t){this.position=e,this.inclusive=t}}function oE(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(r=a.field.isKeyField()?Je.comparator(Je.fromName(l.referenceValue),t.key):vo(l,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function mI(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!_o(n.position[t],e.position[t]))return!1;return!0}class aE{}class ln extends aE{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new IS(e,t,r):"array-contains"===t?new Vx(e,r):"in"===t?new CS(e,r):"not-in"===t?new Bx(e,r):"array-contains-any"===t?new $x(e,r):new ln(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new Ux(e,r):new _I(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(vo(t,this.value)):null!==t&&Ka(this.value)===Ka(t)&&this.matchesComparison(vo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return gt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Sn extends aE{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new Sn(e,t)}matches(e){return gh(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function gh(n){return"and"===n.op}function Xm(n){return"or"===n.op}function uE(n){return lE(n)&&gh(n)}function lE(n){for(const e of n.filters)if(e instanceof Sn)return!1;return!0}function Jm(n){if(n instanceof ln)return n.field.canonicalString()+n.op.toString()+yp(n.value);if(uE(n))return n.filters.map(e=>Jm(e)).join(",");{const e=n.filters.map(t=>Jm(t)).join(",");return`${n.op}(${e})`}}function cE(n,e){return n instanceof ln?(t=n,(r=e)instanceof ln&&t.op===r.op&&t.field.isEqual(r.field)&&_o(t.value,r.value)):n instanceof Sn?function(t,r){return r instanceof Sn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,a,l)=>i&&cE(a,r.filters[l]),!0)}(n,e):void gt();var t,r}function dE(n,e){const t=n.filters.concat(e);return Sn.create(t,n.op)}function yI(n){return n instanceof ln?`${(e=n).field.canonicalString()} ${e.op} ${yp(e.value)}`:n instanceof Sn?function(e){return e.op.toString()+" {"+e.getFilters().map(yI).join(" ,")+"}"}(n):"Filter";var e}class IS extends ln{constructor(e,t,r){super(e,t,r),this.key=Je.fromName(r.referenceValue)}matches(e){const t=Je.comparator(e.key,this.key);return this.matchesComparison(t)}}class Ux extends ln{constructor(e,t){super(e,"in",t),this.keys=DS(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class _I extends ln{constructor(e,t){super(e,"not-in",t),this.keys=DS(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function DS(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Je.fromName(r.referenceValue))}class Vx extends ln{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return aa(t)&&fh(t.arrayValue,this.value)}}class CS extends ln{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&fh(this.value.arrayValue,t)}}class Bx extends ln{constructor(e,t){super(e,"not-in",t)}matches(e){if(fh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!fh(this.value.arrayValue,t)}}class $x extends ln{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!aa(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>fh(this.value.arrayValue,r))}}class _p{constructor(e,t="asc"){this.field=e,this.dir=t}}function jx(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Ir{constructor(e,t){this.comparator=e,this.root=t||xi.EMPTY}insert(e,t){return new Ir(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,xi.BLACK,null,null))}remove(e){return new Ir(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Mc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Mc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Mc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Mc(this.root,e,this.comparator,!0)}}class Mc{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class xi{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??xi.RED,this.left=i??xi.EMPTY,this.right=a??xi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new xi(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return xi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return xi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,xi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,xi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw gt();const e=this.left.check();if(e!==this.right.check())throw gt();return e+(this.isRed()?0:1)}}xi.EMPTY=null,xi.RED=!0,xi.BLACK=!1,xi.EMPTY=new class{constructor(){this.size=0}get key(){throw gt()}get value(){throw gt()}get color(){throw gt()}get left(){throw gt()}get right(){throw gt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new xi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class An{constructor(e){this.comparator=e,this.data=new Ir(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new vp(this.data.getIterator())}getIteratorFrom(e){return new vp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof An)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new An(this.comparator);return t.data=e,t}}class vp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Rc(n){return n.hasNext()?n.getNext():void 0}class Ki{constructor(e){this.fields=e,e.sort(kn.comparator)}static empty(){return new Ki([])}unionWith(e){let t=new An(kn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ki(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return lh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Oi{constructor(e){this.value=e}static empty(){return new Oi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!ph(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Qm(t)}setAll(e){let t=kn.emptyPath(),r={},i=[];e.forEach((l,f)=>{if(!t.isImmediateParentOf(f)){const y=this.getFieldsMap(t);this.applyChanges(y,r,i),r={},i=[],t=f.popLast()}l?r[f.lastSegment()]=Qm(l):i.push(f.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());ph(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return _o(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];ph(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){br(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Oi(Qm(this.value))}}function ey(n){const e=[];return br(n.fields,(t,r)=>{const i=new kn([t]);if(ph(r)){const a=ey(r.mapValue).fields;if(0===a.length)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new Ki(e)}class Fn{constructor(e,t,r,i,a,l,f){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=l,this.documentState=f}static newInvalidDocument(e){return new Fn(e,0,St.min(),St.min(),St.min(),Oi.empty(),0)}static newFoundDocument(e,t,r,i){return new Fn(e,1,t,St.min(),r,i,0)}static newNoDocument(e,t){return new Fn(e,2,t,St.min(),St.min(),Oi.empty(),0)}static newUnknownDocument(e,t){return new Fn(e,3,t,St.min(),St.min(),Oi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(St.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Oi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Oi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=St.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Fn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Fn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class TS{constructor(e,t=null,r=[],i=[],a=null,l=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=f,this.ft=null}}function ty(n,e=null,t=[],r=[],i=null,a=null,l=null){return new TS(n,e,t,r,i,a,l)}function mh(n){const e=nt(n);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Jm(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),pp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>yp(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>yp(r)).join(",")),e.ft=t}return e.ft}function Ep(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!jx(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!cE(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!mI(n.startAt,e.startAt)&&mI(n.endAt,e.endAt)}function ny(n){return Je.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function ry(n,e){return n.filters.filter(t=>t instanceof ln&&t.field.isEqual(e))}function wp(n,e,t){let r=qm,i=!0;for(const a of ry(n,e)){let l=qm,f=!0;switch(a.op){case"<":case"<=":l=Lx(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,f=!1;break;case"!=":case"not-in":l=qm}pI({value:r,inclusive:i},{value:l,inclusive:f})<0&&(r=l,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];pI({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function vI(n,e,t){let r=tl,i=!0;for(const a of ry(n,e)){let l=tl,f=!0;switch(a.op){case">=":case">":l=bS(a.value),f=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,f=!1;break;case"!=":case"not-in":l=tl}gI({value:r,inclusive:i},{value:l,inclusive:f})>0&&(r=l,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];gI({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class nl{constructor(e,t=null,r=[],i=[],a=null,l="F",f=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=f,this.endAt=y,this.dt=null,this._t=null}}function SS(n,e,t,r,i,a,l,f){return new nl(n,e,t,r,i,a,l,f)}function bp(n){return new nl(n)}function EI(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function hE(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function iy(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function wI(n){return null!==n.collectionGroup}function xc(n){const e=nt(n);if(null===e.dt){e.dt=[];const t=iy(e),r=hE(e);if(null!==t&&null===r)t.isKeyField()||e.dt.push(new _p(t)),e.dt.push(new _p(kn.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.dt.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new _p(kn.keyField(),a))}}}return e.dt}function Ni(n){const e=nt(n);if(!e._t)if("F"===e.limitType)e._t=ty(e.path,e.collectionGroup,xc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of xc(e))t.push(new _p(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new Za(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Za(e.startAt.position,e.startAt.inclusive):null;e._t=ty(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function sy(n,e){e.getFirstInequalityField(),iy(n);const t=n.filters.concat([e]);return new nl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function fE(n,e,t){return new nl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Zi(n,e){return Ep(Ni(n),Ni(e))&&n.limitType===e.limitType}function bI(n){return`${mh(Ni(n))}|lt:${n.limitType}`}function Ip(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>yI(r)).join(", ")}]`),pp(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>yp(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>yp(r)).join(",")),`Target(${t})`}(Ni(n))}; limitType=${n.limitType})`}function Dp(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Je.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of xc(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,l){const f=oE(i,a,l);return i.inclusive?f<=0:f<0}(t.startAt,xc(t),r)||t.endAt&&!function(i,a,l){const f=oE(i,a,l);return i.inclusive?f>=0:f>0}(t.endAt,xc(t),r)));var t,r}function AS(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function As(n){return(e,t)=>{let r=!1;for(const i of xc(n)){const a=MS(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function MS(n,e,t){const r=n.field.isKeyField()?Je.comparator(e.key,t.key):function(i,a,l){const f=a.data.field(i),y=l.data.field(i);return null!==f&&null!==y?vo(f,y):gt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return gt()}}function oy(n,e){if(n.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gp(e)?"-0":e}}function II(n){return{integerValue:""+n}}function DI(n,e){return wS(e)?II(e):oy(n,e)}class yh{constructor(){this._=void 0}}function CI(n,e,t){return n instanceof Oc?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof rl?AI(n,e):n instanceof il?MI(n,e):function(r,i){const a=SI(r,i),l=Ya(a)+Ya(r.gt);return Ym(a)&&Ym(r.gt)?II(l):oy(r.yt,l)}(n,e)}function TI(n,e,t){return n instanceof rl?AI(n,e):n instanceof il?MI(n,e):t}function SI(n,e){return n instanceof sl?Ym(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Oc extends yh{}class rl extends yh{constructor(e){super(),this.elements=e}}function AI(n,e){const t=pE(e);for(const r of n.elements)t.some(i=>_o(i,r))||t.push(r);return{arrayValue:{values:t}}}class il extends yh{constructor(e){super(),this.elements=e}}function MI(n,e){let t=pE(e);for(const r of n.elements)t=t.filter(i=>!_o(i,r));return{arrayValue:{values:t}}}class sl extends yh{constructor(e,t){super(),this.yt=e,this.gt=t}}function Ya(n){return fr(n.integerValue||n.doubleValue)}function pE(n){return aa(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Nc{constructor(e,t){this.field=e,this.transform=t}}class RS{constructor(e,t){this.version=e,this.transformResults=t}}class er{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new er}static exists(e){return new er(void 0,e)}static updateTime(e){return new er(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ay(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class uy{}function RI(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Pc(n.key,er.none()):new vh(n.key,n.data,er.none());{const t=n.data,r=Oi.empty();let i=new An(kn.comparator);for(let a of e.fields)if(!i.has(a)){let l=t.field(a);null===l&&a.length>1&&(a=a.popLast(),l=t.field(a)),null===l?r.delete(a):r.set(a,l),i=i.add(a)}return new ua(n.key,r,new Ki(i.toArray()),er.none())}}function xS(n,e,t){n instanceof vh?function(r,i,a){const l=r.value.clone(),f=ly(r.fieldTransforms,i,a.transformResults);l.setAll(f),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof ua?function(r,i,a){if(!ay(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=ly(r.fieldTransforms,i,a.transformResults),f=i.data;f.setAll(OS(r)),f.setAll(l),i.convertToFoundDocument(a.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function _h(n,e,t,r){return n instanceof vh?function(i,a,l,f){if(!ay(i.precondition,a))return l;const y=i.value.clone(),E=mE(i.fieldTransforms,f,a);return y.setAll(E),a.convertToFoundDocument(a.version,y).setHasLocalMutations(),null}(n,e,t,r):n instanceof ua?function(i,a,l,f){if(!ay(i.precondition,a))return l;const y=mE(i.fieldTransforms,f,a),E=a.data;return E.setAll(OS(i)),E.setAll(y),a.convertToFoundDocument(a.version,E).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(C=>C.field))}(n,e,t,r):(l=t,ay(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l);var a,l}function Hx(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=SI(r.transform,i||null);null!=a&&(null===t&&(t=Oi.empty()),t.set(r.field,a))}return t||null}function gE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&lh(t,r,(i,a)=>function Qa(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof rl&&r instanceof rl||t instanceof il&&r instanceof il?lh(t.elements,r.elements,_o):t instanceof sl&&r instanceof sl?_o(t.gt,r.gt):t instanceof Oc&&r instanceof Oc);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class vh extends uy{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ua extends uy{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function OS(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function ly(n,e,t){const r=new Map;Dt(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,f=e.data.field(a.field);r.set(a.field,TI(l,f,t[i]))}return r}function mE(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,CI(a,l,e))}return r}class Pc extends uy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class cy extends uy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class xI{constructor(e){this.count=e}}var Dr,cn;function Cp(n){switch(n){default:return gt();case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0}}function yE(n){if(void 0===n)return hr("GRPC error has no .code"),pe.UNKNOWN;switch(n){case Dr.OK:return pe.OK;case Dr.CANCELLED:return pe.CANCELLED;case Dr.UNKNOWN:return pe.UNKNOWN;case Dr.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case Dr.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case Dr.INTERNAL:return pe.INTERNAL;case Dr.UNAVAILABLE:return pe.UNAVAILABLE;case Dr.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case Dr.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case Dr.NOT_FOUND:return pe.NOT_FOUND;case Dr.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case Dr.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case Dr.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case Dr.ABORTED:return pe.ABORTED;case Dr.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case Dr.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case Dr.DATA_LOSS:return pe.DATA_LOSS;default:return gt()}}(cn=Dr||(Dr={}))[cn.OK=0]="OK",cn[cn.CANCELLED=1]="CANCELLED",cn[cn.UNKNOWN=2]="UNKNOWN",cn[cn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",cn[cn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",cn[cn.NOT_FOUND=5]="NOT_FOUND",cn[cn.ALREADY_EXISTS=6]="ALREADY_EXISTS",cn[cn.PERMISSION_DENIED=7]="PERMISSION_DENIED",cn[cn.UNAUTHENTICATED=16]="UNAUTHENTICATED",cn[cn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",cn[cn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",cn[cn.ABORTED=10]="ABORTED",cn[cn.OUT_OF_RANGE=11]="OUT_OF_RANGE",cn[cn.UNIMPLEMENTED=12]="UNIMPLEMENTED",cn[cn.INTERNAL=13]="INTERNAL",cn[cn.UNAVAILABLE=14]="UNAVAILABLE",cn[cn.DATA_LOSS=15]="DATA_LOSS";class ol{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){br(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return Sc(this.inner)}size(){return this.innerSize}}const NS=new Ir(Je.comparator);function Ms(){return NS}const PS=new Ir(Je.comparator);function dy(...n){let e=PS;for(const t of n)e=e.insert(t.key,t);return e}function _E(n){let e=PS;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function la(){return Tp()}function OI(){return Tp()}function Tp(){return new ol(n=>n.toString(),(n,e)=>n.isEqual(e))}const zx=new Ir(Je.comparator),Gx=new An(Je.comparator);function tn(...n){let e=Gx;for(const t of n)e=e.add(t);return e}const Wx=new An(Kt);function vE(){return Wx}class Sp{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,al.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Sp(St.min(),i,vE(),Ms(),tn())}}class al{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new al(r,t,tn(),tn(),tn())}}class hy{constructor(e,t,r,i){this.It=e,this.removedTargetIds=t,this.key=r,this.Tt=i}}class NI{constructor(e,t){this.targetId=e,this.Et=t}}class EE{constructor(e,t,r=Lr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class ul{constructor(){this.At=0,this.Rt=py(),this.bt=Lr.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=tn(),t=tn(),r=tn();return this.Rt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:gt()}}),new al(this.bt,this.Pt,e,t,r)}xt(){this.vt=!1,this.Rt=py()}Nt(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class PI{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=Ms(),this.qt=fy(),this.Ut=new An(Kt)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}jt(e){this.forEachTarget(e,t=>{const r=this.Wt(t);switch(e.state){case 0:this.zt(t)&&r.Dt(e.resumeToken);break;case 1:r.Mt(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.Mt(),r.Vt||this.removeTarget(t);break;case 3:this.zt(t)&&(r.Ft(),r.Dt(e.resumeToken));break;case 4:this.zt(t)&&(this.Ht(t),r.Dt(e.resumeToken));break;default:gt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((r,i)=>{this.zt(i)&&t(i)})}Jt(e){const t=e.targetId,r=e.Et.count,i=this.Yt(t);if(i){const a=i.target;if(ny(a))if(0===r){const l=new Je(a.path);this.Qt(t,l,Fn.newNoDocument(l,St.min()))}else Dt(1===r);else this.Xt(t)!==r&&(this.Ht(t),this.Ut=this.Ut.add(t))}}Zt(e){const t=new Map;this.Bt.forEach((a,l)=>{const f=this.Yt(l);if(f){if(a.current&&ny(f.target)){const y=new Je(f.target.path);null!==this.Lt.get(y)||this.te(l,y)||this.Qt(l,y,Fn.newNoDocument(y,e))}a.St&&(t.set(l,a.Ct()),a.xt())}});let r=tn();this.qt.forEach((a,l)=>{let f=!0;l.forEachWhile(y=>{const E=this.Yt(y);return!E||2===E.purpose||(f=!1,!1)}),f&&(r=r.add(a))}),this.Lt.forEach((a,l)=>l.setReadTime(e));const i=new Sp(e,t,this.Ut,this.Lt,r);return this.Lt=Ms(),this.qt=fy(),this.Ut=new An(Kt),i}Gt(e,t){if(!this.zt(e))return;const r=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,r),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,r){if(!this.zt(e))return;const i=this.Wt(e);this.te(e,t)?i.Nt(t,1):i.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),r&&(this.Lt=this.Lt.insert(t,r))}removeTarget(e){this.Bt.delete(e)}Xt(e){const t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let t=this.Bt.get(e);return t||(t=new ul,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new An(Kt),this.qt=this.qt.insert(e,t)),t}zt(e){const t=null!==this.Yt(e);return t||Ve("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new ul),this.$t.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}function fy(){return new Ir(Je.comparator)}function py(){return new Ir(Je.comparator)}const kS={asc:"ASCENDING",desc:"DESCENDING"},wE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bE={and:"AND",or:"OR"};class gy{constructor(e,t){this.databaseId=e,this.wt=t}}function Ap(n,e){return n.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function FS(n,e){return n.wt?e.toBase64():e.toUint8Array()}function qx(n,e){return Ap(n,e.toTimestamp())}function Ur(n){return Dt(!!n),St.fromTimestamp(function(e){const t=Js(e);return new qn(t.seconds,t.nanos)}(n))}function my(n,e){return(t=n,new mn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function kI(n){const e=mn.fromString(n);return Dt($I(e)),e}function Mp(n,e){return my(n.databaseId,e.path)}function ca(n,e){const t=kI(e);if(t.get(1)!==n.databaseId.projectId)throw new Fe(pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Fe(pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Je(CE(t))}function IE(n,e){return my(n.databaseId,e)}function DE(n){const e=kI(n);return 4===e.length?mn.emptyPath():CE(e)}function Eh(n){return new mn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function CE(n){return Dt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function FI(n,e,t){return{name:Mp(n,e),fields:t.value.mapValue.fields}}function LI(n,e,t){const r=ca(n,e.name),i=Ur(e.updateTime),a=e.createTime?Ur(e.createTime):St.min(),l=new Oi({mapValue:{fields:e.fields}}),f=Fn.newFoundDocument(r,i,a,l);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function yy(n,e){let t;if(e instanceof vh)t={update:FI(n,e.key,e.value)};else if(e instanceof Pc)t={delete:Mp(n,e.key)};else if(e instanceof ua)t={update:FI(n,e.key,e.data),updateMask:Yx(e.fieldMask)};else{if(!(e instanceof cy))return gt();t={verify:Mp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof Oc)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof rl)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof il)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof sl)return{fieldPath:a.field.canonicalString(),increment:l.gt};throw gt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:qx(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:gt()),t;var i}function _y(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?er.updateTime(Ur(i.updateTime)):void 0!==i.exists?er.exists(i.exists):er.none():er.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,l){let f=null;"setToServerValue"in l?(Dt("REQUEST_TIME"===l.setToServerValue),f=new Oc):"appendMissingElements"in l?f=new rl(l.appendMissingElements.values||[]):"removeAllFromArray"in l?f=new il(l.removeAllFromArray.values||[]):"increment"in l?f=new sl(a,l.increment):gt();const y=kn.fromServerFormat(l.fieldPath);return new Nc(y,f)}(n,i)):[];var i;if(e.update){const i=ca(n,e.update.name),a=new Oi({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Ki((e.updateMask.fieldPaths||[]).map(E=>kn.fromServerFormat(E)));return new ua(i,a,l,t,r)}return new vh(i,a,t,r)}if(e.delete){const i=ca(n,e.delete);return new Pc(i,t)}if(e.verify){const i=ca(n,e.verify);return new cy(i,t)}return gt()}function VI(n,e){return{documents:[IE(n,e.path)]}}function AE(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=IE(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=IE(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(y){if(0!==y.length)return BS(Sn.create(y,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const a=function(y){if(0!==y.length)return y.map(E=>{return{field:Rp((C=E).field),direction:US(C.dir)};var C})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=(E=e.limit,n.wt||pp(E)?E:{value:E});var E,f,y;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(y=e.endAt).inclusive,values:y.position}),t}function LS(n){let e=DE(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Dt(1===r);const C=t.from[0];C.allDescendants?i=C.collectionId:e=e.child(C.collectionId)}let a=[];t.where&&(a=function(C){const M=BI(C);return M instanceof Sn&&uE(M)?M.getFilters():[M]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(C=>{return new _p(xp((M=C).field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction));var M}));let f=null;t.limit&&(f=function(C){let M;return M="object"==typeof C?C.value:C,pp(M)?null:M}(t.limit));let y=null;var C;t.startAt&&(y=new Za((C=t.startAt).values||[],!!C.before));let E=null;return t.endAt&&(E=function(C){return new Za(C.values||[],!C.before)}(t.endAt)),SS(e,i,l,a,f,"F",y,E)}function BI(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=xp(e.unaryFilter.field);return ln.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=xp(e.unaryFilter.field);return ln.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=xp(e.unaryFilter.field);return ln.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=xp(e.unaryFilter.field);return ln.create(a,"!=",{nullValue:"NULL_VALUE"});default:return gt()}}(n):void 0!==n.fieldFilter?ln.create(xp((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return gt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return Sn.create(e.compositeFilter.filters.map(t=>BI(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return gt()}}(e.compositeFilter.op))}(n):gt();var e}function US(n){return kS[n]}function VS(n){return wE[n]}function Zx(n){return bE[n]}function Rp(n){return{fieldPath:n.canonicalString()}}function xp(n){return kn.fromServerFormat(n.fieldPath)}function BS(n){return n instanceof ln?function(e){if("=="===e.op){if(sE(e.value))return{unaryFilter:{field:Rp(e.field),op:"IS_NAN"}};if(hI(e.value))return{unaryFilter:{field:Rp(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(sE(e.value))return{unaryFilter:{field:Rp(e.field),op:"IS_NOT_NAN"}};if(hI(e.value))return{unaryFilter:{field:Rp(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Rp(e.field),op:VS(e.op),value:e.value}}}(n):n instanceof Sn?function(e){const t=e.getFilters().map(r=>BS(r));return 1===t.length?t[0]:{compositeFilter:{op:Zx(e.op),filters:t}}}(n):gt()}function Yx(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function $I(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function os(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=$S(e)),e=Qx(n.get(t),e);return $S(e)}function Qx(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function $S(n){return n+"\x01\x01"}function Xa(n){const e=n.length;if(Dt(e>=2),2===e)return Dt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),mn.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const l=n.indexOf("\x01",a);switch((l<0||l>t)&&gt(),n.charAt(l+1)){case"\x01":const f=n.substring(a,l);let y;0===i.length?y=f:(i+=f,y=i,i=""),r.push(y);break;case"\x10":i+=n.substring(a,l),i+="\0";break;case"\x11":i+=n.substring(a,l+1);break;default:gt()}a=l+2}return new mn(r)}const jS=["userId","batchId"];function ME(n,e){return[n,os(e)]}function s(n,e,t){return[n,os(e),t]}const o={},u=["prefixPath","collectionGroup","readTime","documentId"],c=["prefixPath","collectionGroup","documentId"],h=["collectionGroup","readTime","prefixPath","documentId"],p=["canonicalId","targetId"],_=["targetId","path"],b=["path","targetId"],I=["collectionId","parent"],S=["indexId","uid"],O=["uid","sequenceNumber"],U=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Y=["indexId","uid","orderedDocumentKey"],re=["userId","collectionPath","documentId"],De=["userId","collectionPath","largestBatchId"],We=["userId","collectionGroup","largestBatchId"],et=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],yt=[...et,"documentOverlays"],Lt=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ue=Lt,Zt=[...Ue,"indexConfiguration","indexState","indexEntries"];class Ln extends eE{constructor(e,t){super(),this.se=e,this.currentSequenceNumber=t}}function un(n,e){const t=nt(n);return yo.M(t.se,e)}class jI{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&xS(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=_h(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=_h(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=OI();return this.mutations.forEach(i=>{const a=e.get(i.key),l=a.overlayedDocument;let f=this.applyToLocalView(l,a.mutatedFields);f=t.has(i.key)?null:f;const y=RI(l,f);null!==y&&r.set(i.key,y),l.isValidDocument()||l.convertToNoDocument(St.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),tn())}isEqual(e){return this.batchId===e.batchId&&lh(this.mutations,e.mutations,(t,r)=>gE(t,r))&&lh(this.baseMutations,e.baseMutations,(t,r)=>gE(t,r))}}class HS{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Dt(e.mutations.length===r.length);let i=zx;const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new HS(e,t,r,i)}}class zS{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class wh{constructor(e,t,r,i,a=St.min(),l=St.min(),f=Lr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=f}withSequenceNumber(e){return new wh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new wh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new wh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Xx{constructor(e){this.ie=e}}function Jx(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:HI(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Mp(i=n.ie,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:Ap(i,a.version.toTimestamp()),createTime:Ap(i,a.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Op(e.version)};else{if(!e.isUnknownDocument())return gt();r.unknownDocument={path:t.path.toArray(),version:Op(e.version)}}var i,a;return r}function HI(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Op(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Np(n){const e=new qn(n.seconds,n.nanoseconds);return St.fromTimestamp(e)}function Pp(n,e){const t=(e.baseMutations||[]).map(a=>_y(n.ie,a));for(let a=0;a<e.mutations.length-1;++a)a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(e.mutations[a].updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a);const r=e.mutations.map(a=>_y(n.ie,a)),i=qn.fromMillis(e.localWriteTimeMs);return new jI(e.batchId,i,t,r)}function RE(n){const e=Np(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Np(n.lastLimboFreeSnapshotVersion):St.min();let r;var i;return void 0!==n.query.documents?(Dt(1===(i=n.query).documents.length),r=Ni(bp(DE(i.documents[0])))):r=Ni(LS(n.query)),new wh(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Lr.fromBase64String(n.resumeToken))}function eO(n,e){const t=Op(e.snapshotVersion),r=Op(e.lastLimboFreeSnapshotVersion);let i;i=ny(e.target)?VI(n.ie,e.target):AE(n.ie,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:mh(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function GS(n){const e=LS({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?fE(e,e.limit,"L"):e}function WS(n,e){return new zS(e.largestBatchId,_y(n.ie,e.overlayMutation))}function tO(n,e){const t=e.path.lastSegment();return[n,os(e.path.popLast()),t]}function nO(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Op(r.readTime),documentKey:os(r.documentKey.path),largestBatchId:r.largestBatchId}}class AF{getBundleMetadata(e,t){return rO(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Np(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return rO(e).put({bundleId:(r=t).id,createTime:Op(Ur(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return iO(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:GS(i.bundledQuery),readTime:Np(i.readTime)};var i})}saveNamedQuery(e,t){return iO(e).put({name:(r=t).name,readTime:Op(Ur(r.readTime)),bundledQuery:r.bundledQuery});var r}}function rO(n){return un(n,"bundles")}function iO(n){return un(n,"namedQueries")}class zI{constructor(e,t){this.yt=e,this.userId=t}static re(e,t){return new zI(e,t.uid||"")}getOverlay(e,t){return xE(e).get(tO(this.userId,t)).next(r=>r?WS(this.yt,r):null)}getOverlays(e,t){const r=la();return de.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,l)=>{const f=new zS(t,l);i.push(this.oe(e,f))}),de.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(os(l.getCollectionPath())));const a=[];return i.forEach(l=>{const f=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(xE(e).Y("collectionPathOverlayIndex",f))}),de.waitFor(a)}getOverlaysForCollection(e,t,r){const i=la(),a=os(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return xE(e).W("collectionPathOverlayIndex",l).next(f=>{for(const y of f){const E=WS(this.yt,y);i.set(E.getKey(),E)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=la();let l;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return xE(e).Z({index:"collectionGroupOverlayIndex",range:f},(y,E,C)=>{const M=WS(this.yt,E);a.size()<i||M.largestBatchId===l?(a.set(M.getKey(),M),l=M.largestBatchId):C.done()}).next(()=>a)}oe(e,t){return xE(e).put(function(r,i,a){const[l,f,y]=tO(i,a.mutation.key);return{userId:i,collectionPath:f,documentId:y,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:yy(r.ie,a.mutation)}}(this.yt,this.userId,t))}}function xE(n){return un(n,"documentOverlays")}class kp{constructor(){}ue(e,t){this.ce(e,t),t.ae()}ce(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(fr(e.integerValue));else if("doubleValue"in e){const r=fr(e.doubleValue);isNaN(r)?this.he(t,13):(this.he(t,15),gp(r)?t.le(0):t.le(r))}else if("timestampValue"in e){const r=e.timestampValue;this.he(t,20),"string"==typeof r?t.fe(r):(t.fe(`${r.seconds||""}`),t.le(r.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(qa(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.he(t,45),t.le(r.latitude||0),t.le(r.longitude||0)}else"mapValue"in e?fI(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):gt()}de(e,t){this.he(t,25),this.pe(e,t)}pe(e,t){t.fe(e)}ge(e,t){const r=e.fields||{};this.he(t,55);for(const i of Object.keys(r))this.de(i,t),this.ce(r[i],t)}ye(e,t){const r=e.values||[];this.he(t,50);for(const i of r)this.ce(i,t)}me(e,t){this.he(t,37),Je.fromName(e).path.forEach(r=>{this.he(t,60),this.pe(r,t)})}he(e,t){e.le(t)}_e(e){e.le(2)}}function MF(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function sO(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=MF(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}kp.Ie=new kp;class RF{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ee(r.value),r=t.next();this.Ae()}Re(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.be(r.value),r=t.next();this.Pe()}ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ee(r);else if(r<2048)this.Ee(960|r>>>6),this.Ee(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ee(480|r>>>12),this.Ee(128|63&r>>>6),this.Ee(128|63&r);else{const i=t.codePointAt(0);this.Ee(240|i>>>18),this.Ee(128|63&i>>>12),this.Ee(128|63&i>>>6),this.Ee(128|63&i)}}this.Ae()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.be(r);else if(r<2048)this.be(960|r>>>6),this.be(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.be(480|r>>>12),this.be(128|63&r>>>6),this.be(128|63&r);else{const i=t.codePointAt(0);this.be(240|i>>>18),this.be(128|63&i>>>12),this.be(128|63&i>>>6),this.be(128|63&i)}}this.Pe()}Se(e){const t=this.De(e),r=sO(t);this.Ce(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}xe(e){const t=this.De(e),r=sO(t);this.Ce(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}Fe(){return this.buffer.slice(0,this.position)}De(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ee(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(t)}be(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(e)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(e){this.Ce(1),this.buffer[this.position++]=e}Me(e){this.Ce(1),this.buffer[this.position++]=~e}Ce(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class xF{constructor(e){this.$e=e}we(e){this.$e.Te(e)}fe(e){this.$e.ve(e)}le(e){this.$e.Se(e)}ae(){this.$e.Ne()}}class OF{constructor(e){this.$e=e}we(e){this.$e.Re(e)}fe(e){this.$e.Ve(e)}le(e){this.$e.xe(e)}ae(){this.$e.Oe()}}class OE{constructor(){this.$e=new RF,this.Be=new xF(this.$e),this.Le=new OF(this.$e)}seed(e){this.$e.seed(e)}qe(e){return 0===e?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}class Fp{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ue(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Fp(this.indexId,this.documentKey,this.arrayValue,r)}}function bh(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=oO(n.arrayValue,e.arrayValue),0!==t?t:(t=oO(n.directionalValue,e.directionalValue),0!==t?t:Je.comparator(n.documentKey,e.documentKey)))}function oO(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class NF{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ke=e.orderBy,this.Ge=[];for(const t of e.filters){const r=t;r.isInequality()?this.Qe=r:this.Ge.push(r)}}je(e){Dt(e.collectionGroup===this.collectionId);const t=Xv(e);if(void 0!==t&&!this.We(t))return!1;const r=ia(e);let i=0,a=0;for(;i<r.length&&this.We(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Qe){const l=r[i];if(!this.ze(this.Qe,l)||!this.He(this.Ke[a++],l))return!1;++i}for(;i<r.length;++i)if(a>=this.Ke.length||!this.He(this.Ke[a++],r[i]))return!1;return!0}We(e){for(const t of this.Ge)if(this.ze(t,e))return!0;return!1}ze(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}He(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function aO(n){var e,t;if(Dt(n instanceof ln||n instanceof Sn),n instanceof ln){if(n instanceof CS){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(a=>ln.create(n.field,"==",a)))||[];return Sn.create(i,"or")}return n}const r=n.filters.map(i=>aO(i));return Sn.create(r,n.op)}function PF(n){if(0===n.getFilters().length)return[];const e=ZS(aO(n));return Dt(uO(e)),qS(e)||KS(e)?[e]:e.getFilters()}function qS(n){return n instanceof ln}function KS(n){return n instanceof Sn&&uE(n)}function uO(n){return qS(n)||KS(n)||function(e){if(e instanceof Sn&&Xm(e)){for(const t of e.getFilters())if(!qS(t)&&!KS(t))return!1;return!0}return!1}(n)}function ZS(n){if(Dt(n instanceof ln||n instanceof Sn),n instanceof ln)return n;if(1===n.filters.length)return ZS(n.filters[0]);const e=n.filters.map(r=>ZS(r));let t=Sn.create(e,n.op);return t=GI(t),uO(t)?t:(Dt(t instanceof Sn),Dt(gh(t)),Dt(t.filters.length>1),t.filters.reduce((r,i)=>YS(r,i)))}function YS(n,e){let t;return Dt(n instanceof ln||n instanceof Sn),Dt(e instanceof ln||e instanceof Sn),t=n instanceof ln?e instanceof ln?Sn.create([n,e],"and"):lO(n,e):e instanceof ln?lO(e,n):function(r,i){if(Dt(r.filters.length>0&&i.filters.length>0),gh(r)&&gh(i))return dE(r,i.getFilters());const a=Xm(r)?r:i,l=Xm(r)?i:r,f=a.filters.map(y=>YS(y,l));return Sn.create(f,"or")}(n,e),GI(t)}function lO(n,e){if(gh(e))return dE(e,n.getFilters());{const t=e.filters.map(r=>YS(n,r));return Sn.create(t,"or")}}function GI(n){if(Dt(n instanceof ln||n instanceof Sn),n instanceof ln)return n;const e=n.getFilters();if(1===e.length)return GI(e[0]);if(lE(n))return n;const t=e.map(i=>GI(i)),r=[];return t.forEach(i=>{i instanceof ln?r.push(i):i instanceof Sn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Sn.create(r,n.op)}class kF{constructor(){this.Je=new QS}addToCollectionParentIndex(e,t){return this.Je.add(t),de.resolve()}getCollectionParents(e,t){return de.resolve(this.Je.getEntries(t))}addFieldIndex(e,t){return de.resolve()}deleteFieldIndex(e,t){return de.resolve()}getDocumentsMatchingTarget(e,t){return de.resolve(null)}getIndexType(e,t){return de.resolve(0)}getFieldIndexes(e,t){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,t){return de.resolve(is.min())}getMinOffsetFromCollectionGroup(e,t){return de.resolve(is.min())}updateCollectionGroup(e,t,r){return de.resolve()}updateIndexEntries(e,t){return de.resolve()}}class QS{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new An(mn.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new An(mn.comparator)).toArray()}}const WI=new Uint8Array(0);class FF{constructor(e,t){this.user=e,this.databaseId=t,this.Ye=new QS,this.Xe=new ol(r=>mh(r),(r,i)=>Ep(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ye.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ye.add(t)});const a={collectionId:r,parent:os(i)};return cO(e).put(a)}return de.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[ch(t),""],!1,!0);return cO(e).W(i).next(a=>{for(const l of a){if(l.collectionId!==t)break;r.push(Xa(l.parent))}return r})}addFieldIndex(e,t){const r=qI(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(f=>[f.fieldPath.canonicalString(),f.kind])};var l;delete i.indexId;const a=r.add(i);if(t.indexState){const l=PE(e);return a.next(f=>{l.put(nO(f,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=qI(e),i=PE(e),a=NE(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=NE(e);let i=!0;const a=new Map;return de.forEach(this.Ze(t),l=>this.tn(e,l).next(f=>{i&&(i=!!f),a.set(l,f)})).next(()=>{if(i){let l=tn();const f=[];return de.forEach(a,(y,E)=>{var C;Ve("IndexedDbIndexManager",`Using index ${C=y,`id=${C.indexId}|cg=${C.collectionGroup}|f=${C.fields.map(tt=>`${tt.fieldPath}:${tt.kind}`).join(",")}`} to execute ${mh(t)}`);const M=function(tt,Xe){const At=Xv(Xe);if(void 0===At)return null;for(const xt of ry(tt,At.fieldPath))switch(xt.op){case"array-contains-any":return xt.value.arrayValue.values||[];case"array-contains":return[xt.value]}return null}(E,y),L=function(tt,Xe){const At=new Map;for(const xt of ia(Xe))for(const dn of ry(tt,xt.fieldPath))switch(dn.op){case"==":case"in":At.set(xt.fieldPath.canonicalString(),dn.value);break;case"not-in":case"!=":return At.set(xt.fieldPath.canonicalString(),dn.value),Array.from(At.values())}return null}(E,y),z=function(tt,Xe){const At=[];let xt=!0;for(const dn of ia(Xe)){const Xr=0===dn.kind?wp(tt,dn.fieldPath,tt.startAt):vI(tt,dn.fieldPath,tt.startAt);At.push(Xr.value),xt&&(xt=Xr.inclusive)}return new Za(At,xt)}(E,y),W=function(tt,Xe){const At=[];let xt=!0;for(const dn of ia(Xe)){const Xr=0===dn.kind?vI(tt,dn.fieldPath,tt.endAt):wp(tt,dn.fieldPath,tt.endAt);At.push(Xr.value),xt&&(xt=Xr.inclusive)}return new Za(At,xt)}(E,y),ne=this.en(y,E,z),fe=this.en(y,E,W),je=this.nn(y,E,L),at=this.sn(y.indexId,M,ne,z.inclusive,fe,W.inclusive,je);return de.forEach(at,tt=>r.J(tt,t.limit).next(Xe=>{Xe.forEach(At=>{const xt=Je.fromSegments(At.documentKey);l.has(xt)||(l=l.add(xt),f.push(xt))})}))}).next(()=>f)}return de.resolve(null)})}Ze(e){let t=this.Xe.get(e);return t||(t=0===e.filters.length?[e]:PF(Sn.create(e.filters,"and")).map(r=>ty(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Xe.set(e,t),t)}sn(e,t,r,i,a,l,f){const y=(null!=t?t.length:1)*Math.max(r.length,a.length),E=y/(null!=t?t.length:1),C=[];for(let M=0;M<y;++M){const L=t?this.rn(t[M/E]):WI,z=this.on(e,L,r[M%E],i),W=this.un(e,L,a[M%E],l),ne=f.map(fe=>this.on(e,L,fe,!0));C.push(...this.createRange(z,W,ne))}return C}on(e,t,r,i){const a=new Fp(e,Je.empty(),t,r);return i?a:a.Ue()}un(e,t,r,i){const a=new Fp(e,Je.empty(),t,r);return i?a.Ue():a}tn(e,t){const r=new NF(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let l=null;for(const f of a)r.je(f)&&(!l||f.fields.length>l.fields.length)&&(l=f);return l})}getIndexType(e,t){let r=2;const i=this.Ze(t);return de.forEach(i,a=>this.tn(e,a).next(l=>{l?0!==r&&l.fields.length<function(f){let y=new An(kn.comparator),E=!1;for(const C of f.filters)for(const M of C.getFlattenedFilters())M.field.isKeyField()||("array-contains"===M.op||"array-contains-any"===M.op?E=!0:y=y.add(M.field));for(const C of f.orderBy)C.field.isKeyField()||(y=y.add(C.field));return y.size+(E?1:0)}(a)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}cn(e,t){const r=new OE;for(const i of ia(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const l=r.qe(i.kind);kp.Ie.ue(a,l)}return r.Fe()}rn(e){const t=new OE;return kp.Ie.ue(e,t.qe(0)),t.Fe()}an(e,t){const r=new OE;return kp.Ie.ue(Ac(this.databaseId,t),r.qe(function(i){const a=ia(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.Fe()}nn(e,t,r){if(null===r)return[];let i=[];i.push(new OE);let a=0;for(const l of ia(e)){const f=r[a++];for(const y of i)if(this.hn(t,l.fieldPath)&&aa(f))i=this.ln(i,l,f);else{const E=y.qe(l.kind);kp.Ie.ue(f,E)}}return this.fn(i)}en(e,t,r){return this.nn(e,t,r.position)}fn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Fe();return t}ln(e,t,r){const i=[...e],a=[];for(const l of r.arrayValue.values||[])for(const f of i){const y=new OE;y.seed(f.Fe()),kp.Ie.ue(l,y.qe(t.kind)),a.push(y)}return a}hn(e,t){return!!e.filters.find(r=>r instanceof ln&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=qI(e),i=PE(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(a=>{const l=[];return de.forEach(a,f=>i.get([f.indexId,this.uid]).next(y=>{l.push(function(E,C){const M=C?new dh(C.sequenceNumber,new is(Np(C.readTime),new Je(Xa(C.documentKey)),C.largestBatchId)):dh.empty(),L=E.fields.map(([z,W])=>new jm(kn.fromServerFormat(z),W));return new Bm(E.indexId,E.collectionGroup,L,M)}(f,y))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Kt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=qI(e),a=PE(e);return this.dn(e).next(l=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>de.forEach(f,y=>a.put(nO(y.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return de.forEach(t,(i,a)=>{const l=r.get(i.collectionGroup);return(l?de.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),de.forEach(f,y=>this._n(e,i,y).next(E=>{const C=this.wn(a,y);return E.isEqual(C)?de.resolve():this.mn(e,a,y,E,C)}))))})}gn(e,t,r,i){return NE(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.an(r,t.key),documentKey:t.key.path.toArray()})}yn(e,t,r,i){return NE(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.an(r,t.key),t.key.path.toArray()])}_n(e,t,r){const i=NE(e);let a=new An(bh);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.an(r,t)])},(l,f)=>{a=a.add(new Fp(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>a)}wn(e,t){let r=new An(bh);const i=this.cn(t,e);if(null==i)return r;const a=Xv(t);if(null!=a){const l=e.data.field(a.fieldPath);if(aa(l))for(const f of l.arrayValue.values||[])r=r.add(new Fp(t.indexId,e.key,this.rn(f),i))}else r=r.add(new Fp(t.indexId,e.key,WI,i));return r}mn(e,t,r,i,a){Ve("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(f,y,E,C,M){const L=f.getIterator(),z=y.getIterator();let W=Rc(L),ne=Rc(z);for(;W||ne;){let fe=!1,je=!1;if(W&&ne){const at=E(W,ne);at<0?je=!0:at>0&&(fe=!0)}else null!=W?je=!0:fe=!0;fe?(C(ne),ne=Rc(z)):je?(M(W),W=Rc(L)):(W=Rc(L),ne=Rc(z))}}(i,a,bh,f=>{l.push(this.gn(e,t,r,f))},f=>{l.push(this.yn(e,t,r,f))}),de.waitFor(l)}dn(e){let t=1;return PE(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,f)=>bh(l,f)).filter((l,f,y)=>!f||0!==bh(l,y[f-1]));const i=[];i.push(e);for(const l of r){const f=bh(l,e),y=bh(l,t);if(0===f)i[0]=e.Ue();else if(f>0&&y<0)i.push(l),i.push(l.Ue());else if(y>0)break}i.push(t);const a=[];for(let l=0;l<i.length;l+=2){if(this.pn(i[l],i[l+1]))return[];a.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,WI,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,WI,[]]))}return a}pn(e,t){return bh(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(dO)}getMinOffset(e,t){return de.mapArray(this.Ze(t),r=>this.tn(e,r).next(i=>i||gt())).next(dO)}}function cO(n){return un(n,"collectionParents")}function NE(n){return un(n,"indexEntries")}function qI(n){return un(n,"indexConfiguration")}function PE(n){return un(n,"indexState")}function dO(n){Dt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;hp(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new is(e.readTime,e.documentKey,t)}const hO={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class eo{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new eo(e,eo.DEFAULT_COLLECTION_PERCENTILE,eo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function fO(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],l=IDBKeyRange.only(t.batchId);let f=0;const y=r.Z({range:l},(C,M,L)=>(f++,L.delete()));a.push(y.next(()=>{Dt(1===f)}));const E=[];for(const C of t.mutations){const M=s(e,C.key.path,t.batchId);a.push(i.delete(M)),E.push(C.key)}return de.waitFor(a).next(()=>E)}function KI(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw gt();e=n.noDocument}return JSON.stringify(e).length}eo.DEFAULT_COLLECTION_PERCENTILE=10,eo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,eo.DEFAULT=new eo(41943040,eo.DEFAULT_COLLECTION_PERCENTILE,eo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),eo.DISABLED=new eo(-1,0,0);class ZI{constructor(e,t,r,i){this.userId=e,this.yt=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static re(e,t,r,i){Dt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new ZI(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ih(e).Z({index:"userMutationsIndex",range:r},(i,a,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=vy(e),l=Ih(e);return l.add({}).next(f=>{Dt("number"==typeof f);const y=new jI(f,t,r,i),E=function(L,z,W){const ne=W.baseMutations.map(je=>yy(L.ie,je)),fe=W.mutations.map(je=>yy(L.ie,je));return{userId:z,batchId:W.batchId,localWriteTimeMs:W.localWriteTime.toMillis(),baseMutations:ne,mutations:fe}}(this.yt,this.userId,y),C=[];let M=new An((L,z)=>Kt(L.canonicalString(),z.canonicalString()));for(const L of i){const z=s(this.userId,L.key.path,f);M=M.add(L.key.path.popLast()),C.push(l.put(E)),C.push(a.put(z,o))}return M.forEach(L=>{C.push(this.indexManager.addToCollectionParentIndex(e,L))}),e.addOnCommittedListener(()=>{this.In[f]=y.keys()}),de.waitFor(C).next(()=>y)})}lookupMutationBatch(e,t){return Ih(e).get(t).next(r=>r?(Dt(r.userId===this.userId),Pp(this.yt,r)):null)}Tn(e,t){return this.In[t]?de.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Ih(e).Z({index:"userMutationsIndex",range:i},(l,f,y)=>{f.userId===this.userId&&(Dt(f.batchId>=r),a=Pp(this.yt,f)),y.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ih(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,a,l)=>{r=a.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ih(e).W("userMutationsIndex",t).next(r=>r.map(i=>Pp(this.yt,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=ME(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return vy(e).Z({range:i},(l,f,y)=>{const[E,C,M]=l,L=Xa(C);if(E===this.userId&&t.path.isEqual(L))return Ih(e).get(M).next(z=>{if(!z)throw gt();Dt(z.userId===this.userId),a.push(Pp(this.yt,z))});y.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new An(Kt);const i=[];return t.forEach(a=>{const l=ME(this.userId,a.path),f=IDBKeyRange.lowerBound(l),y=vy(e).Z({range:f},(E,C,M)=>{const[L,z,W]=E,ne=Xa(z);L===this.userId&&a.path.isEqual(ne)?r=r.add(W):M.done()});i.push(y)}),de.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=ME(this.userId,r),l=IDBKeyRange.lowerBound(a);let f=new An(Kt);return vy(e).Z({range:l},(y,E,C)=>{const[M,L,z]=y,W=Xa(L);M===this.userId&&r.isPrefixOf(W)?W.length===i&&(f=f.add(z)):C.done()}).next(()=>this.En(e,f))}En(e,t){const r=[],i=[];return t.forEach(a=>{i.push(Ih(e).get(a).next(l=>{if(null===l)throw gt();Dt(l.userId===this.userId),r.push(Pp(this.yt,l))}))}),de.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return fO(e.se,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),de.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return de.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return vy(e).Z({range:r},(a,l,f)=>{if(a[0]===this.userId){const y=Xa(a[1]);i.push(y)}else f.done()}).next(()=>{Dt(0===i.length)})})}containsKey(e,t){return pO(e,this.userId,t)}Rn(e){return gO(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function pO(n,e,t){const r=ME(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return vy(n).Z({range:a,X:!0},(f,y,E)=>{const[C,M,L]=f;C===e&&M===i&&(l=!0),E.done()}).next(()=>l)}function Ih(n){return un(n,"mutations")}function vy(n){return un(n,"documentMutations")}function gO(n){return un(n,"mutationQueues")}class Lp{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Lp(0)}static vn(){return new Lp(-1)}}class LF{constructor(e,t){this.referenceDelegate=e,this.yt=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new Lp(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>St.fromTimestamp(new qn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ey(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(Dt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return Ey(e).Z((l,f)=>{const y=RE(f);y.sequenceNumber<=t&&null===r.get(y.targetId)&&(i++,a.push(this.removeTargetData(e,y)))}).next(()=>de.waitFor(a)).next(()=>i)}forEachTarget(e,t){return Ey(e).Z((r,i)=>{const a=RE(i);t(a)})}Vn(e){return mO(e).get("targetGlobalKey").next(t=>(Dt(null!==t),t))}Sn(e,t){return mO(e).put("targetGlobalKey",t)}Dn(e,t){return Ey(e).put(eO(this.yt,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=mh(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return Ey(e).Z({range:i,index:"queryTargetsIndex"},(l,f,y)=>{const E=RE(f);Ep(t,E.target)&&(a=E,y.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=Dh(e);return t.forEach(l=>{const f=os(l.path);i.push(a.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,l))}),de.waitFor(i)}removeMatchingKeys(e,t,r){const i=Dh(e);return de.forEach(t,a=>{const l=os(a.path);return de.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=Dh(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Dh(e);let a=tn();return i.Z({range:r,X:!0},(l,f,y)=>{const E=Xa(l[1]),C=new Je(E);a=a.add(C)}).next(()=>a)}containsKey(e,t){const r=os(t.path),i=IDBKeyRange.bound([r],[ch(r)],!1,!0);let a=0;return Dh(e).Z({index:"documentTargetsIndex",X:!0,range:i},([l,f],y,E)=>{0!==l&&(a++,E.done())}).next(()=>a>0)}ne(e,t){return Ey(e).get(t).next(r=>r?RE(r):null)}}function Ey(n){return un(n,"targets")}function mO(n){return un(n,"targetGlobal")}function Dh(n){return un(n,"targetDocuments")}function yO([n,e],[t,r]){const i=Kt(n,t);return 0===i?Kt(e,r):i}class UF{constructor(e){this.xn=e,this.buffer=new An(yO),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();yO(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class VF{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Ve("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ee.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){oa(r)?Ve("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield sa(r)}yield t.Fn(3e5)}))}}class BF{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return de.resolve(ss.at);const r=new UF(t);return this.$n.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(hO)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hO):this.qn(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}qn(e,t){let r,i,a,l,f,y,E;const C=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(M=>(M>this.params.maximumSequenceNumbersToCollect?(Ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${M}`),i=this.params.maximumSequenceNumbersToCollect):i=M,l=Date.now(),this.nthSequenceNumber(e,i))).next(M=>(r=M,f=Date.now(),this.removeTargets(e,r,t))).next(M=>(a=M,y=Date.now(),this.removeOrphanedDocuments(e,r))).next(M=>(E=Date.now(),Kv()<=Wu.in.DEBUG&&Ve("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-C}ms\n\tDetermined least recently used ${i} in `+(f-l)+`ms\n\tRemoved ${a} targets in `+(y-f)+`ms\n\tRemoved ${M} documents in `+(E-y)+`ms\nTotal Duration: ${E-C}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:M})))}}class $F{constructor(e,t){this.db=e,this.garbageCollector=new BF(this,t)}Bn(e){const t=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Un(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return YI(e,r)}removeReference(e,t,r){return YI(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return YI(e,t)}Gn(e,t){return function(r,i){let a=!1;return gO(r).tt(l=>pO(r,l,i).next(f=>(f&&(a=!0),de.resolve(!f)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Kn(e,(l,f)=>{if(f<=t){const y=this.Gn(e,l).next(E=>{if(!E)return a++,r.getEntry(e,l).next(()=>(r.removeEntry(l,St.min()),Dh(e).delete([0,os(l.path)])))});i.push(y)}}).next(()=>de.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return YI(e,t)}Kn(e,t){const r=Dh(e);let i,a=ss.at;return r.Z({index:"documentTargetsIndex"},([l,f],{path:y,sequenceNumber:E})=>{0===l?(a!==ss.at&&t(new Je(Xa(i)),a),a=E,i=y):a=ss.at}).next(()=>{a!==ss.at&&t(new Je(Xa(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function YI(n,e){return Dh(n).put((r=n.currentSequenceNumber,{targetId:0,path:os(e.path),sequenceNumber:r}));var r}class _O{constructor(){this.changes=new ol(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Fn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?de.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class jF{constructor(e){this.yt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Up(e).put(r)}removeEntry(e,t,r){return Up(e).delete(function(i,a){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],HI(a),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=Fn.newInvalidDocument(t);return Up(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(kE(t))},(i,a)=>{r=this.jn(t,a)}).next(()=>r)}Wn(e,t){let r={size:0,document:Fn.newInvalidDocument(t)};return Up(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(kE(t))},(i,a)=>{r={document:this.jn(t,a),size:KI(a)}}).next(()=>r)}getEntries(e,t){let r=Ms();return this.zn(e,t,(i,a)=>{const l=this.jn(i,a);r=r.insert(i,l)}).next(()=>r)}Hn(e,t){let r=Ms(),i=new Ir(Je.comparator);return this.zn(e,t,(a,l)=>{const f=this.jn(a,l);r=r.insert(a,f),i=i.insert(a,KI(l))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return de.resolve();let i=new An(bO);t.forEach(y=>i=i.add(y));const a=IDBKeyRange.bound(kE(i.first()),kE(i.last())),l=i.getIterator();let f=l.getNext();return Up(e).Z({index:"documentKeyIndex",range:a},(y,E,C)=>{const M=Je.fromSegments([...E.prefixPath,E.collectionGroup,E.documentId]);for(;f&&bO(f,M)<0;)r(f,null),f=l.getNext();f&&f.isEqual(M)&&(r(f,E),f=l.hasNext()?l.getNext():null),f?C.j(kE(f)):C.done()}).next(()=>{for(;f;)r(f,null),f=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const a=t.path,l=[a.popLast().toArray(),a.lastSegment(),HI(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],f=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Up(e).W(IDBKeyRange.bound(l,f,!0)).next(y=>{let E=Ms();for(const C of y){const M=this.jn(Je.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);M.isFoundDocument()&&(Dp(t,M)||i.has(M.key))&&(E=E.insert(M.key,M))}return E})}getAllFromCollectionGroup(e,t,r,i){let a=Ms();const l=wO(t,r),f=wO(t,is.max());return Up(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,f,!0)},(y,E,C)=>{const M=this.jn(Je.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);a=a.insert(M.key,M),a.size===i&&C.done()}).next(()=>a)}newChangeBuffer(e){return new HF(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return EO(e).get("remoteDocumentGlobalKey").next(t=>(Dt(!!t),t))}Qn(e,t){return EO(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function SF(n,e){let t;if(e.document)t=LI(n.ie,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Je.fromSegments(e.noDocument.path),i=Np(e.noDocument.readTime);t=Fn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return gt();{const r=Je.fromSegments(e.unknownDocument.path),i=Np(e.unknownDocument.version);t=Fn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new qn(r[0],r[1]);return St.fromTimestamp(i)}(e.readTime)),t}(this.yt,t);if(!r.isNoDocument()||!r.version.isEqual(St.min()))return r}return Fn.newInvalidDocument(e)}}function vO(n){return new jF(n)}class HF extends _O{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new ol(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new An((a,l)=>Kt(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const f=this.Xn.get(a);if(t.push(this.Yn.removeEntry(e,a,f.readTime)),l.isValidDocument()){const y=Jx(this.Yn.yt,l);i=i.add(a.path.popLast());const E=KI(y);r+=E-f.size,t.push(this.Yn.addEntry(e,a,y))}else if(r-=f.size,this.trackRemovals){const y=Jx(this.Yn.yt,l.convertToNoDocument(St.min()));t.push(this.Yn.addEntry(e,a,y))}}),i.forEach(a=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Yn.updateMetadata(e,r)),de.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((a,l)=>{this.Xn.set(a,{size:l,readTime:r.get(a).readTime})}),r))}}function EO(n){return un(n,"remoteDocumentGlobal")}function Up(n){return un(n,"remoteDocumentsV14")}function kE(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function wO(n,e){const t=e.documentKey.path.toArray();return[n,HI(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function bO(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=Kt(t[a],r[a]),i)return i;return i=Kt(t.length,r.length),i||(i=Kt(t[t.length-2],r[r.length-2]),i||Kt(t[t.length-1],r[r.length-1]))}class zF{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class IO{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&_h(r.mutation,i,Ki.empty(),qn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,tn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=tn()){const i=la();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let l=dy();return a.forEach((f,y)=>{l=l.insert(f,y.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=la();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,tn()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((l,f)=>{t.set(l,f)})})}computeViews(e,t,r,i){let a=Ms();const l=Tp(),f=Tp();return t.forEach((y,E)=>{const C=r.get(E.key);i.has(E.key)&&(void 0===C||C.mutation instanceof ua)?a=a.insert(E.key,E):void 0!==C?(l.set(E.key,C.mutation.getFieldMask()),_h(C.mutation,E,C.mutation.getFieldMask(),qn.now())):l.set(E.key,Ki.empty())}),this.recalculateAndSaveOverlays(e,a).next(y=>(y.forEach((E,C)=>l.set(E,C)),t.forEach((E,C)=>{var M;return f.set(E,new zF(C,null!==(M=l.get(E))&&void 0!==M?M:null))}),f))}recalculateAndSaveOverlays(e,t){const r=Tp();let i=new Ir((l,f)=>l-f),a=tn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const f of l)f.keys().forEach(y=>{const E=t.get(y);if(null===E)return;let C=r.get(y)||Ki.empty();C=f.applyToLocalView(E,C),r.set(y,C);const M=(i.get(f.batchId)||tn()).add(y);i=i.insert(f.batchId,M)})}).next(()=>{const l=[],f=i.getReverseIterator();for(;f.hasNext();){const y=f.getNext(),E=y.key,C=y.value,M=OI();C.forEach(L=>{if(!a.has(L)){const z=RI(t.get(L),r.get(L));null!==z&&M.set(L,z),a=a.add(L)}}),l.push(this.documentOverlayCache.saveOverlays(e,E,M))}return de.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Je.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):wI(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):de.resolve(la());let f=-1,y=a;return l.next(E=>de.forEach(E,(C,M)=>(f<M.largestBatchId&&(f=M.largestBatchId),a.get(C)?de.resolve():this.remoteDocumentCache.getEntry(e,C).next(L=>{y=y.insert(C,L)}))).next(()=>this.populateOverlays(e,E,a)).next(()=>this.computeViews(e,y,E,tn())).next(C=>({batchId:f,changes:_E(C)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Je(t)).next(r=>{let i=dy();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=dy();return this.indexManager.getCollectionParents(e,i).next(l=>de.forEach(l,f=>{const y=(E=t,C=f.child(i),new nl(C,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt));var E,C;return this.getDocumentsMatchingCollectionQuery(e,y,r).next(E=>{E.forEach((C,M)=>{a=a.insert(C,M)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(a=>{i.forEach((f,y)=>{const E=y.getKey();null===a.get(E)&&(a=a.insert(E,Fn.newInvalidDocument(E)))});let l=dy();return a.forEach((f,y)=>{const E=i.get(f);void 0!==E&&_h(E.mutation,y,Ki.empty(),qn.now()),Dp(t,y)&&(l=l.insert(f,y))}),l})}}class GF{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return de.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Ur(r.createTime)}),de.resolve()}getNamedQuery(e,t){return de.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:GS(r.bundledQuery),readTime:Ur(r.readTime)}),de.resolve();var r}}class WF{constructor(){this.overlays=new Ir(Je.comparator),this.es=new Map}getOverlay(e,t){return de.resolve(this.overlays.get(t))}getOverlays(e,t){const r=la();return de.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.oe(e,t,a)}),de.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.es.delete(r)),de.resolve()}getOverlaysForCollection(e,t,r){const i=la(),a=t.length+1,l=new Je(t.child("")),f=this.overlays.getIteratorFrom(l);for(;f.hasNext();){const y=f.getNext().value,E=y.getKey();if(!t.isPrefixOf(E.path))break;E.path.length===a&&y.largestBatchId>r&&i.set(y.getKey(),y)}return de.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Ir((E,C)=>E-C);const l=this.overlays.getIterator();for(;l.hasNext();){const E=l.getNext().value;if(E.getKey().getCollectionGroup()===t&&E.largestBatchId>r){let C=a.get(E.largestBatchId);null===C&&(C=la(),a=a.insert(E.largestBatchId,C)),C.set(E.getKey(),E)}}const f=la(),y=a.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((E,C)=>f.set(E,C)),!(f.size()>=i)););return de.resolve(f)}oe(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new zS(t,r));let a=this.es.get(t);void 0===a&&(a=tn(),this.es.set(t,a)),this.es.set(t,a.add(r.key))}}class XS{constructor(){this.ns=new An(Pi.ss),this.rs=new An(Pi.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new Pi(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new Pi(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new Je(new mn([])),r=new Pi(t,e),i=new Pi(t,e+1),a=[];return this.rs.forEachInRange([r,i],l=>{this.cs(l),a.push(l.key)}),a}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Je(new mn([])),r=new Pi(t,e),i=new Pi(t,e+1);let a=tn();return this.rs.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new Pi(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Pi{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Je.comparator(e.key,t.key)||Kt(e._s,t._s)}static os(e,t){return Kt(e._s,t._s)||Je.comparator(e.key,t.key)}}class qF{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new An(Pi.ss)}checkEmpty(e){return de.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.ws;this.ws++;const l=new jI(a,t,r,i);this.mutationQueue.push(l);for(const f of i)this.gs=this.gs.add(new Pi(f.key,a)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return de.resolve(l)}lookupMutationBatch(e,t){return de.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),a=i<0?0:i;return de.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Pi(t,0),i=new Pi(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],l=>{const f=this.ys(l._s);a.push(f)}),de.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new An(Kt);return t.forEach(i=>{const a=new Pi(i,0),l=new Pi(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([a,l],f=>{r=r.add(f._s)})}),de.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Je.isDocumentKey(a)||(a=a.child(""));const l=new Pi(new Je(a),0);let f=new An(Kt);return this.gs.forEachWhile(y=>{const E=y.key.path;return!!r.isPrefixOf(E)&&(E.length===i&&(f=f.add(y._s)),!0)},l),de.resolve(this.Is(f))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Dt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return de.forEach(t.mutations,i=>{const a=new Pi(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new Pi(t,0),i=this.gs.firstAfterOrEqual(r);return de.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return de.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class KF{constructor(e){this.Es=e,this.docs=new Ir(Je.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return de.resolve(r?r.document.mutableCopy():Fn.newInvalidDocument(t))}getEntries(e,t){let r=Ms();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Fn.newInvalidDocument(i))}),de.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=Ms();const l=t.path,f=new Je(l.child("")),y=this.docs.getIteratorFrom(f);for(;y.hasNext();){const{key:E,value:{document:C}}=y.getNext();if(!l.isPrefixOf(E.path))break;E.path.length>l.length+1||hp(Hm(C),r)<=0||(i.has(C.key)||Dp(t,C))&&(a=a.insert(C.key,C.mutableCopy()))}return de.resolve(a)}getAllFromCollectionGroup(e,t,r,i){gt()}As(e,t){return de.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new ZF(this)}getSize(e){return de.resolve(this.size)}}class ZF extends _O{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),de.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class YF{constructor(e){this.persistence=e,this.Rs=new ol(t=>mh(t),Ep),this.lastRemoteSnapshotVersion=St.min(),this.highestTargetId=0,this.bs=0,this.Ps=new XS,this.targetCount=0,this.vs=Lp.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),de.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Lp(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,de.resolve()}updateTargetData(e,t){return this.Dn(t),de.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Rs.forEach((l,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.Rs.delete(l),a.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),de.waitFor(a).next(()=>i)}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return de.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),de.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),de.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),de.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return de.resolve(r)}containsKey(e,t){return de.resolve(this.Ps.containsKey(t))}}class DO{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new ss(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new YF(this),this.indexManager=new kF,this.remoteDocumentCache=new KF(r=>this.referenceDelegate.xs(r)),this.yt=new Xx(t),this.Ns=new GF(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new WF,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new qF(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Ve("MemoryPersistence","Starting transaction:",e);const i=new QF(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(a=>this.referenceDelegate.Os(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ms(e,t){return de.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class QF extends eE{constructor(e){super(),this.currentSequenceNumber=e}}class QI{constructor(e){this.persistence=e,this.Fs=new XS,this.$s=null}static Bs(e){return new QI(e)}get Ls(){if(this.$s)return this.$s;throw gt()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),de.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),de.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),de.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Ls.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.Ls,r=>{const i=Je.fromPath(r);return this.qs(e,i).next(a=>{a||t.removeEntry(i,St.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.qs(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}qs(e,t){return de.or([()=>de.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class XF{constructor(e){this.yt=e}$(e,t,r,i){const a=new Gm("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",jS,{unique:!0}),f.createObjectStore("documentMutations"),CO(e),function(f){f.createObjectStore("remoteDocuments")}(e));let l=de.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),CO(e)),l=l.next(()=>function(f){const y=f.store("targetGlobal"),E={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:St.min().toTimestamp(),targetCount:0};return y.put("targetGlobalKey",E)}(a))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(f,y){return y.store("mutations").W().next(E=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",jS,{unique:!0});const C=y.store("mutations"),M=E.map(L=>C.put(L));return de.waitFor(M)})}(e,a))),l=l.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.Us(a))),r<6&&i>=6&&(l=l.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(a)))),r<7&&i>=7&&(l=l.next(()=>this.Gs(a))),r<8&&i>=8&&(l=l.next(()=>this.Qs(e,a))),r<9&&i>=9&&(l=l.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.js(a))),r<11&&i>=11&&(l=l.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(f){const y=f.createObjectStore("documentOverlays",{keyPath:re});y.createIndex("collectionPathOverlayIndex",De,{unique:!1}),y.createIndex("collectionGroupOverlayIndex",We,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(f){const y=f.createObjectStore("remoteDocumentsV14",{keyPath:u});y.createIndex("documentKeyIndex",c),y.createIndex("collectionGroupIndex",h)}(e)).next(()=>this.Ws(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.zs(e,a))),r<15&&i>=15&&(l=l.next(()=>function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:S}).createIndex("sequenceNumberIndex",O,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:U}).createIndex("documentKeyIndex",Y,{unique:!1})}(e))),l}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=KI(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Us(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>de.forEach(i,a=>{const l=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",l).next(f=>de.forEach(f,y=>{Dt(y.userId===a.userId);const E=Pp(this.yt,y);return fO(e,a.userId,E).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.Z((l,f)=>{const y=new mn(l),E=[0,os(y)];a.push(t.get(E).next(C=>C?de.resolve():t.put({targetId:0,path:os(y),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>de.waitFor(a))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:I});const r=t.store("collectionParents"),i=new QS,a=l=>{if(i.add(l)){const f=l.lastSegment(),y=l.popLast();return r.put({collectionId:f,parent:os(y)})}};return t.store("remoteDocuments").Z({X:!0},(l,f)=>{const y=new mn(l);return a(y.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([l,f,y],E)=>{const C=Xa(f);return a(C.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const a=RE(i),l=eO(this.yt,a);return t.put(l)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((a,l)=>{const f=t.store("remoteDocumentsV14"),y=(E=l,E.document?new Je(mn.fromString(E.document.name).popFirst(5)):E.noDocument?Je.fromSegments(E.noDocument.path):E.unknownDocument?Je.fromSegments(E.unknownDocument.path):gt()).path.toArray();var E;const C={prefixPath:y.slice(0,y.length-2),collectionGroup:y[y.length-2],documentId:y[y.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(f.put(C))}).next(()=>de.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=vO(this.yt),a=new DO(QI.Bs,this.yt.ie);return r.W().next(l=>{const f=new Map;return l.forEach(y=>{var E;let C=null!==(E=f.get(y.userId))&&void 0!==E?E:tn();Pp(this.yt,y).keys().forEach(M=>C=C.add(M)),f.set(y.userId,C)}),de.forEach(f,(y,E)=>{const C=new li(E),M=zI.re(this.yt,C),L=a.getIndexManager(C),z=ZI.re(C,this.yt,L,a.referenceDelegate);return new IO(i,z,M,L).recalculateAndSaveOverlaysForDocumentKeys(new Ln(t,ss.at),y).next()})})}}function CO(n){n.createObjectStore("targetDocuments",{keyPath:_}).createIndex("documentTargetsIndex",b,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",p,{unique:!0}),n.createObjectStore("targetGlobal")}const JS="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class eA{constructor(e,t,r,i,a,l,f,y,E,C,M=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=a,this.window=l,this.document=f,this.Js=E,this.Ys=C,this.Xs=M,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=L=>Promise.resolve(),!eA.C())throw new Fe(pe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new $F(this,i),this.ii=t+"main",this.yt=new Xx(y),this.ri=new yo(this.ii,this.Xs,new XF(this.yt)),this.Cs=new LF(this.referenceDelegate,this.yt),this.remoteDocumentCache=vO(this.yt),this.Ns=new AF,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===C&&hr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Fe(pe.FAILED_PRECONDITION,JS);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new ss(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,Ee.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,Ee.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,Ee.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>XI(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(oa(e))return Ve("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ve("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return FE(e).get("owner").next(t=>de.resolve(this.mi(t)))}gi(e){return XI(e).delete(this.clientId)}yi(){var e=this;return(0,Ee.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=un(r,"clientMetadata");return i.W().next(a=>{const l=e.Ii(a,18e5),f=a.filter(y=>-1===l.indexOf(y));return de.forEach(f,y=>i.delete(y.clientId)).next(()=>f)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?de.resolve(!0):FE(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Fe(pe.FAILED_PRECONDITION,JS);return!1}}return!(!this.networkEnabled||!this.inForeground)||XI(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Ve("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ee.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Ln(t,ss.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>XI(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return ZI.re(e,this.yt,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new FF(e,this.yt.ie.databaseId)}getDocumentOverlayCache(e){return zI.re(this.yt,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Ve("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(l=this.Xs)?Zt:14===l?Ue:13===l?Lt:12===l?yt:11===l?et:void gt();var l;let f;return this.ri.runTransaction(e,i,a,y=>(f=new Ln(y,this.Ss?this.Ss.next():ss.at),"readwrite-primary"===t?this.fi(f).next(E=>!!E||this.di(f)).next(E=>{if(!E)throw hr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Fe(pe.FAILED_PRECONDITION,zm);return r(f)}).next(E=>this.wi(f).next(()=>E)):this.Vi(f).next(()=>r(f)))).then(y=>(f.raiseOnCommittedEvent(),y))}Vi(e){return FE(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Fe(pe.FAILED_PRECONDITION,JS)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return FE(e).put("owner",t)}static C(){return yo.C()}_i(e){const t=FE(e);return t.get("owner").next(r=>this.mi(r)?(Ve("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):de.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(hr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,sn.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Ve("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return hr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){hr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function FE(n){return un(n,"owner")}function XI(n){return un(n,"clientMetadata")}function tA(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class nA{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=tn(),i=tn();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new nA(e,t.fromCache,r,i)}}class TO{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(a=>a||this.Oi(e,t,i,r)).next(a=>a||this.Mi(e,t))}ki(e,t){if(EI(t))return de.resolve(null);let r=Ni(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=fE(t,null,"F"),r=Ni(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const l=tn(...a);return this.Ni.getDocuments(e,l).next(f=>this.indexManager.getMinOffset(e,r).next(y=>{const E=this.Fi(t,f);return this.$i(t,E,l,y.readTime)?this.ki(e,fE(t,null,"F")):this.Bi(e,E,t,y)}))})))}Oi(e,t,r,i){return EI(t)||i.isEqual(St.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(a=>{const l=this.Fi(t,a);return this.$i(t,l,r,i)?this.Mi(e,t):(Kv()<=Wu.in.DEBUG&&Ve("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ip(t)),this.Bi(e,l,t,Jv(i,-1)))})}Fi(e,t){let r=new An(As(e));return t.forEach((i,a)=>{Dp(e,a)&&(r=r.add(a))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Mi(e,t){return Kv()<=Wu.in.DEBUG&&Ve("QueryEngine","Using full collection scan to execute query:",Ip(t)),this.Ni.getDocumentsMatchingQuery(e,t,is.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(l=>{a=a.insert(l.key,l)}),a))}}class JF{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.yt=i,this.qi=new Ir(Kt),this.Ui=new ol(a=>mh(a),Ep),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new IO(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qi))}}function SO(n,e,t,r){return new JF(n,e,t,r)}function AO(n,e){return rA.apply(this,arguments)}function rA(){return rA=(0,Ee.Z)(function*(n,e){const t=nt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const l=[],f=[];let y=tn();for(const E of i){l.push(E.batchId);for(const C of E.mutations)y=y.add(C.key)}for(const E of a){f.push(E.batchId);for(const C of E.mutations)y=y.add(C.key)}return t.localDocuments.getDocuments(r,y).next(E=>({ji:E,removedBatchIds:l,addedBatchIds:f}))})})}),rA.apply(this,arguments)}function eL(n,e){const t=nt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Gi.newChangeBuffer({trackRemovals:!0});return function(l,f,y,E){const C=y.batch,M=C.keys();let L=de.resolve();return M.forEach(z=>{L=L.next(()=>E.getEntry(f,z)).next(W=>{const ne=y.docVersions.get(z);Dt(null!==ne),W.version.compareTo(ne)<0&&(C.applyToRemoteDocument(W,y),W.isValidDocument()&&(W.setReadTime(y.commitVersion),E.addEntry(W)))})}),L.next(()=>l.mutationQueue.removeMutationBatch(f,C))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let f=tn();for(let y=0;y<l.mutationResults.length;++y)l.mutationResults[y].transformResults.length>0&&(f=f.add(l.batch.mutations[y].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function MO(n){const e=nt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function tL(n,e){const t=nt(n),r=e.snapshotVersion;let i=t.qi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.qi;const f=[];e.targetChanges.forEach((C,M)=>{const L=i.get(M);if(!L)return;f.push(t.Cs.removeMatchingKeys(a,C.removedDocuments,M).next(()=>t.Cs.addMatchingKeys(a,C.addedDocuments,M)));let z=L.withSequenceNumber(a.currentSequenceNumber);var W,ne,fe;e.targetMismatches.has(M)?z=z.withResumeToken(Lr.EMPTY_BYTE_STRING,St.min()).withLastLimboFreeSnapshotVersion(St.min()):C.resumeToken.approximateByteSize()>0&&(z=z.withResumeToken(C.resumeToken,r)),i=i.insert(M,z),ne=z,fe=C,(0===(W=L).resumeToken.approximateByteSize()||ne.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=3e8||fe.addedDocuments.size+fe.modifiedDocuments.size+fe.removedDocuments.size>0)&&f.push(t.Cs.updateTargetData(a,z))});let y=Ms(),E=tn();if(e.documentUpdates.forEach(C=>{e.resolvedLimboDocuments.has(C)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(a,C))}),f.push(RO(a,l,e.documentUpdates).next(C=>{y=C.Wi,E=C.zi})),!r.isEqual(St.min())){const C=t.Cs.getLastRemoteSnapshotVersion(a).next(M=>t.Cs.setTargetsMetadata(a,a.currentSequenceNumber,r));f.push(C)}return de.waitFor(f).next(()=>l.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,y,E)).next(()=>y)}).then(a=>(t.qi=i,a))}function RO(n,e,t){let r=tn(),i=tn();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let l=Ms();return t.forEach((f,y)=>{const E=a.get(f);y.isFoundDocument()!==E.isFoundDocument()&&(i=i.add(f)),y.isNoDocument()&&y.version.isEqual(St.min())?(e.removeEntry(f,y.readTime),l=l.insert(f,y)):!E.isValidDocument()||y.version.compareTo(E.version)>0||0===y.version.compareTo(E.version)&&E.hasPendingWrites?(e.addEntry(y),l=l.insert(f,y)):Ve("LocalStore","Ignoring outdated watch update for ",f,". Current version:",E.version," Watch version:",y.version)}),{Wi:l,zi:i}})}function nL(n,e){const t=nt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function wy(n,e){const t=nt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(a=>a?(i=a,de.resolve(i)):t.Cs.allocateTargetId(r).next(l=>(i=new wh(e,l,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.qi.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.qi=t.qi.insert(r.targetId,r),t.Ui.set(e,r.targetId)),r})}function by(n,e,t){return iA.apply(this,arguments)}function iA(){return iA=(0,Ee.Z)(function*(n,e,t){const r=nt(n),i=r.qi.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!oa(l))throw l;Ve("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.qi=r.qi.remove(e),r.Ui.delete(i.target)}),iA.apply(this,arguments)}function JI(n,e,t){const r=nt(n);let i=St.min(),a=tn();return r.persistence.runTransaction("Execute query","readonly",l=>function(f,y,E){const C=nt(f),M=C.Ui.get(E);return void 0!==M?de.resolve(C.qi.get(M)):C.Cs.getTargetData(y,E)}(r,l,Ni(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(l,f.targetId).next(y=>{a=y})}).next(()=>r.Li.getDocumentsMatchingQuery(l,e,t?i:St.min(),t?a:tn())).next(f=>(NO(r,AS(e),f),{documents:f,Hi:a})))}function xO(n,e){const t=nt(n),r=nt(t.Cs),i=t.qi.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.ne(a,e).next(l=>l?l.target:null))}function OO(n,e){const t=nt(n),r=t.Ki.get(e)||St.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,Jv(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(NO(t,e,i),i))}function NO(n,e,t){let r=n.Ki.get(e)||St.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Ki.set(e,r)}function sA(){return sA=(0,Ee.Z)(function*(n,e,t,r){const i=nt(n);let a=tn(),l=Ms();for(const E of t){const C=e.Ji(E.metadata.name);E.document&&(a=a.add(C));const M=e.Yi(E);M.setReadTime(e.Xi(E.metadata.readTime)),l=l.insert(C,M)}const f=i.Gi.newChangeBuffer({trackRemovals:!0}),y=yield wy(i,(E=r,Ni(bp(mn.fromString(`__bundle__/docs/${E}`)))));var E;return i.persistence.runTransaction("Apply bundle documents","readwrite",E=>RO(E,f,l).next(C=>(f.apply(E),C)).next(C=>i.Cs.removeMatchingKeysForTargetId(E,y.targetId).next(()=>i.Cs.addMatchingKeys(E,a,y.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(E,C.Wi,C.zi)).next(()=>C.Wi)))}),sA.apply(this,arguments)}function iL(n,e){return oA.apply(this,arguments)}function oA(){return oA=(0,Ee.Z)(function*(n,e,t=tn()){const r=yield wy(n,Ni(GS(e.bundledQuery))),i=nt(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const l=Ur(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.Ns.saveNamedQuery(a,e);const f=r.withResumeToken(Lr.EMPTY_BYTE_STRING,l);return i.qi=i.qi.insert(f.targetId,f),i.Cs.updateTargetData(a,f).next(()=>i.Cs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Cs.addMatchingKeys(a,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(a,e))})}),oA.apply(this,arguments)}function PO(n,e){return`firestore_clients_${n}_${e}`}function kO(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function aA(n,e){return`firestore_targets_${n}_${e}`}class eD{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let a,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(a=new Fe(i.error.code,i.error.message))),l?new eD(e,t,i.state,a):(hr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class LE{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Fe(r.error.code,r.error.message))),a?new LE(e,r.state,i):(hr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class tD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=vE();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=wS(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new tD(e,a):(hr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class uA{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new uA(t.clientId,t.onlineState):(hr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class lA{constructor(){this.activeTargetIds=vE()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class cA{constructor(e,t,r,i,a){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Ir(Kt),this.started=!1,this.cr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ar=PO(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new lA),this.lr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const a=e.getItem(PO(e.persistenceKey,i));if(a){const l=tD.Zi(i,a);l&&(e.ur=e.ur.insert(l.clientId,l))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(aA(this.persistenceKey,e));if(r){const i=LE.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(aA(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ve("SharedClientState","READ",e,t),t}setItem(e,t){Ve("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ve("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ve("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void hr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,Ee.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(a){let l=ss.at;if(null!=a)try{const f=JSON.parse(a);Dt("number"==typeof f),l=f}catch(f){hr("SharedClientState","Failed to read sequence number from WebStorage",f)}return l}(r.newValue);i!==ss.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Or(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Mr(a)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new eD(this.currentUser,e,t,r),a=kO(this.persistenceKey,this.currentUser,e);this.setItem(a,i.tr())}Er(e){const t=kO(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=aA(this.persistenceKey,e),a=new LE(e,t,r);this.setItem(i,a.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return tD.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return eD.Zi(new li(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return LE.Zi(i,t)}yr(e){return uA.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,Ee.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Ve("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),a=this.Ir(r),l=[],f=[];return a.forEach(y=>{i.has(y)||l.push(y)}),i.forEach(y=>{a.has(y)||f.push(y)}),this.syncEngine.Br(l,f).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=vE();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class FO{constructor(){this.Lr=new lA,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new lA,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class sL{Ur(e){}shutdown(){}}class LO{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Ve("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Ve("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const oL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class aL{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class uL extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,i,a){const l=this.ho(e,t);Ve("RestConnection","Sending: ",l,r);const f={};return this.lo(f,i,a),this.fo(e,l,f,r).then(y=>(Ve("RestConnection","Received: ",y),y),y=>{throw Cc("RestConnection",`${e} failed with error: `,y,"url: ",l,"request:",r),y})}_o(e,t,r,i,a,l){return this.ao(e,t,r,i,a)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+uh,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}ho(e,t){return`${this.oo}/v1/${t}:${oL[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((a,l)=>{const f=new Nx;f.setWithCredentials(!0),f.listenOnce(cS.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Vm.NO_ERROR:const E=f.getResponseJson();Ve("Connection","XHR received:",JSON.stringify(E)),a(E);break;case Vm.TIMEOUT:Ve("Connection",'RPC "'+e+'" timed out'),l(new Fe(pe.DEADLINE_EXCEEDED,"Request time out"));break;case Vm.HTTP_ERROR:const C=f.getStatus();if(Ve("Connection",'RPC "'+e+'" failed with status:',C,"response text:",f.getResponseText()),C>0){let M=f.getResponseJson();Array.isArray(M)&&(M=M[0]);const L=M?.error;if(L&&L.status&&L.message){const z=function(W){const ne=W.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf(ne)>=0?ne:pe.UNKNOWN}(L.status);l(new Fe(z,L.message))}else l(new Fe(pe.UNKNOWN,"Server responded with status "+f.getStatus()))}else l(new Fe(pe.UNAVAILABLE,"Connection failed."));break;default:gt()}}finally{Ve("Connection",'RPC "'+e+'" completed.')}});const y=JSON.stringify(i);f.send(t,"POST",y,r,15)})}wo(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=eI(),l=tI(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(f.xmlHttpFactory=new hS({})),this.lo(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const y=i.join("");Ve("Connection","Creating WebChannel: "+y,f);const E=a.createWebChannel(y,f);let C=!1,M=!1;const L=new aL({Hr:W=>{M?Ve("Connection","Not sending because WebChannel is closed:",W):(C||(Ve("Connection","Opening WebChannel transport."),E.open(),C=!0),Ve("Connection","WebChannel sending:",W),E.send(W))},Jr:()=>E.close()}),z=(W,ne,fe)=>{W.listen(ne,je=>{try{fe(je)}catch(at){setTimeout(()=>{throw at},0)}})};return z(E,dp.EventType.OPEN,()=>{M||Ve("Connection","WebChannel transport opened.")}),z(E,dp.EventType.CLOSE,()=>{M||(M=!0,Ve("Connection","WebChannel transport closed"),L.io())}),z(E,dp.EventType.ERROR,W=>{M||(M=!0,Cc("Connection","WebChannel transport errored:",W),L.io(new Fe(pe.UNAVAILABLE,"The operation could not be completed")))}),z(E,dp.EventType.MESSAGE,W=>{var ne;if(!M){const fe=W.data[0];Dt(!!fe);const at=fe.error||(null===(ne=fe[0])||void 0===ne?void 0:ne.error);if(at){Ve("Connection","WebChannel received error:",at);const tt=at.status;let Xe=function(xt){const dn=Dr[xt];if(void 0!==dn)return yE(dn)}(tt),At=at.message;void 0===Xe&&(Xe=pe.INTERNAL,At="Unknown error status: "+tt+" with message "+at.message),M=!0,L.io(new Fe(Xe,At)),E.close()}else Ve("Connection","WebChannel received:",fe),L.ro(fe)}}),z(l,dS.STAT_EVENT,W=>{W.stat===nI.PROXY?Ve("Connection","Detected buffering proxy"):W.stat===nI.NOPROXY&&Ve("Connection","Detected no buffering proxy")}),setTimeout(()=>{L.so()},0),L}}function UO(){return typeof window<"u"?window:null}function nD(){return typeof document<"u"?document:null}function UE(n){return new gy(n,!0)}class dA{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&Ve("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class VO{constructor(e,t,r,i,a,l,f,y){this.Hs=e,this.vo=r,this.Vo=i,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=f,this.listener=y,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new dA(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,Ee.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,Ee.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,Ee.Z)(function*(){r.Lo(),r.qo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===pe.RESOURCE_EXHAUSTED?(hr(t.toString()),hr("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===pe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Uo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===t&&this.Go(r,i)},r=>{e(()=>{const i=new Fe(pe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,Ee.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Ve("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Ve("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class lL extends VO{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.yt=a}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function TE(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(y=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===y?1:"REMOVE"===y?2:"CURRENT"===y?3:"RESET"===y?4:gt(),i=e.targetChange.targetIds||[],a=function(y,E){return y.wt?(Dt(void 0===E||"string"==typeof E),Lr.fromBase64String(E||"")):(Dt(void 0===E||E instanceof Uint8Array),Lr.fromUint8Array(E||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,f=l&&function(y){const E=void 0===y.code?pe.UNKNOWN:yE(y.code);return new Fe(E,y.message||"")}(l);t=new EE(r,i,a,f||null)}else if("documentChange"in e){const r=e.documentChange,i=ca(n,r.document.name),a=Ur(r.document.updateTime),l=r.document.createTime?Ur(r.document.createTime):St.min(),f=new Oi({mapValue:{fields:r.document.fields}}),y=Fn.newFoundDocument(i,a,l,f);t=new hy(r.targetIds||[],r.removedTargetIds||[],y.key,y)}else if("documentDelete"in e){const r=e.documentDelete,i=ca(n,r.document),a=r.readTime?Ur(r.readTime):St.min(),l=Fn.newNoDocument(i,a);t=new hy([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=ca(n,r.document);t=new hy([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return gt();{const r=e.filter,a=new xI(r.count||0);t=new NI(r.targetId,a)}}var y;return t}(this.yt,e),r=function(i){if(!("targetChange"in i))return St.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?St.min():a.readTime?Ur(a.readTime):St.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=Eh(this.yt),t.addTarget=function(i,a){let l;const f=a.target;return l=ny(f)?{documents:VI(i,f)}:{query:AE(i,f)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?l.resumeToken=FS(i,a.resumeToken):a.snapshotVersion.compareTo(St.min())>0&&(l.readTime=Ap(i,a.snapshotVersion.toTimestamp())),l}(this.yt,e);const r=function Kx(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return gt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=Eh(this.yt),t.removeTarget=e,this.Bo(t)}}class cL extends VO{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.yt=a,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(Dt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function SE(n,e){return n&&n.length>0?(Dt(void 0!==e),n.map(t=>function(r,i){let a=Ur(r.updateTime?r.updateTime:i);return a.isEqual(St.min())&&(a=Ur(i)),new RS(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Ur(e.commitTime);return this.listener.Zo(r,t)}return Dt(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Eh(this.yt),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>yy(this.yt,r))};this.Bo(t)}}class dL extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.yt=i,this.nu=!1}su(){if(this.nu)throw new Fe(pe.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.ao(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Fe(pe.UNKNOWN,i.toString())})}_o(e,t,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection._o(e,t,r,a,l,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Fe(pe.UNKNOWN,a.toString())})}terminate(){this.nu=!0}}class fL{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(hr(t),this.ou=!1):Ve("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class pL{constructor(e,t,r,i,a){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=a,this.mu.Ur(f=>{r.enqueueAndForget((0,Ee.Z)(function*(){var y;kc(l)&&(Ve("RemoteStore","Restarting streams for network reachability change."),yield(y=(0,Ee.Z)(function*(E){const C=nt(E);C._u.add(4),yield Iy(C),C.gu.set("Unknown"),C._u.delete(4),yield VE(C)}),function(E){return y.apply(this,arguments)})(l))}))}),this.gu=new fL(r,i)}}function VE(n){return fA.apply(this,arguments)}function fA(){return fA=(0,Ee.Z)(function*(n){if(kc(n))for(const e of n.wu)yield e(!0)}),fA.apply(this,arguments)}function Iy(n){return pA.apply(this,arguments)}function pA(){return pA=(0,Ee.Z)(function*(n){for(const e of n.wu)yield e(!1)}),pA.apply(this,arguments)}function rD(n,e){const t=nt(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),yA(t)?mA(t):Cy(t).ko()&&gA(t,e))}function BE(n,e){const t=nt(n),r=Cy(t);t.du.delete(e),r.ko()&&BO(t,e),0===t.du.size&&(r.ko()?r.Fo():kc(t)&&t.gu.set("Unknown"))}function gA(n,e){n.yu.Ot(e.targetId),Cy(n).zo(e)}function BO(n,e){n.yu.Ot(e),Cy(n).Ho(e)}function mA(n){n.yu=new PI({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>n.du.get(e)||null}),Cy(n).start(),n.gu.uu()}function yA(n){return kc(n)&&!Cy(n).No()&&n.du.size>0}function kc(n){return 0===nt(n)._u.size}function $O(n){n.yu=void 0}function gL(n){return _A.apply(this,arguments)}function _A(){return _A=(0,Ee.Z)(function*(n){n.du.forEach((e,t)=>{gA(n,e)})}),_A.apply(this,arguments)}function mL(n,e){return vA.apply(this,arguments)}function vA(){return vA=(0,Ee.Z)(function*(n,e){$O(n),yA(n)?(n.gu.hu(e),mA(n)):n.gu.set("Unknown")}),vA.apply(this,arguments)}function yL(n,e,t){return EA.apply(this,arguments)}function EA(){return EA=(0,Ee.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof EE&&2===e.state&&e.cause)try{yield(r=(0,Ee.Z)(function*(i,a){const l=a.cause;for(const f of a.targetIds)i.du.has(f)&&(yield i.remoteSyncer.rejectListen(f,l),i.du.delete(f),i.yu.removeTarget(f))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Ve("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield iD(n,r)}else if(e instanceof hy?n.yu.Kt(e):e instanceof NI?n.yu.Jt(e):n.yu.jt(e),!t.isEqual(St.min()))try{const r=yield MO(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const l=i.yu.Zt(a);return l.targetChanges.forEach((f,y)=>{if(f.resumeToken.approximateByteSize()>0){const E=i.du.get(y);E&&i.du.set(y,E.withResumeToken(f.resumeToken,a))}}),l.targetMismatches.forEach(f=>{const y=i.du.get(f);if(!y)return;i.du.set(f,y.withResumeToken(Lr.EMPTY_BYTE_STRING,y.snapshotVersion)),BO(i,f);const E=new wh(y.target,f,1,y.sequenceNumber);gA(i,E)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Ve("RemoteStore","Failed to raise snapshot:",r),yield iD(n,r)}var r}),EA.apply(this,arguments)}function iD(n,e,t){return wA.apply(this,arguments)}function wA(){return wA=(0,Ee.Z)(function*(n,e,t){if(!oa(e))throw e;n._u.add(1),yield Iy(n),n.gu.set("Offline"),t||(t=()=>MO(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ee.Z)(function*(){Ve("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield VE(n)}))}),wA.apply(this,arguments)}function jO(n,e){return e().catch(t=>iD(n,t,e))}function Dy(n){return bA.apply(this,arguments)}function bA(){return bA=(0,Ee.Z)(function*(n){const e=nt(n),t=Ch(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;_L(e);)try{const i=yield nL(e.localStore,r);if(null===i){0===e.fu.length&&t.Fo();break}r=i.batchId,vL(e,i)}catch(i){yield iD(e,i)}HO(e)&&zO(e)}),bA.apply(this,arguments)}function _L(n){return kc(n)&&n.fu.length<10}function vL(n,e){n.fu.push(e);const t=Ch(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function HO(n){return kc(n)&&!Ch(n).No()&&n.fu.length>0}function zO(n){Ch(n).start()}function EL(n){return IA.apply(this,arguments)}function IA(){return IA=(0,Ee.Z)(function*(n){Ch(n).eu()}),IA.apply(this,arguments)}function wL(n){return DA.apply(this,arguments)}function DA(){return DA=(0,Ee.Z)(function*(n){const e=Ch(n);for(const t of n.fu)e.Xo(t.mutations)}),DA.apply(this,arguments)}function bL(n,e,t){return CA.apply(this,arguments)}function CA(){return CA=(0,Ee.Z)(function*(n,e,t){const r=n.fu.shift(),i=HS.from(r,e,t);yield jO(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Dy(n)}),CA.apply(this,arguments)}function IL(n,e){return TA.apply(this,arguments)}function TA(){return TA=(0,Ee.Z)(function*(n,e){var t;e&&Ch(n).Yo&&(yield(t=(0,Ee.Z)(function*(r,i){if(Cp(a=i.code)&&a!==pe.ABORTED){const l=r.fu.shift();Ch(r).Mo(),yield jO(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield Dy(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),HO(n)&&zO(n)}),TA.apply(this,arguments)}function GO(n,e){return SA.apply(this,arguments)}function SA(){return SA=(0,Ee.Z)(function*(n,e){const t=nt(n);t.asyncQueue.verifyOperationInProgress(),Ve("RemoteStore","RemoteStore received new credentials");const r=kc(t);t._u.add(3),yield Iy(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield VE(t)}),SA.apply(this,arguments)}function AA(n,e){return MA.apply(this,arguments)}function MA(){return MA=(0,Ee.Z)(function*(n,e){const t=nt(n);e?(t._u.delete(2),yield VE(t)):e||(t._u.add(2),yield Iy(t),t.gu.set("Unknown"))}),MA.apply(this,arguments)}function Cy(n){return n.pu||(n.pu=function(e,t,r){const i=nt(e);return i.su(),new lL(t,i.connection,i.authCredentials,i.appCheckCredentials,i.yt,r)}(n.datastore,n.asyncQueue,{Yr:gL.bind(null,n),Zr:mL.bind(null,n),Wo:yL.bind(null,n)}),n.wu.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.pu.Mo(),yA(n)?mA(n):n.gu.set("Unknown")):(yield n.pu.stop(),$O(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Ch(n){return n.Iu||(n.Iu=function(e,t,r){const i=nt(e);return i.su(),new cL(t,i.connection,i.authCredentials,i.appCheckCredentials,i.yt,r)}(n.datastore,n.asyncQueue,{Yr:EL.bind(null,n),Zr:IL.bind(null,n),tu:wL.bind(null,n),Zo:bL.bind(null,n)}),n.wu.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.Iu.Mo(),yield Dy(n)):(yield n.Iu.stop(),n.fu.length>0&&(Ve("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class RA{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Jn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,f=new RA(e,t,l,i,a);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Fe(pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ty(n,e){if(hr("AsyncQueue",`${e}: ${n}`),oa(n))return new Fe(pe.UNAVAILABLE,`${e}: ${n}`);throw n}class Sy{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Je.comparator(t.key,r.key):(t,r)=>Je.comparator(t.key,r.key),this.keyedMap=dy(),this.sortedSet=new Ir(this.comparator)}static emptySet(e){return new Sy(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Sy)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Sy;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class WO{constructor(){this.Tu=new Ir(Je.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):gt():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Ay{constructor(e,t,r,i,a,l,f,y,E){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=f,this.excludesMetadataChanges=y,this.hasCachedResults=E}static fromInitialDocuments(e,t,r,i,a){const l=[];return t.forEach(f=>{l.push({type:0,doc:f})}),new Ay(e,t,Sy.emptySet(t),l,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zi(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class DL{constructor(){this.Au=void 0,this.listeners=[]}}class CL{constructor(){this.queries=new ol(e=>bI(e),Zi),this.onlineState="Unknown",this.Ru=new Set}}function xA(n,e){return OA.apply(this,arguments)}function OA(){return OA=(0,Ee.Z)(function*(n,e){const t=nt(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new DL),i)try{a.Au=yield t.onListen(r)}catch(l){const f=Ty(l,`Initialization of query '${Ip(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,a),a.listeners.push(e),e.bu(t.onlineState),a.Au&&e.Pu(a.Au)&&kA(t)}),OA.apply(this,arguments)}function NA(n,e){return PA.apply(this,arguments)}function PA(){return PA=(0,Ee.Z)(function*(n,e){const t=nt(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const l=a.listeners.indexOf(e);l>=0&&(a.listeners.splice(l,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),PA.apply(this,arguments)}function TL(n,e){const t=nt(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const f of l.listeners)f.Pu(i)&&(r=!0);l.Au=i}}r&&kA(t)}function SL(n,e,t){const r=nt(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function kA(n){n.Ru.forEach(e=>{e.next()})}class FA{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Ay(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=Ay.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class AL{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class qO{constructor(e){this.yt=e}Ji(e){return ca(this.yt,e)}Yi(e){return e.metadata.exists?LI(this.yt,e.document,!1):Fn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Ur(e)}}class ML{constructor(e,t,r){this.Mu=e,this.localStore=t,this.yt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=KO(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=mn.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new qO(this.yt);for(const i of e)if(i.metadata.queries){const a=r.Ji(i.metadata.name);for(const l of i.metadata.queries){const f=(t.get(l)||tn()).add(a);t.set(l,f)}}return t}complete(){var e=this;return(0,Ee.Z)(function*(){const t=yield function rL(n,e,t,r){return sA.apply(this,arguments)}(e.localStore,new qO(e.yt),e.documents,e.Mu.id),r=e.$u(e.documents);for(const i of e.queries)yield iL(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function KO(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class ZO{constructor(e){this.key=e}}class YO{constructor(e){this.key=e}}class QO{constructor(e,t){this.query=e,this.qu=t,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=tn(),this.mutatedKeys=tn(),this.Gu=As(e),this.Qu=new Sy(this.Gu)}get ju(){return this.qu}Wu(e,t){const r=t?t.zu:new WO,i=t?t.Qu:this.Qu;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,f=!1;const y="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,E="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((C,M)=>{const L=i.get(C),z=Dp(this.query,M)?M:null,W=!!L&&this.mutatedKeys.has(L.key),ne=!!z&&(z.hasLocalMutations||this.mutatedKeys.has(z.key)&&z.hasCommittedMutations);let fe=!1;L&&z?L.data.isEqual(z.data)?W!==ne&&(r.track({type:3,doc:z}),fe=!0):this.Hu(L,z)||(r.track({type:2,doc:z}),fe=!0,(y&&this.Gu(z,y)>0||E&&this.Gu(z,E)<0)&&(f=!0)):!L&&z?(r.track({type:0,doc:z}),fe=!0):L&&!z&&(r.track({type:1,doc:L}),fe=!0,(y||E)&&(f=!0)),fe&&(z?(l=l.add(z),a=ne?a.add(C):a.delete(C)):(l=l.delete(C),a=a.delete(C)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const C="F"===this.query.limitType?l.last():l.first();l=l.delete(C.key),a=a.delete(C.key),r.track({type:1,doc:C})}return{Qu:l,zu:r,$i:f,mutatedKeys:a}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const a=e.zu.Eu();a.sort((E,C)=>function(M,L){const z=W=>{switch(W){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return gt()}};return z(M)-z(L)}(E.type,C.type)||this.Gu(E.doc,C.doc)),this.Ju(r);const l=t?this.Yu():[],f=0===this.Ku.size&&this.current?1:0,y=f!==this.Uu;return this.Uu=f,0!==a.length||y?{snapshot:new Ay(this.query,e.Qu,i,a,e.mutatedKeys,0===f,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:l}:{Xu:l}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new WO,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.qu=this.qu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qu=this.qu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=tn(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new YO(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new ZO(r))}),t}tc(e){this.qu=e.Hi,this.Ku=tn();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return Ay.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class RL{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class xL{constructor(e){this.key=e,this.nc=!1}}class OL{constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.sc={},this.ic=new ol(f=>bI(f),Zi),this.rc=new Map,this.oc=new Set,this.uc=new Ir(Je.comparator),this.cc=new Map,this.ac=new XS,this.hc={},this.lc=new Map,this.fc=Lp.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function NL(n,e){return LA.apply(this,arguments)}function LA(){return LA=(0,Ee.Z)(function*(n,e){const t=oM(n);let r,i;const a=t.ic.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.ec();else{const l=yield wy(t.localStore,Ni(e));t.isPrimaryClient&&rD(t.remoteStore,l);const f=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield UA(t,e,r,"current"===f,l.resumeToken)}return i}),LA.apply(this,arguments)}function UA(n,e,t,r,i){return VA.apply(this,arguments)}function VA(){return VA=(0,Ee.Z)(function*(n,e,t,r,i){n._c=(M,L,z)=>{return(W=(0,Ee.Z)(function*(ne,fe,je,at){let tt=fe.view.Wu(je);tt.$i&&(tt=yield JI(ne.localStore,fe.query,!1).then(({documents:xt})=>fe.view.Wu(xt,tt)));const Xe=at&&at.targetChanges.get(fe.targetId),At=fe.view.applyChanges(tt,ne.isPrimaryClient,Xe);return ZA(ne,fe.targetId,At.Xu),At.snapshot}),function(ne,fe,je,at){return W.apply(this,arguments)})(n,M,L,z);var W};const a=yield JI(n.localStore,e,!0),l=new QO(e,a.Hi),f=l.Wu(a.documents),y=al.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),E=l.applyChanges(f,n.isPrimaryClient,y);ZA(n,t,E.Xu);const C=new RL(e,t,l);return n.ic.set(e,C),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),E.snapshot}),VA.apply(this,arguments)}function PL(n,e){return BA.apply(this,arguments)}function BA(){return BA=(0,Ee.Z)(function*(n,e){const t=nt(n),r=t.ic.get(e),i=t.rc.get(r.targetId);if(i.length>1)return t.rc.set(r.targetId,i.filter(a=>!Zi(a,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield by(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),BE(t.remoteStore,r.targetId),My(t,r.targetId)}).catch(sa))):(My(t,r.targetId),yield by(t.localStore,r.targetId,!0))}),BA.apply(this,arguments)}function $A(){return $A=(0,Ee.Z)(function*(n,e,t){const r=aM(n);try{const i=yield function(a,l){const f=nt(a),y=qn.now(),E=l.reduce((L,z)=>L.add(z.key),tn());let C,M;return f.persistence.runTransaction("Locally write mutations","readwrite",L=>{let z=Ms(),W=tn();return f.Gi.getEntries(L,E).next(ne=>{z=ne,z.forEach((fe,je)=>{je.isValidDocument()||(W=W.add(fe))})}).next(()=>f.localDocuments.getOverlayedDocuments(L,z)).next(ne=>{C=ne;const fe=[];for(const je of l){const at=Hx(je,C.get(je.key).overlayedDocument);null!=at&&fe.push(new ua(je.key,at,ey(at.value.mapValue),er.exists(!0)))}return f.mutationQueue.addMutationBatch(L,y,fe,l)}).next(ne=>{M=ne;const fe=ne.applyToLocalDocumentSet(C,W);return f.documentOverlayCache.saveOverlays(L,ne.batchId,fe)})}).then(()=>({batchId:M.batchId,changes:_E(C)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,f){let y=a.hc[a.currentUser.toKey()];y||(y=new Ir(Kt)),y=y.insert(l,f),a.hc[a.currentUser.toKey()]=y}(r,i.batchId,t),yield Fc(r,i.changes),yield Dy(r.remoteStore)}catch(i){const a=Ty(i,"Failed to persist write");t.reject(a)}}),$A.apply(this,arguments)}function XO(n,e){return jA.apply(this,arguments)}function jA(){return jA=(0,Ee.Z)(function*(n,e){const t=nt(n);try{const r=yield tL(t.localStore,e);e.targetChanges.forEach((i,a)=>{const l=t.cc.get(a);l&&(Dt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.nc=!0:i.modifiedDocuments.size>0?Dt(l.nc):i.removedDocuments.size>0&&(Dt(l.nc),l.nc=!1))}),yield Fc(t,r,e)}catch(r){yield sa(r)}}),jA.apply(this,arguments)}function JO(n,e,t){const r=nt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ic.forEach((a,l)=>{const f=l.view.bu(e);f.snapshot&&i.push(f.snapshot)}),function(a,l){const f=nt(a);f.onlineState=l;let y=!1;f.queries.forEach((E,C)=>{for(const M of C.listeners)M.bu(l)&&(y=!0)}),y&&kA(f)}(r.eventManager,e),i.length&&r.sc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function FL(n,e,t){return HA.apply(this,arguments)}function HA(){return HA=(0,Ee.Z)(function*(n,e,t){const r=nt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.cc.get(e),a=i&&i.key;if(a){let l=new Ir(Je.comparator);l=l.insert(a,Fn.newNoDocument(a,St.min()));const f=tn().add(a),y=new Sp(St.min(),new Map,new An(Kt),l,f);yield XO(r,y),r.uc=r.uc.remove(a),r.cc.delete(e),YA(r)}else yield by(r.localStore,e,!1).then(()=>My(r,e,t)).catch(sa)}),HA.apply(this,arguments)}function LL(n,e){return zA.apply(this,arguments)}function zA(){return zA=(0,Ee.Z)(function*(n,e){const t=nt(n),r=e.batch.batchId;try{const i=yield eL(t.localStore,e);KA(t,r,null),qA(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Fc(t,i)}catch(i){yield sa(i)}}),zA.apply(this,arguments)}function UL(n,e,t){return GA.apply(this,arguments)}function GA(){return GA=(0,Ee.Z)(function*(n,e,t){const r=nt(n);try{const i=yield function(a,l){const f=nt(a);return f.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let E;return f.mutationQueue.lookupMutationBatch(y,l).next(C=>(Dt(null!==C),E=C.keys(),f.mutationQueue.removeMutationBatch(y,C))).next(()=>f.mutationQueue.performConsistencyCheck(y)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(y,E,l)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,E)).next(()=>f.localDocuments.getDocuments(y,E))})}(r.localStore,e);KA(r,e,t),qA(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Fc(r,i)}catch(i){yield sa(i)}}),GA.apply(this,arguments)}function WA(){return WA=(0,Ee.Z)(function*(n,e){const t=nt(n);kc(t.remoteStore)||Ve("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const l=nt(a);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>l.mutationQueue.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.lc.get(r)||[];i.push(e),t.lc.set(r,i)}catch(r){const i=Ty(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),WA.apply(this,arguments)}function qA(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function KA(n,e,t){const r=nt(n);let i=r.hc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.hc[r.currentUser.toKey()]=i}}function My(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||eN(n,r)})}function eN(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(BE(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),YA(n))}function ZA(n,e,t){for(const r of t)r instanceof ZO?(n.ac.addReference(r.key,e),BL(n,r)):r instanceof YO?(Ve("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||eN(n,r.key)):gt()}function BL(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(Ve("SyncEngine","New document in limbo: "+t),n.oc.add(r),YA(n))}function YA(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new Je(mn.fromString(e)),r=n.fc.next();n.cc.set(r,new xL(t)),n.uc=n.uc.insert(t,r),rD(n.remoteStore,new wh(Ni(bp(t.path)),r,2,ss.at))}}function Fc(n,e,t){return QA.apply(this,arguments)}function QA(){return QA=(0,Ee.Z)(function*(n,e,t){const r=nt(n),i=[],a=[],l=[];var f;r.ic.isEmpty()||(r.ic.forEach((f,y)=>{l.push(r._c(y,e,t).then(E=>{if((E||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(y.targetId,E?.fromCache?"not-current":"current"),E){i.push(E);const C=nA.Ci(y.targetId,E);a.push(C)}}))}),yield Promise.all(l),r.sc.Wo(i),yield(f=(0,Ee.Z)(function*(y,E){const C=nt(y);try{yield C.persistence.runTransaction("notifyLocalViewChanges","readwrite",M=>de.forEach(E,L=>de.forEach(L.Si,z=>C.persistence.referenceDelegate.addReference(M,L.targetId,z)).next(()=>de.forEach(L.Di,z=>C.persistence.referenceDelegate.removeReference(M,L.targetId,z)))))}catch(M){if(!oa(M))throw M;Ve("LocalStore","Failed to update sequence numbers: "+M)}for(const M of E){const L=M.targetId;if(!M.fromCache){const z=C.qi.get(L),ne=z.withLastLimboFreeSnapshotVersion(z.snapshotVersion);C.qi=C.qi.insert(L,ne)}}}),function(y,E){return f.apply(this,arguments)})(r.localStore,a))}),QA.apply(this,arguments)}function $L(n,e){return XA.apply(this,arguments)}function XA(){return XA=(0,Ee.Z)(function*(n,e){const t=nt(n);if(!t.currentUser.isEqual(e)){Ve("SyncEngine","User change. New user:",e.toKey());const r=yield AO(t.localStore,e);t.currentUser=e,(i=t).lc.forEach(l=>{l.forEach(f=>{f.reject(new Fe(pe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Fc(t,r.ji)}var i}),XA.apply(this,arguments)}function jL(n,e){const t=nt(n),r=t.cc.get(e);if(r&&r.nc)return tn().add(r.key);{let i=tn();const a=t.rc.get(e);if(!a)return i;for(const l of a){const f=t.ic.get(l);i=i.unionWith(f.view.ju)}return i}}function HL(n,e){return JA.apply(this,arguments)}function JA(){return JA=(0,Ee.Z)(function*(n,e){const t=nt(n),r=yield JI(t.localStore,e.query,!0),i=e.view.tc(r);return t.isPrimaryClient&&ZA(t,e.targetId,i.Xu),i}),JA.apply(this,arguments)}function zL(n,e){return eM.apply(this,arguments)}function eM(){return eM=(0,Ee.Z)(function*(n,e){const t=nt(n);return OO(t.localStore,e).then(r=>Fc(t,r))}),eM.apply(this,arguments)}function GL(n,e,t,r){return tM.apply(this,arguments)}function tM(){return tM=(0,Ee.Z)(function*(n,e,t,r){const i=nt(n),a=yield function(l,f){const y=nt(l),E=nt(y.mutationQueue);return y.persistence.runTransaction("Lookup mutation documents","readonly",C=>E.Tn(C,f).next(M=>M?y.localDocuments.getDocuments(C,M):de.resolve(null)))}(i.localStore,e);var f;null!==a?("pending"===t?yield Dy(i.remoteStore):"acknowledged"===t||"rejected"===t?(KA(i,e,r||null),qA(i,e),f=e,nt(nt(i.localStore).mutationQueue).An(f)):gt(),yield Fc(i,a)):Ve("SyncEngine","Cannot apply mutation batch with id: "+e)}),tM.apply(this,arguments)}function nM(){return nM=(0,Ee.Z)(function*(n,e){const t=nt(n);if(oM(t),aM(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield tN(t,r.toArray());t.dc=!0,yield AA(t.remoteStore,!0);for(const a of i)rD(t.remoteStore,a)}else if(!1===e&&!1!==t.dc){const r=[];let i=Promise.resolve();t.rc.forEach((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(My(t,l),by(t.localStore,l,!0))),BE(t.remoteStore,l)}),yield i,yield tN(t,r),function(a){const l=nt(a);l.cc.forEach((f,y)=>{BE(l.remoteStore,y)}),l.ac.fs(),l.cc=new Map,l.uc=new Ir(Je.comparator)}(t),t.dc=!1,yield AA(t.remoteStore,!1)}}),nM.apply(this,arguments)}function tN(n,e,t){return rM.apply(this,arguments)}function rM(){return rM=(0,Ee.Z)(function*(n,e,t){const r=nt(n),i=[],a=[];for(const l of e){let f;const y=r.rc.get(l);if(y&&0!==y.length){f=yield wy(r.localStore,Ni(y[0]));for(const E of y){const C=r.ic.get(E),M=yield HL(r,C);M.snapshot&&a.push(M.snapshot)}}else{const E=yield xO(r.localStore,l);f=yield wy(r.localStore,E),yield UA(r,nN(E),l,!1,f.resumeToken)}i.push(f)}return r.sc.Wo(a),i}),rM.apply(this,arguments)}function nN(n){return SS(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function qL(n){const e=nt(n);return nt(nt(e.localStore).persistence).vi()}function KL(n,e,t,r){return iM.apply(this,arguments)}function iM(){return iM=(0,Ee.Z)(function*(n,e,t,r){const i=nt(n);if(i.dc)return void Ve("SyncEngine","Ignoring unexpected query state notification.");const a=i.rc.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=yield OO(i.localStore,AS(a[0])),f=Sp.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Lr.EMPTY_BYTE_STRING);yield Fc(i,l,f);break}case"rejected":yield by(i.localStore,e,!0),My(i,e,r);break;default:gt()}}),iM.apply(this,arguments)}function ZL(n,e,t){return sM.apply(this,arguments)}function sM(){return sM=(0,Ee.Z)(function*(n,e,t){const r=oM(n);if(r.dc){for(const i of e){if(r.rc.has(i)){Ve("SyncEngine","Adding an already active target "+i);continue}const a=yield xO(r.localStore,i),l=yield wy(r.localStore,a);yield UA(r,nN(a),l.targetId,!1,l.resumeToken),rD(r.remoteStore,l)}for(const i of t)r.rc.has(i)&&(yield by(r.localStore,i,!1).then(()=>{BE(r.remoteStore,i),My(r,i)}).catch(sa))}}),sM.apply(this,arguments)}function oM(n){const e=nt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=XO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=jL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=FL.bind(null,e),e.sc.Wo=TL.bind(null,e.eventManager),e.sc.wc=SL.bind(null,e.eventManager),e}function aM(n){const e=nt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=LL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=UL.bind(null,e),e}class rN{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ee.Z)(function*(){t.yt=UE(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return SO(this.persistence,new TO,e.initialUser,this.yt)}yc(e){return new DO(QI.Bs,this.yt)}gc(e){return new FO}terminate(){var e=this;return(0,Ee.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class iN extends rN{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ee.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield aM(r.Ac.syncEngine),yield Dy(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return SO(this.persistence,new TO,e.initialUser,this.yt)}Tc(e,t){return new VF(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new cI(t,this.persistence);return new vS(e.asyncQueue,r)}yc(e){const t=tA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?eo.withCacheSize(this.cacheSizeBytes):eo.DEFAULT;return new eA(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,UO(),nD(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(e){return new FO}}class QL extends iN{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ee.Z)(function*(){yield t().call(r,e);const i=r.Ac.syncEngine;r.sharedClientState instanceof cA&&(r.sharedClientState.syncEngine={Fr:GL.bind(null,i),$r:KL.bind(null,i),Br:ZL.bind(null,i),vi:qL.bind(null,i),Mr:zL.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var a=(0,Ee.Z)(function*(l){yield function WL(n,e){return nM.apply(this,arguments)}(r.Ac.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return a.apply(this,arguments)}}())})()}gc(e){const t=UO();if(!cA.C(t))throw new Fe(pe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=tA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new cA(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class uM{initialize(e,t){var r=this;return(0,Ee.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>JO(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=$L.bind(null,r.syncEngine),yield AA(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new CL}createDatastore(e){const t=UE(e.databaseInfo.databaseId),r=new uL(e.databaseInfo);return new dL(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=f=>JO(this.syncEngine,f,0),l=LO.C()?new LO:new sL,new pL(t,r,i,a,l);var t,r,i,a,l}createSyncEngine(e,t){return function(r,i,a,l,f,y,E){const C=new OL(r,i,a,l,f,y);return E&&(C.dc=!0),C}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ee.Z)(function*(t){const r=nt(t);Ve("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield Iy(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function lM(n,e,t){if(!t)throw new Fe(pe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function sN(n,e,t,r){if(!0===e&&!0===r)throw new Fe(pe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function oN(n){if(!Je.isDocumentKey(n))throw new Fe(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function aN(n){if(Je.isDocumentKey(n))throw new Fe(pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function sD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":gt()}function yn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Fe(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=sD(n);throw new Fe(pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function uN(n,e){if(e<=0)throw new Fe(pe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const lN=new Map;class cN{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Fe(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Fe(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,sN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class $E{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cN({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Fe(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Fe(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cN(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new rI;switch(t.type){case"gapi":return new gS(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Fe(pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=lN.get(e);t&&(Ve("ComponentProvider","Removing Datastore"),lN.delete(e),t.terminate())}(this),Promise.resolve()}}function dN(n,e,t,r={}){var i;const a=(n=yn(n,$E))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&Cc("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,f;if("string"==typeof r.mockUserToken)l=r.mockUserToken,f=li.MOCK_USER;else{l=(0,sn.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new Fe(pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new li(y)}n._authCredentials=new iI(new Yv(l,f))}}class tr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ll(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new tr(this.firestore,e,this._key)}}class Yi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Yi(this.firestore,e,this._query)}}class ll extends Yi{constructor(e,t,r){super(e,t,bp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new tr(this.firestore,null,new Je(e))}withConverter(e){return new ll(this.firestore,e,this._path)}}function hN(n,e,...t){if(n=(0,sn.m9)(n),lM("collection","path",e),n instanceof $E){const r=mn.fromString(e,...t);return aN(r),new ll(n,null,r)}{if(!(n instanceof tr||n instanceof ll))throw new Fe(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(mn.fromString(e,...t));return aN(r),new ll(n.firestore,null,r)}}function oD(n,e,...t){if(n=(0,sn.m9)(n),1===arguments.length&&(e=uI.R()),lM("doc","path",e),n instanceof $E){const r=mn.fromString(e,...t);return oN(r),new tr(n,null,new Je(r))}{if(!(n instanceof tr||n instanceof ll))throw new Fe(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(mn.fromString(e,...t));return oN(r),new tr(n.firestore,n instanceof ll?n.converter:null,new Je(r))}}function fN(n,e){return n=(0,sn.m9)(n),e=(0,sn.m9)(e),(n instanceof tr||n instanceof ll)&&(e instanceof tr||e instanceof ll)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function cM(n,e){return n=(0,sn.m9)(n),e=(0,sn.m9)(e),n instanceof Yi&&e instanceof Yi&&n.firestore===e.firestore&&Zi(n._query,e._query)&&n.converter===e.converter}function pN(n,e=10240){let t=0;return{read:()=>(0,Ee.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ee.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class aD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):hr("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class JL{constructor(e,t){this.Pc=e,this.yt=t,this.metadata=new Jn,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,Ee.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,Ee.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),i=Number(r);isNaN(i)&&e.Dc(`length string (${r}) is not valid number`);const a=yield e.Cc(i);return new AL(JSON.parse(a),t.length+i)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,Ee.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,Ee.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class nU{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ee.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Fe(pe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Ee.Z)(function*(a,l){const f=nt(a),y=Eh(f.yt)+"/documents",E={documents:l.map(z=>Mp(f.yt,z))},C=yield f._o("BatchGetDocuments",y,E,l.length),M=new Map;C.forEach(z=>{const W=function UI(n,e){return"found"in e?function(t,r){Dt(!!r.found);const i=ca(t,r.found.name),a=Ur(r.found.updateTime),l=r.found.createTime?Ur(r.found.createTime):St.min(),f=new Oi({mapValue:{fields:r.found.fields}});return Fn.newFoundDocument(i,a,l,f)}(n,e):"missing"in e?function(t,r){Dt(!!r.missing),Dt(!!r.readTime);const i=ca(t,r.missing),a=Ur(r.readTime);return Fn.newNoDocument(i,a)}(n,e):gt()}(f.yt,z);M.set(W.key.toString(),W)});const L=[];return l.forEach(z=>{const W=M.get(z.toString());Dt(!!W),L.push(W)}),L}),function(a,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Pc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ee.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=Je.fromPath(i);e.mutations.push(new cy(a,e.precondition(a)))}),yield(r=(0,Ee.Z)(function*(i,a){const l=nt(i),f=Eh(l.yt)+"/documents",y={writes:a.map(E=>yy(l.yt,E))};yield l.ao("Commit",f,y)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw gt();t=St.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Fe(pe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(St.min())?er.exists(!1):er.updateTime(t):er.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(St.min()))throw new Fe(pe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return er.updateTime(t)}return er.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class rU{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.kc=r.maxAttempts,this.xo=new dA(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,Ee.Z)(function*(){const t=new nU(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Fc(a)}))}).catch(i=>{e.Fc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!pp(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Cp(t)}return!1}}class iU{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=li.UNAUTHENTICATED,this.clientId=uI.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,Ee.Z)(function*(f){Ve("FirestoreClient","Received user=",f.uid),yield a.authCredentialListener(f),a.user=f});return function(f){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Ve("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,Ee.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Fe(pe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Jn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Ty(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function gN(n,e){return dM.apply(this,arguments)}function dM(){return dM=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ve("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Ee.Z)(function*(a){r.isEqual(a)||(yield AO(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),dM.apply(this,arguments)}function mN(n,e){return hM.apply(this,arguments)}function hM(){return hM=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield fM(n);Ve("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>GO(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>GO(e.remoteStore,a)),n.onlineComponents=e}),hM.apply(this,arguments)}function fM(n){return pM.apply(this,arguments)}function pM(){return pM=(0,Ee.Z)(function*(n){return n.offlineComponents||(Ve("FirestoreClient","Using default OfflineComponentProvider"),yield gN(n,new rN)),n.offlineComponents}),pM.apply(this,arguments)}function uD(n){return gM.apply(this,arguments)}function gM(){return gM=(0,Ee.Z)(function*(n){return n.onlineComponents||(Ve("FirestoreClient","Using default OnlineComponentProvider"),yield mN(n,new uM)),n.onlineComponents}),gM.apply(this,arguments)}function yN(n){return fM(n).then(e=>e.persistence)}function lD(n){return fM(n).then(e=>e.localStore)}function mM(n){return uD(n).then(e=>e.remoteStore)}function yM(n){return uD(n).then(e=>e.syncEngine)}function Ry(n){return _M.apply(this,arguments)}function _M(){return _M=(0,Ee.Z)(function*(n){const e=yield uD(n),t=e.eventManager;return t.onListen=NL.bind(null,e.syncEngine),t.onUnlisten=PL.bind(null,e.syncEngine),t}),_M.apply(this,arguments)}function vN(n,e,t={}){const r=new Jn;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(i,a,l,f,y){const E=new aD({next:M=>{a.enqueueAndForget(()=>NA(i,C));const L=M.docs.has(l);!L&&M.fromCache?y.reject(new Fe(pe.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&M.fromCache&&f&&"server"===f.source?y.reject(new Fe(pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(M)},error:M=>y.reject(M)}),C=new FA(bp(l.path),E,{includeMetadataChanges:!0,Nu:!0});return xA(i,C)}(yield Ry(n),n.asyncQueue,e,t,r)})),r.promise}function EN(n,e,t={}){const r=new Jn;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(i,a,l,f,y){const E=new aD({next:M=>{a.enqueueAndForget(()=>NA(i,C)),M.fromCache&&"server"===f.source?y.reject(new Fe(pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(M)},error:M=>y.reject(M)}),C=new FA(l,E,{includeMetadataChanges:!0,Nu:!0});return xA(i,C)}(yield Ry(n),n.asyncQueue,e,t,r)})),r.promise}class hU{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new dA(this,"async_queue_retry"),this.Wc=()=>{const t=nD();t&&Ve("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=nD();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const t=nD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const t=new Jn;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,Ee.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!oa(t))throw t;Ve("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,hr("INTERNAL UNHANDLED ERROR: ",function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),l}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const i=RA.createAndSchedule(this,e,t,r,a=>this.Yc(a));return this.Uc.push(i),i}zc(){this.Kc&&gt()}verifyOperationInProgress(){}Xc(){var e=this;return(0,Ee.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function vM(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class fU{constructor(){this._progressObserver={},this._taskCompletionResolver=new Jn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class nr extends $E{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new hU,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||wN(this),this._firestoreClient.terminate()}}function gU(n,e){const t="object"==typeof n?n:(0,qi.getApp)(),r="string"==typeof n?n:e||"(default)",i=(0,qi._getProvider)(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=(0,sn.P0)("firestore");a&&dN(i,...a)}return i}function Yr(n){return n._firestoreClient||wN(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function wN(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new ES(n._databaseId,a,n._persistenceKey,(f=t).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,f.useFetchStreams));var a,f;n._firestoreClient=new iU(n._authCredentials,n._appCheckCredentials,n._queue,r)}function bN(n,e,t){const r=new Jn;return n.asyncQueue.enqueue((0,Ee.Z)(function*(){try{yield gN(n,t),yield mN(n,e),r.resolve()}catch(i){const a=i;if(!("FirebaseError"===(l=a).name?l.code===pe.FAILED_PRECONDITION||l.code===pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw a;Cc("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a)}var l})).then(()=>r.promise)}function IN(n){if(n._initialized||n._terminated)throw new Fe(pe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class cl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new cl(Lr.fromBase64String(e))}catch(t){throw new Fe(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new cl(Lr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Lc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Fe(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Vp{constructor(e){this._methodName=e}}class cD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Fe(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Fe(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Kt(this._lat,e._lat)||Kt(this._long,e._long)}}const DU=/^__.*__$/;class CU{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new ua(e,this.data,this.fieldMask,t,this.fieldTransforms):new vh(e,this.data,t,this.fieldTransforms)}}class DN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ua(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function CN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw gt()}}class dD{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.yt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.na(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new dD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.ua(e),i}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.na(),i}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return pD(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(CN(this.sa)&&DU.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class TU{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.yt=r||UE(e)}da(e,t,r,i=!1){return new dD({sa:e,methodName:t,fa:r,path:kn.emptyPath(),oa:!1,la:i},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function Bp(n){const e=n._freezeSettings(),t=UE(n._databaseId);return new TU(n._databaseId,!!e.ignoreUndefinedProperties,t)}function hD(n,e,t,r,i,a={}){const l=n.da(a.merge||a.mergeFields?2:0,e,t,i);IM("Data must be an object, but it was:",l,r);const f=AN(r,l);let y,E;if(a.merge)y=new Ki(l.fieldMask),E=l.fieldTransforms;else if(a.mergeFields){const C=[];for(const M of a.mergeFields){const L=DM(e,M,t);if(!l.contains(L))throw new Fe(pe.INVALID_ARGUMENT,`Field '${L}' is specified in your field mask but missing from your input data.`);RN(C,L)||C.push(L)}y=new Ki(C),E=l.fieldTransforms.filter(M=>y.covers(M.field))}else y=null,E=l.fieldTransforms;return new CU(new Oi(f),y,E)}class jE extends Vp{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jE}}function TN(n,e,t){return new dD({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.yt,e.ignoreUndefinedProperties)}class EM extends Vp{_toFieldTransform(e){return new Nc(e.path,new Oc)}isEqual(e){return e instanceof EM}}class SU extends Vp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=TN(this,e,!0),r=this._a.map(a=>$p(a,t)),i=new rl(r);return new Nc(e.path,i)}isEqual(e){return this===e}}class AU extends Vp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=TN(this,e,!0),r=this._a.map(a=>$p(a,t)),i=new il(r);return new Nc(e.path,i)}isEqual(e){return this===e}}class MU extends Vp{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new sl(e.yt,DI(e.yt,this.wa));return new Nc(e.path,t)}isEqual(e){return this===e}}function wM(n,e,t,r){const i=n.da(1,e,t);IM("Data must be an object, but it was:",i,r);const a=[],l=Oi.empty();br(r,(y,E)=>{const C=fD(e,y,t);E=(0,sn.m9)(E);const M=i.ca(C);if(E instanceof jE)a.push(C);else{const L=$p(E,M);null!=L&&(a.push(C),l.set(C,L))}});const f=new Ki(a);return new DN(l,f,i.fieldTransforms)}function bM(n,e,t,r,i,a){const l=n.da(1,e,t),f=[DM(e,r,t)],y=[i];if(a.length%2!=0)throw new Fe(pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let L=0;L<a.length;L+=2)f.push(DM(e,a[L])),y.push(a[L+1]);const E=[],C=Oi.empty();for(let L=f.length-1;L>=0;--L)if(!RN(E,f[L])){const z=f[L];let W=y[L];W=(0,sn.m9)(W);const ne=l.ca(z);if(W instanceof jE)E.push(z);else{const fe=$p(W,ne);null!=fe&&(E.push(z),C.set(z,fe))}}const M=new Ki(E);return new DN(C,M,l.fieldTransforms)}function SN(n,e,t,r=!1){return $p(t,n.da(r?4:3,e))}function $p(n,e){if(MN(n=(0,sn.m9)(n)))return IM("Unsupported field value:",e,n),AN(n,e);if(n instanceof Vp)return function(t,r){if(!CN(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const l of t){let f=$p(l,r.aa(a));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,sn.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return DI(r.yt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=qn.fromDate(t);return{timestampValue:Ap(r.yt,i)}}if(t instanceof qn){const i=new qn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Ap(r.yt,i)}}if(t instanceof cD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof cl)return{bytesValue:FS(r.yt,t._byteString)};if(t instanceof tr){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.ha(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:my(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${sD(t)}`)}(n,e)}function AN(n,e){const t={};return Sc(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):br(n,(r,i)=>{const a=$p(i,e.ra(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function MN(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof qn||n instanceof cD||n instanceof cl||n instanceof tr||n instanceof Vp)}function IM(n,e,t){if(!MN(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=sD(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function DM(n,e,t){if((e=(0,sn.m9)(e))instanceof Lc)return e._internalPath;if("string"==typeof e)return fD(n,e);throw pD("Field path arguments must be of type string or ",n,!1,void 0,t)}const RU=new RegExp("[~\\*/\\[\\]]");function fD(n,e,t){if(e.search(RU)>=0)throw pD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Lc(...e.split("."))._internalPath}catch{throw pD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function pD(n,e,t,r,i){const a=r&&!r.isEmpty(),l=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let y="";return(a||l)&&(y+=" (found",a&&(y+=` in field ${r}`),l&&(y+=` in document ${i}`),y+=")"),new Fe(pe.INVALID_ARGUMENT,f+n+y)}function RN(n,e){return n.some(t=>t.isEqual(e))}class HE{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new tr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new xU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(gD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class xU extends HE{data(){return super.data()}}function gD(n,e){return"string"==typeof e?fD(n,e):e instanceof Lc?e._internalPath:e._delegate._internalPath}function xN(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Fe(pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class CM{}class zE extends CM{}function Th(n,e,...t){let r=[];e instanceof CM&&r.push(e),r=r.concat(t),function(i){const a=i.filter(f=>f instanceof xy).length,l=i.filter(f=>f instanceof GE).length;if(a>1||a>0&&l>0)throw new Fe(pe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class GE extends zE{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new GE(e,t,r)}_apply(e){const t=this._parse(e);return kN(e._query,t),new Yi(e.firestore,e.converter,sy(e._query,t))}_parse(e){const t=Bp(e.firestore);return function(i,a,l,f,y,E,C){let M;if(y.isKeyField()){if("array-contains"===E||"array-contains-any"===E)throw new Fe(pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if("in"===E||"not-in"===E){PN(C,E);const L=[];for(const z of C)L.push(NN(f,i,z));M={arrayValue:{values:L}}}else M=NN(f,i,C)}else"in"!==E&&"not-in"!==E&&"array-contains-any"!==E||PN(C,E),M=SN(l,"where",C,"in"===E||"not-in"===E);return ln.create(y,E,M)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class xy extends CM{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new xy(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Sn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let a=r;const l=i.getFlattenedFilters();for(const f of l)kN(a,f),a=sy(a,f)}(e._query,t),new Yi(e.firestore,e.converter,sy(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class TM extends zE{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new TM(e,t)}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Fe(pe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Fe(pe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new _p(i,a);return function(f,y){if(null===hE(f)){const E=iy(f);null!==E&&FN(0,E,y.field)}}(r,l),l}(e._query,this._field,this._direction);return new Yi(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new nl(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class mD extends zE{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new mD(e,t,r)}_apply(e){return new Yi(e.firestore,e.converter,fE(e._query,this._limit,this._limitType))}}class yD extends zE{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new yD(e,t,r)}_apply(e){const t=ON(e,this.type,this._docOrFields,this._inclusive);return new Yi(e.firestore,e.converter,(i=t,new nl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class _D extends zE{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new _D(e,t,r)}_apply(e){const t=ON(e,this.type,this._docOrFields,this._inclusive);return new Yi(e.firestore,e.converter,(i=t,new nl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function ON(n,e,t,r){if(t[0]=(0,sn.m9)(t[0]),t[0]instanceof HE)return function(i,a,l,f,y){if(!f)throw new Fe(pe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const E=[];for(const C of xc(i))if(C.field.isKeyField())E.push(Ac(a,f.key));else{const M=f.data.field(C.field);if(rE(M))throw new Fe(pe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+C.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===M){const L=C.field.canonicalString();throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${L}' (used as the orderBy) does not exist.`)}E.push(M)}return new Za(E,y)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Bp(n.firestore);return function(a,l,f,y,E,C){const M=a.explicitOrderBy;if(E.length>M.length)throw new Fe(pe.INVALID_ARGUMENT,`Too many arguments provided to ${y}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const L=[];for(let z=0;z<E.length;z++){const W=E[z];if(M[z].field.isKeyField()){if("string"!=typeof W)throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${y}(), but got a ${typeof W}`);if(!wI(a)&&-1!==W.indexOf("/"))throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${y}() must be a plain document ID, but '${W}' contains a slash.`);const ne=a.path.child(mn.fromString(W));if(!Je.isDocumentKey(ne))throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${y}() must result in a valid document path, but '${ne}' is not because it contains an odd number of segments.`);const fe=new Je(ne);L.push(Ac(l,fe))}else{const ne=SN(f,y,W);L.push(ne)}}return new Za(L,C)}(n._query,n.firestore._databaseId,i,e,t,r)}}function NN(n,e,t){if("string"==typeof(t=(0,sn.m9)(t))){if(""===t)throw new Fe(pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!wI(e)&&-1!==t.indexOf("/"))throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(mn.fromString(t));if(!Je.isDocumentKey(r))throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ac(n,new Je(r))}if(t instanceof tr)return Ac(n,t._key);throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${sD(t)}.`)}function PN(n,e){if(!Array.isArray(n)||0===n.length)throw new Fe(pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Fe(pe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function kN(n,e){if(e.isInequality()){const r=iy(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const a=hE(n);null!==a&&FN(0,i,a)}const t=function(r,i){for(const a of r)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Fe(pe.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function FN(n,e,t){if(!t.isEqual(e))throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class SM{convertValue(e,t="none"){switch(Ka(e)){case 0:return null;case 1:return e.booleanValue;case 2:return fr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(qa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw gt()}}convertObject(e,t){const r={};return br(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new cD(fr(e.latitude),fr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=iE(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(mp(e));default:return null}}convertTimestamp(e){const t=Js(e);return new qn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=mn.fromString(e);Dt($I(r));const i=new Wa(r.get(1),r.get(3)),a=new Je(r.popFirst(5));return i.isEqual(t)||hr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function vD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class BU extends SM{constructor(e){super(),this.firestore=e}convertBytes(e){return new cl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new tr(this.firestore,null,t)}}class jp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Uc extends HE{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new WE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(gD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class WE extends Uc{data(e={}){return super.data(e)}}class Sh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new jp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new WE(this._firestore,this._userDataWriter,r.key,r,new jp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Fe(pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new WE(r._firestore,r._userDataWriter,l.doc.key,l.doc,new jp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const f=new WE(r._firestore,r._userDataWriter,l.doc.key,l.doc,new jp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let y=-1,E=-1;return 0!==l.type&&(y=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),1!==l.type&&(a=a.add(l.doc),E=a.indexOf(l.doc.key)),{type:$U(l.type),doc:f,oldIndex:y,newIndex:E}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function $U(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return gt()}}function UN(n,e){return n instanceof Uc&&e instanceof Uc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Sh&&e instanceof Sh&&n._firestore===e._firestore&&cM(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Ah extends SM{constructor(e){super(),this.firestore=e}convertBytes(e){return new cl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new tr(this.firestore,null,t)}}function VN(n,e,t){n=yn(n,tr);const r=yn(n.firestore,nr),i=vD(n.converter,e,t);return Oy(r,[hD(Bp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,er.none())])}function BN(n,e,t,...r){n=yn(n,tr);const i=yn(n.firestore,nr),a=Bp(i);let l;return l="string"==typeof(e=(0,sn.m9)(e))||e instanceof Lc?bM(a,"updateDoc",n._key,e,t,r):wM(a,"updateDoc",n._key,e),Oy(i,[l.toMutation(n._key,er.exists(!0))])}function $N(n,...e){var t,r,i;n=(0,sn.m9)(n);let a={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||vM(e[l])||(a=e[l],l++);const f={includeMetadataChanges:a.includeMetadataChanges};if(vM(e[l])){const M=e[l];e[l]=null===(t=M.next)||void 0===t?void 0:t.bind(M),e[l+1]=null===(r=M.error)||void 0===r?void 0:r.bind(M),e[l+2]=null===(i=M.complete)||void 0===i?void 0:i.bind(M)}let y,E,C;if(n instanceof tr)E=yn(n.firestore,nr),C=bp(n._key.path),y={next:M=>{e[l]&&e[l](AM(E,n,M))},error:e[l+1],complete:e[l+2]};else{const M=yn(n,Yi);E=yn(M.firestore,nr),C=M._query;const L=new Ah(E);y={next:z=>{e[l]&&e[l](new Sh(E,L,M,z))},error:e[l+1],complete:e[l+2]},xN(n._query)}return function(M,L,z,W){const ne=new aD(W),fe=new FA(L,ne,z);return M.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return xA(yield Ry(M),fe)})),()=>{ne.bc(),M.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return NA(yield Ry(M),fe)}))}}(Yr(E),C,f,y)}function Oy(n,e){return function(t,r){const i=new Jn;return t.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function kL(n,e,t){return $A.apply(this,arguments)}(yield yM(t),r,i)})),i.promise}(Yr(n),e)}function AM(n,e,t){const r=t.docs.get(e._key),i=new Ah(n);return new Uc(n,i,e._key,r,new jp(t.hasPendingWrites,t.fromCache),e.converter)}const QU={maxAttempts:5};class jN{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Bp(e)}set(e,t,r){this._verifyNotCommitted();const i=Mh(e,this._firestore),a=vD(i.converter,t,r),l=hD(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,er.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Mh(e,this._firestore);let l;return l="string"==typeof(t=(0,sn.m9)(t))||t instanceof Lc?bM(this._dataReader,"WriteBatch.update",a._key,t,r,i):wM(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,er.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Mh(e,this._firestore);return this._mutations=this._mutations.concat(new Pc(t._key,er.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Fe(pe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Mh(n,e){if((n=(0,sn.m9)(n)).firestore!==e)throw new Fe(pe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class XU extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Bp(e)}get(e){const t=Mh(e,this._firestore),r=new BU(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return gt();const a=i[0];if(a.isFoundDocument())return new HE(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new HE(this._firestore,r,t._key,null,t.converter);throw gt()})}set(e,t,r){const i=Mh(e,this._firestore),a=vD(i.converter,t,r),l=hD(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const a=Mh(e,this._firestore);let l;return l="string"==typeof(t=(0,sn.m9)(t))||t instanceof Lc?bM(this._dataReader,"Transaction.update",a._key,t,r,i):wM(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=Mh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Mh(e,this._firestore),r=new Ah(this._firestore);return super.get(e).then(i=>new Uc(this._firestore,r,t._key,i._document,new jp(!1,!1),t.converter))}}function MM(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Fe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function zN(){if(typeof Uint8Array>"u")throw new Fe("unimplemented","Uint8Arrays are not available in this environment.")}function GN(){if(!function Fx(){return typeof atob<"u"}())throw new Fe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){uh=qi.SDK_VERSION,(0,qi._registerComponent)(new Ff.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),l=new nr(new sI(t.getProvider("auth-internal")),new Px(t.getProvider("app-check-internal")),function(f,y){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Fe(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wa(f.options.projectId,y)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,qi.registerVersion)(qv,"3.8.3",n),(0,qi.registerVersion)(qv,"3.8.3","esm2017")}();class qE{constructor(e){this._delegate=e}static fromBase64String(e){return GN(),new qE(cl.fromBase64String(e))}static fromUint8Array(e){return zN(),new qE(cl.fromUint8Array(e))}toBase64(){return GN(),this._delegate.toBase64()}toUint8Array(){return zN(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function RM(n){return function aV(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class uV{enableIndexedDbPersistence(e,t){return function mU(n,e){IN(n=yn(n,nr));const t=Yr(n),r=n._freezeSettings(),i=new uM;return bN(t,i,new iN(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function yU(n){IN(n=yn(n,nr));const e=Yr(n),t=n._freezeSettings(),r=new uM;return bN(e,r,new QL(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function _U(n){if(n._initialized&&!n._terminated)throw new Fe(pe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Jn;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{yield(t=(0,Ee.Z)(function*(r){if(!yo.C())return Promise.resolve();const i=r+"main";yield yo.delete(i)}),function(r){return t.apply(this,arguments)})(tA(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class WN{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Wa||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Cc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){dN(this._delegate,e,t,r)}enableNetwork(){return function EU(n){return function sU(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield yN(n),t=yield mM(n);return e.setNetworkEnabled(!0),function(r){const i=nt(r);return i._u.delete(0),VE(i)}(t)}))}(Yr(n=yn(n,nr)))}(this._delegate)}disableNetwork(){return function wU(n){return function oU(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield yN(n),t=yield mM(n);return e.setNetworkEnabled(!1),(r=(0,Ee.Z)(function*(i){const a=nt(i);a._u.add(0),yield Iy(a),a.gu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Yr(n=yn(n,nr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,sN("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function vU(n){return function(e){const t=new Jn;return e.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function VL(n,e){return WA.apply(this,arguments)}(yield yM(e),t)})),t.promise}(Yr(n=yn(n,nr)))}(this._delegate)}onSnapshotsInSync(e){return function YU(n,e){return function lU(n,e){const t=new aD(e);return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return r=yield Ry(n),i=t,nt(r).Ru.add(i),void i.next();var r,i})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return r=yield Ry(n),i=t,void nt(r).Ru.delete(i);var r,i}))}}(Yr(n=yn(n,nr)),vM(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Fe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ny(this,hN(this._delegate,e))}catch(t){throw Rs(t,"collection()","Firestore.collection()")}}doc(e){try{return new da(this,oD(this._delegate,e))}catch(t){throw Rs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new xs(this,function XL(n,e){if(n=yn(n,$E),lM("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Fe(pe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Yi(n,null,(t=e,new nl(mn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Rs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function JU(n,e,t){n=yn(n,nr);const r=Object.assign(Object.assign({},QU),t);return function(i){if(i.maxAttempts<1)throw new Fe(pe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,a,l){const f=new Jn;return i.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){const y=yield function _N(n){return uD(n).then(e=>e.datastore)}(i);new rU(i.asyncQueue,y,l,a,f).run()})),f.promise}(Yr(n),i=>e(new XU(n,i)),r)}(this._delegate,t=>e(new qN(this,t)))}batch(){return Yr(this._delegate),new KN(new jN(this._delegate,e=>Oy(this._delegate,e)))}loadBundle(e){return function bU(n,e){const t=Yr(n=yn(n,nr)),r=new fU;return function cU(n,e,t,r){const i=function(a,l){let f;return f="string"==typeof a?(new TextEncoder).encode(a):a,y=function(y,E){if(y instanceof Uint8Array)return pN(y,E);if(y instanceof ArrayBuffer)return pN(new Uint8Array(y),E);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new JL(y,l);var y}(t,UE(e));n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){!function YL(n,e,t){const r=nt(n);var i;(i=(0,Ee.Z)(function*(a,l,f){try{const y=yield l.getMetadata();if(yield function(L,z){const W=nt(L),ne=Ur(z.createTime);return W.persistence.runTransaction("hasNewerBundle","readonly",fe=>W.Ns.getBundleMetadata(fe,z.id)).then(fe=>!!fe&&fe.createTime.compareTo(ne)>=0)}(a.localStore,y))return yield l.close(),f._completeWith({taskState:"Success",documentsLoaded:(L=y).totalDocuments,bytesLoaded:L.totalBytes,totalDocuments:L.totalDocuments,totalBytes:L.totalBytes}),Promise.resolve(new Set);f._updateProgress(KO(y));const E=new ML(y,a.localStore,l.yt);let C=yield l.mc();for(;C;){const L=yield E.Fu(C);L&&f._updateProgress(L),C=yield l.mc()}const M=yield E.complete();return yield Fc(a,M.Lu,void 0),yield function(L,z){const W=nt(L);return W.persistence.runTransaction("Save bundle","readwrite",ne=>W.Ns.saveBundleMetadata(ne,z))}(a.localStore,y),f._completeWith(M.progress),Promise.resolve(M.Bu)}catch(y){return Cc("SyncEngine",`Loading bundle failed with ${y}`),f._failWith(y),Promise.resolve(new Set)}var L}),function(a,l,f){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield yM(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function IU(n,e){return function dU(n,e){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){return function(t,r){const i=nt(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.Ns.getNamedQuery(a,r))}(yield lD(n),e)}))}(Yr(n=yn(n,nr)),e).then(t=>t?new Yi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new xs(this,t):null)}}class ED extends SM{constructor(e){super(),this.firestore=e}convertBytes(e){return new qE(new cl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return da.forKey(t,this.firestore,null)}}class qN{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new ED(e)}get(e){const t=zp(e);return this._delegate.get(t).then(r=>new KE(this._firestore,new Uc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=zp(e);return r?(MM("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=zp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=zp(e);return this._delegate.delete(t),this}}class KN{constructor(e){this._delegate=e}set(e,t,r){const i=zp(e);return r?(MM("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=zp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=zp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Hp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new WE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ZE(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Hp.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new Hp(e,new ED(e),t),i.set(t,a)),a}}Hp.INSTANCES=new WeakMap;class da{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ED(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Fe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new da(t,new tr(t._delegate,r,new Je(e)))}static forKey(e,t,r){return new da(t,new tr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ny(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ny(this.firestore,hN(this._delegate,e))}catch(t){throw Rs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,sn.m9)(e))instanceof tr&&fN(this._delegate,e)}set(e,t){t=MM("DocumentReference.set",t);try{return t?VN(this._delegate,e,t):VN(this._delegate,e)}catch(r){throw Rs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?BN(this._delegate,e):BN(this._delegate,e,t,...r)}catch(i){throw Rs(i,"updateDoc()","DocumentReference.update()")}}delete(){return function KU(n){return Oy(yn(n.firestore,nr),[new Pc(n._key,er.none())])}(this._delegate)}onSnapshot(...e){const t=ZN(e),r=YN(e,i=>new KE(this.firestore,new Uc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return $N(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function HU(n){n=yn(n,tr);const e=yn(n.firestore,nr),t=Yr(e),r=new Ah(e);return function aU(n,e){const t=new Jn;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(r=(0,Ee.Z)(function*(i,a,l){try{const f=yield function(y,E){const C=nt(y);return C.persistence.runTransaction("read document","readonly",M=>C.localDocuments.getDocument(M,E))}(i,a);f.isFoundDocument()?l.resolve(f):f.isNoDocument()?l.resolve(null):l.reject(new Fe(pe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const y=Ty(f,`Failed to get document '${a} from cache`);l.reject(y)}}),function(i,a,l){return r.apply(this,arguments)})(yield lD(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Uc(e,r,n._key,i,new jp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function zU(n){n=yn(n,tr);const e=yn(n.firestore,nr);return vN(Yr(e),n._key,{source:"server"}).then(t=>AM(e,n,t))}(this._delegate):function jU(n){n=yn(n,tr);const e=yn(n.firestore,nr);return vN(Yr(e),n._key).then(t=>AM(e,n,t))}(this._delegate),t.then(r=>new KE(this.firestore,new Uc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new da(this.firestore,this._delegate.withConverter(e?Hp.getInstance(this.firestore,e):null))}}function Rs(n,e,t){return n.message=n.message.replace(e,t),n}function ZN(n){for(const e of n)if("object"==typeof e&&!RM(e))return e;return{}}function YN(n,e){var t,r;let i;return i=RM(n[0])?n[0]:RM(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class KE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new da(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return UN(this._delegate,e._delegate)}}class ZE extends KE{data(e){const t=this._delegate.data(e);return function pS(n,e){n||gt()}(void 0!==t),t}}class xs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ED(e)}where(e,t,r){try{return new xs(this.firestore,Th(this._delegate,function OU(n,e,t){const r=e,i=gD("where",n);return GE._create(i,r,t)}(e,t,r)))}catch(i){throw Rs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new xs(this.firestore,Th(this._delegate,function NU(n,e="asc"){const t=e,r=gD("orderBy",n);return TM._create(r,t)}(e,t)))}catch(r){throw Rs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new xs(this.firestore,Th(this._delegate,function PU(n){return uN("limit",n),mD._create("limit",n,"F")}(e)))}catch(t){throw Rs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new xs(this.firestore,Th(this._delegate,function kU(n){return uN("limitToLast",n),mD._create("limitToLast",n,"L")}(e)))}catch(t){throw Rs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new xs(this.firestore,Th(this._delegate,function FU(...n){return yD._create("startAt",n,!0)}(...e)))}catch(t){throw Rs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new xs(this.firestore,Th(this._delegate,function LU(...n){return yD._create("startAfter",n,!1)}(...e)))}catch(t){throw Rs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new xs(this.firestore,Th(this._delegate,function UU(...n){return _D._create("endBefore",n,!1)}(...e)))}catch(t){throw Rs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new xs(this.firestore,Th(this._delegate,function VU(...n){return _D._create("endAt",n,!0)}(...e)))}catch(t){throw Rs(t,"endAt()","Query.endAt()")}}isEqual(e){return cM(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function WU(n){n=yn(n,Yi);const e=yn(n.firestore,nr),t=Yr(e),r=new Ah(e);return function uU(n,e){const t=new Jn;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(r=(0,Ee.Z)(function*(i,a,l){try{const f=yield JI(i,a,!0),y=new QO(a,f.Hi),E=y.Wu(f.documents),C=y.applyChanges(E,!1);l.resolve(C.snapshot)}catch(f){const y=Ty(f,`Failed to execute query '${a} against cache`);l.reject(y)}}),function(i,a,l){return r.apply(this,arguments)})(yield lD(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Sh(e,r,n,i))}(this._delegate):"server"===e?.source?function qU(n){n=yn(n,Yi);const e=yn(n.firestore,nr),t=Yr(e),r=new Ah(e);return EN(t,n._query,{source:"server"}).then(i=>new Sh(e,r,n,i))}(this._delegate):function GU(n){n=yn(n,Yi);const e=yn(n.firestore,nr),t=Yr(e),r=new Ah(e);return xN(n._query),EN(t,n._query).then(i=>new Sh(e,r,n,i))}(this._delegate),t.then(r=>new xM(this.firestore,new Sh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=ZN(e),r=YN(e,i=>new xM(this.firestore,new Sh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return $N(this._delegate,t,r)}withConverter(e){return new xs(this.firestore,this._delegate.withConverter(e?Hp.getInstance(this.firestore,e):null))}}class cV{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new ZE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class xM{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new xs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ZE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new cV(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new ZE(this._firestore,r))})}isEqual(e){return UN(this._delegate,e._delegate)}}class Ny extends xs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new da(this.firestore,e):null}doc(e){try{return new da(this.firestore,void 0===e?oD(this._delegate):oD(this._delegate,e))}catch(t){throw Rs(t,"doc()","CollectionReference.doc()")}}add(e){return function ZU(n,e){const t=yn(n.firestore,nr),r=oD(n),i=vD(n.converter,e);return Oy(t,[hD(Bp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,er.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new da(this.firestore,t))}isEqual(e){return fN(this._delegate,e._delegate)}withConverter(e){return new Ny(this.firestore,this._delegate.withConverter(e?Hp.getInstance(this.firestore,e):null))}}function zp(n){return yn(n,tr)}class OM{constructor(...e){this._delegate=new Lc(...e)}static documentId(){return new OM(kn.keyField().canonicalString())}isEqual(e){return(e=(0,sn.m9)(e))instanceof Lc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Gp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function tV(){return new EM("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Gp(e)}static delete(){const e=function eV(){return new jE("deleteField")}();return e._methodName="FieldValue.delete",new Gp(e)}static arrayUnion(...e){const t=function nV(...n){return new SU("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Gp(t)}static arrayRemove(...e){const t=function rV(...n){return new AU("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Gp(t)}static increment(e){const t=function iV(n){return new MU("increment",n)}(e);return t._methodName="FieldValue.increment",new Gp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const dV={Firestore:WN,GeoPoint:cD,Timestamp:qn,Blob:qE,Transaction:qN,WriteBatch:KN,DocumentReference:da,DocumentSnapshot:KE,Query:xs,QueryDocumentSnapshot:ZE,QuerySnapshot:xM,CollectionReference:Ny,FieldPath:OM,FieldValue:Gp,setLogLevel:function lV(n){!function fS(n){Dc.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function QN(n,e){return function pV(n,e=sb.z){return new lr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function NM(n,e){return QN(n,e).pipe((0,T.U)(t=>({payload:t,type:"query"})))}function wD(n,e){return NM(n,e).pipe(Ko(void 0),om(),(0,T.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,f)=>{const y=i.find(C=>C.doc.ref.isEqual(l.ref)),E=t?.payload.docs.find(C=>C.ref.isEqual(l.ref));y&&JSON.stringify(y.doc.metadata)===JSON.stringify(l.metadata)||!y&&E&&JSON.stringify(E.metadata)===JSON.stringify(l.metadata)||a.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:l}})}),a}))}function XN(n,e,t){return wD(n,t).pipe(Ou((r,i)=>function mV(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function yV(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return PM(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return PM(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return PM(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),function ob(n,e=D.y){return n=n??ab,(0,cr.e)((t,r)=>{let i,a=!0;t.subscribe((0,Ie.x)(r,l=>{const f=e(l);(a||!n(i,f))&&(a=!1,i=f,r.next(l))}))})}(),(0,T.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function PM(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function JN(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function fV(n){(function hV(n,e){n.INTERNAL.registerComponent(new Ff.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},dV)))})(n,(e,t)=>new WN(e,t,new uV)),n.registerVersion("@firebase/firestore-compat","0.3.3")}(lb.Z);class eP{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=wD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,T.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Ko(void 0),om(),vi(([r,i])=>i.length>0||!r),(0,T.U)(([r,i])=>i),an.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ou((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=JN(e);return XN(this.query,t,this.afs.schedulers.outsideAngular).pipe(an.iC)}valueChanges(e={}){return NM(this.query,this.afs.schedulers.outsideAngular).pipe((0,T.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),an.iC)}get(e){return(0,on.D)(this.query.get(e)).pipe(an.iC)}add(e){return this.ref.add(e)}doc(e){return new tP(this.ref.doc(e),this.afs)}}class tP{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=iP(r,t);return new eP(i,a,this.afs)}snapshotChanges(){return function gV(n,e){return QN(n,e).pipe(Ko(void 0),om(),(0,T.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(an.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,T.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,on.D)(this.ref.get(e)).pipe(an.iC)}}class _V{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?wD(this.query,this.afs.schedulers.outsideAngular).pipe((0,T.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),vi(t=>t.length>0),an.iC):wD(this.query,this.afs.schedulers.outsideAngular).pipe(an.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ou((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=JN(e);return XN(this.query,t,this.afs.schedulers.outsideAngular).pipe(an.iC)}valueChanges(e={}){return NM(this.query,this.afs.schedulers.outsideAngular).pipe((0,T.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),an.iC)}get(e){return(0,on.D)(this.query.get(e)).pipe(an.iC)}}const nP=new d.OlP("angularfire2.enableFirestorePersistence"),rP=new d.OlP("angularfire2.firestore.persistenceSettings"),vV=new d.OlP("angularfire2.firestore.settings"),EV=new d.OlP("angularfire2.firestore.use-emulator");function iP(n,e=(t=>t)){return{query:e(n),ref:n}}let sP=(()=>{class n{constructor(t,r,i,a,l,f,y,E,C,M,L,z,W,ne,fe,je,at){this.schedulers=y;const tt=(0,Zs.on)(t,f,r),Xe=C;M&&av(tt,f,L,W,ne,fe,z,je),[this.firestore,this.persistenceEnabled$]=(0,Zs.cc)(`${tt.name}.firestore`,"AngularFirestore",tt.name,()=>{const At=f.runOutsideAngular(()=>tt.firestore());if(a&&At.settings(a),Xe&&At.useEmulator(...Xe),i&&!Kc(l)){const xt=()=>{try{return(0,on.D)(At.enablePersistence(E||void 0).then(()=>!0,()=>!1))}catch(dn){return typeof console<"u"&&console.warn(dn),ft(!1)}};return[At,f.runOutsideAngular(xt)]}return[At,ft(!1)]},[a,Xe,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:l}=iP(i,r),f=this.schedulers.ngZone.run(()=>a);return new eP(f,l,this)}collectionGroup(t,r){const i=r||(l=>l),a=this.firestore.collectionGroup(t);return new _V(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new tP(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Zs.Dh),d.LFG(Zs.xv,8),d.LFG(nP,8),d.LFG(vV,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(an.HU),d.LFG(rP,8),d.LFG(EV,8),d.LFG(sm,8),d.LFG(rv,8),d.LFG(iv,8),d.LFG(im,8),d.LFG(sv,8),d.LFG(ib,8),d.LFG(ov,8),d.LFG(dc,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),wV=(()=>{class n{constructor(){rb.Z.registerVersion("angularfire",an.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:nP,useValue:!0},{provide:rP,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[sP]}),n})();class Wp{constructor(e,t){this.auth=e,this.afs=t}signIn(e,t){return this.auth.signInWithEmailAndPassword(e,t)}signUp(e,t){return this.auth.createUserWithEmailAndPassword(e,t)}setUserDate(e,t){return this.afs.doc(`users/${e.uid}`).set({uid:e.uid,email:e.email,fullName:t},{merge:!0})}getAuthState(){return this.auth.authState}}function oP(...n){const e=(0,ts.jO)(n),{args:t,keys:r}=zs(n),i=new lr.y(a=>{const{length:l}=t;if(!l)return void a.complete();const f=new Array(l);let y=l,E=l;for(let C=0;C<l;C++){let M=!1;(0,Gs.Xf)(t[C]).subscribe((0,Ie.x)(a,L=>{M||(M=!0,E--),f[C]=L},()=>y--,void 0,()=>{(!y||!M)&&(E||a.next(r?oe(r,f):f),a.complete())}))}});return e?i.pipe(X(e)):i}Wp.\u0275fac=function(e){return new(e||Wp)(d.LFG(sm),d.LFG(sP))},Wp.\u0275prov=d.Yz7({token:Wp,factory:Wp.\u0275fac,providedIn:"root"});let aP=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n}),n})(),qp=(()=>{class n extends aP{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,features:[d.qOj]}),n})();const dl=new d.OlP("NgValueAccessor"),IV={provide:dl,useExisting:(0,d.Gpc)(()=>Py),multi:!0},CV=new d.OlP("CompositionEventMode");let Py=(()=>{class n extends aP{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function DV(){const n=P()?P().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(CV,8))},n.\u0275dir=d.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[d._Bn([IV]),d.qOj]}),n})();const as=new d.OlP("NgValidators"),xh=new d.OlP("NgAsyncValidators");function _P(n){return null!=n}function vP(n){return(0,d.QGY)(n)?(0,on.D)(n):n}function EP(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function wP(n,e){return e.map(t=>t(n))}function bP(n){return n.map(e=>function AV(n){return!n.validate}(e)?e:t=>e.validate(t))}function kM(n){return null!=n?function IP(n){if(!n)return null;const e=n.filter(_P);return 0==e.length?null:function(t){return EP(wP(t,e))}}(bP(n)):null}function FM(n){return null!=n?function DP(n){if(!n)return null;const e=n.filter(_P);return 0==e.length?null:function(t){return oP(wP(t,e).map(vP)).pipe((0,T.U)(EP))}}(bP(n)):null}function CP(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function LM(n){return n?Array.isArray(n)?n:[n]:[]}function ID(n,e){return Array.isArray(n)?n.includes(e):n===e}function AP(n,e){const t=LM(e);return LM(n).forEach(i=>{ID(t,i)||t.push(i)}),t}function MP(n,e){return LM(e).filter(t=>!ID(n,t))}class RP{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=kM(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=FM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Os extends RP{get formDirective(){return null}get path(){return null}}class Oh extends RP{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class xP{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let DD=(()=>{class n extends xP{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Oh,2))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[d.qOj]}),n})(),UM=(()=>{class n extends xP{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Os,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[d.qOj]}),n})();const YE="VALID",TD="INVALID",ky="PENDING",QE="DISABLED";function jM(n){return(SD(n)?n.validators:n)||null}function HM(n,e){return(SD(e)?e.asyncValidators:n)||null}function SD(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class kP{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===YE}get invalid(){return this.status===TD}get pending(){return this.status==ky}get disabled(){return this.status===QE}get enabled(){return this.status!==QE}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(AP(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(AP(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(MP(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(MP(e,this._rawAsyncValidators))}hasValidator(e){return ID(this._rawValidators,e)}hasAsyncValidator(e){return ID(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ky,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=QE,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=YE,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===YE||this.status===ky)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?QE:YE}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ky,this._hasOwnPendingAsyncValidator=!0;const t=vP(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?QE:this.errors?TD:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ky)?ky:this._anyControlsHaveStatus(TD)?TD:YE}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){SD(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function kV(n){return Array.isArray(n)?kM(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function FV(n){return Array.isArray(n)?FM(n):n||null}(this._rawAsyncValidators)}}class zM extends kP{constructor(e,t,r){super(jM(t),HM(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function PP(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new d.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function NP(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new d.vHH(1e3,"");if(!r[t])throw new d.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const Fy=new d.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>AD}),AD="always";function XE(n,e,t=AD){GM(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function VV(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&FP(n,e)})}(n,e),function $V(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function BV(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&FP(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function UV(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function xD(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function GM(n,e){const t=function TP(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(CP(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function SP(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(CP(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();xD(e._rawValidators,i),xD(e._rawAsyncValidators,i)}function FP(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const WV={provide:Os,useExisting:(0,d.Gpc)(()=>ew)},JE=(()=>Promise.resolve())();let ew=(()=>{class n extends Os{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new d.vpe,this.form=new zM({},kM(t),FM(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){JE.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),XE(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){JE.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){JE.then(()=>{const r=this._findContainer(t.path),i=new zM({});(function LP(n,e){GM(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){JE.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){JE.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function UP(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(as,10),d.Y36(xh,10),d.Y36(Fy,8))},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&d.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([WV]),d.qOj]}),n})();function VP(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function BP(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const $P=class extends kP{constructor(e=null,t,r){super(jM(t),HM(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),SD(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=BP(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){VP(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){VP(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){BP(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},ZV={provide:Oh,useExisting:(0,d.Gpc)(()=>tw)},zP=(()=>Promise.resolve())();let tw=(()=>{class n extends Oh{constructor(t,r,i,a,l,f){super(),this._changeDetectorRef=l,this.callSetDisabledState=f,this.control=new $P,this._registered=!1,this.update=new d.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function KM(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===Py?t=a:function zV(n){return Object.getPrototypeOf(n.constructor)===qp}(a)?r=a:i=a}),i||r||t||null}(0,a)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function qM(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){XE(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){zP.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,d.D6c)(r);zP.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function MD(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Os,9),d.Y36(as,10),d.Y36(xh,10),d.Y36(dl,10),d.Y36(d.sBO,8),d.Y36(Fy,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[d._Bn([ZV]),d.qOj,d.TTD]}),n})(),ZM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),WP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),vB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[WP]}),n})(),wB=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Fy,useValue:t.callSetDisabledState??AD}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[vB]}),n})();class nw{constructor(e,t){this.router=e,this.authService=t}ngOnInit(){}navigateToRegistration(){this.router.navigate(["/register"])}login(){this.authService.signIn(this.email,this.password).then(e=>{this.authService.getAuthState().subscribe(t=>{t&&(localStorage.setItem("isLoggedIn","true"),this.router.navigate(["movies"]))})})}}nw.\u0275fac=function(e){return new(e||nw)(d.Y36(Wi),d.Y36(Wp))},nw.\u0275cmp=d.Xpm({type:nw,selectors:[["app-login"]],decls:18,vars:2,consts:[[1,"login-register-container"],[1,"login-register-wrapper"],["type","email","placeholder","email","name","email",3,"ngModel","ngModelChange"],["type","password","placeholder","password","name","password",3,"ngModel","ngModelChange"],[1,"btn",3,"click"],[3,"click"],[1,"card-left-border"],[1,"card-top-border"],[1,"card-right-border"],[1,"card-bottom-border"]],template:function(e,t){1&e&&(d.TgZ(0,"div",0)(1,"form",1)(2,"h1"),d._uU(3,"Log In"),d.qZA(),d.TgZ(4,"label"),d._uU(5,"Email address"),d.qZA(),d.TgZ(6,"input",2),d.NdJ("ngModelChange",function(i){return t.email=i}),d.qZA(),d.TgZ(7,"label"),d._uU(8,"Password"),d.qZA(),d.TgZ(9,"input",3),d.NdJ("ngModelChange",function(i){return t.password=i}),d.qZA(),d.TgZ(10,"button",4),d.NdJ("click",function(){return t.login()}),d._uU(11,"Submit"),d.qZA(),d.TgZ(12,"a",5),d.NdJ("click",function(){return t.navigateToRegistration()}),d._uU(13,"Register"),d.qZA()(),d._UZ(14,"div",6)(15,"div",7)(16,"div",8)(17,"div",9),d.qZA()),2&e&&(d.xp6(6),d.Q6J("ngModel",t.email),d.xp6(3),d.Q6J("ngModel",t.password))},dependencies:[ZM,Py,DD,UM,tw,ew]});class ND{}class nR{}class Eo{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),a=i.toLowerCase(),l=t.slice(r+1).trim();this.maybeSetNormalizedName(i,a),this.headers.has(a)?this.headers.get(a).push(l):this.headers.set(a,[l])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Eo?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Eo;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Eo?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const a=e.value;if(a){let l=this.headers.get(t);if(!l)return;l=l.filter(f=>-1===a.indexOf(f)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class bB{encodeKey(e){return ck(e)}encodeValue(e){return ck(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const DB=/%(\d[a-f0-9])/gi,CB={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function ck(n){return encodeURIComponent(n).replace(DB,(e,t)=>CB[t]??e)}function PD(n){return`${n}`}class ha{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new bB,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function IB(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const a=i.indexOf("="),[l,f]=-1==a?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,a)),e.decodeValue(i.slice(a+1))],y=t.get(l)||[];y.push(f),t.set(l,y)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(PD):[PD(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(a=>{t.push({param:r,value:a,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new ha({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(PD(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(PD(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class TB{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function dk(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function hk(n){return typeof Blob<"u"&&n instanceof Blob}function fk(n){return typeof FormData<"u"&&n instanceof FormData}class rw{constructor(e,t,r,i){let a;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function SB(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,a=i):a=r,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params)),this.headers||(this.headers=new Eo),this.context||(this.context=new TB),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const f=t.indexOf("?");this.urlWithParams=t+(-1===f?"?":f<t.length-1?"&":"")+l}}else this.params=new ha,this.urlWithParams=t}serializeBody(){return null===this.body?null:dk(this.body)||hk(this.body)||fk(this.body)||function AB(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof ha?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||fk(this.body)?null:hk(this.body)?this.body.type||null:dk(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ha?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,a=void 0!==e.body?e.body:this.body,l=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,f=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let y=e.headers||this.headers,E=e.params||this.params;const C=e.context??this.context;return void 0!==e.setHeaders&&(y=Object.keys(e.setHeaders).reduce((M,L)=>M.set(L,e.setHeaders[L]),y)),e.setParams&&(E=Object.keys(e.setParams).reduce((M,L)=>M.set(L,e.setParams[L]),E)),new rw(t,r,a,{params:E,headers:y,context:C,reportProgress:f,responseType:i,withCredentials:l})}}var ci=(()=>((ci=ci||{})[ci.Sent=0]="Sent",ci[ci.UploadProgress=1]="UploadProgress",ci[ci.ResponseHeader=2]="ResponseHeader",ci[ci.DownloadProgress=3]="DownloadProgress",ci[ci.Response=4]="Response",ci[ci.User=5]="User",ci))();class rR{constructor(e,t=200,r="OK"){this.headers=e.headers||new Eo,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class iR extends rR{constructor(e={}){super(e),this.type=ci.ResponseHeader}clone(e={}){return new iR({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class kD extends rR{constructor(e={}){super(e),this.type=ci.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new kD({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class pk extends rR{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function sR(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let FD=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let a;if(t instanceof rw)a=t;else{let y,E;y=i.headers instanceof Eo?i.headers:new Eo(i.headers),i.params&&(E=i.params instanceof ha?i.params:new ha({fromObject:i.params})),a=new rw(t,r,void 0!==i.body?i.body:null,{headers:y,context:i.context,params:E,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const l=ft(a).pipe(ka(y=>this.handler.handle(y)));if(t instanceof rw||"events"===i.observe)return l;const f=l.pipe(vi(y=>y instanceof kD));switch(i.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return f.pipe((0,T.U)(y=>{if(null!==y.body&&!(y.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return y.body}));case"blob":return f.pipe((0,T.U)(y=>{if(null!==y.body&&!(y.body instanceof Blob))throw new Error("Response is not a Blob.");return y.body}));case"text":return f.pipe((0,T.U)(y=>{if(null!==y.body&&"string"!=typeof y.body)throw new Error("Response is not a string.");return y.body}));default:return f.pipe((0,T.U)(y=>y.body))}case"response":return f;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new ha).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,sR(i,r))}post(t,r,i={}){return this.request("POST",t,sR(i,r))}put(t,r,i={}){return this.request("PUT",t,sR(i,r))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ND))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function gk(n,e){return e(n)}function MB(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}const xB=new d.OlP("HTTP_INTERCEPTORS"),iw=new d.OlP("HTTP_INTERCEPTOR_FNS");function OB(){let n=null;return(e,t)=>(null===n&&(n=((0,d.f3M)(xB,{optional:!0})??[]).reduceRight(MB,gk)),n(e,t))}let mk=(()=>{class n extends ND{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=Array.from(new Set(this.injector.get(iw)));this.chain=r.reduceRight((i,a)=>function RB(n,e,t){return(r,i)=>t.runInContext(()=>e(r,a=>n(a,i)))}(i,a,this.injector),gk)}return this.chain(t,r=>this.backend.handle(r))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(nR),d.LFG(d.lqb))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const FB=/^\)\]\}',?\n/;let _k=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new lr.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((z,W)=>i.setRequestHeader(z,W.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const z=t.detectContentTypeHeader();null!==z&&i.setRequestHeader("Content-Type",z)}if(t.responseType){const z=t.responseType.toLowerCase();i.responseType="json"!==z?z:"text"}const a=t.serializeBody();let l=null;const f=()=>{if(null!==l)return l;const z=i.statusText||"OK",W=new Eo(i.getAllResponseHeaders()),ne=function LB(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return l=new iR({headers:W,status:i.status,statusText:z,url:ne}),l},y=()=>{let{headers:z,status:W,statusText:ne,url:fe}=f(),je=null;204!==W&&(je=typeof i.response>"u"?i.responseText:i.response),0===W&&(W=je?200:0);let at=W>=200&&W<300;if("json"===t.responseType&&"string"==typeof je){const tt=je;je=je.replace(FB,"");try{je=""!==je?JSON.parse(je):null}catch(Xe){je=tt,at&&(at=!1,je={error:Xe,text:je})}}at?(r.next(new kD({body:je,headers:z,status:W,statusText:ne,url:fe||void 0})),r.complete()):r.error(new pk({error:je,headers:z,status:W,statusText:ne,url:fe||void 0}))},E=z=>{const{url:W}=f(),ne=new pk({error:z,status:i.status||0,statusText:i.statusText||"Unknown Error",url:W||void 0});r.error(ne)};let C=!1;const M=z=>{C||(r.next(f()),C=!0);let W={type:ci.DownloadProgress,loaded:z.loaded};z.lengthComputable&&(W.total=z.total),"text"===t.responseType&&i.responseText&&(W.partialText=i.responseText),r.next(W)},L=z=>{let W={type:ci.UploadProgress,loaded:z.loaded};z.lengthComputable&&(W.total=z.total),r.next(W)};return i.addEventListener("load",y),i.addEventListener("error",E),i.addEventListener("timeout",E),i.addEventListener("abort",E),t.reportProgress&&(i.addEventListener("progress",M),null!==a&&i.upload&&i.upload.addEventListener("progress",L)),i.send(a),r.next({type:ci.Sent}),()=>{i.removeEventListener("error",E),i.removeEventListener("abort",E),i.removeEventListener("load",y),i.removeEventListener("timeout",E),t.reportProgress&&(i.removeEventListener("progress",M),null!==a&&i.upload&&i.upload.removeEventListener("progress",L)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(hu))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const oR=new d.OlP("XSRF_ENABLED"),vk="XSRF-TOKEN",Ek=new d.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>vk}),wk="X-XSRF-TOKEN",bk=new d.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>wk});class Ik{}let UB=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=$r(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(se),d.LFG(d.Lbi),d.LFG(Ek))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function VB(n,e){const t=n.url.toLowerCase();if(!(0,d.f3M)(oR)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=(0,d.f3M)(Ik).getToken(),i=(0,d.f3M)(bk);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var Qr=(()=>((Qr=Qr||{})[Qr.Interceptors=0]="Interceptors",Qr[Qr.LegacyInterceptors=1]="LegacyInterceptors",Qr[Qr.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",Qr[Qr.NoXsrfProtection=3]="NoXsrfProtection",Qr[Qr.JsonpSupport=4]="JsonpSupport",Qr[Qr.RequestsMadeViaParent=5]="RequestsMadeViaParent",Qr))();function Ly(n,e){return{\u0275kind:n,\u0275providers:e}}function BB(...n){const e=[FD,_k,mk,{provide:ND,useExisting:mk},{provide:nR,useExisting:_k},{provide:iw,useValue:VB,multi:!0},{provide:oR,useValue:!0},{provide:Ik,useClass:UB}];for(const t of n)e.push(...t.\u0275providers);return(0,d.MR2)(e)}const Dk=new d.OlP("LEGACY_INTERCEPTOR_FN");function jB({cookieName:n,headerName:e}){const t=[];return void 0!==n&&t.push({provide:Ek,useValue:n}),void 0!==e&&t.push({provide:bk,useValue:e}),Ly(Qr.CustomXsrfConfiguration,t)}let aR,HB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[BB(Ly(Qr.LegacyInterceptors,[{provide:Dk,useFactory:OB},{provide:iw,useExisting:Dk,multi:!0}]),jB({cookieName:vk,headerName:wk}))]}),n})();class Vc{constructor(e){this.http=e,this.apiKey="a80a542b56f41ce4cf0eecf573c01985"}fetchTrendingShows(e){const t=`https://api.themoviedb.org/3/trending/all/day?api_key=${this.apiKey}&page=${e}`,r=(new Eo).set("authorization","Bearer ${apiKey}"),i=(new ha).set("page",e.toString());return this.http.get(t,{headers:r,params:i})}fetchMoviesTvSeries(e,t,r=[]){let i=`https://api.themoviedb.org/3/discover/${e}?api_key=${this.apiKey}&language=en-US&sort_by=popularity.desc&include_adult=false&include_video=false&page=${t}`;r.length>0&&(i+=`&with_genres=${r.join(",")}`);const a=(new Eo).set("authorization","Bearer ${apiKey}"),l=(new ha).set("page",t.toString());return this.http.get(i,{headers:a,params:l})}fetchGenres(e){const t=`https://api.themoviedb.org/3/genre/list?api_key=${this.apiKey}&language=en-US&type=${e}`,r=(new Eo).set("authorization","Bearer ${apiKey}"),i=(new ha).set("type",e);return this.http.get(t,{headers:r,params:i})}fetchSearchedShows(e,t,r){let i=`https://api.themoviedb.org/3/search/${e}?api_key=${this.apiKey}&language=en-US&query=${t}&page=${r}&include_adult=false`;const a=(new Eo).set("authorization","Bearer ${apiKey}"),l=(new ha).set("type",e);return this.http.get(i,{headers:a,params:l})}}function zB(n,e){1&n&&(d.TgZ(0,"span"),d._uU(1,"TV Series"),d.qZA())}function GB(n,e){1&n&&(d.TgZ(0,"span"),d._uU(1,"Movie"),d.qZA())}Vc.\u0275fac=function(e){return new(e||Vc)(d.LFG(FD))},Vc.\u0275prov=d.Yz7({token:Vc,factory:Vc.\u0275fac,providedIn:"root"});class Nh{}Nh.\u0275fac=function(e){return new(e||Nh)},Nh.\u0275cmp=d.Xpm({type:Nh,selectors:[["app-single-content"]],inputs:{movie:"movie",mediaType:"mediaType"},decls:14,vars:7,consts:[[1,"movie-card"],[1,"badge"],["alt","movie poster",3,"src"],[1,"subtitle"],[4,"ngIf"]],template:function(e,t){1&e&&(d.TgZ(0,"div",0)(1,"div",1)(2,"span"),d._uU(3),d.qZA()(),d._UZ(4,"img",2),d.TgZ(5,"p"),d._uU(6),d.qZA(),d.TgZ(7,"span",3),d.YNc(8,zB,2,0,"span",4),d.YNc(9,GB,2,0,"span",4),d.TgZ(10,"span"),d._uU(11),d.qZA(),d.TgZ(12,"span"),d._uU(13),d.qZA()()()),2&e&&(d.xp6(3),d.Oqu(t.movie.vote_average),d.xp6(1),d.Q6J("src","https://image.tmdb.org/t/p/w500"+t.movie.backdrop_path,d.LSH),d.xp6(2),d.Oqu(t.movie.original_title),d.xp6(2),d.Q6J("ngIf","tv"===t.movie.media_type),d.xp6(1),d.Q6J("ngIf","movie"===t.movie.media_type),d.xp6(2),d.Oqu(t.mediaType),d.xp6(2),d.Oqu(t.movie.release_date))},dependencies:[Ii],styles:[".movie-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:200px;padding:8px;background-color:#2a2333;border-radius:10px;position:relative;margin-bottom:20px}.movie-card[_ngcontent-%COMP%]:hover{background:linear-gradient(to top right,#fac798,#ef60ff,#4bc0c8);color:#000}.movie-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:10px;height:300px;object-fit:cover}.movie-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;font-size:14px;padding:10px 0;height:40px;font-weight:700}.movie-card[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:0 2px 3px;min-height:20px;text-transform:uppercase}.movie-card[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{position:relative}.movie-card[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;top:0;right:0;transform:scale(1) translate(50%,-50%);transform-origin:100% 0%;color:#fff;background-color:#3f51b5;padding:0 6px;font-size:.75rem;border-radius:10px}"]});try{aR=typeof Intl<"u"&&Intl.v8BreakIterator}catch{aR=!1}let sw,Ck=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function Il(n){return n===Ti}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!aR)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.Lbi))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function LD(n){return function WB(){if(null==sw&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>sw=!0}))}finally{sw=sw||!1}return sw}()?n:!!n.capture}function Sk(n){return Array.isArray(n)?n:[n]}function Ak(n){return n instanceof d.SBq?n.nativeElement:n}var s2=F(5032);function o2(n){return(0,cr.e)((e,t)=>{(0,Gs.Xf)(n).subscribe((0,Ie.x)(t,()=>t.complete(),s2.Z)),!t.closed&&e.subscribe(t)})}const Mk=new Set;let Vy,a2=(()=>{class n{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):l2}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function u2(n){if(!Mk.has(n))try{Vy||(Vy=document.createElement("style"),Vy.setAttribute("type","text/css"),document.head.appendChild(Vy)),Vy.sheet&&(Vy.sheet.insertRule(`@media ${n} {body{ }}`,0),Mk.add(n))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ck))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function l2(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let c2=(()=>{class n{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new zi.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return Rk(Sk(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let a=pt(Rk(Sk(t)).map(l=>this._registerQuery(l).observable));return a=Bn(a.pipe(Pa(1)),a.pipe(function r2(n){return vi((e,t)=>n<=t)}(1),function i2(n,e=sb.z){return(0,cr.e)((t,r)=>{let i=null,a=null,l=null;const f=()=>{if(i){i.unsubscribe(),i=null;const E=a;a=null,r.next(E)}};function y(){const E=l+n,C=e.now();if(C<E)return i=this.schedule(void 0,E-C),void r.add(i);f()}t.subscribe((0,Ie.x)(r,E=>{a=E,l=e.now(),i||(i=e.schedule(y,n),r.add(i))},()=>{f(),r.complete()},void 0,()=>{a=i=null}))})}(0))),a.pipe((0,T.U)(l=>{const f={matches:!1,breakpoints:{}};return l.forEach(({matches:y,query:E})=>{f.matches=f.matches||y,f.breakpoints[E]=y}),f}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),a={observable:new lr.y(l=>{const f=y=>this._zone.run(()=>l.next(y));return r.addListener(f),()=>{r.removeListener(f)}}).pipe(Ko(r),(0,T.U)(({matches:l})=>({query:t,matches:l})),o2(this._destroySubject)),mql:r};return this._queries.set(t,a),a}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(a2),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Rk(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}const Pk="cdk-high-contrast-black-on-white",kk="cdk-high-contrast-white-on-black",lR="cdk-high-contrast-active";let w2=(()=>{class n{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=(0,d.f3M)(c2).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,a=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),a){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(lR,Pk,kk),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?t.add(lR,Pk):2===r&&t.add(lR,kk)}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ck),d.LFG(se))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Fk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const C2=new d.OlP("mat-sanity-checks",{providedIn:"root",factory:function D2(){return!0}});let Vk=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!function ZB(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(w2),d.LFG(C2,8),d.LFG(se))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Fk,Fk]}),n})();function T2(n,e){return class extends n{get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}constructor(...t){super(...t),this.defaultColor=e,this.color=e}}}class A2{constructor(e,t,r,i=!1){this._renderer=e,this.element=t,this.config=r,this._animationForciblyDisabledThroughCss=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const Bk=LD({passive:!0,capture:!0});class M2{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=function KB(n){return n.composedPath?n.composedPath()[0]:n.target}(e);t&&this._events.get(e.type)?.forEach((r,i)=>{(i===t||i.contains(t))&&r.forEach(a=>a.handleEvent(e))})}}addHandler(e,t,r,i){const a=this._events.get(t);if(a){const l=a.get(r);l?l.add(i):a.set(r,new Set([i]))}else this._events.set(t,new Map([[r,new Set([i])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,Bk)})}removeHandler(e,t,r){const i=this._events.get(e);if(!i)return;const a=i.get(t);a&&(a.delete(r),0===a.size&&i.delete(t),0===i.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,Bk)))}}const $k={enterDuration:225,exitDuration:150},jk=LD({passive:!0,capture:!0}),Hk=["mousedown","touchstart"],zk=["mouseup","mouseleave","touchend","touchcancel"];class VD{constructor(e,t,r,i){this._target=e,this._ngZone=t,this._platform=i,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=Ak(r))}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),a={...$k,...r.animation};r.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);const l=r.radius||function x2(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),f=e-i.left,y=t-i.top,E=a.enterDuration,C=document.createElement("div");C.classList.add("mat-ripple-element"),C.style.left=f-l+"px",C.style.top=y-l+"px",C.style.height=2*l+"px",C.style.width=2*l+"px",null!=r.color&&(C.style.backgroundColor=r.color),C.style.transitionDuration=`${E}ms`,this._containerElement.appendChild(C);const M=window.getComputedStyle(C),z=M.transitionDuration,W="none"===M.transitionProperty||"0s"===z||"0s, 0s"===z||0===i.width&&0===i.height,ne=new A2(this,C,r,W);C.style.transform="scale3d(1, 1, 1)",ne.state=0,r.persistent||(this._mostRecentTransientRipple=ne);let fe=null;return!W&&(E||a.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const je=()=>this._finishRippleTransition(ne),at=()=>this._destroyRipple(ne);C.addEventListener("transitionend",je),C.addEventListener("transitioncancel",at),fe={onTransitionEnd:je,onTransitionCancel:at}}),this._activeRipples.set(ne,fe),(W||!E)&&this._finishRippleTransition(ne),ne}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,r={...$k,...e.config.animation};t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=Ak(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,Hk.forEach(r=>{VD._eventManager.addHandler(this._ngZone,r,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{zk.forEach(t=>{this._triggerElement.addEventListener(t,this,jk)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=1,!r&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=function _2(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!function v2(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(Hk.forEach(t=>VD._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&zk.forEach(t=>e.removeEventListener(t,this,jk)))}}VD._eventManager=new M2;const O2=["*"];let BD;function aw(n){return function N2(){if(void 0===BD&&(BD=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(BD=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return BD}()?.createHTML(n)||n}function Gk(n){return Error(`Unable to find icon with the name "${n}"`)}function Wk(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function qk(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class Yp{constructor(e,t,r){this.url=e,this.svgText=t,this.options=r}}let $D=(()=>{class n{constructor(t,r,i,a){this._httpClient=t,this._sanitizer=r,this._errorHandler=a,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=i}addSvgIcon(t,r,i){return this.addSvgIconInNamespace("",t,r,i)}addSvgIconLiteral(t,r,i){return this.addSvgIconLiteralInNamespace("",t,r,i)}addSvgIconInNamespace(t,r,i,a){return this._addSvgIconConfig(t,r,new Yp(i,null,a))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,r,i,a){const l=this._sanitizer.sanitize(d.q3G.HTML,i);if(!l)throw qk(i);const f=aw(l);return this._addSvgIconConfig(t,r,new Yp("",f,a))}addSvgIconSet(t,r){return this.addSvgIconSetInNamespace("",t,r)}addSvgIconSetLiteral(t,r){return this.addSvgIconSetLiteralInNamespace("",t,r)}addSvgIconSetInNamespace(t,r,i){return this._addSvgIconSetConfig(t,new Yp(r,null,i))}addSvgIconSetLiteralInNamespace(t,r,i){const a=this._sanitizer.sanitize(d.q3G.HTML,r);if(!a)throw qk(r);const l=aw(a);return this._addSvgIconSetConfig(t,new Yp("",l,i))}registerFontClassAlias(t,r=t){return this._fontCssClassesByAlias.set(t,r),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const r=this._sanitizer.sanitize(d.q3G.RESOURCE_URL,t);if(!r)throw Wk(t);const i=this._cachedIconsByUrl.get(r);return i?ft(jD(i)):this._loadSvgIconFromConfig(new Yp(t,null)).pipe((0,kr.b)(a=>this._cachedIconsByUrl.set(r,a)),(0,T.U)(a=>jD(a)))}getNamedSvgIcon(t,r=""){const i=Kk(r,t);let a=this._svgIconConfigs.get(i);if(a)return this._getSvgFromConfig(a);if(a=this._getIconConfigFromResolvers(r,t),a)return this._svgIconConfigs.set(i,a),this._getSvgFromConfig(a);const l=this._iconSetConfigs.get(r);return l?this._getSvgFromIconSetConfigs(t,l):Nr(Gk(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?ft(jD(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe((0,T.U)(r=>jD(r)))}_getSvgFromIconSetConfigs(t,r){const i=this._extractIconWithNameFromAnySet(t,r);return i?ft(i):oP(r.filter(l=>!l.svgText).map(l=>this._loadSvgIconSetFromConfig(l).pipe(Ws(f=>{const E=`Loading icon set URL: ${this._sanitizer.sanitize(d.q3G.RESOURCE_URL,l.url)} failed: ${f.message}`;return this._errorHandler.handleError(new Error(E)),ft(null)})))).pipe((0,T.U)(()=>{const l=this._extractIconWithNameFromAnySet(t,r);if(!l)throw Gk(t);return l}))}_extractIconWithNameFromAnySet(t,r){for(let i=r.length-1;i>=0;i--){const a=r[i];if(a.svgText&&a.svgText.toString().indexOf(t)>-1){const l=this._svgElementFromConfig(a),f=this._extractSvgIconFromSet(l,t,a.options);if(f)return f}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe((0,kr.b)(r=>t.svgText=r),(0,T.U)(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?ft(null):this._fetchIcon(t).pipe((0,kr.b)(r=>t.svgText=r))}_extractSvgIconFromSet(t,r,i){const a=t.querySelector(`[id="${r}"]`);if(!a)return null;const l=a.cloneNode(!0);if(l.removeAttribute("id"),"svg"===l.nodeName.toLowerCase())return this._setSvgAttributes(l,i);if("symbol"===l.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(l),i);const f=this._svgElementFromString(aw("<svg></svg>"));return f.appendChild(l),this._setSvgAttributes(f,i)}_svgElementFromString(t){const r=this._document.createElement("DIV");r.innerHTML=t;const i=r.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(t){const r=this._svgElementFromString(aw("<svg></svg>")),i=t.attributes;for(let a=0;a<i.length;a++){const{name:l,value:f}=i[a];"id"!==l&&r.setAttribute(l,f)}for(let a=0;a<t.childNodes.length;a++)t.childNodes[a].nodeType===this._document.ELEMENT_NODE&&r.appendChild(t.childNodes[a].cloneNode(!0));return r}_setSvgAttributes(t,r){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),r&&r.viewBox&&t.setAttribute("viewBox",r.viewBox),t}_fetchIcon(t){const{url:r,options:i}=t,a=i?.withCredentials??!1;if(!this._httpClient)throw function P2(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const l=this._sanitizer.sanitize(d.q3G.RESOURCE_URL,r);if(!l)throw Wk(r);const f=this._inProgressUrlFetches.get(l);if(f)return f;const y=this._httpClient.get(l,{responseType:"text",withCredentials:a}).pipe((0,T.U)(E=>aw(E)),Gi(()=>this._inProgressUrlFetches.delete(l)),(0,Pf.B)());return this._inProgressUrlFetches.set(l,y),y}_addSvgIconConfig(t,r,i){return this._svgIconConfigs.set(Kk(t,r),i),this}_addSvgIconSetConfig(t,r){const i=this._iconSetConfigs.get(t);return i?i.push(r):this._iconSetConfigs.set(t,[r]),this}_svgElementFromConfig(t){if(!t.svgElement){const r=this._svgElementFromString(t.svgText);this._setSvgAttributes(r,t.options),t.svgElement=r}return t.svgElement}_getIconConfigFromResolvers(t,r){for(let i=0;i<this._resolvers.length;i++){const a=this._resolvers[i](r,t);if(a)return F2(a)?new Yp(a.url,null,a.options):new Yp(a,null)}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(FD,8),d.LFG(fd),d.LFG(se,8),d.LFG(d.qLn))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function jD(n){return n.cloneNode(!0)}function Kk(n,e){return n+":"+e}function F2(n){return!(!n.url||!n.options)}const L2=T2(class{constructor(n){this._elementRef=n}}),U2=new d.OlP("MAT_ICON_DEFAULT_OPTIONS"),V2=new d.OlP("mat-icon-location",{providedIn:"root",factory:function B2(){const n=(0,d.f3M)(se),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),Zk=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],$2=Zk.map(n=>`[${n}]`).join(", "),j2=/^url\(['"]?#(.*?)['"]?\)$/;let cR=(()=>{class n extends L2{get inline(){return this._inline}set inline(t){this._inline=function t2(n){return null!=n&&"false"!=`${n}`}(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const r=this._cleanupFontValue(t);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const r=this._cleanupFontValue(t);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}constructor(t,r,i,a,l,f){super(t),this._iconRegistry=r,this._location=a,this._errorHandler=l,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=sf.w0.EMPTY,f&&(f.color&&(this.color=this.defaultColor=f.color),f.fontSet&&(this.fontSet=f.fontSet)),i||t.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(t){if(!t)return["",""];const r=t.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let r=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const i=t.childNodes[r];(1!==i.nodeType||"svg"===i.nodeName.toLowerCase())&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,r=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(i=>i.length>0);this._previousFontSetClass.forEach(i=>t.classList.remove(i)),r.forEach(i=>t.classList.add(i)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&!r.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const r=this._elementsWithExternalReferences;r&&r.forEach((i,a)=>{i.forEach(l=>{a.setAttribute(l.name,`url('${t}#${l.value}')`)})})}_cacheChildrenWithExternalReferences(t){const r=t.querySelectorAll($2),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let a=0;a<r.length;a++)Zk.forEach(l=>{const f=r[a],y=f.getAttribute(l),E=y?y.match(j2):null;if(E){let C=i.get(f);C||(C=[],i.set(f,C)),C.push({name:l,value:E[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[r,i]=this._splitIconName(t);r&&(this._svgNamespace=r),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,r).pipe(Pa(1)).subscribe(a=>this._setSvgElement(a),a=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${i}! ${a.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36($D),d.$8M("aria-hidden"),d.Y36(V2),d.Y36(d.qLn),d.Y36(U2,8))},n.\u0275cmp=d.Xpm({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(t,r){2&t&&(d.uIk("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),d.ekj("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[d.qOj],ngContentSelectors:O2,decls:1,vars:0,template:function(t,r){1&t&&(d.F$t(),d.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),n})(),H2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Vk,Vk]}),n})();function z2(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",4),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.onPrevious())}),d.TgZ(1,"mat-icon"),d._uU(2,"navigate_before"),d.qZA()()}if(2&n){const t=d.oxw();d.uIk("aria-disabled",1===t.current)}}function G2(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"a",7),d.NdJ("click",function(){d.CHM(t);const i=d.oxw().$implicit,a=d.oxw();return d.KtG(a.onGoTo(i))})("keyup.enter",function(){d.CHM(t);const i=d.oxw().$implicit,a=d.oxw();return d.KtG(a.onGoTo(i))}),d._uU(1),d.qZA()}if(2&n){const t=d.oxw().$implicit,r=d.oxw();d.ekj("current",t===r.current),d.uIk("aria-current",t===r.current?"page":null)("aria-label",t===r.current?"Current Page, Page "+t:"Go to Page "+t),d.xp6(1),d.hij(" ",t,"")}}function W2(n,e){1&n&&(d.TgZ(0,"a",8),d._uU(1," ... "),d.qZA())}function q2(n,e){if(1&n&&(d.TgZ(0,"li"),d.YNc(1,G2,2,5,"a",5),d.YNc(2,W2,2,0,"ng-template",null,6,d.W1O),d.qZA()),2&n){const t=e.$implicit,r=d.MAs(3);d.xp6(1),d.Q6J("ngIf",-1!==t)("ngIfElse",r)}}function K2(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",9),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.onNext())}),d.TgZ(1,"mat-icon"),d._uU(2,"navigate_next"),d.qZA()()}if(2&n){const t=d.oxw();d.uIk("aria-disabled",t.current===t.total)}}class Ph{constructor(){this.current=0,this.total=0,this.goTo=new d.vpe,this.next=new d.vpe,this.previous=new d.vpe,this.pages=[]}ngOnChanges(e){(e.current&&e.current.currentValue||e.total&&e.total.currentValue)&&(this.pages=this.getPages(this.current,this.total))}onGoTo(e){console.log("New Page",e),this.goTo.emit(e)}onNext(){this.next.emit(this.current)}onPrevious(){this.previous.next(this.current)}getPages(e,t){return t<=7?[...Array(t).keys()].map(r=>++r):e>5?e>=t-4?[1,-1,t-4,t-3,t-2,t-1,t]:[1,-1,e-1,e,e+1,-1,t]:[1,2,3,4,5,-1,t]}}function Z2(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"li")(1,"label")(2,"input",5),d.NdJ("change",function(i){const l=d.CHM(t).$implicit,f=d.oxw(2);return d.KtG(f.toggleGenre(l.id,i))}),d.qZA(),d._uU(3),d.qZA()()}if(2&n){const t=e.$implicit;d.xp6(2),d.Q6J("value",t.id),d.xp6(1),d.hij(" ",t.name," ")}}function Y2(n,e){if(1&n&&(d.TgZ(0,"div",1)(1,"h1",2),d._uU(2,"Genres"),d.qZA(),d.TgZ(3,"ul",3),d.YNc(4,Z2,4,2,"li",4),d.qZA()()),2&n){const t=d.oxw();d.xp6(4),d.Q6J("ngForOf",t.genres)}}Ph.\u0275fac=function(e){return new(e||Ph)},Ph.\u0275cmp=d.Xpm({type:Ph,selectors:[["app-pagination"]],inputs:{current:"current",total:"total"},outputs:{goTo:"goTo",next:"next",previous:"previous"},features:[d.TTD],decls:7,vars:3,consts:[["aria-label","pagination",1,"pagination-nav"],["class","nav-btn","aria-label","Go To Previous Page",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],["class","nav-btn","aria-label","Go To Next Page",3,"click",4,"ngIf"],["aria-label","Go To Previous Page",1,"nav-btn",3,"click"],["tabindex","0",3,"current","click","keyup.enter",4,"ngIf","ngIfElse"],["more",""],["tabindex","0",3,"click","keyup.enter"],[1,"more"],["aria-label","Go To Next Page",1,"nav-btn",3,"click"]],template:function(e,t){1&e&&(d.TgZ(0,"nav",0)(1,"ul")(2,"li"),d.YNc(3,z2,3,1,"button",1),d.qZA(),d.YNc(4,q2,4,2,"li",2),d.TgZ(5,"li"),d.YNc(6,K2,3,1,"button",3),d.qZA()()()),2&e&&(d.xp6(3),d.Q6J("ngIf",1!==t.current),d.xp6(1),d.Q6J("ngForOf",t.pages),d.xp6(2),d.Q6J("ngIf",t.current!==t.total))},dependencies:[jr,Ii,cR],styles:[".pagination-nav[_ngcontent-%COMP%]{display:flex;align-items:center}.pagination-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;list-style:none;padding:0;margin-right:auto;margin-left:auto}.pagination-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;-webkit-user-select:none;user-select:none;margin:0 4px}.pagination-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:grid;justify-items:center;align-items:center;width:100%;cursor:pointer;width:38px;line-height:38px;border-radius:50%;text-align:center;font-size:18px}.pagination-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a.current[_ngcontent-%COMP%], .pagination-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:not(.more):hover{background-color:#ef60ff;color:#fff;font-weight:700}.pagination-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a.more[_ngcontent-%COMP%]:hover, .pagination-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a.current[_ngcontent-%COMP%]{cursor:default;text-decoration:none}.nav-btn[_ngcontent-%COMP%]{background-color:transparent;border:none;cursor:pointer;display:grid;place-items:center;font-size:18px;color:#e9ecef;padding:8px 16px;border-radius:50%;margin:0 15px}"]});class By{constructor(){this.genres=[],this.selectedGenres=new d.vpe,this.selectedGenreIds=[]}toggleGenre(e,t){if(t.target.checked)this.selectedGenreIds.push(e);else{const r=this.selectedGenreIds.indexOf(e);r>=0&&this.selectedGenreIds.splice(r,1)}this.selectedGenres.emit(this.selectedGenreIds)}}function Q2(n,e){if(1&n&&d._UZ(0,"app-single-content",7),2&n){const t=e.$implicit,r=d.oxw();d.Q6J("movie",t)("mediaType",r.mediaType)}}By.\u0275fac=function(e){return new(e||By)},By.\u0275cmp=d.Xpm({type:By,selectors:[["app-genres"]],inputs:{genres:"genres"},outputs:{selectedGenres:"selectedGenres"},decls:1,vars:1,consts:[["class","genre-wrapper",4,"ngIf"],[1,"genre-wrapper"],[1,"page-title"],[1,"genre-list"],[4,"ngFor","ngForOf"],["type","checkbox",3,"value","change"]],template:function(e,t){1&e&&d.YNc(0,Y2,5,1,"div",0),2&e&&d.Q6J("ngIf",t.genres)},dependencies:[jr,Ii],styles:[".genre-list[_ngcontent-%COMP%]{list-style:none;padding:0}.genre-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:10px;border-radius:10px}.genre-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;gap:10px;padding:8px;border:1px solid #7d3d85;border-radius:10px}.genre-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:hover{background:linear-gradient(to top right,#fac798,#ef60ff,#4bc0c8);color:#000}.genre-wrapper[_ngcontent-%COMP%]{min-width:200px;padding:20px 30px;border-radius:10px;background-color:#2a2333}"]});class uw{constructor(e){this.shows=e,this.movies=[],this.mediaType="Movie",this.currentPage=1,this.totalPages=20,this.movieGenres=[]}ngOnInit(){this.loadMovies(),this.shows.fetchGenres("movie").subscribe(e=>{this.movieGenres=e.genres})}loadMovies(){this.shows.fetchMoviesTvSeries("movie",this.currentPage).subscribe(e=>{this.movies=e.results})}setPage(e){this.currentPage=e,this.loadMovies()}onGoTo(e){this.setPage(e)}onNext(e){this.setPage(e+1)}onPrevious(e){this.setPage(e-1)}onMovieTvGenresSelected(e){this.shows.fetchMoviesTvSeries("movie",this.currentPage,e).subscribe(t=>{this.movies=t.results})}}function X2(n,e){if(1&n&&d._UZ(0,"app-single-content",11),2&n){const t=e.$implicit,r=d.oxw(2);d.Q6J("movie",t)("mediaType",r.type)}}function J2(n,e){if(1&n){const t=d.EpF();d.ynx(0),d.TgZ(1,"div",8),d.YNc(2,X2,1,2,"app-single-content",9),d.qZA(),d.TgZ(3,"app-pagination",10),d.NdJ("goTo",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a.onGoTo(i))})("next",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a.onNext(i))})("previous",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a.onPrevious(i))}),d.qZA(),d.BQk()}if(2&n){const t=d.oxw();d.xp6(2),d.Q6J("ngForOf",t.movies),d.xp6(1),d.Q6J("current",t.currentPage)("total",t.totalPages)}}uw.\u0275fac=function(e){return new(e||uw)(d.Y36(Vc))},uw.\u0275cmp=d.Xpm({type:uw,selectors:[["app-movies"]],decls:8,vars:4,consts:[[1,"container"],[1,"page-title"],[1,"genre-filter-wrapper"],[3,"genres","selectedGenres"],[1,"movie-card-wrapper"],[3,"movie","mediaType",4,"ngFor","ngForOf"],[3,"current","total","goTo","next","previous"],[3,"movie","mediaType"]],template:function(e,t){1&e&&(d.TgZ(0,"div",0)(1,"h1",1),d._uU(2,"Movies"),d.qZA(),d.TgZ(3,"div",2)(4,"app-genres",3),d.NdJ("selectedGenres",function(i){return t.onMovieTvGenresSelected(i)}),d.qZA(),d.TgZ(5,"div",4),d.YNc(6,Q2,1,2,"app-single-content",5),d.qZA()(),d.TgZ(7,"app-pagination",6),d.NdJ("goTo",function(i){return t.onGoTo(i)})("next",function(i){return t.onNext(i)})("previous",function(i){return t.onPrevious(i)}),d.qZA()()),2&e&&(d.xp6(4),d.Q6J("genres",t.movieGenres),d.xp6(2),d.Q6J("ngForOf",t.movies),d.xp6(1),d.Q6J("current",t.currentPage)("total",t.totalPages))},dependencies:[jr,Nh,Ph,By]});const Yk=function(n){return{active:n}};class lw{constructor(e){this.shows=e,this.movies=[],this.type="movie",this.currentPage=1,this.totalPages=20}ngOnInit(){}loadSearchResults(){this.shows.fetchSearchedShows(this.type,this.searchText,this.currentPage).subscribe(e=>{this.movies=e.results,console.log(this.movies)})}onTabButtonClick(e){this.type=e}onSearchInputChange(){console.log("Search text changed to:",this.searchText),this.loadSearchResults()}setPage(e){this.currentPage=e,this.loadSearchResults()}onGoTo(e){this.setPage(e)}onNext(e){this.setPage(e+1)}onPrevious(e){this.setPage(e-1)}}function e$(n,e){1&n&&d._UZ(0,"app-single-content",5),2&n&&d.Q6J("movie",e.$implicit)}lw.\u0275fac=function(e){return new(e||lw)(d.Y36(Vc))},lw.\u0275cmp=d.Xpm({type:lw,selectors:[["app-search"]],decls:13,vars:8,consts:[[1,"container"],[1,"search-header"],[1,"search-box"],["placeholder","Search","type","text",3,"ngModel","ngModelChange"],[1,"search-btn",3,"click"],[1,"tab"],[3,"ngClass","click"],[4,"ngIf"],[1,"movie-card-wrapper"],[3,"movie","mediaType",4,"ngFor","ngForOf"],[3,"current","total","goTo","next","previous"],[3,"movie","mediaType"]],template:function(e,t){1&e&&(d.TgZ(0,"div",0)(1,"header",1)(2,"div",2)(3,"input",3),d.NdJ("ngModelChange",function(i){return t.searchText=i}),d.qZA()(),d.TgZ(4,"button",4),d.NdJ("click",function(){return t.onSearchInputChange()}),d.TgZ(5,"mat-icon"),d._uU(6,"search"),d.qZA()()(),d.TgZ(7,"div",5)(8,"button",6),d.NdJ("click",function(){return t.onTabButtonClick("movie")}),d._uU(9,"Movies"),d.qZA(),d.TgZ(10,"button",6),d.NdJ("click",function(){return t.onTabButtonClick("tv")}),d._uU(11,"TV"),d.qZA()(),d.YNc(12,J2,4,3,"ng-container",7),d.qZA()),2&e&&(d.xp6(3),d.Q6J("ngModel",t.searchText),d.xp6(5),d.Q6J("ngClass",d.VKq(4,Yk,"movie"===t.type)),d.xp6(2),d.Q6J("ngClass",d.VKq(6,Yk,"tv"===t.type)),d.xp6(2),d.Q6J("ngIf",t.movies.length>0))},dependencies:[$t,jr,Ii,Py,DD,tw,cR,Nh,Ph],styles:[".search-header[_ngcontent-%COMP%]{display:flex;margin:15px 0;gap:15px;justify-content:space-between}.search-header[_ngcontent-%COMP%]   .search-btn[_ngcontent-%COMP%]{padding:15px 16px;border-radius:4px;margin:0}.search-header[_ngcontent-%COMP%]   .search-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(to top right,#fac798,#ef60ff,#4bc0c8)}.search-header[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]{display:inline-flex;background-color:#383439;position:relative;flex:1 1 0%}.search-header[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;background:none;width:100%;font-size:20px;color:#fff;padding:0 20px}.search-header[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#fff}.tab[_ngcontent-%COMP%]{display:flex;gap:20px}.tab[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:160px;font-size:14px;text-align:center;color:#fff;font-weight:500;line-height:1.75;white-space:normal;text-transform:uppercase;border-radius:5px}.tab[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:linear-gradient(to top right,#fac798,#ef60ff,#4bc0c8)}.active[_ngcontent-%COMP%]{border-bottom:2px solid white}"]});class cw{constructor(e){this.shows=e,this.trendingShows=[],this.currentPage=1,this.totalPages=20}ngOnInit(){this.loadTrendingShows()}loadTrendingShows(){this.shows.fetchTrendingShows(this.currentPage).subscribe(e=>{this.data=e,this.trendingShows=e.results,console.log(this)})}setPage(e){this.currentPage=e,this.loadTrendingShows()}onGoTo(e){this.setPage(e)}onNext(e){this.setPage(e+1)}onPrevious(e){this.setPage(e-1)}}cw.\u0275fac=function(e){return new(e||cw)(d.Y36(Vc))},cw.\u0275cmp=d.Xpm({type:cw,selectors:[["app-trending"]],decls:6,vars:3,consts:[[1,"container"],[1,"page-title"],[1,"movie-card-wrapper"],[3,"movie",4,"ngFor","ngForOf"],[3,"current","total","goTo","next","previous"],[3,"movie"]],template:function(e,t){1&e&&(d.TgZ(0,"div",0)(1,"h1",1),d._uU(2,"Trending Today"),d.qZA(),d.TgZ(3,"div",2),d.YNc(4,e$,1,1,"app-single-content",3),d.qZA(),d.TgZ(5,"app-pagination",4),d.NdJ("goTo",function(i){return t.onGoTo(i)})("next",function(i){return t.onNext(i)})("previous",function(i){return t.onPrevious(i)}),d.qZA()()),2&e&&(d.xp6(4),d.Q6J("ngForOf",t.trendingShows),d.xp6(1),d.Q6J("current",t.currentPage)("total",t.totalPages))},dependencies:[jr,Nh,Ph]});class dw{constructor(e,t){this.router=e,this.authService=t}ngOnInit(){}register(){this.authService.signUp(this.email,this.password).then(e=>this.authService.setUserDate(e.user,this.name).then(t=>{this.name="",this.email="",this.password="",this.confirmPassword=""})),this.router.navigate(["login"])}}function t$(n,e){if(1&n&&d._UZ(0,"app-single-content",7),2&n){const t=e.$implicit,r=d.oxw();d.Q6J("movie",t)("mediaType",r.mediaType)}}dw.\u0275fac=function(e){return new(e||dw)(d.Y36(Wi),d.Y36(Wp))},dw.\u0275cmp=d.Xpm({type:dw,selectors:[["app-register"]],decls:22,vars:4,consts:[[1,"login-register-container"],[1,"login-register-wrapper"],["type","text","placeholder","Full Name","name","name",3,"ngModel","ngModelChange"],["type","email","placeholder","email","name","email",3,"ngModel","ngModelChange"],["type","password","placeholder","password","name","password",3,"ngModel","ngModelChange"],["type","password","placeholder","confirm password","name","confirmPassword",3,"ngModel","ngModelChange"],[1,"btn",3,"click"],[1,"card-left-border"],[1,"card-top-border"],[1,"card-right-border"],[1,"card-bottom-border"]],template:function(e,t){1&e&&(d.TgZ(0,"div",0)(1,"form",1)(2,"h1"),d._uU(3,"Register"),d.qZA(),d.TgZ(4,"label"),d._uU(5,"Full Name"),d.qZA(),d.TgZ(6,"input",2),d.NdJ("ngModelChange",function(i){return t.name=i}),d.qZA(),d.TgZ(7,"label"),d._uU(8,"Email address"),d.qZA(),d.TgZ(9,"input",3),d.NdJ("ngModelChange",function(i){return t.email=i}),d.qZA(),d.TgZ(10,"label"),d._uU(11,"Password"),d.qZA(),d.TgZ(12,"input",4),d.NdJ("ngModelChange",function(i){return t.password=i}),d.qZA(),d.TgZ(13,"label"),d._uU(14,"Confirm Password"),d.qZA(),d.TgZ(15,"input",5),d.NdJ("ngModelChange",function(i){return t.confirmPassword=i}),d.qZA(),d.TgZ(16,"button",6),d.NdJ("click",function(){return t.register()}),d._uU(17,"Submit"),d.qZA()(),d._UZ(18,"div",7)(19,"div",8)(20,"div",9)(21,"div",10),d.qZA()),2&e&&(d.xp6(6),d.Q6J("ngModel",t.name),d.xp6(3),d.Q6J("ngModel",t.email),d.xp6(3),d.Q6J("ngModel",t.password),d.xp6(3),d.Q6J("ngModel",t.confirmPassword))},dependencies:[ZM,Py,DD,UM,tw,ew]});class hw{constructor(e){this.shows=e,this.tvSeries=[],this.mediaType="TV Series",this.currentPage=1,this.totalPages=20,this.tvGenres=[]}ngOnInit(){this.loadTvSeries(),this.shows.fetchGenres("tv").subscribe(e=>{this.tvGenres=e.genres,console.log(this.tvGenres)})}loadTvSeries(){this.shows.fetchMoviesTvSeries("tv",this.currentPage).subscribe(e=>{this.data=e,this.tvSeries=e.results,console.log(e)})}setPage(e){this.currentPage=e,this.loadTvSeries()}onGoTo(e){this.setPage(e)}onNext(e){this.setPage(e+1)}onPrevious(e){this.setPage(e-1)}onMovieTvGenresSelected(e){this.shows.fetchMoviesTvSeries("movie",this.currentPage,e).subscribe(t=>{this.data=t,this.tvSeries=t.results,console.log(t)})}}hw.\u0275fac=function(e){return new(e||hw)(d.Y36(Vc))},hw.\u0275cmp=d.Xpm({type:hw,selectors:[["app-tvseries"]],decls:8,vars:4,consts:[[1,"container"],[1,"page-title"],[1,"genre-filter-wrapper"],[3,"genres","selectedGenres"],[1,"movie-card-wrapper"],[3,"movie","mediaType",4,"ngFor","ngForOf"],[3,"current","total","goTo","next","previous"],[3,"movie","mediaType"]],template:function(e,t){1&e&&(d.TgZ(0,"div",0)(1,"h1",1),d._uU(2,"Movies"),d.qZA(),d.TgZ(3,"div",2)(4,"app-genres",3),d.NdJ("selectedGenres",function(i){return t.onMovieTvGenresSelected(i)}),d.qZA(),d.TgZ(5,"div",4),d.YNc(6,t$,1,2,"app-single-content",5),d.qZA()(),d.TgZ(7,"app-pagination",6),d.NdJ("goTo",function(i){return t.onGoTo(i)})("next",function(i){return t.onNext(i)})("previous",function(i){return t.onPrevious(i)}),d.qZA()()),2&e&&(d.xp6(4),d.Q6J("genres",t.tvGenres),d.xp6(2),d.Q6J("ngForOf",t.tvSeries),d.xp6(1),d.Q6J("current",t.currentPage)("total",t.totalPages))},dependencies:[jr,Nh,Ph,By]});const n$=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:nw},{path:"register",component:dw},{path:"movies",component:uw},{path:"search",component:lw},{path:"trending",component:cw},{path:"tvseries",component:hw}];class $y{}$y.\u0275fac=function(e){return new(e||$y)},$y.\u0275mod=d.oAB({type:$y}),$y.\u0275inj=d.cJS({imports:[x0.forRoot(n$),x0]});class fw{constructor(){}ngOnInit(){}scrollToTop(){window.scroll(0,0)}}function r$(n,e){if(1&n&&(d.TgZ(0,"li")(1,"a",1)(2,"span")(3,"mat-icon"),d._uU(4),d.qZA()(),d.TgZ(5,"p"),d._uU(6),d.qZA()()()),2&n){const t=e.$implicit;d.xp6(1),d.Q6J("routerLink",t.to),d.xp6(3),d.Oqu(t.icon),d.xp6(2),d.Oqu(t.label)}}fw.\u0275fac=function(e){return new(e||fw)},fw.\u0275cmp=d.Xpm({type:fw,selectors:[["app-header"]],decls:2,vars:0,consts:[[3,"click"]],template:function(e,t){1&e&&(d.TgZ(0,"header",0),d.NdJ("click",function(){return t.scrollToTop()}),d._uU(1,"\u{1f3ac} Entertainment Hub \u{1f3a5}"),d.qZA())},styles:["header[_ngcontent-%COMP%]{width:100%;cursor:pointer;display:flex;justify-content:center;text-transform:uppercase;font-size:5vw;padding:50px;box-shadow:0 1px 5px #000;color:#fff;z-index:100;position:sticky;top:0;background-color:#2b2b2b}@media (max-width: 1000px){header[_ngcontent-%COMP%]{padding-top:15px;font-size:6.4vw}}"]});class pw{constructor(){this.navItems=[{label:"Trending",icon:"public",to:"trending"},{label:"Movies",icon:"movie",to:"movies"},{label:"TV Series",icon:"tv",to:"tvseries"},{label:"Search",icon:"search",to:"search"}]}ngOnInit(){}}pw.\u0275fac=function(e){return new(e||pw)},pw.\u0275cmp=d.Xpm({type:pw,selectors:[["app-footer"]],decls:4,vars:1,consts:[[4,"ngFor","ngForOf"],[3,"routerLink"]],template:function(e,t){1&e&&(d.TgZ(0,"footer")(1,"nav")(2,"ul"),d.YNc(3,r$,7,3,"li",0),d.qZA()()()),2&e&&(d.xp6(3),d.Q6J("ngForOf",t.navItems))},dependencies:[jr,Rf,cR],styles:["footer[_ngcontent-%COMP%]{width:100%;bottom:0;z-index:100;padding:15px;box-shadow:0 1px 5px #000;position:sticky;background-color:#2b2b2b}footer[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]{margin-right:auto;margin-left:auto}footer[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;align-items:center;gap:50px;list-style:none;justify-content:center}footer[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}"]});class gw{constructor(){this.title="entertainment-app-ng"}}gw.\u0275fac=function(e){return new(e||gw)},gw.\u0275cmp=d.Xpm({type:gw,selectors:[["app-root"]],decls:3,vars:0,template:function(e,t){1&e&&d._UZ(0,"app-header")(1,"router-outlet")(2,"app-footer")},dependencies:[d_,fw,pw]});const Qk_firebase={projectId:"entertainment-86d73",appId:"1:387571002460:web:5086f9af22c768f1800a99",storageBucket:"entertainment-86d73.appspot.com",apiKey:"AIzaSyB1A72pcPPwB08SQC42OMvo4hExxz7VyQY",authDomain:"entertainment-86d73.firebaseapp.com",messagingSenderId:"387571002460"};var i$=F(2722);class dR{constructor(e){return e}}class hR{constructor(){return(0,an.vb)("auth")}}const fR=new d.OlP("angularfire2.auth-instances");function o$(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new dR(r)}}const a$={provide:hR,deps:[[new d.FiY,fR]]},u$={provide:dR,useFactory:function s$(n,e){const t=(0,an.JM)("auth",n,e);return t&&new dR(t)},deps:[[new d.FiY,fR],ic]};let l$=(()=>{class n{constructor(){(0,mo.KN)("angularfire",an.q4.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[u$,a$]}),n})();const d$=(0,an.u3)(i$.n,!0);class pR{constructor(e){return e}}const Jk="firestore",gR=new d.OlP("angularfire2.firestore-instances");function p$(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new pR(r)}}const g$={provide:class h${constructor(){return(0,an.vb)(Jk)}},deps:[[new d.FiY,gR]]},m$={provide:pR,useFactory:function f$(n,e){const t=(0,an.JM)(Jk,n,e);return t&&new pR(t)},deps:[[new d.FiY,gR],ic]};let y$=(()=>{class n{constructor(){(0,mo.KN)("angularfire",an.q4.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[m$,g$]}),n})();const v$=(0,an.u3)(gU,!0),e1="firebasestorage.googleapis.com";class Cr extends sn.ZR{constructor(e,t,r=0){super(mR(e),`Firebase Storage: ${t} (${mR(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Cr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return mR(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Kn=(()=>(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Kn||(Kn={})),Kn))();function mR(n){return"storage/"+n}function _R(n){return new Cr(Kn.INVALID_ARGUMENT,n)}function o1(){return new Cr(Kn.APP_DELETED,"The Firebase app was deleted.")}class Ns{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Ns.makeFromUrl(e,t)}catch{return new Ns(e,"")}if(""===r.path)return r;throw function M$(n){return new Cr(Kn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",f=new RegExp("^gs://"+i+"(/(.*))?$","i");function E(Xe){Xe.path_=decodeURIComponent(Xe.path)}const M=t.replace(/[.]/g,"\\."),tt=[{regex:f,indices:{bucket:1,path:3},postModify:function a(Xe){"/"===Xe.path.charAt(Xe.path.length-1)&&(Xe.path_=Xe.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${M}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:E},{regex:new RegExp(`^https?://${t===e1?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:E}];for(let Xe=0;Xe<tt.length;Xe++){const At=tt[Xe],xt=At.regex.exec(e);if(xt){let Xr=xt[At.indices.path];Xr||(Xr=""),r=new Ns(xt[At.indices.bucket],Xr),At.postModify(r);break}}if(null==r)throw function A$(n){return new Cr(Kn.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class k${constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function ER(n,e,t,r){if(r<e)throw _R(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw _R(`Invalid value for '${n}'. Expected ${t} or less.`)}var kh=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(kh||(kh={})),kh))();class $${constructor(e,t,r,i,a,l,f,y,E,C,M,L=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=f,this.errorCallback_=y,this.timeout_=E,this.progressCallback_=C,this.connectionFactory_=M,this.retry=L,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((z,W)=>{this.resolve_=z,this.reject_=W,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,l=this.reject_,f=i.connection;if(i.wasSuccessCode)try{const y=this.callback_(f,f.getResponse());!function U$(n){return void 0!==n}(y)?a():a(y)}catch(y){l(y)}else if(null!==f){const y=function yR(){return new Cr(Kn.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}();y.serverResponse=f.getErrorText(),l(this.errorCallback_?this.errorCallback_(f,y):y)}else l(i.canceled?this.appDelete_?o1():function r1(){return new Cr(Kn.CANCELED,"User canceled the upload/download.")}():function n1(){return new Cr(Kn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new zD(!1,null,!0)):this.backoffId_=function F$(n,e,t){let r=1,i=null,a=null,l=!1,f=0;function y(){return 2===f}let E=!1;function C(...fe){E||(E=!0,e.apply(null,fe))}function M(fe){i=setTimeout(()=>{i=null,n(z,y())},fe)}function L(){a&&clearTimeout(a)}function z(fe,...je){if(E)return void L();if(fe)return L(),void C.call(null,fe,...je);if(y()||l)return L(),void C.call(null,fe,...je);let tt;r<64&&(r*=2),1===f?(f=2,tt=0):tt=1e3*(r+Math.random()),M(tt)}let W=!1;function ne(fe){W||(W=!0,L(),!E&&(null!==i?(fe||(f=2),clearTimeout(i),M(0)):fe||(f=1)))}return M(0),a=setTimeout(()=>{l=!0,ne(!0)},t),ne}((r,i)=>{if(i)return void r(!1,new zD(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const l=f=>{null!==this.progressCallback_&&this.progressCallback_(f.loaded,f.lengthComputable?f.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const f=a.getErrorCode()===kh.NO_ERROR,y=a.getStatus();if(!f||function l1(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),a=-1!==e.indexOf(n);return t||i||a}(y,this.additionalRetryCodes_)&&this.retry){const C=a.getErrorCode()===kh.ABORT;return void r(!1,new zD(!1,null,C))}const E=-1!==this.successCodes_.indexOf(y);r(!0,new zD(E,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function L$(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class zD{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}class Qp{constructor(e,t){this._service=e,this._location=t instanceof Ns?t:Ns.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Qp(e,t)}get root(){const e=new Ns(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return function p1(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}(this._location.path)}get storage(){return this._service}get parent(){const e=function tj(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Ns(this._location.bucket,e);return new Qp(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function P$(n){return new Cr(Kn.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function M1(n,e){const t=e?.storageBucket;return null==t?null:Ns.makeFromBucketSpec(t,n)}class SR{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=e1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Ns.makeFromBucketSpec(i,this._host):M1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Ns.makeFromBucketSpec(this._url,e):M1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){ER("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){ER("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Ee.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Ee.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Qp(this,e)}_makeRequest(e,t,r,i,a=!0){if(this._deleted)return new k$(o1());{const l=function W$(n,e,t,r,i,a,l=!0){const f=function u1(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}(n.urlParams),y=n.url+f,E=Object.assign({},n.headers);return function z$(n,e){e&&(n["X-Firebase-GMPID"]=e)}(E,e),function j$(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(E,t),function H$(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(E,a),function G$(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(E,r),new $$(y,n.method,E,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l)}(e,this._appId,r,i,t,this._firebaseVersion,a);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,t){var r=this;return(0,Ee.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const R1="@firebase/storage",O1="storage";function Bj(n=(0,qi.getApp)(),e){n=(0,sn.m9)(n);const r=(0,qi._getProvider)(n,O1).getImmediate({identifier:e}),i=(0,sn.P0)("storage");return i&&function $j(n,e,t,r={}){!function Vj(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,sn.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(r,...i),r}function jj(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new SR(t,r,i,e,qi.SDK_VERSION)}!function Hj(){(0,qi._registerComponent)(new Ff.wA(O1,jj,"PUBLIC").setMultipleInstances(!0)),(0,qi.registerVersion)(R1,"0.11.1",""),(0,qi.registerVersion)(R1,"0.11.1","esm2017")}();class AR{constructor(e){return e}}const N1="storage",MR=new d.OlP("angularfire2.storage-instances");function Wj(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new AR(r)}}const qj={provide:class zj{constructor(){return(0,an.vb)(N1)}},deps:[[new d.FiY,MR]]},Kj={provide:AR,useFactory:function Gj(n,e){const t=(0,an.JM)(N1,n,e);return t&&new AR(t)},deps:[[new d.FiY,MR],ic]};let Zj=(()=>{class n{constructor(){(0,mo.KN)("angularfire",an.q4.full,"gcs")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[Kj,qj]}),n})();const Qj=(0,an.u3)(Bj,!0);class P1{}class Xj{}const jc="*";function k1(n,e=null){return{type:2,steps:n,options:e}}function F1(n){return{type:6,styles:n,offset:null}}function L1(n){Promise.resolve().then(n)}class Ew{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){L1(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class U1{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const a=this.players.length;0==a?L1(()=>this._onFinish()):this.players.forEach(l=>{l.onDone(()=>{++t==a&&this._onFinish()}),l.onDestroy(()=>{++r==a&&this._onDestroy()}),l.onStart(()=>{++i==a&&this._onStart()})}),this.totalTime=this.players.reduce((l,f)=>Math.max(l,f.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function V1(n){return new d.vHH(3e3,!1)}function NH(){return typeof window<"u"&&typeof window.document<"u"}function xR(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Fh(n){switch(n.length){case 0:return new Ew;case 1:return n[0];default:return new U1(n)}}function B1(n,e,t,r,i=new Map,a=new Map){const l=[],f=[];let y=-1,E=null;if(r.forEach(C=>{const M=C.get("offset"),L=M==y,z=L&&E||new Map;C.forEach((W,ne)=>{let fe=ne,je=W;if("offset"!==ne)switch(fe=e.normalizePropertyName(fe,l),je){case"!":je=i.get(ne);break;case jc:je=a.get(ne);break;default:je=e.normalizeStyleValue(ne,fe,je,l)}z.set(fe,je)}),L||f.push(z),E=z,y=M}),l.length)throw function wH(n){return new d.vHH(3502,!1)}();return f}function OR(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&NR(t,"start",n)));break;case"done":n.onDone(()=>r(t&&NR(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&NR(t,"destroy",n)))}}function NR(n,e,t){const a=PR(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),l=n._data;return null!=l&&(a._data=l),a}function PR(n,e,t,r,i="",a=0,l){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:a,disabled:!!l}}function wo(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function $1(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let kR=(n,e)=>!1,j1=(n,e,t)=>[],H1=null;function FR(n){const e=n.parentNode||n.host;return e===H1?null:e}(xR()||typeof Element<"u")&&(NH()?(H1=(()=>document.documentElement)(),kR=(n,e)=>{for(;e;){if(e===n)return!0;e=FR(e)}return!1}):kR=(n,e)=>n.contains(e),j1=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Xp=null,z1=!1;const G1=kR,W1=j1;let q1=(()=>{class n{validateStyleProperty(t){return function kH(n){Xp||(Xp=function FH(){return typeof document<"u"?document.body:null}()||{},z1=!!Xp.style&&"WebkitAppearance"in Xp.style);let e=!0;return Xp.style&&!function PH(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Xp.style,!e&&z1&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Xp.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return G1(t,r)}getParentElement(t){return FR(t)}query(t,r,i){return W1(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,a,l,f=[],y){return new Ew(i,a)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),LR=(()=>{class n{}return n.NOOP=new q1,n})();const UR="ng-enter",KD="ng-leave",ZD="ng-trigger",YD=".ng-trigger",Z1="ng-animating",VR=".ng-animating";function Hc(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:BR(parseFloat(e[1]),e[2])}function BR(n,e){return"s"===e?1e3*n:n}function QD(n,e,t){return n.hasOwnProperty("duration")?n:function VH(n,e,t){let i,a=0,l="";if("string"==typeof n){const f=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===f)return e.push(V1()),{duration:0,delay:0,easing:""};i=BR(parseFloat(f[1]),f[2]);const y=f[3];null!=y&&(a=BR(parseFloat(y),f[4]));const E=f[5];E&&(l=E)}else i=n;if(!t){let f=!1,y=e.length;i<0&&(e.push(function Jj(){return new d.vHH(3100,!1)}()),f=!0),a<0&&(e.push(function eH(){return new d.vHH(3101,!1)}()),f=!0),f&&e.splice(y,0,V1())}return{duration:i,delay:a,easing:l}}(n,e,t)}function ww(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function Y1(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function Lh(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function X1(n,e,t){return t?e+":"+t+";":""}function J1(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=X1(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=X1(0,HH(t),n.style[t]));n.setAttribute("style",e)}function pl(n,e,t){n.style&&(e.forEach((r,i)=>{const a=jR(i);t&&!t.has(i)&&t.set(i,n.style[a]),n.style[a]=r}),xR()&&J1(n))}function Jp(n,e){n.style&&(e.forEach((t,r)=>{const i=jR(r);n.style[i]=""}),xR()&&J1(n))}function bw(n){return Array.isArray(n)?1==n.length?n[0]:k1(n):n}const $R=new RegExp("{{\\s*(.+?)\\s*}}","g");function eF(n){let e=[];if("string"==typeof n){let t;for(;t=$R.exec(n);)e.push(t[1]);$R.lastIndex=0}return e}function Iw(n,e,t){const r=n.toString(),i=r.replace($R,(a,l)=>{let f=e[l];return null==f&&(t.push(function nH(n){return new d.vHH(3003,!1)}()),f=""),f.toString()});return i==r?n:i}function XD(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const jH=/-+([a-z0-9])/g;function jR(n){return n.replace(jH,(...e)=>e[1].toUpperCase())}function HH(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function bo(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function rH(n){return new d.vHH(3004,!1)}()}}function ZH(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function YH(n,e,t){if(":"==n[0]){const y=function QH(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function yH(n){return new d.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof y)return void e.push(y);n=y}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function mH(n){return new d.vHH(3015,!1)}()),e;const i=r[1],a=r[2],l=r[3];e.push(nF(i,l));"<"==a[0]&&!("*"==i&&"*"==l)&&e.push(nF(l,i))}(r,t,e)):t.push(n),t}const nC=new Set(["true","1"]),rC=new Set(["false","0"]);function nF(n,e){const t=nC.has(n)||rC.has(n),r=nC.has(e)||rC.has(e);return(i,a)=>{let l="*"==n||n==i,f="*"==e||e==a;return!l&&t&&"boolean"==typeof i&&(l=i?nC.has(n):rC.has(n)),!f&&r&&"boolean"==typeof a&&(f=a?nC.has(e):rC.has(e)),l&&f}}const XH=new RegExp("s*:selfs*,?","g");function HR(n,e,t,r){return new JH(n).build(e,t,r)}class JH{constructor(e){this._driver=e}build(e,t,r){const i=new nz(t);return this._resetContextStyleTimingState(i),bo(this,bw(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const a=[],l=[];return"@"==e.name.charAt(0)&&t.errors.push(function sH(){return new d.vHH(3006,!1)}()),e.definitions.forEach(f=>{if(this._resetContextStyleTimingState(t),0==f.type){const y=f,E=y.name;E.toString().split(/\s*,\s*/).forEach(C=>{y.name=C,a.push(this.visitState(y,t))}),y.name=E}else if(1==f.type){const y=this.visitTransition(f,t);r+=y.queryCount,i+=y.depCount,l.push(y)}else t.errors.push(function oH(){return new d.vHH(3007,!1)}())}),{type:7,name:e.name,states:a,transitions:l,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const a=new Set,l=i||{};r.styles.forEach(f=>{f instanceof Map&&f.forEach(y=>{eF(y).forEach(E=>{l.hasOwnProperty(E)||a.add(E)})})}),a.size&&(XD(a.values()),t.errors.push(function aH(n,e){return new d.vHH(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=bo(this,bw(e.animation),t);return{type:1,matchers:ZH(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:eg(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>bo(this,r,t)),options:eg(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const a=e.steps.map(l=>{t.currentTime=r;const f=bo(this,l,t);return i=Math.max(i,t.currentTime),f});return t.currentTime=i,{type:3,steps:a,options:eg(e.options)}}visitAnimate(e,t){const r=function iz(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return zR(QD(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(a=>"{"==a.charAt(0)&&"{"==a.charAt(1))){const a=zR(0,0,"");return a.dynamic=!0,a.strValue=t,a}const i=QD(t,e);return zR(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,a=e.styles?e.styles:F1({});if(5==a.type)i=this.visitKeyframes(a,t);else{let l=e.styles,f=!1;if(!l){f=!0;const E={};r.easing&&(E.easing=r.easing),l=F1(E)}t.currentTime+=r.duration+r.delay;const y=this.visitStyle(l,t);y.isEmptyStep=f,i=y}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let f of i)"string"==typeof f?f===jc?r.push(f):t.errors.push(new d.vHH(3002,!1)):r.push(Y1(f));let a=!1,l=null;return r.forEach(f=>{if(f instanceof Map&&(f.has("easing")&&(l=f.get("easing"),f.delete("easing")),!a))for(let y of f.values())if(y.toString().indexOf("{{")>=0){a=!0;break}}),{type:6,styles:r,easing:l,offset:e.offset,containsDynamicStyles:a,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,a=t.currentTime;r&&a>0&&(a-=r.duration+r.delay),e.styles.forEach(l=>{"string"!=typeof l&&l.forEach((f,y)=>{const E=t.collectedStyles.get(t.currentQuerySelector),C=E.get(y);let M=!0;C&&(a!=i&&a>=C.startTime&&i<=C.endTime&&(t.errors.push(function lH(n,e,t,r,i){return new d.vHH(3010,!1)}()),M=!1),a=C.startTime),M&&E.set(y,{startTime:a,endTime:i}),t.options&&function $H(n,e,t){const r=e.params||{},i=eF(n);i.length&&i.forEach(a=>{r.hasOwnProperty(a)||t.push(function tH(n){return new d.vHH(3001,!1)}())})}(f,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function cH(){return new d.vHH(3011,!1)}()),r;let a=0;const l=[];let f=!1,y=!1,E=0;const C=e.steps.map(je=>{const at=this._makeStyleAst(je,t);let tt=null!=at.offset?at.offset:function rz(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(at.styles),Xe=0;return null!=tt&&(a++,Xe=at.offset=tt),y=y||Xe<0||Xe>1,f=f||Xe<E,E=Xe,l.push(Xe),at});y&&t.errors.push(function dH(){return new d.vHH(3012,!1)}()),f&&t.errors.push(function hH(){return new d.vHH(3200,!1)}());const M=e.steps.length;let L=0;a>0&&a<M?t.errors.push(function fH(){return new d.vHH(3202,!1)}()):0==a&&(L=1/(M-1));const z=M-1,W=t.currentTime,ne=t.currentAnimateTimings,fe=ne.duration;return C.forEach((je,at)=>{const tt=L>0?at==z?1:L*at:l[at],Xe=tt*fe;t.currentTime=W+ne.delay+Xe,ne.duration=Xe,this._validateStyleAst(je,t),je.offset=tt,r.styles.push(je)}),r}visitReference(e,t){return{type:8,animation:bo(this,bw(e.animation),t),options:eg(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:eg(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:eg(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[a,l]=function ez(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(XH,"")),n=n.replace(/@\*/g,YD).replace(/@\w+/g,t=>YD+"-"+t.slice(1)).replace(/:animating/g,VR),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+a:a,wo(t.collectedStyles,t.currentQuerySelector,new Map);const f=bo(this,bw(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:a,limit:i.limit||0,optional:!!i.optional,includeSelf:l,animation:f,originalSelector:e.selector,options:eg(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function pH(){return new d.vHH(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:QD(e.timings,t.errors,!0);return{type:12,animation:bo(this,bw(e.animation),t),timings:r,options:null}}}class nz{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function eg(n){return n?(n=ww(n)).params&&(n.params=function tz(n){return n?ww(n):null}(n.params)):n={},n}function zR(n,e,t){return{duration:n,delay:e,easing:t}}function GR(n,e,t,r,i,a,l=null,f=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:a,totalTime:i+a,easing:l,subTimeline:f}}class iC{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const az=new RegExp(":enter","g"),lz=new RegExp(":leave","g");function WR(n,e,t,r,i,a=new Map,l=new Map,f,y,E=[]){return(new cz).buildKeyframes(n,e,t,r,i,a,l,f,y,E)}class cz{buildKeyframes(e,t,r,i,a,l,f,y,E,C=[]){E=E||new iC;const M=new qR(e,t,E,i,a,C,[]);M.options=y;const L=y.delay?Hc(y.delay):0;M.currentTimeline.delayNextStep(L),M.currentTimeline.setStyles([l],null,M.errors,y),bo(this,r,M);const z=M.timelines.filter(W=>W.containsAnimation());if(z.length&&f.size){let W;for(let ne=z.length-1;ne>=0;ne--){const fe=z[ne];if(fe.element===t){W=fe;break}}W&&!W.allowOnlyTimelineStyles()&&W.setStyles([f],null,M.errors,y)}return z.length?z.map(W=>W.buildKeyframes()):[GR(t,[],[],[],0,L,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),a=t.currentTimeline.currentTime,l=this._visitSubInstructions(r,i,i.options);a!=l&&t.transformIntoNewTimeline(l)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const a=i?.delay;if(a){const l="number"==typeof a?a:Hc(Iw(a,i?.params??{},t.errors));r.delayNextStep(l)}}}_visitSubInstructions(e,t,r){let a=t.currentTimeline.currentTime;const l=null!=r.duration?Hc(r.duration):null,f=null!=r.delay?Hc(r.delay):null;return 0!==l&&e.forEach(y=>{const E=t.appendInstructionToTimeline(y,l,f);a=Math.max(a,E.duration+E.delay)}),a}visitReference(e,t){t.updateOptions(e.options,!0),bo(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const a=e.options;if(a&&(a.params||a.delay)&&(i=t.createSubContext(a),i.transformIntoNewTimeline(),null!=a.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=sC);const l=Hc(a.delay);i.delayNextStep(l)}e.steps.length&&(e.steps.forEach(l=>bo(this,l,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const a=e.options&&e.options.delay?Hc(e.options.delay):0;e.steps.forEach(l=>{const f=t.createSubContext(e.options);a&&f.delayNextStep(a),bo(this,l,f),i=Math.max(i,f.currentTimeline.currentTime),r.push(f.currentTimeline)}),r.forEach(l=>t.currentTimeline.mergeTimelineCollectedStyles(l)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return QD(t.params?Iw(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const a=e.style;5==a.type?this.visitKeyframes(a,t):(t.incrementTime(r.duration),this.visitStyle(a,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const a=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(a):r.setStyles(e.styles,a,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,a=r.duration,f=t.createSubContext().currentTimeline;f.easing=r.easing,e.styles.forEach(y=>{f.forwardTime((y.offset||0)*a),f.setStyles(y.styles,y.easing,t.errors,t.options),f.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(f),t.transformIntoNewTimeline(i+a),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},a=i.delay?Hc(i.delay):0;a&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=sC);let l=r;const f=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=f.length;let y=null;f.forEach((E,C)=>{t.currentQueryIndex=C;const M=t.createSubContext(e.options,E);a&&M.delayNextStep(a),E===t.element&&(y=M.currentTimeline),bo(this,e.animation,M),M.currentTimeline.applyStylesToKeyframe(),l=Math.max(l,M.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(l),y&&(t.currentTimeline.mergeTimelineCollectedStyles(y),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,a=e.timings,l=Math.abs(a.duration),f=l*(t.currentQueryTotal-1);let y=l*t.currentQueryIndex;switch(a.duration<0?"reverse":a.easing){case"reverse":y=f-y;break;case"full":y=r.currentStaggerTime}const C=t.currentTimeline;y&&C.delayNextStep(y);const M=C.currentTime;bo(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-M+(i.startTime-r.currentTimeline.startTime)}}const sC={};class qR{constructor(e,t,r,i,a,l,f,y){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=a,this.errors=l,this.timelines=f,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=sC,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=y||new oC(this._driver,t,0),f.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Hc(r.duration)),null!=r.delay&&(i.delay=Hc(r.delay));const a=r.params;if(a){let l=i.params;l||(l=this.options.params={}),Object.keys(a).forEach(f=>{(!t||!l.hasOwnProperty(f))&&(l[f]=Iw(a[f],l,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,a=new qR(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return a.previousNode=this.previousNode,a.currentAnimateTimings=this.currentAnimateTimings,a.options=this._copyOptions(),a.updateOptions(e),a.currentQueryIndex=this.currentQueryIndex,a.currentQueryTotal=this.currentQueryTotal,a.parentContext=this,this.subContextCount++,a}transformIntoNewTimeline(e){return this.previousNode=sC,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},a=new dz(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(a),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,a,l){let f=[];if(i&&f.push(this.element),e.length>0){e=(e=e.replace(az,"."+this._enterClassName)).replace(lz,"."+this._leaveClassName);let E=this._driver.query(this.element,e,1!=r);0!==r&&(E=r<0?E.slice(E.length+r,E.length):E.slice(0,r)),f.push(...E)}return!a&&0==f.length&&l.push(function gH(n){return new d.vHH(3014,!1)}()),f}}class oC{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new oC(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||jc),this._currentKeyframe.set(t,jc);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const a=i&&i.params||{},l=function hz(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let a of r)t.set(a,jc)}else Lh(i,t)}),t}(e,this._globalTimelineStyles);for(let[f,y]of l){const E=Iw(y,a,r);this._pendingStyles.set(f,E),this._localTimelineStyles.has(f)||this._backFill.set(f,this._globalTimelineStyles.get(f)??jc),this._updateStyle(f,E)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((f,y)=>{const E=Lh(f,new Map,this._backFill);E.forEach((C,M)=>{"!"===C?e.add(M):C===jc&&t.add(M)}),r||E.set("offset",y/this.duration),i.push(E)});const a=e.size?XD(e.values()):[],l=t.size?XD(t.values()):[];if(r){const f=i[0],y=new Map(f);f.set("offset",0),y.set("offset",1),i=[f,y]}return GR(this.element,i,a,l,this.duration,this.startTime,this.easing,!1)}}class dz extends oC{constructor(e,t,r,i,a,l,f=!1){super(e,t,l.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=a,this._stretchStartingKeyframe=f,this.timings={duration:l.duration,delay:l.delay,easing:l.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const a=[],l=r+t,f=t/l,y=Lh(e[0]);y.set("offset",0),a.push(y);const E=Lh(e[0]);E.set("offset",sF(f)),a.push(E);const C=e.length-1;for(let M=1;M<=C;M++){let L=Lh(e[M]);const z=L.get("offset");L.set("offset",sF((t+z*r)/l)),a.push(L)}r=l,t=0,i="",e=a}return GR(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function sF(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class KR{}const fz=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class pz extends KR{normalizePropertyName(e,t){return jR(e)}normalizeStyleValue(e,t,r,i){let a="";const l=r.toString().trim();if(fz.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)a="px";else{const f=r.match(/^[+-]?[\d\.]+([a-z]*)$/);f&&0==f[1].length&&i.push(function iH(n,e){return new d.vHH(3005,!1)}())}return l+a}}function oF(n,e,t,r,i,a,l,f,y,E,C,M,L){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:a,toState:r,toStyles:l,timelines:f,queriedElements:y,preStyleProps:E,postStyleProps:C,totalTime:M,errors:L}}const ZR={};class aF{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function gz(n,e,t,r,i){return n.some(a=>a(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,a,l,f,y,E,C){const M=[],L=this.ast.options&&this.ast.options.params||ZR,W=this.buildStyles(r,f&&f.params||ZR,M),ne=y&&y.params||ZR,fe=this.buildStyles(i,ne,M),je=new Set,at=new Map,tt=new Map,Xe="void"===i,At={params:mz(ne,L),delay:this.ast.options?.delay},xt=C?[]:WR(e,t,this.ast.animation,a,l,W,fe,At,E,M);let dn=0;if(xt.forEach(Io=>{dn=Math.max(Io.duration+Io.delay,dn)}),M.length)return oF(t,this._triggerName,r,i,Xe,W,fe,[],[],at,tt,dn,M);xt.forEach(Io=>{const zc=Io.element,bF=wo(at,zc,new Set);Io.preStyleProps.forEach(tg=>bF.add(tg));const Cw=wo(tt,zc,new Set);Io.postStyleProps.forEach(tg=>Cw.add(tg)),zc!==t&&je.add(zc)});const Xr=XD(je.values());return oF(t,this._triggerName,r,i,Xe,W,fe,xt,Xr,at,tt,dn)}}function mz(n,e){const t=ww(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class yz{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=ww(this.defaultParams);return Object.keys(e).forEach(a=>{const l=e[a];null!==l&&(i[a]=l)}),this.styles.styles.forEach(a=>{"string"!=typeof a&&a.forEach((l,f)=>{l&&(l=Iw(l,i,t));const y=this.normalizer.normalizePropertyName(f,t);l=this.normalizer.normalizeStyleValue(f,y,l,t),r.set(f,l)})}),r}}class vz{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new yz(i.style,i.options&&i.options.params||{},r))}),uF(this.states,"true","1"),uF(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new aF(e,i,this.states))}),this.fallbackTransition=function Ez(n,e,t){return new aF(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(l,f)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(l=>l.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function uF(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const wz=new iC;class bz{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],a=HR(this._driver,t,r,[]);if(r.length)throw function bH(n){return new d.vHH(3503,!1)}();this._animations.set(e,a)}_buildPlayer(e,t,r){const i=e.element,a=B1(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,a,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],a=this._animations.get(e);let l;const f=new Map;if(a?(l=WR(this._driver,t,a,UR,KD,new Map,new Map,r,wz,i),l.forEach(C=>{const M=wo(f,C.element,new Map);C.postStyleProps.forEach(L=>M.set(L,null))})):(i.push(function IH(){return new d.vHH(3300,!1)}()),l=[]),i.length)throw function DH(n){return new d.vHH(3504,!1)}();f.forEach((C,M)=>{C.forEach((L,z)=>{C.set(z,this._driver.computeStyle(M,z,jc))})});const E=Fh(l.map(C=>{const M=f.get(C.element);return this._buildPlayer(C,new Map,M)}));return this._playersById.set(e,E),E.onDestroy(()=>this.destroy(e)),this.players.push(E),E}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function CH(n){return new d.vHH(3301,!1)}();return t}listen(e,t,r,i){const a=PR(t,"","","");return OR(this._getPlayer(e),r,a,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const a=this._getPlayer(e);switch(r){case"play":a.play();break;case"pause":a.pause();break;case"reset":a.reset();break;case"restart":a.restart();break;case"finish":a.finish();break;case"init":a.init();break;case"setPosition":a.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const lF="ng-animate-queued",YR="ng-animate-disabled",Sz=[],cF={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Az={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},fa="__ng_removed";class QR{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function Oz(n){return n??null}(r?e.value:e),r){const a=ww(e);delete a.value,this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const Dw="void",XR=new QR(Dw);class Mz{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,pa(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function TH(n,e){return new d.vHH(3302,!1)}();if(null==r||0==r.length)throw function SH(n){return new d.vHH(3303,!1)}();if(!function Nz(n){return"start"==n||"done"==n}(r))throw function AH(n,e){return new d.vHH(3400,!1)}();const a=wo(this._elementListeners,e,[]),l={name:t,phase:r,callback:i};a.push(l);const f=wo(this._engine.statesByElement,e,new Map);return f.has(t)||(pa(e,ZD),pa(e,ZD+"-"+t),f.set(t,XR)),()=>{this._engine.afterFlush(()=>{const y=a.indexOf(l);y>=0&&a.splice(y,1),this._triggers.has(t)||f.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function MH(n){return new d.vHH(3401,!1)}();return t}trigger(e,t,r,i=!0){const a=this._getTrigger(t),l=new JR(this.id,t,e);let f=this._engine.statesByElement.get(e);f||(pa(e,ZD),pa(e,ZD+"-"+t),this._engine.statesByElement.set(e,f=new Map));let y=f.get(t);const E=new QR(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&y&&E.absorbOptions(y.options),f.set(t,E),y||(y=XR),E.value!==Dw&&y.value===E.value){if(!function Fz(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const a=t[i];if(!e.hasOwnProperty(a)||n[a]!==e[a])return!1}return!0}(y.params,E.params)){const ne=[],fe=a.matchStyles(y.value,y.params,ne),je=a.matchStyles(E.value,E.params,ne);ne.length?this._engine.reportError(ne):this._engine.afterFlush(()=>{Jp(e,fe),pl(e,je)})}return}const L=wo(this._engine.playersByElement,e,[]);L.forEach(ne=>{ne.namespaceId==this.id&&ne.triggerName==t&&ne.queued&&ne.destroy()});let z=a.matchTransition(y.value,E.value,e,E.params),W=!1;if(!z){if(!i)return;z=a.fallbackTransition,W=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:z,fromState:y,toState:E,player:l,isFallbackTransition:W}),W||(pa(e,lF),l.onStart(()=>{zy(e,lF)})),l.onDone(()=>{let ne=this.players.indexOf(l);ne>=0&&this.players.splice(ne,1);const fe=this._engine.playersByElement.get(e);if(fe){let je=fe.indexOf(l);je>=0&&fe.splice(je,1)}}),this.players.push(l),L.push(l),l}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,YD,!0);r.forEach(i=>{if(i[fa])return;const a=this._engine.fetchNamespacesByElement(i);a.size?a.forEach(l=>l.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const a=this._engine.statesByElement.get(e),l=new Map;if(a){const f=[];if(a.forEach((y,E)=>{if(l.set(E,y.value),this._triggers.has(E)){const C=this.trigger(e,E,Dw,i);C&&f.push(C)}}),f.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,l),r&&Fh(f).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(a=>{const l=a.name;if(i.has(l))return;i.add(l);const y=this._triggers.get(l).fallbackTransition,E=r.get(l)||XR,C=new QR(Dw),M=new JR(this.id,l,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:l,transition:y,fromState:E,toState:C,player:M,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const a=r.players.length?r.playersByQueriedElement.get(e):[];if(a&&a.length)i=!0;else{let l=e;for(;l=l.parentNode;)if(r.statesByElement.get(l)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const a=e[fa];(!a||a===cF)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){pa(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const a=r.element,l=this._elementListeners.get(a);l&&l.forEach(f=>{if(f.name==r.triggerName){const y=PR(a,r.triggerName,r.fromState.value,r.toState.value);y._data=e,OR(r.player,f.phase,y,f.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const a=r.transition.ast.depCount,l=i.transition.ast.depCount;return 0==a||0==l?a-l:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class Rz{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,a)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new Mz(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let l=!1,f=this.driver.getParentElement(t);for(;f;){const y=i.get(f);if(y){const E=r.indexOf(y);r.splice(E+1,0,e),l=!0;break}f=this.driver.getParentElement(f)}l||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const a=this._fetchNamespace(i.namespaceId);a&&t.add(a)}return t}trigger(e,t,r,i){if(aC(t)){const a=this._fetchNamespace(e);if(a)return a.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!aC(t))return;const a=t[fa];if(a&&a.setForRemoval){a.setForRemoval=!1,a.setForMove=!0;const l=this.collectedLeaveElements.indexOf(t);l>=0&&this.collectedLeaveElements.splice(l,1)}if(e){const l=this._fetchNamespace(e);l&&l.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),pa(e,YR)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),zy(e,YR))}removeNode(e,t,r,i){if(aC(t)){const a=e?this._fetchNamespace(e):null;if(a?a.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const l=this.namespacesByHostElement.get(t);l&&l.id!==e&&l.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,a){this.collectedLeaveElements.push(t),t[fa]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:a}}listen(e,t,r,i,a){return aC(t)?this._fetchNamespace(e).listen(t,r,i,a):()=>{}}_buildInstruction(e,t,r,i,a){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,a)}destroyInnerAnimations(e){let t=this.driver.query(e,YD,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,VR,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Fh(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[fa];if(t&&t.setForRemoval){if(e[fa]=cF,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(YR)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)pa(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Fh(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function RH(n){return new d.vHH(3402,!1)}()}_flushAnimations(e,t){const r=new iC,i=[],a=new Map,l=[],f=new Map,y=new Map,E=new Map,C=new Set;this.disabledNodes.forEach(Tt=>{C.add(Tt);const Vt=this.driver.query(Tt,".ng-animate-queued",!0);for(let zt=0;zt<Vt.length;zt++)C.add(Vt[zt])});const M=this.bodyNode,L=Array.from(this.statesByElement.keys()),z=fF(L,this.collectedEnterElements),W=new Map;let ne=0;z.forEach((Tt,Vt)=>{const zt=UR+ne++;W.set(Vt,zt),Tt.forEach(bn=>pa(bn,zt))});const fe=[],je=new Set,at=new Set;for(let Tt=0;Tt<this.collectedLeaveElements.length;Tt++){const Vt=this.collectedLeaveElements[Tt],zt=Vt[fa];zt&&zt.setForRemoval&&(fe.push(Vt),je.add(Vt),zt.hasAnimation?this.driver.query(Vt,".ng-star-inserted",!0).forEach(bn=>je.add(bn)):at.add(Vt))}const tt=new Map,Xe=fF(L,Array.from(je));Xe.forEach((Tt,Vt)=>{const zt=KD+ne++;tt.set(Vt,zt),Tt.forEach(bn=>pa(bn,zt))}),e.push(()=>{z.forEach((Tt,Vt)=>{const zt=W.get(Vt);Tt.forEach(bn=>zy(bn,zt))}),Xe.forEach((Tt,Vt)=>{const zt=tt.get(Vt);Tt.forEach(bn=>zy(bn,zt))}),fe.forEach(Tt=>{this.processLeaveNode(Tt)})});const At=[],xt=[];for(let Tt=this._namespaceList.length-1;Tt>=0;Tt--)this._namespaceList[Tt].drainQueuedTransitions(t).forEach(zt=>{const bn=zt.player,ki=zt.element;if(At.push(bn),this.collectedEnterElements.length){const us=ki[fa];if(us&&us.setForMove){if(us.previousTriggersValues&&us.previousTriggersValues.has(zt.triggerName)){const ng=us.previousTriggersValues.get(zt.triggerName),ga=this.statesByElement.get(zt.element);if(ga&&ga.has(zt.triggerName)){const cC=ga.get(zt.triggerName);cC.value=ng,ga.set(zt.triggerName,cC)}}return void bn.destroy()}}const gl=!M||!this.driver.containsElement(M,ki),Do=tt.get(ki),Uh=W.get(ki),Tr=this._buildInstruction(zt,r,Uh,Do,gl);if(Tr.errors&&Tr.errors.length)return void xt.push(Tr);if(gl)return bn.onStart(()=>Jp(ki,Tr.fromStyles)),bn.onDestroy(()=>pl(ki,Tr.toStyles)),void i.push(bn);if(zt.isFallbackTransition)return bn.onStart(()=>Jp(ki,Tr.fromStyles)),bn.onDestroy(()=>pl(ki,Tr.toStyles)),void i.push(bn);const CF=[];Tr.timelines.forEach(us=>{us.stretchStartingKeyframe=!0,this.disabledNodes.has(us.element)||CF.push(us)}),Tr.timelines=CF,r.append(ki,Tr.timelines),l.push({instruction:Tr,player:bn,element:ki}),Tr.queriedElements.forEach(us=>wo(f,us,[]).push(bn)),Tr.preStyleProps.forEach((us,ng)=>{if(us.size){let ga=y.get(ng);ga||y.set(ng,ga=new Set),us.forEach((cC,tx)=>ga.add(tx))}}),Tr.postStyleProps.forEach((us,ng)=>{let ga=E.get(ng);ga||E.set(ng,ga=new Set),us.forEach((cC,tx)=>ga.add(tx))})});if(xt.length){const Tt=[];xt.forEach(Vt=>{Tt.push(function xH(n,e){return new d.vHH(3505,!1)}())}),At.forEach(Vt=>Vt.destroy()),this.reportError(Tt)}const dn=new Map,Xr=new Map;l.forEach(Tt=>{const Vt=Tt.element;r.has(Vt)&&(Xr.set(Vt,Vt),this._beforeAnimationBuild(Tt.player.namespaceId,Tt.instruction,dn))}),i.forEach(Tt=>{const Vt=Tt.element;this._getPreviousPlayers(Vt,!1,Tt.namespaceId,Tt.triggerName,null).forEach(bn=>{wo(dn,Vt,[]).push(bn),bn.destroy()})});const Io=fe.filter(Tt=>gF(Tt,y,E)),zc=new Map;hF(zc,this.driver,at,E,jc).forEach(Tt=>{gF(Tt,y,E)&&Io.push(Tt)});const Cw=new Map;z.forEach((Tt,Vt)=>{hF(Cw,this.driver,new Set(Tt),y,"!")}),Io.forEach(Tt=>{const Vt=zc.get(Tt),zt=Cw.get(Tt);zc.set(Tt,new Map([...Array.from(Vt?.entries()??[]),...Array.from(zt?.entries()??[])]))});const tg=[],IF=[],DF={};l.forEach(Tt=>{const{element:Vt,player:zt,instruction:bn}=Tt;if(r.has(Vt)){if(C.has(Vt))return zt.onDestroy(()=>pl(Vt,bn.toStyles)),zt.disabled=!0,zt.overrideTotalTime(bn.totalTime),void i.push(zt);let ki=DF;if(Xr.size>1){let Do=Vt;const Uh=[];for(;Do=Do.parentNode;){const Tr=Xr.get(Do);if(Tr){ki=Tr;break}Uh.push(Do)}Uh.forEach(Tr=>Xr.set(Tr,ki))}const gl=this._buildAnimation(zt.namespaceId,bn,dn,a,Cw,zc);if(zt.setRealPlayer(gl),ki===DF)tg.push(zt);else{const Do=this.playersByElement.get(ki);Do&&Do.length&&(zt.parentPlayer=Fh(Do)),i.push(zt)}}else Jp(Vt,bn.fromStyles),zt.onDestroy(()=>pl(Vt,bn.toStyles)),IF.push(zt),C.has(Vt)&&i.push(zt)}),IF.forEach(Tt=>{const Vt=a.get(Tt.element);if(Vt&&Vt.length){const zt=Fh(Vt);Tt.setRealPlayer(zt)}}),i.forEach(Tt=>{Tt.parentPlayer?Tt.syncPlayerEvents(Tt.parentPlayer):Tt.destroy()});for(let Tt=0;Tt<fe.length;Tt++){const Vt=fe[Tt],zt=Vt[fa];if(zy(Vt,KD),zt&&zt.hasAnimation)continue;let bn=[];if(f.size){let gl=f.get(Vt);gl&&gl.length&&bn.push(...gl);let Do=this.driver.query(Vt,VR,!0);for(let Uh=0;Uh<Do.length;Uh++){let Tr=f.get(Do[Uh]);Tr&&Tr.length&&bn.push(...Tr)}}const ki=bn.filter(gl=>!gl.destroyed);ki.length?Pz(this,Vt,ki):this.processLeaveNode(Vt)}return fe.length=0,tg.forEach(Tt=>{this.players.push(Tt),Tt.onDone(()=>{Tt.destroy();const Vt=this.players.indexOf(Tt);this.players.splice(Vt,1)}),Tt.play()}),tg}elementContainsData(e,t){let r=!1;const i=t[fa];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,a){let l=[];if(t){const f=this.playersByQueriedElement.get(e);f&&(l=f)}else{const f=this.playersByElement.get(e);if(f){const y=!a||a==Dw;f.forEach(E=>{E.queued||!y&&E.triggerName!=i||l.push(E)})}}return(r||i)&&(l=l.filter(f=>!(r&&r!=f.namespaceId||i&&i!=f.triggerName))),l}_beforeAnimationBuild(e,t,r){const a=t.element,l=t.isRemovalTransition?void 0:e,f=t.isRemovalTransition?void 0:t.triggerName;for(const y of t.timelines){const E=y.element,C=E!==a,M=wo(r,E,[]);this._getPreviousPlayers(E,C,l,f,t.toState).forEach(z=>{const W=z.getRealPlayer();W.beforeDestroy&&W.beforeDestroy(),z.destroy(),M.push(z)})}Jp(a,t.fromStyles)}_buildAnimation(e,t,r,i,a,l){const f=t.triggerName,y=t.element,E=[],C=new Set,M=new Set,L=t.timelines.map(W=>{const ne=W.element;C.add(ne);const fe=ne[fa];if(fe&&fe.removedBeforeQueried)return new Ew(W.duration,W.delay);const je=ne!==y,at=function kz(n){const e=[];return pF(n,e),e}((r.get(ne)||Sz).map(dn=>dn.getRealPlayer())).filter(dn=>!!dn.element&&dn.element===ne),tt=a.get(ne),Xe=l.get(ne),At=B1(0,this._normalizer,0,W.keyframes,tt,Xe),xt=this._buildPlayer(W,At,at);if(W.subTimeline&&i&&M.add(ne),je){const dn=new JR(e,f,ne);dn.setRealPlayer(xt),E.push(dn)}return xt});E.forEach(W=>{wo(this.playersByQueriedElement,W.element,[]).push(W),W.onDone(()=>function xz(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,W.element,W))}),C.forEach(W=>pa(W,Z1));const z=Fh(L);return z.onDestroy(()=>{C.forEach(W=>zy(W,Z1)),pl(y,t.toStyles)}),M.forEach(W=>{wo(i,W,[]).push(z)}),z}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Ew(e.duration,e.delay)}}class JR{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new Ew,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>OR(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){wo(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function aC(n){return n&&1===n.nodeType}function dF(n,e){const t=n.style.display;return n.style.display=e??"none",t}function hF(n,e,t,r,i){const a=[];t.forEach(y=>a.push(dF(y)));const l=[];r.forEach((y,E)=>{const C=new Map;y.forEach(M=>{const L=e.computeStyle(E,M,i);C.set(M,L),(!L||0==L.length)&&(E[fa]=Az,l.push(E))}),n.set(E,C)});let f=0;return t.forEach(y=>dF(y,a[f++])),l}function fF(n,e){const t=new Map;if(n.forEach(f=>t.set(f,[])),0==e.length)return t;const i=new Set(e),a=new Map;function l(f){if(!f)return 1;let y=a.get(f);if(y)return y;const E=f.parentNode;return y=t.has(E)?E:i.has(E)?1:l(E),a.set(f,y),y}return e.forEach(f=>{const y=l(f);1!==y&&t.get(y).push(f)}),t}function pa(n,e){n.classList?.add(e)}function zy(n,e){n.classList?.remove(e)}function Pz(n,e,t){Fh(t).onDone(()=>n.processLeaveNode(e))}function pF(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof U1?pF(r.players,e):e.push(r)}}function gF(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(a=>i.add(a)):e.set(n,r),t.delete(n),!0}class uC{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,a)=>{},this._transitionEngine=new Rz(e,t,r),this._timelineEngine=new bz(e,t,r),this._transitionEngine.onRemovalComplete=(i,a)=>this.onRemovalComplete(i,a)}registerTrigger(e,t,r,i,a){const l=e+"-"+i;let f=this._triggerCache[l];if(!f){const y=[],C=HR(this._driver,a,y,[]);if(y.length)throw function EH(n,e){return new d.vHH(3404,!1)}();f=function _z(n,e,t){return new vz(n,e,t)}(i,C,this._normalizer),this._triggerCache[l]=f}this._transitionEngine.registerTrigger(t,i,f)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[a,l]=$1(r);this._timelineEngine.command(a,t,l,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,a){if("@"==r.charAt(0)){const[l,f]=$1(r);return this._timelineEngine.listen(l,t,f,a)}return this._transitionEngine.listen(e,t,r,i,a)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let $z=(()=>{class n extends P1{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:d.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?k1(t):t;return yF(this._renderer,null,r,"register",[i]),new jz(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.FYo),d.LFG(se))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class jz extends Xj{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new Hz(this._id,e,t||{},this._renderer)}}class Hz{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return yF(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function yF(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const _F="@.disabled";let zz=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(a,l)=>{const f=l?.parentNode(a);f&&l.removeChild(f,a)}}createRenderer(t,r){const a=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let C=this._rendererCache.get(a);return C||(C=new vF("",a,this.engine,()=>this._rendererCache.delete(a)),this._rendererCache.set(a,C)),C}const l=r.id,f=r.id+"-"+this._currentId;this._currentId++,this.engine.register(f,t);const y=C=>{Array.isArray(C)?C.forEach(y):this.engine.registerTrigger(l,f,t,C.name,C)};return r.data.animation.forEach(y),new Gz(this,f,a,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(a=>{const[l,f]=a;l(f)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.FYo),d.LFG(uC),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class vF{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i,this.destroyNode=this.delegate.destroyNode?a=>t.destroyNode(a):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==_F?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class Gz extends vF{constructor(e,t,r,i,a){super(t,r,i,a),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==_F?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function Wz(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let a=t.slice(1),l="";return"@"!=a.charAt(0)&&([a,l]=function qz(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(a)),this.engine.listen(this.namespaceId,i,a,l,f=>{this.factory.scheduleListenerCallback(f._data||-1,r,f)})}return this.delegate.listen(e,t,r)}}let Kz=(()=>{class n extends uC{constructor(t,r,i,a){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(se),d.LFG(LR),d.LFG(KR),d.LFG(d.z2F))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const EF=[{provide:P1,useClass:$z},{provide:KR,useFactory:function Zz(){return new pz}},{provide:uC,useClass:Kz},{provide:d.FYo,useFactory:function Yz(n,e,t){return new zz(n,e,t)},deps:[_s,uC,d.R0b]}],wF=[{provide:LR,useClass:q1},{provide:d.QbO,useValue:"NoopAnimations"},...EF];let Xz=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:wF,imports:[Ul]}),n})();class Gy{}Gy.\u0275fac=function(e){return new(e||Gy)},Gy.\u0275mod=d.oAB({type:Gy,bootstrap:[gw]}),Gy.\u0275inj=d.cJS({imports:[Ul,$y,wB,H2,HB,Zs.hO.initializeApp(Qk_firebase),wV,function F0(n,...e){return{ngModule:Cs,providers:[{provide:Kg,useFactory:fT(n),multi:!0,deps:[d.R0b,d.zs3,an.HU,...e]}]}}(()=>U0(Qk_firebase)),function c$(n,...e){return{ngModule:l$,providers:[{provide:fR,useFactory:o$(n),multi:!0,deps:[d.R0b,d.zs3,an.HU,qg,[new d.FiY,dc],...e]}]}}(()=>d$()),function _$(n,...e){return{ngModule:y$,providers:[{provide:gR,useFactory:p$(n),multi:!0,deps:[d.R0b,d.zs3,an.HU,qg,[new d.FiY,hR],[new d.FiY,dc],...e]}]}}(()=>v$()),function Yj(n,...e){return{ngModule:Zj,providers:[{provide:MR,useFactory:Wj(n),multi:!0,deps:[d.R0b,d.zs3,an.HU,qg,[new d.FiY,hR],[new d.FiY,dc],...e]}]}}(()=>Qj()),Xz]}),gg().bootstrapModule(Gy).catch(n=>console.error(n))},9751:(Et,Se,F)=>{F.d(Se,{y:()=>he});var d=F(930),j=F(727),P=F(8822),ie=F(9635),ue=F(2416),se=F(576),_e=F(2806);let he=(()=>{class J{constructor(Re){Re&&(this._subscribe=Re)}lift(Re){const Ke=new J;return Ke.source=this,Ke.operator=Re,Ke}subscribe(Re,Ke,ct){const ye=function q(J){return J&&J instanceof d.Lv||function K(J){return J&&(0,se.m)(J.next)&&(0,se.m)(J.error)&&(0,se.m)(J.complete)}(J)&&(0,j.Nn)(J)}(Re)?Re:new d.Hp(Re,Ke,ct);return(0,_e.x)(()=>{const{operator:Ae,source:Te}=this;ye.add(Ae?Ae.call(ye,Te):Te?this._subscribe(ye):this._trySubscribe(ye))}),ye}_trySubscribe(Re){try{return this._subscribe(Re)}catch(Ke){Re.error(Ke)}}forEach(Re,Ke){return new(Ke=me(Ke))((ct,ye)=>{const Ae=new d.Hp({next:Te=>{try{Re(Te)}catch(Le){ye(Le),Ae.unsubscribe()}},error:ye,complete:ct});this.subscribe(Ae)})}_subscribe(Re){var Ke;return null===(Ke=this.source)||void 0===Ke?void 0:Ke.subscribe(Re)}[P.L](){return this}pipe(...Re){return(0,ie.U)(Re)(this)}toPromise(Re){return new(Re=me(Re))((Ke,ct)=>{let ye;this.subscribe(Ae=>ye=Ae,Ae=>ct(Ae),()=>Ke(ye))})}}return J.create=ze=>new J(ze),J})();function me(J){var ze;return null!==(ze=J??ue.v.Promise)&&void 0!==ze?ze:Promise}},7579:(Et,Se,F)=>{F.d(Se,{x:()=>_e});var d=F(9751),j=F(727);const ie=(0,F(3888).d)(me=>function(){me(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ue=F(8737),se=F(2806);let _e=(()=>{class me extends d.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(q){const J=new he(this,this);return J.operator=q,J}_throwIfClosed(){if(this.closed)throw new ie}next(q){(0,se.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const J of this.currentObservers)J.next(q)}})}error(q){(0,se.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=q;const{observers:J}=this;for(;J.length;)J.shift().error(q)}})}complete(){(0,se.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:q}=this;for(;q.length;)q.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var q;return(null===(q=this.observers)||void 0===q?void 0:q.length)>0}_trySubscribe(q){return this._throwIfClosed(),super._trySubscribe(q)}_subscribe(q){return this._throwIfClosed(),this._checkFinalizedStatuses(q),this._innerSubscribe(q)}_innerSubscribe(q){const{hasError:J,isStopped:ze,observers:Re}=this;return J||ze?j.Lc:(this.currentObservers=null,Re.push(q),new j.w0(()=>{this.currentObservers=null,(0,ue.P)(Re,q)}))}_checkFinalizedStatuses(q){const{hasError:J,thrownError:ze,isStopped:Re}=this;J?q.error(ze):Re&&q.complete()}asObservable(){const q=new d.y;return q.source=this,q}}return me.create=(K,q)=>new he(K,q),me})();class he extends _e{constructor(K,q){super(),this.destination=K,this.source=q}next(K){var q,J;null===(J=null===(q=this.destination)||void 0===q?void 0:q.next)||void 0===J||J.call(q,K)}error(K){var q,J;null===(J=null===(q=this.destination)||void 0===q?void 0:q.error)||void 0===J||J.call(q,K)}complete(){var K,q;null===(q=null===(K=this.destination)||void 0===K?void 0:K.complete)||void 0===q||q.call(K)}_subscribe(K){var q,J;return null!==(J=null===(q=this.source)||void 0===q?void 0:q.subscribe(K))&&void 0!==J?J:j.Lc}}},930:(Et,Se,F)=>{F.d(Se,{Hp:()=>ct,Lv:()=>J});var d=F(576),j=F(727),P=F(2416),ie=F(7849),ue=F(5032);const se=me("C",void 0,void 0);function me(xe,Pe,Me){return{kind:xe,value:Pe,error:Me}}var K=F(3410),q=F(2806);class J extends j.w0{constructor(Pe){super(),this.isStopped=!1,Pe?(this.destination=Pe,(0,j.Nn)(Pe)&&Pe.add(this)):this.destination=Le}static create(Pe,Me,He){return new ct(Pe,Me,He)}next(Pe){this.isStopped?Te(function he(xe){return me("N",xe,void 0)}(Pe),this):this._next(Pe)}error(Pe){this.isStopped?Te(function _e(xe){return me("E",void 0,xe)}(Pe),this):(this.isStopped=!0,this._error(Pe))}complete(){this.isStopped?Te(se,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Pe){this.destination.next(Pe)}_error(Pe){try{this.destination.error(Pe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ze=Function.prototype.bind;function Re(xe,Pe){return ze.call(xe,Pe)}class Ke{constructor(Pe){this.partialObserver=Pe}next(Pe){const{partialObserver:Me}=this;if(Me.next)try{Me.next(Pe)}catch(He){ye(He)}}error(Pe){const{partialObserver:Me}=this;if(Me.error)try{Me.error(Pe)}catch(He){ye(He)}else ye(Pe)}complete(){const{partialObserver:Pe}=this;if(Pe.complete)try{Pe.complete()}catch(Me){ye(Me)}}}class ct extends J{constructor(Pe,Me,He){let ee;if(super(),(0,d.m)(Pe)||!Pe)ee={next:Pe??void 0,error:Me??void 0,complete:He??void 0};else{let le;this&&P.v.useDeprecatedNextContext?(le=Object.create(Pe),le.unsubscribe=()=>this.unsubscribe(),ee={next:Pe.next&&Re(Pe.next,le),error:Pe.error&&Re(Pe.error,le),complete:Pe.complete&&Re(Pe.complete,le)}):ee=Pe}this.destination=new Ke(ee)}}function ye(xe){P.v.useDeprecatedSynchronousErrorHandling?(0,q.O)(xe):(0,ie.h)(xe)}function Te(xe,Pe){const{onStoppedNotification:Me}=P.v;Me&&K.z.setTimeout(()=>Me(xe,Pe))}const Le={closed:!0,next:ue.Z,error:function Ae(xe){throw xe},complete:ue.Z}},727:(Et,Se,F)=>{F.d(Se,{Lc:()=>se,w0:()=>ue,Nn:()=>_e});var d=F(576);const P=(0,F(3888).d)(me=>function(q){me(this),this.message=q?`${q.length} errors occurred during unsubscription:\n${q.map((J,ze)=>`${ze+1}) ${J.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=q});var ie=F(8737);class ue{constructor(K){this.initialTeardown=K,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let K;if(!this.closed){this.closed=!0;const{_parentage:q}=this;if(q)if(this._parentage=null,Array.isArray(q))for(const Re of q)Re.remove(this);else q.remove(this);const{initialTeardown:J}=this;if((0,d.m)(J))try{J()}catch(Re){K=Re instanceof P?Re.errors:[Re]}const{_finalizers:ze}=this;if(ze){this._finalizers=null;for(const Re of ze)try{he(Re)}catch(Ke){K=K??[],Ke instanceof P?K=[...K,...Ke.errors]:K.push(Ke)}}if(K)throw new P(K)}}add(K){var q;if(K&&K!==this)if(this.closed)he(K);else{if(K instanceof ue){if(K.closed||K._hasParent(this))return;K._addParent(this)}(this._finalizers=null!==(q=this._finalizers)&&void 0!==q?q:[]).push(K)}}_hasParent(K){const{_parentage:q}=this;return q===K||Array.isArray(q)&&q.includes(K)}_addParent(K){const{_parentage:q}=this;this._parentage=Array.isArray(q)?(q.push(K),q):q?[q,K]:K}_removeParent(K){const{_parentage:q}=this;q===K?this._parentage=null:Array.isArray(q)&&(0,ie.P)(q,K)}remove(K){const{_finalizers:q}=this;q&&(0,ie.P)(q,K),K instanceof ue&&K._removeParent(this)}}ue.EMPTY=(()=>{const me=new ue;return me.closed=!0,me})();const se=ue.EMPTY;function _e(me){return me instanceof ue||me&&"closed"in me&&(0,d.m)(me.remove)&&(0,d.m)(me.add)&&(0,d.m)(me.unsubscribe)}function he(me){(0,d.m)(me)?me():me.unsubscribe()}},2416:(Et,Se,F)=>{F.d(Se,{v:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Et,Se,F)=>{F.d(Se,{E:()=>j});const j=new(F(9751).y)(ue=>ue.complete())},8996:(Et,Se,F)=>{F.d(Se,{D:()=>Pe});var d=F(8421),j=F(5363),P=F(9468),se=F(9751),he=F(2202),me=F(576),K=F(9672);function J(Me,He){if(!Me)throw new Error("Iterable cannot be null");return new se.y(ee=>{(0,K.f)(ee,He,()=>{const le=Me[Symbol.asyncIterator]();(0,K.f)(ee,He,()=>{le.next().then(we=>{we.done?ee.complete():ee.next(we.value)})},0,!0)})})}var ze=F(3670),Re=F(8239),Ke=F(1144),ct=F(6495),ye=F(2206),Ae=F(4532),Te=F(3260);function Pe(Me,He){return He?function xe(Me,He){if(null!=Me){if((0,ze.c)(Me))return function ie(Me,He){return(0,d.Xf)(Me).pipe((0,P.R)(He),(0,j.Q)(He))}(Me,He);if((0,Ke.z)(Me))return function _e(Me,He){return new se.y(ee=>{let le=0;return He.schedule(function(){le===Me.length?ee.complete():(ee.next(Me[le++]),ee.closed||this.schedule())})})}(Me,He);if((0,Re.t)(Me))return function ue(Me,He){return(0,d.Xf)(Me).pipe((0,P.R)(He),(0,j.Q)(He))}(Me,He);if((0,ye.D)(Me))return J(Me,He);if((0,ct.T)(Me))return function q(Me,He){return new se.y(ee=>{let le;return(0,K.f)(ee,He,()=>{le=Me[he.h](),(0,K.f)(ee,He,()=>{let we,Ye;try{({value:we,done:Ye}=le.next())}catch(qe){return void ee.error(qe)}Ye?ee.complete():ee.next(we)},0,!0)}),()=>(0,me.m)(le?.return)&&le.return()})}(Me,He);if((0,Te.L)(Me))return function Le(Me,He){return J((0,Te.Q)(Me),He)}(Me,He)}throw(0,Ae.z)(Me)}(Me,He):(0,d.Xf)(Me)}},8421:(Et,Se,F)=>{F.d(Se,{Xf:()=>ze});var d=F(655),j=F(1144),P=F(8239),ie=F(9751),ue=F(3670),se=F(2206),_e=F(4532),he=F(6495),me=F(3260),K=F(576),q=F(7849),J=F(8822);function ze(xe){if(xe instanceof ie.y)return xe;if(null!=xe){if((0,ue.c)(xe))return function Re(xe){return new ie.y(Pe=>{const Me=xe[J.L]();if((0,K.m)(Me.subscribe))return Me.subscribe(Pe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(xe);if((0,j.z)(xe))return function Ke(xe){return new ie.y(Pe=>{for(let Me=0;Me<xe.length&&!Pe.closed;Me++)Pe.next(xe[Me]);Pe.complete()})}(xe);if((0,P.t)(xe))return function ct(xe){return new ie.y(Pe=>{xe.then(Me=>{Pe.closed||(Pe.next(Me),Pe.complete())},Me=>Pe.error(Me)).then(null,q.h)})}(xe);if((0,se.D)(xe))return Ae(xe);if((0,he.T)(xe))return function ye(xe){return new ie.y(Pe=>{for(const Me of xe)if(Pe.next(Me),Pe.closed)return;Pe.complete()})}(xe);if((0,me.L)(xe))return function Te(xe){return Ae((0,me.Q)(xe))}(xe)}throw(0,_e.z)(xe)}function Ae(xe){return new ie.y(Pe=>{(function Le(xe,Pe){var Me,He,ee,le;return(0,d.mG)(this,void 0,void 0,function*(){try{for(Me=(0,d.KL)(xe);!(He=yield Me.next()).done;)if(Pe.next(He.value),Pe.closed)return}catch(we){ee={error:we}}finally{try{He&&!He.done&&(le=Me.return)&&(yield le.call(Me))}finally{if(ee)throw ee.error}}Pe.complete()})})(xe,Pe).catch(Me=>Pe.error(Me))})}},6451:(Et,Se,F)=>{F.d(Se,{T:()=>se});var d=F(8189),j=F(8421),P=F(515),ie=F(7669),ue=F(8996);function se(..._e){const he=(0,ie.yG)(_e),me=(0,ie._6)(_e,1/0),K=_e;return K.length?1===K.length?(0,j.Xf)(K[0]):(0,d.J)(me)((0,ue.D)(K,he)):P.E}},5403:(Et,Se,F)=>{F.d(Se,{x:()=>j});var d=F(930);function j(ie,ue,se,_e,he){return new P(ie,ue,se,_e,he)}class P extends d.Lv{constructor(ue,se,_e,he,me,K){super(ue),this.onFinalize=me,this.shouldUnsubscribe=K,this._next=se?function(q){try{se(q)}catch(J){ue.error(J)}}:super._next,this._error=he?function(q){try{he(q)}catch(J){ue.error(J)}finally{this.unsubscribe()}}:super._error,this._complete=_e?function(){try{_e()}catch(q){ue.error(q)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ue;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:se}=this;super.unsubscribe(),!se&&(null===(ue=this.onFinalize)||void 0===ue||ue.call(this))}}}},4004:(Et,Se,F)=>{F.d(Se,{U:()=>P});var d=F(4482),j=F(5403);function P(ie,ue){return(0,d.e)((se,_e)=>{let he=0;se.subscribe((0,j.x)(_e,me=>{_e.next(ie.call(ue,me,he++))}))})}},8189:(Et,Se,F)=>{F.d(Se,{J:()=>P});var d=F(5577),j=F(4671);function P(ie=1/0){return(0,d.z)(j.y,ie)}},5577:(Et,Se,F)=>{F.d(Se,{z:()=>he});var d=F(4004),j=F(8421),P=F(4482),ie=F(9672),ue=F(5403),_e=F(576);function he(me,K,q=1/0){return(0,_e.m)(K)?he((J,ze)=>(0,d.U)((Re,Ke)=>K(J,Re,ze,Ke))((0,j.Xf)(me(J,ze))),q):("number"==typeof K&&(q=K),(0,P.e)((J,ze)=>function se(me,K,q,J,ze,Re,Ke,ct){const ye=[];let Ae=0,Te=0,Le=!1;const xe=()=>{Le&&!ye.length&&!Ae&&K.complete()},Pe=He=>Ae<J?Me(He):ye.push(He),Me=He=>{Re&&K.next(He),Ae++;let ee=!1;(0,j.Xf)(q(He,Te++)).subscribe((0,ue.x)(K,le=>{ze?.(le),Re?Pe(le):K.next(le)},()=>{ee=!0},void 0,()=>{if(ee)try{for(Ae--;ye.length&&Ae<J;){const le=ye.shift();Ke?(0,ie.f)(K,Ke,()=>Me(le)):Me(le)}xe()}catch(le){K.error(le)}}))};return me.subscribe((0,ue.x)(K,Pe,()=>{Le=!0,xe()})),()=>{ct?.()}}(J,ze,me,q)))}},5363:(Et,Se,F)=>{F.d(Se,{Q:()=>ie});var d=F(9672),j=F(4482),P=F(5403);function ie(ue,se=0){return(0,j.e)((_e,he)=>{_e.subscribe((0,P.x)(he,me=>(0,d.f)(he,ue,()=>he.next(me),se),()=>(0,d.f)(he,ue,()=>he.complete(),se),me=>(0,d.f)(he,ue,()=>he.error(me),se)))})}},3099:(Et,Se,F)=>{F.d(Se,{B:()=>ue});var d=F(8421),j=F(7579),P=F(930),ie=F(4482);function ue(_e={}){const{connector:he=(()=>new j.x),resetOnError:me=!0,resetOnComplete:K=!0,resetOnRefCountZero:q=!0}=_e;return J=>{let ze,Re,Ke,ct=0,ye=!1,Ae=!1;const Te=()=>{Re?.unsubscribe(),Re=void 0},Le=()=>{Te(),ze=Ke=void 0,ye=Ae=!1},xe=()=>{const Pe=ze;Le(),Pe?.unsubscribe()};return(0,ie.e)((Pe,Me)=>{ct++,!Ae&&!ye&&Te();const He=Ke=Ke??he();Me.add(()=>{ct--,0===ct&&!Ae&&!ye&&(Re=se(xe,q))}),He.subscribe(Me),!ze&&ct>0&&(ze=new P.Hp({next:ee=>He.next(ee),error:ee=>{Ae=!0,Te(),Re=se(Le,me,ee),He.error(ee)},complete:()=>{ye=!0,Te(),Re=se(Le,K),He.complete()}}),(0,d.Xf)(Pe).subscribe(ze))})(J)}}function se(_e,he,...me){if(!0===he)return void _e();if(!1===he)return;const K=new P.Hp({next:()=>{K.unsubscribe(),_e()}});return(0,d.Xf)(he(...me)).subscribe(K)}},9468:(Et,Se,F)=>{F.d(Se,{R:()=>j});var d=F(4482);function j(P,ie=0){return(0,d.e)((ue,se)=>{se.add(P.schedule(()=>ue.subscribe(se),ie))})}},8505:(Et,Se,F)=>{F.d(Se,{b:()=>ue});var d=F(576),j=F(4482),P=F(5403),ie=F(4671);function ue(se,_e,he){const me=(0,d.m)(se)||_e||he?{next:se,error:_e,complete:he}:se;return me?(0,j.e)((K,q)=>{var J;null===(J=me.subscribe)||void 0===J||J.call(me);let ze=!0;K.subscribe((0,P.x)(q,Re=>{var Ke;null===(Ke=me.next)||void 0===Ke||Ke.call(me,Re),q.next(Re)},()=>{var Re;ze=!1,null===(Re=me.complete)||void 0===Re||Re.call(me),q.complete()},Re=>{var Ke;ze=!1,null===(Ke=me.error)||void 0===Ke||Ke.call(me,Re),q.error(Re)},()=>{var Re,Ke;ze&&(null===(Re=me.unsubscribe)||void 0===Re||Re.call(me)),null===(Ke=me.finalize)||void 0===Ke||Ke.call(me)}))}):ie.y}},4408:(Et,Se,F)=>{F.d(Se,{o:()=>ue});var d=F(727);class j extends d.w0{constructor(_e,he){super()}schedule(_e,he=0){return this}}const P={setInterval(se,_e,...he){const{delegate:me}=P;return me?.setInterval?me.setInterval(se,_e,...he):setInterval(se,_e,...he)},clearInterval(se){const{delegate:_e}=P;return(_e?.clearInterval||clearInterval)(se)},delegate:void 0};var ie=F(8737);class ue extends j{constructor(_e,he){super(_e,he),this.scheduler=_e,this.work=he,this.pending=!1}schedule(_e,he=0){var me;if(this.closed)return this;this.state=_e;const K=this.id,q=this.scheduler;return null!=K&&(this.id=this.recycleAsyncId(q,K,he)),this.pending=!0,this.delay=he,this.id=null!==(me=this.id)&&void 0!==me?me:this.requestAsyncId(q,this.id,he),this}requestAsyncId(_e,he,me=0){return P.setInterval(_e.flush.bind(_e,this),me)}recycleAsyncId(_e,he,me=0){if(null!=me&&this.delay===me&&!1===this.pending)return he;null!=he&&P.clearInterval(he)}execute(_e,he){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const me=this._execute(_e,he);if(me)return me;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(_e,he){let K,me=!1;try{this.work(_e)}catch(q){me=!0,K=q||new Error("Scheduled action threw falsy error")}if(me)return this.unsubscribe(),K}unsubscribe(){if(!this.closed){const{id:_e,scheduler:he}=this,{actions:me}=he;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ie.P)(me,this),null!=_e&&(this.id=this.recycleAsyncId(he,_e,null)),this.delay=null,super.unsubscribe()}}}},7565:(Et,Se,F)=>{F.d(Se,{v:()=>P});var d=F(6063);class j{constructor(ue,se=j.now){this.schedulerActionCtor=ue,this.now=se}schedule(ue,se=0,_e){return new this.schedulerActionCtor(this,ue).schedule(_e,se)}}j.now=d.l.now;class P extends j{constructor(ue,se=j.now){super(ue,se),this.actions=[],this._active=!1}flush(ue){const{actions:se}=this;if(this._active)return void se.push(ue);let _e;this._active=!0;do{if(_e=ue.execute(ue.state,ue.delay))break}while(ue=se.shift());if(this._active=!1,_e){for(;ue=se.shift();)ue.unsubscribe();throw _e}}}},4986:(Et,Se,F)=>{F.d(Se,{z:()=>P});var d=F(4408);const P=new(F(7565).v)(d.o)},6063:(Et,Se,F)=>{F.d(Se,{l:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},3410:(Et,Se,F)=>{F.d(Se,{z:()=>d});const d={setTimeout(j,P,...ie){const{delegate:ue}=d;return ue?.setTimeout?ue.setTimeout(j,P,...ie):setTimeout(j,P,...ie)},clearTimeout(j){const{delegate:P}=d;return(P?.clearTimeout||clearTimeout)(j)},delegate:void 0}},2202:(Et,Se,F)=>{F.d(Se,{h:()=>j});const j=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Et,Se,F)=>{F.d(Se,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(Et,Se,F)=>{F.d(Se,{_6:()=>se,jO:()=>ie,yG:()=>ue});var d=F(576);function P(_e){return _e[_e.length-1]}function ie(_e){return(0,d.m)(P(_e))?_e.pop():void 0}function ue(_e){return function j(_e){return _e&&(0,d.m)(_e.schedule)}(P(_e))?_e.pop():void 0}function se(_e,he){return"number"==typeof P(_e)?_e.pop():he}},8737:(Et,Se,F)=>{function d(j,P){if(j){const ie=j.indexOf(P);0<=ie&&j.splice(ie,1)}}F.d(Se,{P:()=>d})},3888:(Et,Se,F)=>{function d(j){const ie=j(ue=>{Error.call(ue),ue.stack=(new Error).stack});return ie.prototype=Object.create(Error.prototype),ie.prototype.constructor=ie,ie}F.d(Se,{d:()=>d})},2806:(Et,Se,F)=>{F.d(Se,{O:()=>ie,x:()=>P});var d=F(2416);let j=null;function P(ue){if(d.v.useDeprecatedSynchronousErrorHandling){const se=!j;if(se&&(j={errorThrown:!1,error:null}),ue(),se){const{errorThrown:_e,error:he}=j;if(j=null,_e)throw he}}else ue()}function ie(ue){d.v.useDeprecatedSynchronousErrorHandling&&j&&(j.errorThrown=!0,j.error=ue)}},9672:(Et,Se,F)=>{function d(j,P,ie,ue=0,se=!1){const _e=P.schedule(function(){ie(),se?j.add(this.schedule(null,ue)):this.unsubscribe()},ue);if(j.add(_e),!se)return _e}F.d(Se,{f:()=>d})},4671:(Et,Se,F)=>{function d(j){return j}F.d(Se,{y:()=>d})},1144:(Et,Se,F)=>{F.d(Se,{z:()=>d});const d=j=>j&&"number"==typeof j.length&&"function"!=typeof j},2206:(Et,Se,F)=>{F.d(Se,{D:()=>j});var d=F(576);function j(P){return Symbol.asyncIterator&&(0,d.m)(P?.[Symbol.asyncIterator])}},576:(Et,Se,F)=>{function d(j){return"function"==typeof j}F.d(Se,{m:()=>d})},3670:(Et,Se,F)=>{F.d(Se,{c:()=>P});var d=F(8822),j=F(576);function P(ie){return(0,j.m)(ie[d.L])}},6495:(Et,Se,F)=>{F.d(Se,{T:()=>P});var d=F(2202),j=F(576);function P(ie){return(0,j.m)(ie?.[d.h])}},8239:(Et,Se,F)=>{F.d(Se,{t:()=>j});var d=F(576);function j(P){return(0,d.m)(P?.then)}},3260:(Et,Se,F)=>{F.d(Se,{L:()=>ie,Q:()=>P});var d=F(655),j=F(576);function P(ue){return(0,d.FC)(this,arguments,function*(){const _e=ue.getReader();try{for(;;){const{value:he,done:me}=yield(0,d.qq)(_e.read());if(me)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(he)}}finally{_e.releaseLock()}})}function ie(ue){return(0,j.m)(ue?.getReader)}},4482:(Et,Se,F)=>{F.d(Se,{A:()=>j,e:()=>P});var d=F(576);function j(ie){return(0,d.m)(ie?.lift)}function P(ie){return ue=>{if(j(ue))return ue.lift(function(se){try{return ie(se,this)}catch(_e){this.error(_e)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(Et,Se,F)=>{function d(){}F.d(Se,{Z:()=>d})},9635:(Et,Se,F)=>{F.d(Se,{U:()=>P,z:()=>j});var d=F(4671);function j(...ie){return P(ie)}function P(ie){return 0===ie.length?d.y:1===ie.length?ie[0]:function(se){return ie.reduce((_e,he)=>he(_e),se)}}},7849:(Et,Se,F)=>{F.d(Se,{h:()=>P});var d=F(2416),j=F(3410);function P(ie){j.z.setTimeout(()=>{const{onUnhandledError:ue}=d.v;if(!ue)throw ie;ue(ie)})}},4532:(Et,Se,F)=>{function d(j){return new TypeError(`You provided ${null!==j&&"object"==typeof j?"an invalid object":`'${j}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(Se,{z:()=>d})},655:(Et,Se,F)=>{function ie(ce,ge){var be={};for(var ke in ce)Object.prototype.hasOwnProperty.call(ce,ke)&&ge.indexOf(ke)<0&&(be[ke]=ce[ke]);if(null!=ce&&"function"==typeof Object.getOwnPropertySymbols){var Be=0;for(ke=Object.getOwnPropertySymbols(ce);Be<ke.length;Be++)ge.indexOf(ke[Be])<0&&Object.prototype.propertyIsEnumerable.call(ce,ke[Be])&&(be[ke[Be]]=ce[ke[Be]])}return be}function J(ce,ge,be,ke){return new(be||(be=Promise))(function($e,it){function Qe(Ct){try{Mt(ke.next(Ct))}catch(ut){it(ut)}}function _n(Ct){try{Mt(ke.throw(Ct))}catch(ut){it(ut)}}function Mt(Ct){Ct.done?$e(Ct.value):function Be($e){return $e instanceof be?$e:new be(function(it){it($e)})}(Ct.value).then(Qe,_n)}Mt((ke=ke.apply(ce,ge||[])).next())})}function xe(ce){return this instanceof xe?(this.v=ce,this):new xe(ce)}function Pe(ce,ge,be){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Be,ke=be.apply(ce,ge||[]),$e=[];return Be={},it("next"),it("throw"),it("return"),Be[Symbol.asyncIterator]=function(){return this},Be;function it(fn){ke[fn]&&(Be[fn]=function(Mn){return new Promise(function(Dn,pn){$e.push([fn,Mn,Dn,pn])>1||Qe(fn,Mn)})})}function Qe(fn,Mn){try{!function _n(fn){fn.value instanceof xe?Promise.resolve(fn.value.v).then(Mt,Ct):ut($e[0][2],fn)}(ke[fn](Mn))}catch(Dn){ut($e[0][3],Dn)}}function Mt(fn){Qe("next",fn)}function Ct(fn){Qe("throw",fn)}function ut(fn,Mn){fn(Mn),$e.shift(),$e.length&&Qe($e[0][0],$e[0][1])}}function He(ce){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var be,ge=ce[Symbol.asyncIterator];return ge?ge.call(ce):(ce=function ct(ce){var ge="function"==typeof Symbol&&Symbol.iterator,be=ge&&ce[ge],ke=0;if(be)return be.call(ce);if(ce&&"number"==typeof ce.length)return{next:function(){return ce&&ke>=ce.length&&(ce=void 0),{value:ce&&ce[ke++],done:!ce}}};throw new TypeError(ge?"Object is not iterable.":"Symbol.iterator is not defined.")}(ce),be={},ke("next"),ke("throw"),ke("return"),be[Symbol.asyncIterator]=function(){return this},be);function ke($e){be[$e]=ce[$e]&&function(it){return new Promise(function(Qe,_n){!function Be($e,it,Qe,_n){Promise.resolve(_n).then(function(Mt){$e({value:Mt,done:Qe})},it)}(Qe,_n,(it=ce[$e](it)).done,it.value)})}}}F.d(Se,{FC:()=>Pe,KL:()=>He,_T:()=>ie,mG:()=>J,qq:()=>xe})},4650:(Et,Se,F)=>{F.d(Se,{$8M:()=>ud,$WT:()=>Hn,$Z:()=>O0,AFp:()=>Rc,AaK:()=>he,BQk:()=>tv,CHM:()=>zh,CRH:()=>Wm,CZH:()=>vp,CqO:()=>iv,D6c:()=>VS,EJc:()=>vI,EiD:()=>TC,EpF:()=>rb,F$t:()=>om,F4k:()=>rv,FYo:()=>Rd,FiY:()=>zs,GfV:()=>s0,Gpc:()=>q,Hsn:()=>ob,JOm:()=>Gi,JVY:()=>wd,JZr:()=>ct,KtG:()=>Yc,L6k:()=>Uw,LAX:()=>EC,LFG:()=>Ge,LSH:()=>f_,Lbi:()=>TS,Lck:()=>bc,MAs:()=>kT,MMx:()=>ah,MR2:()=>MC,NdJ:()=>im,OlP:()=>gn,Oqu:()=>fm,P3R:()=>qw,PXZ:()=>uy,Q6J:()=>Q_,QGY:()=>nv,QbO:()=>Ep,Qsj:()=>r0,R0b:()=>As,RDi:()=>yC,Rgc:()=>kn,SBq:()=>zu,Sil:()=>hE,Suo:()=>tE,TTD:()=>xo,TgZ:()=>J_,VKq:()=>hr,W1O:()=>nE,X6Q:()=>NS,XFs:()=>dt,Xpm:()=>Co,Xts:()=>g_,Y36:()=>Pd,YKP:()=>zv,YNc:()=>NT,Yjl:()=>So,Yz7:()=>ut,Z0I:()=>pn,ZZ4:()=>TE,_Bn:()=>cp,_UZ:()=>nb,_Vd:()=>Md,_c5:()=>BI,_uU:()=>mv,aQg:()=>SE,c2e:()=>ny,cJS:()=>Mn,cg1:()=>_c,dDg:()=>AI,dqk:()=>Ut,eBb:()=>Vw,eFA:()=>gE,ekj:()=>Zf,eoX:()=>il,f3M:()=>st,g9A:()=>Fn,h0i:()=>wc,hGG:()=>US,hij:()=>pm,iGM:()=>lI,ifc:()=>Oe,ip1:()=>An,jDz:()=>Wv,kL8:()=>Ri,lG2:()=>tu,lqb:()=>ec,lri:()=>Oc,mCW:()=>Df,n5z:()=>Ll,oAB:()=>To,oxw:()=>LT,pB0:()=>bd,q3G:()=>Fr,q4F:()=>o0,qLn:()=>Af,qOj:()=>Qg,qZA:()=>rm,qzn:()=>ju,rWj:()=>rl,sBO:()=>la,s_b:()=>$m,soG:()=>wp,tb:()=>ty,tp0:()=>D,uIk:()=>q_,vHH:()=>ye,vpe:()=>rs,wAp:()=>Ot,xp6:()=>v0,ynx:()=>ev,z2F:()=>cn,z3N:()=>po,zSh:()=>Ad,zs3:()=>rc});var d=F(7579),j=F(727),P=F(9751),ie=F(6451),ue=F(3099);function se(s){for(let o in s)if(s[o]===se)return o;throw Error("Could not find renamed property on target object.")}function _e(s,o){for(const u in o)o.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=o[u])}function he(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(he).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function me(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const K=se({__forward_ref__:se});function q(s){return s.__forward_ref__=q,s.toString=function(){return he(this())},s}function J(s){return ze(s)?s():s}function ze(s){return"function"==typeof s&&s.hasOwnProperty(K)&&s.__forward_ref__===q}function Re(s){return s&&!!s.\u0275providers}const ct="https://g.co/ng/security#xss";class ye extends Error{constructor(o,u){super(function Ae(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}(o,u)),this.code=o}}function Te(s){return"string"==typeof s?s:null==s?"":String(s)}function He(s,o){throw new ye(-201,!1)}function it(s,o){null==s&&function Qe(s,o,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function ut(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Mn(s){return{providers:s.providers||[],imports:s.imports||[]}}function Dn(s){return rr(s,di)||rr(s,wn)}function pn(s){return null!==Dn(s)}function rr(s,o){return s.hasOwnProperty(o)?s[o]:null}function Zn(s){return s&&(s.hasOwnProperty(Li)||s.hasOwnProperty(pr))?s[Li]:null}const di=se({\u0275prov:se}),Li=se({\u0275inj:se}),wn=se({ngInjectableDef:se}),pr=se({ngInjectorDef:se});var dt=(()=>((dt=dt||{})[dt.Default=0]="Default",dt[dt.Host=1]="Host",dt[dt.Self=2]="Self",dt[dt.SkipSelf=4]="SkipSelf",dt[dt.Optional=8]="Optional",dt))();let gr;function Yn(s){const o=gr;return gr=s,o}function Qn(s,o,u){const c=Dn(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&dt.Optional?null:void 0!==o?o:void He(he(s))}const Ut=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),ir={},Nn="__NG_DI_FLAG__",hi="ngTempTokenPath",Ui=/\n/gm,Vi="__source";let Qt;function Vr(s){const o=Qt;return Qt=s,o}function jn(s,o=dt.Default){if(void 0===Qt)throw new ye(-203,!1);return null===Qt?Qn(s,void 0,o):Qt.get(s,o&dt.Optional?null:void 0,o)}function Ge(s,o=dt.Default){return(function Sr(){return gr}()||jn)(J(s),o)}function st(s,o=dt.Default){return Ge(s,Rt(o))}function Rt(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function Nt(s){const o=[];for(let u=0;u<s.length;u++){const c=J(s[u]);if(Array.isArray(c)){if(0===c.length)throw new ye(900,!1);let h,p=dt.Default;for(let _=0;_<c.length;_++){const b=c[_],I=G(b);"number"==typeof I?-1===I?h=b.token:p|=I:h=b}o.push(Ge(h,p))}else o.push(Ge(c))}return o}function nn(s,o){return s[Nn]=o,s.prototype[Nn]=o,s}function G(s){return s[Nn]}function B(s){return{toString:s}.toString()}var N=(()=>((N=N||{})[N.OnPush=0]="OnPush",N[N.Default=1]="Default",N))(),Oe=(()=>{return(s=Oe||(Oe={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Oe;var s})();const mt={},Ze=[],jt=se({\u0275cmp:se}),vt=se({\u0275dir:se}),Cn=se({\u0275pipe:se}),mr=se({\u0275mod:se}),Bt=se({\u0275fac:se}),Br=se({__NG_ELEMENT_ID__:se});let ml=0;function Co(s){return B(()=>{const u=!0===s.standalone,c={},h={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===N.OnPush,directiveDefs:null,pipeDefs:null,standalone:u,dependencies:u&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||Ze,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||Oe.Emulated,id:"c"+ml++,styles:s.styles||Ze,_:null,setInput:null,schemas:s.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},p=s.dependencies,_=s.features;return h.inputs=vl(s.inputs,c),h.outputs=vl(s.outputs),_&&_.forEach(b=>b(h)),h.directiveDefs=p?()=>("function"==typeof p?p():p).map(_l).filter(yr):null,h.pipeDefs=p?()=>("function"==typeof p?p():p).map(Ar).filter(yr):null,h})}function _l(s){return hn(s)||On(s)}function yr(s){return null!==s}function To(s){return B(()=>({type:s.type,bootstrap:s.bootstrap||Ze,declarations:s.declarations||Ze,imports:s.imports||Ze,exports:s.exports||Ze,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function vl(s,o){if(null==s)return mt;const u={};for(const c in s)if(s.hasOwnProperty(c)){let h=s[c],p=h;Array.isArray(h)&&(p=h[1],h=h[0]),u[h]=c,o&&(o[h]=p)}return u}const tu=Co;function So(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function hn(s){return s[jt]||null}function On(s){return s[vt]||null}function Ar(s){return s[Cn]||null}function Hn(s){const o=hn(s)||On(s)||Ar(s);return null!==o&&o.standalone}function $r(s,o){const u=s[mr]||null;if(!u&&!0===o)throw new Error(`Type ${he(s)} does not have '\u0275mod' property.`);return u}function gi(s){return Array.isArray(s)&&"object"==typeof s[1]}function mi(s){return Array.isArray(s)&&!0===s[1]}function hs(s){return 0!=(4&s.flags)}function _a(s){return s.componentOffset>-1}function bl(s){return 1==(1&s.flags)}function Er(s){return null!==s.template}function ig(s){return 0!=(256&s[2])}function ro(s,o){return s.hasOwnProperty(Bt)?s[Bt]:null}class Ro{constructor(o,u,c){this.previousValue=o,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function xo(){return Oo}function Oo(s){return s.type.prototype.ngOnChanges&&(s.setInput=io),cu}function cu(){const s=du(this),o=s?.current;if(o){const u=s.previous;if(u===mt)s.previous=o;else for(let c in o)u[c]=o[c];s.current=null,this.ngOnChanges(o)}}function io(s,o,u,c){const h=this.declaredInputs[u],p=du(s)||function hu(s,o){return s[No]=o}(s,{previous:mt,current:null}),_=p.current||(p.current={}),b=p.previous,I=b[h];_[h]=new Ro(I&&I.currentValue,o,b===mt),s[c]=o}xo.ngInherit=!0;const No="__ngSimpleChanges__";function du(s){return s[No]||null}function Un(s){for(;Array.isArray(s);)s=s[0];return s}function ks(s,o){return Un(o[s])}function wr(s,o){return Un(o[s.index])}function pu(s,o){return s.data[o]}function ar(s,o){const u=o[s];return gi(u)?u:u[0]}function oo(s){return 64==(64&s[2])}function Bi(s,o){return null==o?null:s[o]}function Cl(s){s[18]=0}function ao(s,o){s[5]+=o;let u=s,c=s[3];for(;null!==c&&(1===o&&1===u[5]||-1===o&&0===u[5]);)c[5]+=o,u=c,c=c[3]}const Ht={lFrame:cg(null),bindingsEnabled:!0};function Zc(){return Ht.bindingsEnabled}function ve(){return Ht.lFrame.lView}function rn(){return Ht.lFrame.tView}function zh(s){return Ht.lFrame.contextLView=s,s[8]}function Yc(s){return Ht.lFrame.contextLView=null,s}function ur(){let s=Sl();for(;null!==s&&64===s.type;)s=s.parent;return s}function Sl(){return Ht.lFrame.currentTNode}function $i(s,o){const u=Ht.lFrame;u.currentTNode=s,u.isParent=o}function Fo(){return Ht.lFrame.isParent}function Qc(){Ht.lFrame.isParent=!1}function gs(){return Ht.lFrame.bindingIndex++}function Al(s,o){const u=Ht.lFrame;u.bindingIndex=u.bindingRootIndex=s,Ls(o)}function Ls(s){Ht.lFrame.currentDirectiveIndex=s}function qh(){return Ht.lFrame.currentQueryIndex}function Ml(s){Ht.lFrame.currentQueryIndex=s}function Jc(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Kh(s,o,u){if(u&dt.SkipSelf){let h=o,p=s;for(;!(h=h.parent,null!==h||u&dt.Host||(h=Jc(p),null===h||(p=p[15],10&h.type))););if(null===h)return!1;o=h,s=p}const c=Ht.lFrame=lg();return c.currentTNode=o,c.lView=s,!0}function yu(s){const o=lg(),u=s[1];Ht.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function lg(){const s=Ht.lFrame,o=null===s?null:s.child;return null===o?cg(s):o}function cg(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function dg(){const s=Ht.lFrame;return Ht.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const ed=dg;function hg(){const s=dg();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function ni(){return Ht.lFrame.selectedIndex}function ms(s){Ht.lFrame.selectedIndex=s}function En(){const s=Ht.lFrame;return pu(s.tView,s.selectedIndex)}function Ta(s,o){for(let u=o.directiveStart,c=o.directiveEnd;u<c;u++){const p=s.data[u].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:b,ngAfterViewInit:I,ngAfterViewChecked:S,ngOnDestroy:O}=p;_&&(s.contentHooks||(s.contentHooks=[])).push(-u,_),b&&((s.contentHooks||(s.contentHooks=[])).push(u,b),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,b)),I&&(s.viewHooks||(s.viewHooks=[])).push(-u,I),S&&((s.viewHooks||(s.viewHooks=[])).push(u,S),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,S)),null!=O&&(s.destroyHooks||(s.destroyHooks=[])).push(u,O)}}function Sa(s,o,u){Bo(s,o,3,u)}function uo(s,o,u,c){(3&s[2])===u&&Bo(s,o,u,c)}function Us(s,o){let u=s[2];(3&u)===o&&(u&=2047,u+=1,s[2]=u)}function Bo(s,o,u,c){const p=c??-1,_=o.length-1;let b=0;for(let I=void 0!==c?65535&s[18]:0;I<_;I++)if("number"==typeof o[I+1]){if(b=o[I],null!=c&&b>=c)break}else o[I]<0&&(s[18]+=65536),(b<p||-1==p)&&(Qh(s,u,o,I),s[18]=(4294901760&s[18])+I+2),I++}function Qh(s,o,u,c){const h=u[c]<0,p=u[c+1],b=s[h?-u[c]:u[c]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{p.call(b)}finally{}}}else try{p.call(b)}finally{}}class _u{constructor(o,u,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function vu(s,o,u){let c=0;for(;c<u.length;){const h=u[c];if("number"==typeof h){if(0!==h)break;c++;const p=u[c++],_=u[c++],b=u[c++];s.setAttribute(o,_,b,p)}else{const p=h,_=u[++c];Eu(p)?s.setProperty(o,p,_):s.setAttribute(o,p,_),c++}}return c}function Ji(s){return 3===s||4===s||6===s}function Eu(s){return 64===s.charCodeAt(0)}function ji(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let c=0;c<o.length;c++){const h=o[c];"number"==typeof h?u=h:0===u||wu(s,u,h,null,-1===u||2===u?o[++c]:null)}}return s}function wu(s,o,u,c,h){let p=0,_=s.length;if(-1===o)_=-1;else for(;p<s.length;){const b=s[p++];if("number"==typeof b){if(b===o){_=-1;break}if(b>o){_=p-1;break}}}for(;p<s.length;){const b=s[p];if("number"==typeof b)break;if(b===u){if(null===c)return void(null!==h&&(s[p+1]=h));if(c===s[p+1])return void(s[p+2]=h)}p++,null!==c&&p++,null!==h&&p++}-1!==_&&(s.splice(_,0,o),p=_+1),s.splice(p++,0,u),null!==c&&s.splice(p++,0,c),null!==h&&s.splice(p++,0,h)}function xl(s){return-1!==s}function $o(s){return 32767&s}function lo(s,o){let u=function Ol(s){return s>>16}(s),c=o;for(;u>0;)c=c[15],u--;return c}let jo=!0;function Bs(s){const o=jo;return jo=s,o}let bu=0;const ri={};function vs(s,o){const u=Pl(s,o);if(-1!==u)return u;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,Ho(c.data,s),Ho(o,null),Ho(c.blueprint,null));const h=Iu(s,o),p=s.injectorIndex;if(xl(h)){const _=$o(h),b=lo(h,o),I=b[1].data;for(let S=0;S<8;S++)o[p+S]=b[_+S]|I[_+S]}return o[p+8]=h,p}function Ho(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Pl(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Iu(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,h=o;for(;null!==h;){if(c=Ul(h),null===c)return-1;if(u++,h=h[15],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return-1}function kl(s,o,u){!function sd(s,o,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(Br)&&(c=u[Br]),null==c&&(c=u[Br]=bu++);const h=255&c;o.data[s+(h>>5)]|=1<<h}(s,o,u)}function od(s,o,u){if(u&dt.Optional||void 0!==s)return s;He()}function Cu(s,o,u,c){if(u&dt.Optional&&void 0===c&&(c=null),!(u&(dt.Self|dt.Host))){const h=s[9],p=Yn(void 0);try{return h?h.get(o,c,u&dt.Optional):Qn(o,c,u&dt.Optional)}finally{Yn(p)}}return od(c,0,u)}function Tu(s,o,u,c=dt.Default,h){if(null!==s){if(1024&o[2]){const _=function Jh(s,o,u,c,h){let p=s,_=o;for(;null!==p&&null!==_&&1024&_[2]&&!(256&_[2]);){const b=Hi(p,_,u,c|dt.Self,ri);if(b!==ri)return b;let I=p.parent;if(!I){const S=_[21];if(S){const O=S.get(u,ri,c);if(O!==ri)return O}I=Ul(_),_=_[15]}p=I}return h}(s,o,u,c,ri);if(_!==ri)return _}const p=Hi(s,o,u,c,ri);if(p!==ri)return p}return Cu(o,u,c,h)}function Hi(s,o,u,c,h){const p=function ad(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Br)?s[Br]:void 0;return"number"==typeof o?o>=0?255&o:gg:o}(u);if("function"==typeof p){if(!Kh(o,s,c))return c&dt.Host?od(h,0,c):Cu(o,u,c,h);try{const _=p(c);if(null!=_||c&dt.Optional)return _;He()}finally{ed()}}else if("number"==typeof p){let _=null,b=Pl(s,o),I=-1,S=c&dt.Host?o[16][6]:null;for((-1===b||c&dt.SkipSelf)&&(I=-1===b?Iu(s,o):o[b+8],-1!==I&&yi(c,!1)?(_=o[1],b=$o(I),o=lo(I,o)):b=-1);-1!==b;){const O=o[1];if(Fl(p,b,O.data)){const U=Xh(b,o,u,_,c,S);if(U!==ri)return U}I=o[b+8],-1!==I&&yi(c,o[1].data[b+8]===S)&&Fl(p,b,o)?(_=O,b=$o(I),o=lo(I,o)):b=-1}}return h}function Xh(s,o,u,c,h,p){const _=o[1],b=_.data[s+8],O=ho(b,_,u,null==c?_a(b)&&jo:c!=_&&0!=(3&b.type),h&dt.Host&&p===b);return null!==O?es(o,_,O,b):ri}function ho(s,o,u,c,h){const p=s.providerIndexes,_=o.data,b=1048575&p,I=s.directiveStart,O=p>>20,Y=h?b+O:s.directiveEnd;for(let re=c?b:b+O;re<Y;re++){const De=_[re];if(re<I&&u===De||re>=I&&De.type===u)return re}if(h){const re=_[I];if(re&&Er(re)&&re.type===u)return I}return null}function es(s,o,u,c){let h=s[u];const p=o.data;if(function zr(s){return s instanceof _u}(h)){const _=h;_.resolving&&function xe(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new ye(-200,`Circular dependency in DI detected for ${s}${u}`)}(function Le(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():Te(s)}(p[u]));const b=Bs(_.canSeeViewProviders);_.resolving=!0;const I=_.injectImpl?Yn(_.injectImpl):null;Kh(s,c,dt.Default);try{h=s[u]=_.factory(void 0,p,s,c),o.firstCreatePass&&u>=c.directiveStart&&function rd(s,o,u){const{ngOnChanges:c,ngOnInit:h,ngDoCheck:p}=o.type.prototype;if(c){const _=Oo(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,_),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,_)}h&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,h),p&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,p),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,p))}(u,p[u],o)}finally{null!==I&&Yn(I),Bs(b),_.resolving=!1,ed()}}return h}function Fl(s,o,u){return!!(u[o+(s>>5)]&1<<s)}function yi(s,o){return!(s&dt.Self||s&dt.Host&&o)}class Es{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,c){return Tu(this._tNode,this._lView,o,Rt(c),u)}}function gg(){return new Es(ur(),ve())}function Ll(s){return B(()=>{const o=s.prototype.constructor,u=o[Bt]||zo(o),c=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==c;){const p=h[Bt]||zo(h);if(p&&p!==u)return p;h=Object.getPrototypeOf(h)}return p=>new p})}function zo(s){return ze(s)?()=>{const o=zo(J(s));return o&&o()}:ro(s)}function Ul(s){const o=s[1],u=o.type;return 2===u?o.declTNode:1===u?s[6]:null}function ud(s){return function Du(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const c=u.length;let h=0;for(;h<c;){const p=u[h];if(Ji(p))break;if(0===p)h+=2;else if("number"==typeof p)for(h++;h<c&&"string"==typeof u[h];)h++;else{if(p===o)return u[h+1];h+=2}}}return null}(ur(),s)}const Su="__parameters__";function Ma(s,o,u){return B(()=>{const c=function cd(s){return function(...u){if(s){const c=s(...u);for(const h in c)this[h]=c[h]}}}(o);function h(...p){if(this instanceof h)return c.apply(this,p),this;const _=new h(...p);return b.annotation=_,b;function b(I,S,O){const U=I.hasOwnProperty(Su)?I[Su]:Object.defineProperty(I,Su,{value:[]})[Su];for(;U.length<=O;)U.push(null);return(U[O]=U[O]||[]).push(_),I}}return u&&(h.prototype=Object.create(u.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class gn{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=ut({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function ws(s,o){s.forEach(u=>Array.isArray(u)?ws(u,o):o(u))}function Bl(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function Oa(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Hs(s,o){const u=[];for(let c=0;c<s;c++)u.push(o);return u}function Gr(s,o,u){let c=on(s,o);return c>=0?s[1|c]=u:(c=~c,function fd(s,o,u,c){let h=s.length;if(h==o)s.push(u,c);else if(1===h)s.push(c,s[0]),s[0]=u;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=u,s[o+1]=c}}(s,c,o,u)),c}function pd(s,o){const u=on(s,o);if(u>=0)return s[1|u]}function on(s,o){return function ft(s,o,u){let c=0,h=s.length>>u;for(;h!==c;){const p=c+(h-c>>1),_=s[p<<u];if(o===_)return p<<u;_>o?h=p:c=p+1}return~(h<<u)}(s,o,1)}const zs=nn(Ma("Optional"),8),D=nn(Ma("SkipSelf"),4);var Gi=(()=>((Gi=Gi||{})[Gi.Important=1]="Important",Gi[Gi.DashCase=2]="DashCase",Gi))();const df=new Map;let hf=0;const gf="__ngContext__";function qr(s,o){gi(o)?(s[gf]=o[20],function ff(s){df.set(s[20],s)}(o)):s[gf]=o}function Ne(s,o){return undefined(s,o)}function _t(s){const o=s[3];return mi(o)?o[3]:o}function si(s){return Yo(s[13])}function Ds(s){return Yo(s[4])}function Yo(s){for(;null!==s&&!mi(s);)s=s[4];return s}function Fa(s,o,u,c,h){if(null!=c){let p,_=!1;mi(c)?p=c:gi(c)&&(_=!0,c=c[0]);const b=Un(c);0===s&&null!==u?null==h?Mw(o,u,b):vd(o,u,b,h||null,!0):1===s&&null!==u?vd(o,u,b,h||null,!0):2===s?function Vu(s,o,u){const c=Lu(s,o);c&&function hC(s,o,u,c){s.removeChild(o,u,c)}(s,c,o,u)}(o,b,_):3===s&&o.destroyNode(b),null!=p&&function Nw(s,o,u,c,h){const p=u[7];p!==Un(u)&&Fa(o,s,c,p,h);for(let b=10;b<u.length;b++){const I=u[b];Kl(I[1],I,s,o,c,p)}}(o,s,p,u,h)}}function ku(s,o,u){return s.createElement(o,u)}function Dg(s,o){const u=s[9],c=u.indexOf(o),h=o[3];512&o[2]&&(o[2]&=-513,ao(h,-1)),u.splice(c,1)}function e_(s,o){if(s.length<=10)return;const u=10+o,c=s[u];if(c){const h=c[17];null!==h&&h!==s&&Dg(h,c),o>0&&(s[u-1][4]=c[4]);const p=Oa(s,10+o);!function bg(s,o){Kl(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const _=p[19];null!==_&&_.detachView(p[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function Aw(s,o){if(!(128&o[2])){const u=o[11];u.destroyNode&&Kl(s,o,u,3,null,null),function ql(s){let o=s[13];if(!o)return Ef(s[1],s);for(;o;){let u=null;if(gi(o))u=o[13];else{const c=o[10];c&&(u=c)}if(!u){for(;o&&!o[4]&&o!==s;)gi(o)&&Ef(o[1],o),o=o[3];null===o&&(o=s),gi(o)&&Ef(o[1],o),u=o&&o[4]}o=u}}(o)}}function Ef(s,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function dC(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const h=o[u[c]];if(!(h instanceof _u)){const p=u[c+1];if(Array.isArray(p))for(let _=0;_<p.length;_+=2){const b=h[p[_]],I=p[_+1];try{I.call(b)}finally{}}else try{p.call(h)}finally{}}}}(s,o),function Cg(s,o){const u=s.cleanup,c=o[7];let h=-1;if(null!==u)for(let p=0;p<u.length-1;p+=2)if("string"==typeof u[p]){const _=u[p+3];_>=0?c[h=_]():c[h=-_].unsubscribe(),p+=2}else{const _=c[h=u[p+1]];u[p].call(_)}if(null!==c){for(let p=h+1;p<c.length;p++)(0,c[p])();o[7]=null}}(s,o),1===o[1].type&&o[11].destroy();const u=o[17];if(null!==u&&mi(o[3])){u!==o[3]&&Dg(u,o);const c=o[19];null!==c&&c.detachView(s)}!function yd(s){df.delete(s[20])}(o)}}function Fu(s,o,u){return function Tg(s,o,u){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return u[0];{const{componentOffset:h}=c;if(h>-1){const{encapsulation:p}=s.data[c.directiveStart+h];if(p===Oe.None||p===Oe.Emulated)return null}return wr(c,u)}}(s,o.parent,u)}function vd(s,o,u,c,h){s.insertBefore(o,u,c,h)}function Mw(s,o,u){s.appendChild(o,u)}function Rw(s,o,u,c,h){null!==c?vd(s,o,u,c,h):Mw(s,o,u)}function Lu(s,o){return s.parentNode(o)}function t_(s,o,u){return r_(s,o,u)}let Zl,o_,xg,r_=function n_(s,o,u){return 40&s.type?wr(s,u):null};function Ag(s,o,u,c){const h=Fu(s,c,o),p=o[11],b=t_(c.parent||o[6],c,o);if(null!=h)if(Array.isArray(u))for(let I=0;I<u.length;I++)Rw(p,h,u[I],b,!1);else Rw(p,h,u,b,!1)}function wf(s,o){if(null!==o){const u=o.type;if(3&u)return wr(o,s);if(4&u)return bf(-1,s[o.index]);if(8&u){const c=o.child;if(null!==c)return wf(s,c);{const h=s[o.index];return mi(h)?bf(-1,h):Un(h)}}if(32&u)return Ne(o,s)()||Un(s[o.index]);{const c=Ow(s,o);return null!==c?Array.isArray(c)?c[0]:wf(_t(s[16]),c):wf(s,o.next)}}return null}function Ow(s,o){return null!==o?s[16][6].projection[o.projection]:null}function bf(s,o){const u=10+s+1;if(u<o.length){const c=o[u],h=c[1].firstChild;if(null!==h)return wf(c,h)}return o[7]}function i_(s,o,u,c,h,p,_){for(;null!=u;){const b=c[u.index],I=u.type;if(_&&0===o&&(b&&qr(Un(b),c),u.flags|=2),32!=(32&u.flags))if(8&I)i_(s,o,u.child,c,h,p,!1),Fa(o,s,h,b,p);else if(32&I){const S=Ne(u,c);let O;for(;O=S();)Fa(o,s,h,O,p);Fa(o,s,h,b,p)}else 16&I?s_(s,o,c,u,h,p):Fa(o,s,h,b,p);u=_?u.projectionNext:u.next}}function Kl(s,o,u,c,h,p){i_(u,c,s.firstChild,o,h,p,!1)}function s_(s,o,u,c,h,p){const _=u[16],I=_[6].projection[c.projection];if(Array.isArray(I))for(let S=0;S<I.length;S++)Fa(o,s,h,I[S],p);else i_(s,o,I,_[3],h,p,!0)}function Mg(s,o,u){""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u)}function Bu(s,o,u){const{mergedAttrs:c,classes:h,styles:p}=u;null!==c&&vu(s,o,c),null!==h&&Mg(s,o,h),null!==p&&function Qo(s,o,u){s.setAttribute(o,"style",u)}(s,o,p)}function $u(s){return function Rg(){if(void 0===Zl&&(Zl=null,Ut.trustedTypes))try{Zl=Ut.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Zl}()?.createHTML(s)||s}function yC(s){o_=s}function u_(s){return function a_(){if(void 0===xg&&(xg=null,Ut.trustedTypes))try{xg=Ut.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return xg}()?.createScriptURL(s)||s}class Yl{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ct})`}}class rx extends Yl{getTypeName(){return"HTML"}}class _C extends Yl{getTypeName(){return"Style"}}class ix extends Yl{getTypeName(){return"Script"}}class vC extends Yl{getTypeName(){return"URL"}}class Lw extends Yl{getTypeName(){return"ResourceURL"}}function po(s){return s instanceof Yl?s.changingThisBreaksApplicationSecurity:s}function ju(s,o){const u=function Ua(s){return s instanceof Yl&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see ${ct})`)}return u===o}function wd(s){return new rx(s)}function Uw(s){return new _C(s)}function Vw(s){return new ix(s)}function EC(s){return new vC(s)}function bd(s){return new Lw(s)}class wC{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const u=(new window.DOMParser).parseFromString($u(o),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(o):(u.removeChild(u.firstChild),u)}catch{return null}}}class Og{constructor(o){if(this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const u=this.inertDocument.createElement("html");this.inertDocument.appendChild(u);const c=this.inertDocument.createElement("body");u.appendChild(c)}}getInertBodyElement(o){const u=this.inertDocument.createElement("template");if("content"in u)return u.innerHTML=$u(o),u;const c=this.inertDocument.createElement("body");return c.innerHTML=$u(o),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(c),c}stripCustomNsAttrs(o){const u=o.attributes;for(let h=u.length-1;0<h;h--){const _=u.item(h).name;("xmlns:ns1"===_||0===_.indexOf("ns1:"))&&o.removeAttribute(_)}let c=o.firstChild;for(;c;)c.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(c),c=c.nextSibling}}const c_=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function Df(s){return(s=String(s)).match(c_)?s:"unsafe:"+s}function go(s){const o={};for(const u of s.split(","))o[u]=!0;return o}function Ql(...s){const o={};for(const u of s)for(const c in u)u.hasOwnProperty(c)&&(o[c]=!0);return o}const $w=go("area,br,col,hr,img,wbr"),Id=go("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),jw=go("rp,rt"),Ng=Ql($w,Ql(Id,go("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Ql(jw,go("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Ql(jw,Id)),Pg=go("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Dd=Ql(Pg,go("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),go("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),kg=go("script,style,template");class d_{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let u=o.firstChild,c=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?c=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,c&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let h=this.checkClobberedElement(u,u.nextSibling);if(h){u=h;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(o){const u=o.nodeName.toLowerCase();if(!Ng.hasOwnProperty(u))return this.sanitizedSomething=!0,!kg.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const c=o.attributes;for(let h=0;h<c.length;h++){const p=c.item(h),_=p.name,b=_.toLowerCase();if(!Dd.hasOwnProperty(b)){this.sanitizedSomething=!0;continue}let I=p.value;Pg[b]&&(I=Df(I)),this.buf.push(" ",_,'="',Fg(I),'"')}return this.buf.push(">"),!0}endElement(o){const u=o.nodeName.toLowerCase();Ng.hasOwnProperty(u)&&!$w.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(o){this.buf.push(Fg(o))}checkClobberedElement(o,u){if(u&&(o.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return u}}const DC=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,CC=/([^\#-~ |!])/g;function Fg(s){return s.replace(/&/g,"&amp;").replace(DC,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(CC,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Cf;function TC(s,o){let u=null;try{Cf=Cf||function l_(s){const o=new Og(s);return function Bw(){try{return!!(new window.DOMParser).parseFromString($u(""),"text/html")}catch{return!1}}()?new wC(o):o}(s);let c=o?String(o):"";u=Cf.getInertBodyElement(c);let h=5,p=c;do{if(0===h)throw new Error("Failed to sanitize html because the input is unstable");h--,c=p,p=u.innerHTML,u=Cf.getInertBodyElement(c)}while(c!==p);return $u((new d_).sanitizeChildren(zw(u)||u))}finally{if(u){const c=zw(u)||u;for(;c.firstChild;)c.removeChild(c.firstChild)}}}function zw(s){return"content"in s&&function ax(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var Fr=(()=>((Fr=Fr||{})[Fr.NONE=0]="NONE",Fr[Fr.HTML=1]="HTML",Fr[Fr.STYLE=2]="STYLE",Fr[Fr.SCRIPT=3]="SCRIPT",Fr[Fr.URL=4]="URL",Fr[Fr.RESOURCE_URL=5]="RESOURCE_URL",Fr))();function f_(s){const o=Hu();return o?o.sanitize(Fr.URL,s)||"":ju(s,"URL")?po(s):Df(Te(s))}function Gw(s){const o=Hu();if(o)return u_(o.sanitize(Fr.RESOURCE_URL,s)||"");if(ju(s,"ResourceURL"))return u_(po(s));throw new ye(904,!1)}function qw(s,o,u){return function Tf(s,o){return"src"===o&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===o&&("base"===s||"link"===s)?Gw:f_}(o,u)(s)}function Hu(){const s=ve();return s&&s[12]}const g_=new gn("ENVIRONMENT_INITIALIZER"),Kw=new gn("INJECTOR",-1),Xl=new gn("INJECTOR_DEF_TYPES");class Cd{get(o,u=ir){if(u===ir){const c=new Error(`NullInjectorError: No provider for ${he(o)}!`);throw c.name="NullInjectorError",c}return u}}function MC(s){return{\u0275providers:s}}function RC(...s){return{\u0275providers:Td(0,s),\u0275fromNgModule:!0}}function Td(s,...o){const u=[],c=new Set;let h;return ws(o,p=>{const _=p;m_(_,u,[],c)&&(h||(h=[]),h.push(_))}),void 0!==h&&Sd(h,u),u}function Sd(s,o){for(let u=0;u<s.length;u++){const{providers:h}=s[u];y_(h,p=>{o.push(p)})}}function m_(s,o,u,c){if(!(s=J(s)))return!1;let h=null,p=Zn(s);const _=!p&&hn(s);if(p||_){if(_&&!_.standalone)return!1;h=s}else{const I=s.ngModule;if(p=Zn(I),!p)return!1;h=I}const b=c.has(h);if(_){if(b)return!1;if(c.add(h),_.dependencies){const I="function"==typeof _.dependencies?_.dependencies():_.dependencies;for(const S of I)m_(S,o,u,c)}}else{if(!p)return!1;{if(null!=p.imports&&!b){let S;c.add(h);try{ws(p.imports,O=>{m_(O,o,u,c)&&(S||(S=[]),S.push(O))})}finally{}void 0!==S&&Sd(S,o)}if(!b){const S=ro(h)||(()=>new h);o.push({provide:h,useFactory:S,deps:Ze},{provide:Xl,useValue:h,multi:!0},{provide:g_,useValue:()=>Ge(h),multi:!0})}const I=p.providers;null==I||b||y_(I,O=>{o.push(O)})}}return h!==s&&void 0!==s.providers}function y_(s,o){for(let u of s)Re(u)&&(u=u.\u0275providers),Array.isArray(u)?y_(u,o):o(u)}const xC=se({provide:String,useValue:se});function __(s){return null!==s&&"object"==typeof s&&xC in s}function Jl(s){return"function"==typeof s}const Ad=new gn("Set Injector scope."),Va={},NC={};let E_;function Lg(){return void 0===E_&&(E_=new Cd),E_}class ec{}class Yw extends ec{get destroyed(){return this._destroyed}constructor(o,u,c,h){super(),this.parent=u,this.source=c,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Sf(o,_=>this.processProvider(_)),this.records.set(Kw,tc(void 0,this)),h.has("environment")&&this.records.set(ec,tc(void 0,this));const p=this.records.get(Ad);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(Xl.multi,Ze,dt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const u=Vr(this),c=Yn(void 0);try{return o()}finally{Vr(u),Yn(c)}}get(o,u=ir,c=dt.Default){this.assertNotDestroyed(),c=Rt(c);const h=Vr(this),p=Yn(void 0);try{if(!(c&dt.SkipSelf)){let b=this.records.get(o);if(void 0===b){const I=function Xw(s){return"function"==typeof s||"object"==typeof s&&s instanceof gn}(o)&&Dn(o);b=I&&this.injectableDefInScope(I)?tc(w_(o),Va):null,this.records.set(o,b)}if(null!=b)return this.hydrate(o,b)}return(c&dt.Self?Lg():this.parent).get(o,u=c&dt.Optional&&u===ir?null:u)}catch(_){if("NullInjectorError"===_.name){if((_[hi]=_[hi]||[]).unshift(he(o)),h)throw _;return function H(s,o,u,c){const h=s[hi];throw o[Vi]&&h.unshift(o[Vi]),s.message=function Q(s,o,u,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let h=he(o);if(Array.isArray(o))h=o.map(he).join(" -> ");else if("object"==typeof o){let p=[];for(let _ in o)if(o.hasOwnProperty(_)){let b=o[_];p.push(_+":"+("string"==typeof b?JSON.stringify(b):he(b)))}h=`{${p.join(", ")}}`}return`${u}${c?"("+c+")":""}[${h}]: ${s.replace(Ui,"\n  ")}`}("\n"+s.message,h,u,c),s.ngTokenPath=h,s[hi]=null,s}(_,o,"R3InjectorError",this.source)}throw _}finally{Yn(p),Vr(h)}}resolveInjectorInitializers(){const o=Vr(this),u=Yn(void 0);try{const c=this.get(g_.multi,Ze,dt.Self);for(const h of c)h()}finally{Vr(o),Yn(u)}}toString(){const o=[],u=this.records;for(const c of u.keys())o.push(he(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ye(205,!1)}processProvider(o){let u=Jl(o=J(o))?o:J(o&&o.provide);const c=function kC(s){return __(s)?tc(void 0,s.useValue):tc(Qw(s),Va)}(o);if(Jl(o)||!0!==o.multi)this.records.get(u);else{let h=this.records.get(u);h||(h=tc(void 0,Va,!0),h.factory=()=>Nt(h.multi),this.records.set(u,h)),u=o,h.multi.push(o)}this.records.set(u,c)}hydrate(o,u){return u.value===Va&&(u.value=NC,u.value=u.factory()),"object"==typeof u.value&&u.value&&function b_(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=J(o.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function w_(s){const o=Dn(s),u=null!==o?o.factory:ro(s);if(null!==u)return u;if(s instanceof gn)throw new ye(204,!1);if(s instanceof Function)return function PC(s){const o=s.length;if(o>0)throw Hs(o,"?"),new ye(204,!1);const u=function Jr(s){const o=s&&(s[di]||s[wn]);if(o){const u=function Fi(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),o}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new ye(204,!1)}function Qw(s,o,u){let c;if(Jl(s)){const h=J(s);return ro(h)||w_(h)}if(__(s))c=()=>J(s.useValue);else if(function OC(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...Nt(s.deps||[]));else if(function Zw(s){return!(!s||!s.useExisting)}(s))c=()=>Ge(J(s.useExisting));else{const h=J(s&&(s.useClass||s.provide));if(!function FC(s){return!!s.deps}(s))return ro(h)||w_(h);c=()=>new h(...Nt(s.deps))}return c}function tc(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function Sf(s,o){for(const u of s)Array.isArray(u)?Sf(u,o):u&&Re(u)?Sf(u.\u0275providers,o):o(u)}class Ug{}class Jw{}class Vg{resolveComponentFactory(o){throw function LC(s){const o=Error(`No component factory found for ${he(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Md=(()=>{class s{}return s.NULL=new Vg,s})();function t0(){return Ba(ur(),ve())}function Ba(s,o){return new zu(wr(s,o))}let zu=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=t0,s})();function n0(s){return s instanceof zu?s.nativeElement:s}class Rd{}let r0=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function UC(){const s=ve(),u=ar(ur().index,s);return(gi(u)?u:s)[11]}(),s})(),VC=(()=>{class s{}return s.\u0275prov=ut({token:s,providedIn:"root",factory:()=>null}),s})();class s0{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const o0=new s0("15.1.5"),I_={};function D_(s){return s.ngOriginalError}class Af{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o);this._console.error("ERROR",o),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&D_(o);for(;u&&D_(u);)u=D_(u);return u||null}}function Gu(s){return s instanceof Function?s():s}function h0(s,o,u){let c=s.length;for(;;){const h=s.indexOf(o,u);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const p=o.length;if(h+p===c||s.charCodeAt(h+p)<=32)return h}u=h+1}}const f0="ng-template";function p0(s,o,u){let c=0;for(;c<s.length;){let h=s[c++];if(u&&"class"===h){if(h=s[c],-1!==h0(h.toLowerCase(),o,0))return!0}else if(1===h){for(;c<s.length&&"string"==typeof(h=s[c++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function $g(s){return 4===s.type&&s.value!==f0}function WC(s,o,u){return o===(4!==s.type||u?s.value:f0)}function g0(s,o,u){let c=4;const h=s.attrs||[],p=function jg(s){for(let o=0;o<s.length;o++)if(Ji(s[o]))return o;return s.length}(h);let _=!1;for(let b=0;b<o.length;b++){const I=o[b];if("number"!=typeof I){if(!_)if(4&c){if(c=2|1&c,""!==I&&!WC(s,I,u)||""===I&&1===o.length){if(Ai(c))return!1;_=!0}}else{const S=8&c?I:o[++b];if(8&c&&null!==s.attrs){if(!p0(s.attrs,S,u)){if(Ai(c))return!1;_=!0}continue}const U=C_(8&c?"class":I,h,$g(s),u);if(-1===U){if(Ai(c))return!1;_=!0;continue}if(""!==S){let Y;Y=U>p?"":h[U+1].toLowerCase();const re=8&c?Y:null;if(re&&-1!==h0(re,S,0)||2&c&&S!==Y){if(Ai(c))return!1;_=!0}}}}else{if(!_&&!Ai(c)&&!Ai(I))return!1;if(_&&Ai(I))continue;_=!1,c=I|1&c}}return Ai(c)||_}function Ai(s){return 0==(1&s)}function C_(s,o,u,c){if(null===o)return-1;let h=0;if(c||!u){let p=!1;for(;h<o.length;){const _=o[h];if(_===s)return h;if(3===_||6===_)p=!0;else{if(1===_||2===_){let b=o[++h];for(;"string"==typeof b;)b=o[++h];continue}if(4===_)break;if(0===_){h+=4;continue}}h+=p?1:2}return-1}return function Hg(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===o)return u;u++}return-1}(o,s)}function m0(s,o,u=!1){for(let c=0;c<o.length;c++)if(g0(s,o[c],u))return!0;return!1}function _0(s,o){e:for(let u=0;u<o.length;u++){const c=o[u];if(s.length===c.length){for(let h=0;h<s.length;h++)if(s[h]!==c[h])continue e;return!0}}return!1}function T_(s,o){return s?":not("+o.trim()+")":o}function qC(s){let o=s[0],u=1,c=2,h="",p=!1;for(;u<s.length;){let _=s[u];if("string"==typeof _)if(2&c){const b=s[++u];h+="["+_+(b.length>0?'="'+b+'"':"")+"]"}else 8&c?h+="."+_:4&c&&(h+=" "+_);else""!==h&&!Ai(_)&&(o+=T_(p,h),h=""),c=_,p=p||!Ai(c);u++}return""!==h&&(o+=T_(p,h)),o}const Yt={};function v0(s){Mf(rn(),ve(),ni()+s,!1)}function Mf(s,o,u,c){if(!c)if(3==(3&o[2])){const p=s.preOrderCheckHooks;null!==p&&Sa(o,p,u)}else{const p=s.preOrderHooks;null!==p&&uo(o,p,0,u)}ms(u)}function Rf(s,o=null,u=null,c){const h=D0(s,o,u,c);return h.resolveInjectorInitializers(),h}function D0(s,o=null,u=null,c,h=new Set){const p=[u||Ze,RC(s)];return c=c||("object"==typeof s?void 0:he(s)),new Yw(p,o||Lg(),c||null,h)}let rc=(()=>{class s{static create(u,c){if(Array.isArray(u))return Rf({name:""},c,u,"");{const h=u.name??"";return Rf({name:h},u.parent,u.providers,h)}}}return s.THROW_IF_NOT_FOUND=ir,s.NULL=new Cd,s.\u0275prov=ut({token:s,providedIn:"any",factory:()=>Ge(Kw)}),s.__NG_ELEMENT_ID__=-1,s})();function Pd(s,o=dt.Default){const u=ve();return null===u?Ge(s,o):Tu(ur(),u,J(s),o)}function O0(){throw new Error("invalid")}function N0(s,o){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const p=u[c+1];if(-1!==p){const _=s.data[p];Ml(u[c]),_.contentQueries(2,o[p],p)}}}function R_(s,o,u,c,h,p,_,b,I,S,O){const U=o.blueprint.slice();return U[0]=h,U[2]=76|c,(null!==O||s&&1024&s[2])&&(U[2]|=1024),Cl(U),U[3]=U[15]=s,U[8]=u,U[10]=_||s&&s[10],U[11]=b||s&&s[11],U[12]=I||s&&s[12]||null,U[9]=S||s&&s[9]||null,U[6]=p,U[20]=function qs(){return hf++}(),U[21]=O,U[16]=2==o.type?s[16]:U,U}function kd(s,o,u,c,h){let p=s.data[o];if(null===p)p=function Fd(s,o,u,c,h){const p=Sl(),_=Fo(),I=s.data[o]=function dT(s,o,u,c,h,p){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?p:p&&p.parent,u,o,c,h);return null===s.firstChild&&(s.firstChild=I),null!==p&&(_?null==p.child&&null!==I.parent&&(p.child=I):null===p.next&&(p.next=I)),I}(s,o,u,c,h),function Xc(){return Ht.lFrame.inI18n}()&&(p.flags|=32);else if(64&p.type){p.type=u,p.value=c,p.attrs=h;const _=function ko(){const s=Ht.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();p.injectorIndex=null===_?-1:_.injectorIndex}return $i(p,!0),p}function Nf(s,o,u,c){if(0===u)return-1;const h=o.length;for(let p=0;p<u;p++)o.push(c),s.blueprint.push(c),s.data.push(null);return h}function x_(s,o,u){yu(o);try{const c=s.viewQuery;null!==c&&Vd(1,c,u);const h=s.template;null!==h&&O_(s,o,h,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&N0(s,o),s.staticViewQueries&&Vd(2,s.viewQuery,u);const p=s.components;null!==p&&function lT(s,o){for(let u=0;u<o.length;u++)_T(s,o[u])}(o,p)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,hg()}}function Pf(s,o,u,c){const h=o[2];if(128!=(128&h)){yu(o);try{Cl(o),function Uo(s){return Ht.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&O_(s,o,u,2,c);const _=3==(3&h);if(_){const S=s.preOrderCheckHooks;null!==S&&Sa(o,S,null)}else{const S=s.preOrderHooks;null!==S&&uo(o,S,0,null),Us(o,0)}if(function $0(s){for(let o=si(s);null!==o;o=Ds(o)){if(!o[2])continue;const u=o[9];for(let c=0;c<u.length;c++){const h=u[c];512&h[2]||ao(h[3],1),h[2]|=512}}}(o),function mT(s){for(let o=si(s);null!==o;o=Ds(o))for(let u=10;u<o.length;u++){const c=o[u],h=c[1];oo(c)&&Pf(h,c,h.template,c[8])}}(o),null!==s.contentQueries&&N0(s,o),_){const S=s.contentCheckHooks;null!==S&&Sa(o,S)}else{const S=s.contentHooks;null!==S&&uo(o,S,1),Us(o,1)}!function uT(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const h=u[c];if(h<0)ms(~h);else{const p=h,_=u[++c],b=u[++c];Al(_,p),b(2,o[p])}}}finally{ms(-1)}}(s,o);const b=s.components;null!==b&&function P0(s,o){for(let u=0;u<o.length;u++)yT(s,o[u])}(o,b);const I=s.viewQuery;if(null!==I&&Vd(2,I,c),_){const S=s.viewCheckHooks;null!==S&&Sa(o,S)}else{const S=s.viewHooks;null!==S&&uo(o,S,2),Us(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,ao(o[3],-1))}finally{hg()}}}function O_(s,o,u,c,h){const p=ni(),_=2&c;try{ms(-1),_&&o.length>22&&Mf(s,o,22,!1),u(c,h)}finally{ms(p)}}function Wg(s,o,u){if(hs(o)){const h=o.directiveEnd;for(let p=o.directiveStart;p<h;p++){const _=s.data[p];_.contentQueries&&_.contentQueries(1,u[p],p)}}}function kf(s,o,u){Zc()&&(function Ix(s,o,u,c){const h=u.directiveStart,p=u.directiveEnd;_a(u)&&function Ei(s,o,u){const c=wr(o,s),h=Zs(u),p=s[10],_=oi(s,R_(s,h,null,u.onPush?32:16,c,o,p,p.createRenderer(c,u),null,null,null));s[o.index]=_}(o,u,s.data[h+u.componentOffset]),s.firstCreatePass||vs(u,o),qr(c,o);const _=u.initialInputs;for(let b=h;b<p;b++){const I=s.data[b],S=es(o,s,b,u);qr(S,o),null!==_&&P_(0,b-h,S,I,0,_),Er(I)&&(ar(u.index,o)[8]=es(o,s,b,u))}}(s,o,u,wr(u,o)),64==(64&u.flags)&&Ee(s,o,u))}function an(s,o,u=wr){const c=o.localNames;if(null!==c){let h=o.index+1;for(let p=0;p<c.length;p+=2){const _=c[p+1],b=-1===_?u(o,s):s[_];s[h++]=b}}}function Zs(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=mo(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function mo(s,o,u,c,h,p,_,b,I,S){const O=22+c,U=O+h,Y=function ic(s,o){const u=[];for(let c=0;c<o;c++)u.push(c<s?null:Yt);return u}(O,U),re="function"==typeof S?S():S;return Y[1]={type:s,blueprint:Y,template:u,queries:null,viewQuery:b,declTNode:o,data:Y.slice().fill(null,O),bindingStartIndex:O,expandoStartIndex:U,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:I,consts:re,incompleteFirstPass:!1}}function cT(s,o,u,c){const h=Zg(o);null===u?h.push(c):(h.push(u),s.firstCreatePass&&z0(s).push(c,h.length-1))}function Kg(s,o,u,c){for(let h in s)if(s.hasOwnProperty(h)){u=null===u?{}:u;const p=s[h];null===c?k0(u,o,h,p):c.hasOwnProperty(h)&&k0(u,o,c[h],p)}return u}function k0(s,o,u,c){s.hasOwnProperty(u)?s[u].push(o,c):s[u]=[o,c]}function F0(s,o){const u=ar(o,s);16&u[2]||(u[2]|=32)}function L0(s,o,u,c){let h=!1;if(Zc()){const p=null===c?null:{"":-1},_=function Ff(s,o){const u=s.directiveRegistry;let c=null,h=null;if(u)for(let p=0;p<u.length;p++){const _=u[p];if(m0(o,_.selectors,!1))if(c||(c=[]),Er(_))if(null!==_.findHostDirectiveDefs){const b=[];h=h||new Map,_.findHostDirectiveDefs(_,b,h),c.unshift(...b,_),sn(s,o,b.length)}else c.unshift(_),sn(s,o,0);else h=h||new Map,_.findHostDirectiveDefs?.(_,c,h),c.push(_)}return null===c?null:[c,h]}(s,u);let b,I;null===_?b=I=null:[b,I]=_,null!==b&&(h=!0,U0(s,o,u,b,p,I)),p&&function Wu(s,o,u){if(o){const c=s.localNames=[];for(let h=0;h<o.length;h+=2){const p=u[o[h+1]];if(null==p)throw new ye(-301,!1);c.push(o[h],p)}}}(u,c,p)}return u.mergedAttrs=ji(u.mergedAttrs,u.attrs),h}function U0(s,o,u,c,h,p){for(let S=0;S<c.length;S++)kl(vs(u,o),s,c[S].type);!function V0(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}(u,s.data.length,c.length);for(let S=0;S<c.length;S++){const O=c[S];O.providersResolver&&O.providersResolver(O)}let _=!1,b=!1,I=Nf(s,o,c.length,null);for(let S=0;S<c.length;S++){const O=c[S];u.mergedAttrs=ji(u.mergedAttrs,O.hostAttrs),pT(s,u,o,I,O),N_(I,O,h),null!==O.contentQueries&&(u.flags|=4),(null!==O.hostBindings||null!==O.hostAttrs||0!==O.hostVars)&&(u.flags|=64);const U=O.type.prototype;!_&&(U.ngOnChanges||U.ngOnInit||U.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),_=!0),!b&&(U.ngOnChanges||U.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),b=!0),I++}!function hT(s,o,u){const h=o.directiveEnd,p=s.data,_=o.attrs,b=[];let I=null,S=null;for(let O=o.directiveStart;O<h;O++){const U=p[O],Y=u?u.get(U):null,De=Y?Y.outputs:null;I=Kg(U.inputs,O,I,Y?Y.inputs:null),S=Kg(U.outputs,O,S,De);const We=null===I||null===_||$g(o)?null:gT(I,O,_);b.push(We)}null!==I&&(I.hasOwnProperty("class")&&(o.flags|=8),I.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=b,o.inputs=I,o.outputs=S}(s,u,p)}function Ee(s,o,u){const c=u.directiveStart,h=u.directiveEnd,p=u.index,_=function Wh(){return Ht.lFrame.currentDirectiveIndex}();try{ms(p);for(let b=c;b<h;b++){const I=s.data[b],S=o[b];Ls(b),(null!==I.hostBindings||0!==I.hostVars||null!==I.hostAttrs)&&qi(I,S)}}finally{ms(-1),Ls(_)}}function qi(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function sn(s,o,u){o.componentOffset=u,(s.components||(s.components=[])).push(o.index)}function N_(s,o,u){if(u){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)u[o.exportAs[c]]=s;Er(o)&&(u[""]=s)}}function pT(s,o,u,c,h){s.data[c]=h;const p=h.factory||(h.factory=ro(h.type)),_=new _u(p,Er(h),Pd);s.blueprint[c]=_,u[c]=_,function wx(s,o,u,c,h){const p=h.hostBindings;if(p){let _=s.hostBindingOpCodes;null===_&&(_=s.hostBindingOpCodes=[]);const b=~o.index;(function bx(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(_)!=b&&_.push(b),_.push(u,c,p)}}(s,o,c,Nf(s,u,h.hostVars,Yt),h)}function Xo(s,o,u,c,h,p){const _=wr(s,o);!function Ld(s,o,u,c,h,p,_){if(null==p)s.removeAttribute(o,h,u);else{const b=null==_?Te(p):_(p,c||"",h);s.setAttribute(o,h,b,u)}}(o[11],_,p,s.value,u,c,h)}function P_(s,o,u,c,h,p){const _=p[o];if(null!==_){const b=c.setInput;for(let I=0;I<_.length;){const S=_[I++],O=_[I++],U=_[I++];null!==b?c.setInput(u,U,S,O):u[O]=U}}}function gT(s,o,u){let c=null,h=0;for(;h<u.length;){const p=u[h];if(0!==p)if(5!==p){if("number"==typeof p)break;if(s.hasOwnProperty(p)){null===c&&(c=[]);const _=s[p];for(let b=0;b<_.length;b+=2)if(_[b]===o){c.push(p,_[b+1],u[h+1]);break}}h+=2}else h+=2;else h+=4}return c}function B0(s,o,u,c){return[s,!0,!1,o,null,0,c,u,null,null]}function yT(s,o){const u=ar(o,s);if(oo(u)){const c=u[1];48&u[2]?Pf(c,u,c.template,u[8]):u[5]>0&&k_(u)}}function k_(s){for(let c=si(s);null!==c;c=Ds(c))for(let h=10;h<c.length;h++){const p=c[h];if(oo(p))if(512&p[2]){const _=p[1];Pf(_,p,_.template,p[8])}else p[5]>0&&k_(p)}const u=s[1].components;if(null!==u)for(let c=0;c<u.length;c++){const h=ar(u[c],s);oo(h)&&h[5]>0&&k_(h)}}function _T(s,o){const u=ar(o,s),c=u[1];(function vT(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(c,u),x_(c,u,u[8])}function oi(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function Ud(s){for(;s;){s[2]|=32;const o=_t(s);if(ig(s)&&!o)return s;s=o}return null}function Lf(s,o,u,c=!0){const h=o[10];h.begin&&h.begin();try{Pf(s,o,s.template,u)}catch(_){throw c&&W0(o,_),_}finally{h.end&&h.end()}}function Vd(s,o,u){Ml(0),o(s,u)}function Zg(s){return s[7]||(s[7]=[])}function z0(s){return s.cleanup||(s.cleanup=[])}function W0(s,o){const u=s[9],c=u?u.get(Af,null):null;c&&c.handleError(o)}function F_(s,o,u,c,h){for(let p=0;p<u.length;){const _=u[p++],b=u[p++],I=o[_],S=s.data[_];null!==S.setInput?S.setInput(I,h,c,b):I[b]=h}}function qu(s,o,u){let c=u?s.styles:null,h=u?s.classes:null,p=0;if(null!==o)for(let _=0;_<o.length;_++){const b=o[_];"number"==typeof b?p=b:1==p?h=me(h,b):2==p&&(c=me(c,b+": "+o[++_]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=h:s.classesWithoutHost=h}function Uf(s,o,u,c,h=!1){for(;null!==u;){const p=o[u.index];if(null!==p&&c.push(Un(p)),mi(p))for(let b=10;b<p.length;b++){const I=p[b],S=I[1].firstChild;null!==S&&Uf(I[1],I,S,c)}const _=u.type;if(8&_)Uf(s,o,u.child,c);else if(32&_){const b=Ne(u,o);let I;for(;I=b();)c.push(I)}else if(16&_){const b=Ow(o,u);if(Array.isArray(b))c.push(...b);else{const I=_t(o[16]);Uf(I[1],I,b,c,!0)}}u=h?u.projectionNext:u.next}return c}class Ku{get rootNodes(){const o=this._lView,u=o[1];return Uf(u,o,u.firstChild,[])}constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(mi(o)){const u=o[8],c=u?u.indexOf(this):-1;c>-1&&(e_(o,c),Oa(u,c))}this._attachedToViewContainer=!1}Aw(this._lView[1],this._lView)}onDestroy(o){cT(this._lView[1],this._lView,null,o)}markForCheck(){Ud(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Lf(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ye(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function _f(s,o){Kl(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new ye(902,!1);this._appRef=o}}class q0 extends Ku{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;Lf(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class K0 extends Md{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=hn(o);return new Bd(u,this.ngModule)}}function Z0(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class wT{constructor(o,u){this.injector=o,this.parentInjector=u}get(o,u,c){c=Rt(c);const h=this.injector.get(o,I_,c);return h!==I_||u===I_?h:this.parentInjector.get(o,u,c)}}class Bd extends Jw{get inputs(){return Z0(this.componentDef.inputs)}get outputs(){return Z0(this.componentDef.outputs)}constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function KC(s){return s.map(qC).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}create(o,u,c,h){let p=(h=h||this.ngModule)instanceof ec?h:h?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const _=p?new wT(o,p):o,b=_.get(Rd,null);if(null===b)throw new ye(407,!1);const I=_.get(VC,null),S=b.createRenderer(null,this.componentDef),O=this.componentDef.selectors[0][0]||"div",U=c?function qg(s,o,u){return s.selectRootElement(o,u===Oe.ShadowDom)}(S,c,this.componentDef.encapsulation):ku(S,O,function ET(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(O)),Y=this.componentDef.onPush?288:272,re=mo(0,null,null,1,0,null,null,null,null,null),De=R_(null,re,null,Y,null,null,b,S,I,_,null);let We,et;yu(De);try{const yt=this.componentDef;let Lt,Ue=null;yt.findHostDirectiveDefs?(Lt=[],Ue=new Map,yt.findHostDirectiveDefs(yt,Lt,Ue),Lt.push(yt)):Lt=[yt];const Zt=function U_(s,o){const u=s[1];return s[22]=o,kd(u,22,2,"#host",null)}(De,U),Ln=function Y0(s,o,u,c,h,p,_,b){const I=h[1];!function Vf(s,o,u,c){for(const h of s)o.mergedAttrs=ji(o.mergedAttrs,h.hostAttrs);null!==o.mergedAttrs&&(qu(o,o.mergedAttrs,!0),null!==u&&Bu(c,u,o))}(c,s,o,_);const S=p.createRenderer(o,u),O=R_(h,Zs(u),null,u.onPush?32:16,h[s.index],s,p,S,b||null,null,null);return I.firstCreatePass&&sn(I,s,c.length-1),oi(h,O),h[s.index]=O}(Zt,U,yt,Lt,De,b,S);et=pu(re,22),U&&function V_(s,o,u,c){if(c)vu(s,u,["ng-version",o0.full]);else{const{attrs:h,classes:p}=function ZC(s){const o=[],u=[];let c=1,h=2;for(;c<s.length;){let p=s[c];if("string"==typeof p)2===h?""!==p&&o.push(p,s[++c]):8===h&&u.push(p);else{if(!Ai(h))break;h=p}c++}return{attrs:o,classes:u}}(o.selectors[0]);h&&vu(s,u,h),p&&p.length>0&&Mg(s,u,p.join(" "))}}(S,yt,U,c),void 0!==u&&function B_(s,o,u){const c=s.projection=[];for(let h=0;h<o.length;h++){const p=u[h];c.push(null!=p?Array.from(p):null)}}(et,this.ngContentSelectors,u),We=function IT(s,o,u,c,h,p){const _=ur(),b=h[1],I=wr(_,h);U0(b,h,_,u,null,c);for(let O=0;O<u.length;O++)qr(es(h,b,_.directiveStart+O,_),h);Ee(b,h,_),I&&qr(I,h);const S=es(h,b,_.directiveStart+_.componentOffset,_);if(s[8]=h[8]=S,null!==p)for(const O of p)O(S,o);return Wg(b,_,s),S}(Ln,yt,Lt,Ue,De,[DT]),x_(re,De,null)}finally{hg()}return new L_(this.componentType,We,Ba(et,De),De,et)}}class L_ extends Ug{constructor(o,u,c,h,p){super(),this.location=c,this._rootLView=h,this._tNode=p,this.instance=u,this.hostView=this.changeDetectorRef=new q0(h),this.componentType=o}setInput(o,u){const c=this._tNode.inputs;let h;if(null!==c&&(h=c[o])){const p=this._rootLView;F_(p[1],p,h,o,u),F0(p,this._tNode.index)}}get injector(){return new Es(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function DT(){const s=ur();Ta(ve()[1],s)}function Qg(s){let o=function Yg(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const c=[s];for(;o;){let h;if(Er(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new ye(903,!1);h=o.\u0275dir}if(h){if(u){c.push(h);const _=s;_.inputs=Bf(s.inputs),_.declaredInputs=Bf(s.declaredInputs),_.outputs=Bf(s.outputs);const b=h.hostBindings;b&&ST(s,b);const I=h.viewQuery,S=h.contentQueries;if(I&&CT(s,I),S&&TT(s,S),_e(s.inputs,h.inputs),_e(s.declaredInputs,h.declaredInputs),_e(s.outputs,h.outputs),Er(h)&&h.data.animation){const O=s.data;O.animation=(O.animation||[]).concat(h.data.animation)}}const p=h.features;if(p)for(let _=0;_<p.length;_++){const b=p[_];b&&b.ngInherit&&b(s),b===Qg&&(u=!1)}}o=Object.getPrototypeOf(o)}!function Q0(s){let o=0,u=null;for(let c=s.length-1;c>=0;c--){const h=s[c];h.hostVars=o+=h.hostVars,h.hostAttrs=ji(h.hostAttrs,u=ji(u,h.hostAttrs))}}(c)}function Bf(s){return s===mt?{}:s===Ze?[]:s}function CT(s,o){const u=s.viewQuery;s.viewQuery=u?(c,h)=>{o(c,h),u(c,h)}:o}function TT(s,o){const u=s.contentQueries;s.contentQueries=u?(c,h,p)=>{o(c,h,p),u(c,h,p)}:o}function ST(s,o){const u=s.hostBindings;s.hostBindings=u?(c,h)=>{o(c,h),u(c,h)}:o}let Jg=null;function sc(){if(!Jg){const s=Ut.Symbol;if(s&&s.iterator)Jg=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<o.length;++u){const c=o[u];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Jg=c)}}}return Jg}function em(s){return!!W_(s)&&(Array.isArray(s)||!(s instanceof Map)&&sc()in s)}function W_(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function wi(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function q_(s,o,u,c){const h=ve();return wi(h,gs(),o)&&(rn(),Xo(En(),h,s,o,u,c)),q_}function NT(s,o,u,c,h,p,_,b){const I=ve(),S=rn(),O=s+22,U=S.firstCreatePass?function Y_(s,o,u,c,h,p,_,b,I){const S=o.consts,O=kd(o,s,4,_||null,Bi(S,b));L0(o,u,O,Bi(S,I)),Ta(o,O);const U=O.tViews=mo(2,O,c,h,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,S);return null!==o.queries&&(o.queries.template(o,O),U.queries=o.queries.embeddedTView(O)),O}(O,S,I,o,u,c,h,p,_):S.data[O];$i(U,!1);const Y=I[11].createComment("");Ag(S,I,Y,U),qr(Y,I),oi(I,I[O]=B0(Y,I,Y,U)),bl(U)&&kf(S,I,U),null!=_&&an(I,U,b)}function kT(s){return function ps(s,o){return s[o]}(function mu(){return Ht.lFrame.contextLView}(),22+s)}function Q_(s,o,u){const c=ve();return wi(c,gs(),o)&&function Cs(s,o,u,c,h,p,_,b){const I=wr(o,u);let O,S=o.inputs;!b&&null!=S&&(O=S[c])?(F_(s,u,O,c,h),_a(o)&&F0(u,o.index)):3&o.type&&(c=function fT(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),h=null!=_?_(h,o.value||"",c):h,p.setProperty(I,c,h))}(rn(),En(),c,s,o,c[11],u,!1),Q_}function X_(s,o,u,c,h){const _=h?"class":"style";F_(s,u,o.inputs[_],_,c)}function J_(s,o,u,c){const h=ve(),p=rn(),_=22+s,b=h[11],I=h[_]=ku(b,o,function fg(){return Ht.lFrame.currentNamespace}()),S=p.firstCreatePass?function Tx(s,o,u,c,h,p,_){const b=o.consts,S=kd(o,s,2,h,Bi(b,p));return L0(o,u,S,Bi(b,_)),null!==S.attrs&&qu(S,S.attrs,!1),null!==S.mergedAttrs&&qu(S,S.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,S),S}(_,p,h,0,o,u,c):p.data[_];return $i(S,!0),Bu(b,I,S),32!=(32&S.flags)&&Ag(p,h,I,S),0===function Ia(){return Ht.lFrame.elementDepthCount}()&&qr(I,h),function jh(){Ht.lFrame.elementDepthCount++}(),bl(S)&&(kf(p,h,S),Wg(p,S,h)),null!==c&&an(h,S),J_}function rm(){let s=ur();Fo()?Qc():(s=s.parent,$i(s,!1));const o=s;!function Da(){Ht.lFrame.elementDepthCount--}();const u=rn();return u.firstCreatePass&&(Ta(u,s),hs(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function id(s){return 0!=(8&s.flags)}(o)&&X_(u,o,ve(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Vs(s){return 0!=(16&s.flags)}(o)&&X_(u,o,ve(),o.stylesWithoutHost,!1),rm}function nb(s,o,u,c){return J_(s,o,u,c),rm(),nb}function ev(s,o,u){const c=ve(),h=rn(),p=s+22,_=h.firstCreatePass?function Sx(s,o,u,c,h){const p=o.consts,_=Bi(p,c),b=kd(o,s,8,"ng-container",_);return null!==_&&qu(b,_,!0),L0(o,u,b,Bi(p,h)),null!==o.queries&&o.queries.elementStart(o,b),b}(p,h,c,o,u):h.data[p];$i(_,!0);const b=c[p]=c[11].createComment("");return Ag(h,c,b,_),qr(b,c),bl(_)&&(kf(h,c,_),Wg(h,_,c)),null!=u&&an(c,_),ev}function tv(){let s=ur();const o=rn();return Fo()?Qc():(s=s.parent,$i(s,!1)),o.firstCreatePass&&(Ta(o,s),hs(s)&&o.queries.elementEnd(s)),tv}function rb(){return ve()}function nv(s){return!!s&&"function"==typeof s.then}function rv(s){return!!s&&"function"==typeof s.subscribe}const iv=rv;function im(s,o,u,c){const h=ve(),p=rn(),_=ur();return function ov(s,o,u,c,h,p,_){const b=bl(c),S=s.firstCreatePass&&z0(s),O=o[8],U=Zg(o);let Y=!0;if(3&c.type||_){const We=wr(c,o),et=_?_(We):We,yt=U.length,Lt=_?Zt=>_(Un(Zt[c.index])):c.index;let Ue=null;if(!_&&b&&(Ue=function ib(s,o,u,c){const h=s.cleanup;if(null!=h)for(let p=0;p<h.length-1;p+=2){const _=h[p];if(_===u&&h[p+1]===c){const b=o[7],I=h[p+2];return b.length>I?b[I]:null}"string"==typeof _&&(p+=2)}return null}(s,o,h,c.index)),null!==Ue)(Ue.__ngLastListenerFn__||Ue).__ngNextListenerFn__=p,Ue.__ngLastListenerFn__=p,Y=!1;else{p=sm(c,o,O,p,!1);const Zt=u.listen(et,h,p);U.push(p,Zt),S&&S.push(h,Lt,yt,yt+1)}}else p=sm(c,o,O,p,!1);const re=c.outputs;let De;if(Y&&null!==re&&(De=re[h])){const We=De.length;if(We)for(let et=0;et<We;et+=2){const Ln=o[De[et]][De[et+1]].subscribe(p),un=U.length;U.push(p,Ln),S&&S.push(h,c.index,un,-(un+1))}}}(p,h,h[11],_,s,o,c),im}function av(s,o,u,c){try{return!1!==u(c)}catch(h){return W0(s,h),!1}}function sm(s,o,u,c,h){return function p(_){if(_===Function)return c;Ud(s.componentOffset>-1?ar(s.index,o):o);let I=av(o,0,c,_),S=p.__ngNextListenerFn__;for(;S;)I=av(o,0,S,_)&&I,S=S.__ngNextListenerFn__;return h&&!1===I&&(_.preventDefault(),_.returnValue=!1),I}}function LT(s=1){return function Wy(s){return(Ht.lFrame.contextLView=function td(s,o){for(;s>0;)o=o[15],s--;return o}(s,Ht.lFrame.contextLView))[8]}(s)}function sb(s,o){let u=null;const c=function y0(s){const o=s.attrs;if(null!=o){const u=o.indexOf(5);if(!(1&u))return o[u+1]}return null}(s);for(let h=0;h<o.length;h++){const p=o[h];if("*"!==p){if(null===c?m0(s,p,!0):_0(c,p))return h}else u=h}return u}function om(s){const o=ve()[16][6];if(!o.projection){const c=o.projection=Hs(s?s.length:1,null),h=c.slice();let p=o.child;for(;null!==p;){const _=s?sb(p,s):0;null!==_&&(h[_]?h[_].projectionNext=p:c[_]=p,h[_]=p),p=p.next}}}function ob(s,o=0,u){const c=ve(),h=rn(),p=kd(h,22+s,16,null,u||null);null===p.projection&&(p.projection=o),Qc(),32!=(32&p.flags)&&function fC(s,o,u){s_(o[11],0,o,u,Fu(s,u,o),t_(u.parent||o[6],u,o))}(h,c,p)}function Qu(s,o){return s<<17|o<<2}function Xu(s){return s>>17&32767}function lv(s){return 2|s}function hc(s){return(131068&s)>>2}function ai(s,o){return-131069&s|o<<2}function Kr(s){return 1|s}function dv(s,o,u,c,h){const p=s[u+1],_=null===o;let b=c?Xu(p):hc(p),I=!1;for(;0!==b&&(!1===I||_);){const O=s[b+1];Mi(s[b],o)&&(I=!0,s[b+1]=c?Kr(O):lv(O)),b=c?Xu(O):hc(O)}I&&(s[u+1]=c?lv(p):Kr(p))}function Mi(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&on(s,o)>=0}function Zf(s,o){return function Ts(s,o,u,c){const h=ve(),p=rn(),_=function Fs(s){const o=Ht.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,u}(2);p.firstUpdatePass&&function Wd(s,o,u,c){const h=s.data;if(null===h[u+1]){const p=h[ni()],_=function yb(s,o){return o>=s.expandoStartIndex}(s,u);(function hm(s,o){return 0!=(s.flags&(o?8:16))})(p,c)&&null===o&&!_&&(o=!1),o=function $T(s,o,u,c){const h=function Ca(s){const o=Ht.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let p=c?o.residualClasses:o.residualStyles;if(null===h)0===(c?o.classBindings:o.styleBindings)&&(u=pc(u=qd(null,s,o,u,c),o.attrs,c),p=null);else{const _=o.directiveStylingLast;if(-1===_||s[_]!==h)if(u=qd(h,s,o,u,c),null===p){let I=function Yf(s,o,u){const c=u?o.classBindings:o.styleBindings;if(0!==hc(c))return s[Xu(c)]}(s,o,c);void 0!==I&&Array.isArray(I)&&(I=qd(null,s,o,I[1],c),I=pc(I,o.attrs,c),function jT(s,o,u,c){s[Xu(u?o.classBindings:o.styleBindings)]=c}(s,o,c,I))}else p=function HT(s,o,u){let c;const h=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<h;p++)c=pc(c,s[p].hostAttrs,u);return pc(c,o.attrs,u)}(s,o,c)}return void 0!==p&&(c?o.residualClasses=p:o.residualStyles=p),u}(h,p,o,c),function db(s,o,u,c,h,p){let _=p?o.classBindings:o.styleBindings,b=Xu(_),I=hc(_);s[c]=u;let O,S=!1;if(Array.isArray(u)?(O=u[1],(null===O||on(u,O)>0)&&(S=!0)):O=u,h)if(0!==I){const Y=Xu(s[b+1]);s[c+1]=Qu(Y,b),0!==Y&&(s[Y+1]=ai(s[Y+1],c)),s[b+1]=function UT(s,o){return 131071&s|o<<17}(s[b+1],c)}else s[c+1]=Qu(b,0),0!==b&&(s[b+1]=ai(s[b+1],c)),b=c;else s[c+1]=Qu(I,0),0===b?b=c:s[I+1]=ai(s[I+1],c),I=c;S&&(s[c+1]=lv(s[c+1])),dv(s,O,c,!0),dv(s,O,c,!1),function cv(s,o,u,c,h){const p=h?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof o&&on(p,o)>=0&&(u[c+1]=Kr(u[c+1]))}(o,O,s,c,p),_=Qu(b,I),p?o.classBindings=_:o.styleBindings=_}(h,p,o,u,_,c)}}(p,s,_,c),o!==Yt&&wi(h,_,o)&&function Qf(s,o,u,c,h,p,_,b){if(!(3&o.type))return;const I=s.data,S=I[b+1],O=function um(s){return 1==(1&s)}(S)?dm(I,o,u,h,hc(S),_):void 0;Kd(O)||(Kd(p)||function uv(s){return 2==(2&s)}(S)&&(p=dm(I,null,u,h,b,_)),function If(s,o,u,c,h){if(o)h?s.addClass(u,c):s.removeClass(u,c);else{let p=-1===c.indexOf("-")?void 0:Gi.DashCase;null==h?s.removeStyle(u,c,p):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),p|=Gi.Important),s.setStyle(u,c,h,p))}}(c,_,ks(ni(),u),h,p))}(p,p.data[ni()],h,h[11],s,h[_+1]=function gv(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=he(po(s)))),s}(o,u),c,_)}(s,o,null,!0),Zf}function qd(s,o,u,c,h){let p=null;const _=u.directiveEnd;let b=u.directiveStylingLast;for(-1===b?b=u.directiveStart:b++;b<_&&(p=o[b],c=pc(c,p.hostAttrs,h),p!==s);)b++;return null!==s&&(u.directiveStylingLast=b),c}function pc(s,o,u){const c=u?1:2;let h=-1;if(null!==o)for(let p=0;p<o.length;p++){const _=o[p];"number"==typeof _?h=_:h===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Gr(s,_,!!u||o[++p]))}return void 0===s?null:s}function dm(s,o,u,c,h,p){const _=null===o;let b;for(;h>0;){const I=s[h],S=Array.isArray(I),O=S?I[1]:I,U=null===O;let Y=u[h+1];Y===Yt&&(Y=U?Ze:void 0);let re=U?pd(Y,c):O===c?Y:void 0;if(S&&!Kd(re)&&(re=pd(I,c)),Kd(re)&&(b=re,_))return b;const De=s[h+1];h=_?Xu(De):hc(De)}if(null!==o){let I=p?o.residualClasses:o.residualStyles;null!=I&&(b=pd(I,c))}return b}function Kd(s){return void 0!==s}function mv(s,o=""){const u=ve(),c=rn(),h=s+22,p=c.firstCreatePass?kd(c,h,1,o,null):c.data[h],_=u[h]=function La(s,o){return s.createText(o)}(u[11],o);Ag(c,u,_,p),$i(p,!1)}function fm(s){return pm("",s,""),fm}function pm(s,o,u){const c=ve(),h=function oc(s,o,u,c){return wi(s,gs(),u)?o+Te(u)+c:Yt}(c,s,o,u);return h!==Yt&&function $a(s,o,u){const c=ks(o,s);!function Pu(s,o,u){s.setValue(o,u)}(s[11],c,u)}(c,ni(),h),pm}const mc=void 0;var Ab=["en",[["a","p"],["AM","PM"],mc],[["AM","PM"],mc,mc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],mc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],mc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",mc,"{1} 'at' {0}",mc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function yc(s){const u=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===c?1:5}];let ja={};function _c(s){const o=function Mb(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=Mv(o);if(u)return u;const c=o.split("-")[0];if(u=Mv(c),u)return u;if("en"===c)return Ab;throw new ye(701,!1)}function Ri(s){return _c(s)[Ot.PluralCase]}function Mv(s){return s in ja||(ja[s]=Ut.ng&&Ut.ng.common&&Ut.ng.common.locales&&Ut.ng.common.locales[s]),ja[s]}var Ot=(()=>((Ot=Ot||{})[Ot.LocaleId=0]="LocaleId",Ot[Ot.DayPeriodsFormat=1]="DayPeriodsFormat",Ot[Ot.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ot[Ot.DaysFormat=3]="DaysFormat",Ot[Ot.DaysStandalone=4]="DaysStandalone",Ot[Ot.MonthsFormat=5]="MonthsFormat",Ot[Ot.MonthsStandalone=6]="MonthsStandalone",Ot[Ot.Eras=7]="Eras",Ot[Ot.FirstDayOfWeek=8]="FirstDayOfWeek",Ot[Ot.WeekendRange=9]="WeekendRange",Ot[Ot.DateFormat=10]="DateFormat",Ot[Ot.TimeFormat=11]="TimeFormat",Ot[Ot.DateTimeFormat=12]="DateTimeFormat",Ot[Ot.NumberSymbols=13]="NumberSymbols",Ot[Ot.NumberFormats=14]="NumberFormats",Ot[Ot.CurrencyCode=15]="CurrencyCode",Ot[Ot.CurrencySymbol=16]="CurrencySymbol",Ot[Ot.CurrencyName=17]="CurrencyName",Ot[Ot.Currencies=18]="Currencies",Ot[Ot.Directionality=19]="Directionality",Ot[Ot.PluralCase=20]="PluralCase",Ot[Ot.ExtraData=21]="ExtraData",Ot))();const vc="en-US";let Xd=vc;function jv(s,o,u,c,h){if(s=J(s),Array.isArray(s))for(let p=0;p<s.length;p++)jv(s[p],o,u,c,h);else{const p=rn(),_=ve();let b=Jl(s)?s:J(s.provide),I=Qw(s);const S=ur(),O=1048575&S.providerIndexes,U=S.directiveStart,Y=S.providerIndexes>>20;if(Jl(s)||!s.multi){const re=new _u(I,h,Pd),De=Fm(b,o,h?O:O+Y,U);-1===De?(kl(vs(S,_),p,b),km(p,s,o.length),o.push(b),S.directiveStart++,S.directiveEnd++,h&&(S.providerIndexes+=1048576),u.push(re),_.push(re)):(u[De]=re,_[De]=re)}else{const re=Fm(b,o,O+Y,U),De=Fm(b,o,O,O+Y),et=De>=0&&u[De];if(h&&!et||!h&&!(re>=0&&u[re])){kl(vs(S,_),p,b);const yt=function Xb(s,o,u,c,h){const p=new _u(s,u,Pd);return p.multi=[],p.index=o,p.componentProviders=0,oh(p,h,c&&!u),p}(h?Hv:Qb,u.length,h,c,I);!h&&et&&(u[De].providerFactory=yt),km(p,s,o.length,0),o.push(b),S.directiveStart++,S.directiveEnd++,h&&(S.providerIndexes+=1048576),u.push(yt),_.push(yt)}else km(p,s,re>-1?re:De,oh(u[h?De:re],I,!h&&c));!h&&c&&et&&u[De].componentProviders++}}}function km(s,o,u,c){const h=Jl(o),p=function v_(s){return!!s.useClass}(o);if(h||p){const I=(p?J(o.useClass):o).prototype.ngOnDestroy;if(I){const S=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const O=S.indexOf(u);-1===O?S.push(u,[c,I]):S[O+1].push(c,I)}else S.push(u,I)}}}function oh(s,o,u){return u&&s.componentProviders++,s.multi.push(o)-1}function Fm(s,o,u,c){for(let h=u;h<c;h++)if(o[h]===s)return h;return-1}function Qb(s,o,u,c){return lp(this.multi,[])}function Hv(s,o,u,c){const h=this.multi;let p;if(this.providerFactory){const _=this.providerFactory.componentProviders,b=es(u,u[1],this.providerFactory.index,c);p=b.slice(0,_),lp(h,p);for(let I=_;I<b.length;I++)p.push(b[I])}else p=[],lp(h,p);return p}function lp(s,o){for(let u=0;u<s.length;u++)o.push((0,s[u])());return o}function cp(s,o=[]){return u=>{u.providersResolver=(c,h)=>function Pm(s,o,u){const c=rn();if(c.firstCreatePass){const h=Er(s);jv(u,c.data,c.blueprint,h,!0),jv(o,c.data,c.blueprint,h,!1)}}(c,h?h(s):s,o)}}class wc{}class zv{}function bc(s,o){return new Gv(s,o??null)}class Gv extends wc{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new K0(this);const c=$r(o);this._bootstrapComponents=Gu(c.bootstrap),this._r3Injector=D0(o,u,[{provide:wc,useValue:this},{provide:Md,useValue:this.componentFactoryResolver}],he(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Lm extends zv{constructor(o){super(),this.moduleType=o}create(o){return new Gv(this.moduleType,o)}}class Jb extends wc{constructor(o,u,c){super(),this.componentFactoryResolver=new K0(this),this.instance=null;const h=new Yw([...o,{provide:wc,useValue:this},{provide:Md,useValue:this.componentFactoryResolver}],u||Lg(),c,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function ah(s,o,u=null){return new Jb(s,o,u).injector}let Ss=(()=>{class s{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const c=Td(0,u.type),h=c.length>0?ah([c],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,h)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=ut({token:s,providedIn:"environment",factory:()=>new s(Ge(ec))}),s})();function Wv(s){s.getStandaloneInjector=o=>o.get(Ss).getOrCreateStandaloneInjector(s)}function hr(s,o,u,c){return function Yv(s,o,u,c,h,p){const _=o+u;return wi(s,_,h)?function Jo(s,o,u){return s[o]=u}(s,_+1,p?c.call(p,h):c(h)):function Jn(s,o){const u=s[o];return u===Yt?void 0:u}(s,_+1)}(ve(),function Rr(){const s=Ht.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}(),s,o,u,c)}function St(s){return o=>{setTimeout(s,void 0,o)}}const rs=class qn extends d.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,c){let h=o,p=u||(()=>null),_=c;if(o&&"object"==typeof o){const I=o;h=I.next?.bind(I),p=I.error?.bind(I),_=I.complete?.bind(I)}this.__isAsync&&(p=St(p),h&&(h=St(h)),_&&(_=St(_)));const b=super.subscribe({next:h,error:p,complete:_});return o instanceof j.w0&&o.add(b),b}};function mn(){return this._results[sc()]()}class Qv{get changes(){return this._changes||(this._changes=new rs)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=sc(),c=Qv.prototype;c[u]||(c[u]=mn)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const c=this;c.dirty=!1;const h=function Or(s){return s.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function _g(s,o,u){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let h=s[c],p=o[c];if(u&&(h=u(h),p=u(p)),p!==h)return!1}return!0}(c._results,h,u))&&(c._results=h,c.length=h.length,c.last=h[this.length-1],c.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let kn=(()=>{class s{}return s.__NG_ELEMENT_ID__=Xv,s})();const Je=kn,Bm=class extends Je{constructor(o,u,c){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(o,u){const c=this._declarationTContainer.tViews,h=R_(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null,u||null);h[17]=this._declarationLView[this._declarationTContainer.index];const _=this._declarationLView[19];return null!==_&&(h[19]=_.createEmbeddedView(c)),x_(c,h,o),new Ku(h)}};function Xv(){return ia(ur(),ve())}function ia(s,o){return 4&s.type?new Bm(o,s,Ba(s,o)):null}let $m=(()=>{class s{}return s.__NG_ELEMENT_ID__=jm,s})();function jm(){return is(ur(),ve())}const yS=$m,dh=class extends yS{constructor(o,u,c){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=c}get element(){return Ba(this._hostTNode,this._hostLView)}get injector(){return new Es(this._hostTNode,this._hostLView)}get parentInjector(){const o=Iu(this._hostTNode,this._hostLView);if(xl(o)){const u=lo(o,this._hostLView),c=$o(o);return new Es(u[1].data[c+8],u)}return new Es(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=Jv(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,u,c){let h,p;"number"==typeof c?h=c:null!=c&&(h=c.index,p=c.injector);const _=o.createEmbeddedView(u||{},p);return this.insert(_,h),_}createComponent(o,u,c,h,p){const _=o&&!function xa(s){return"function"==typeof s}(o);let b;if(_)b=u;else{const U=u||{};b=U.index,c=U.injector,h=U.projectableNodes,p=U.environmentInjector||U.ngModuleRef}const I=_?o:new Bd(hn(o)),S=c||this.parentInjector;if(!p&&null==I.ngModule){const Y=(_?S:this.parentInjector).get(ec,null);Y&&(p=Y)}const O=I.create(S,h,void 0,p);return this.insert(O.hostView,b),O}insert(o,u){const c=o._lView,h=c[1];if(function Bh(s){return mi(s[3])}(c)){const O=this.indexOf(o);if(-1!==O)this.detach(O);else{const U=c[3],Y=new dh(U,U[6],U[3]);Y.detach(Y.indexOf(o))}}const p=this._adjustIndex(u),_=this._lContainer;!function Jy(s,o,u,c){const h=10+c,p=u.length;c>0&&(u[h-1][4]=o),c<p-10?(o[4]=u[h],Bl(u,10+c,o)):(u.push(o),o[4]=null),o[3]=u;const _=o[17];null!==_&&u!==_&&function vf(s,o){const u=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===u?s[9]=[o]:u.push(o)}(_,o);const b=o[19];null!==b&&b.insertView(s),o[2]|=64}(h,c,_,p);const b=bf(p,_),I=c[11],S=Lu(I,_[7]);return null!==S&&function Ig(s,o,u,c,h,p){c[0]=h,c[6]=o,Kl(s,c,u,1,h,p)}(h,_[6],I,c,S,b),o.attachToViewContainerRef(),Bl(Hm(_),p,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=Jv(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),c=e_(this._lContainer,u);c&&(Oa(Hm(this._lContainer),u),Aw(c[1],c))}detach(o){const u=this._adjustIndex(o,-1),c=e_(this._lContainer,u);return c&&null!=Oa(Hm(this._lContainer),u)?new Ku(c):null}_adjustIndex(o,u=0){return o??this.length+u}};function Jv(s){return s[8]}function Hm(s){return s[8]||(s[8]=[])}function is(s,o){let u;const c=o[s.index];if(mi(c))u=c;else{let h;if(8&s.type)h=Un(c);else{const p=o[11];h=p.createComment("");const _=wr(s,o);vd(p,Lu(p,_),h,function Ed(s,o){return s.nextSibling(o)}(p,_),!1)}o[s.index]=u=B0(c,o,h,s),oi(o,u)}return new dh(u,s,o)}class hp{constructor(o){this.queryList=o,this.matches=null}clone(){return new hp(this.queryList)}setDirty(){this.queryList.setDirty()}}class zm{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const c=null!==o.contentQueries?o.contentQueries[0]:u.length,h=[];for(let p=0;p<c;p++){const _=u.getByIndex(p);h.push(this.queries[_.indexInDeclarationView].clone())}return new zm(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==Wa(o,u).matches&&this.queries[u].setDirty()}}class eE{constructor(o,u,c=null){this.predicate=o,this.flags=u,this.read=c}}class sa{constructor(o=[]){this.queries=o}elementStart(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let c=0;c<this.length;c++){const h=null!==u?u.length:0,p=this.getByIndex(c).embeddedTView(o,h);p&&(p.indexInDeclarationView=c,null!==u?u.push(p):u=[p])}return null!==u?new sa(u):null}template(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class fp{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new fp(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let h=0;h<c.length;h++){const p=c[h];this.matchTNodeWithReadOption(o,u,de(u,p)),this.matchTNodeWithReadOption(o,u,ho(u,o,p,!1,!1))}else c===kn?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,ho(u,o,c,!1,!1))}matchTNodeWithReadOption(o,u,c){if(null!==c){const h=this.metadata.read;if(null!==h)if(h===zu||h===$m||h===kn&&4&u.type)this.addMatch(u.index,-2);else{const p=ho(u,o,h,!1,!1);null!==p&&this.addMatch(u.index,p)}else this.addMatch(u.index,c)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function de(s,o){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===o)return u[c+1];return null}function yo(s,o,u,c){return-1===u?function Gm(s,o){return 11&s.type?Ba(s,o):4&s.type?ia(s,o):null}(o,s):-2===u?function _S(s,o,u){return u===zu?Ba(o,s):u===kn?ia(o,s):u===$m?is(o,s):void 0}(s,o,c):es(s,s[1],u,o)}function hh(s,o,u,c){const h=o[19].queries[c];if(null===h.matches){const p=s.data,_=u.matches,b=[];for(let I=0;I<_.length;I+=2){const S=_[I];b.push(S<0?null:yo(o,p[S],_[I+1],u.metadata.read))}h.matches=b}return h.matches}function oa(s,o,u,c){const h=s.queries.getByIndex(u),p=h.matches;if(null!==p){const _=hh(s,o,h,u);for(let b=0;b<p.length;b+=2){const I=p[b];if(I>0)c.push(_[b/2]);else{const S=p[b+1],O=o[-I];for(let U=10;U<O.length;U++){const Y=O[U];Y[17]===Y[3]&&oa(Y[1],Y,S,c)}if(null!==O[9]){const U=O[9];for(let Y=0;Y<U.length;Y++){const re=U[Y];oa(re[1],re,S,c)}}}}}return c}function lI(s){const o=ve(),u=rn(),c=qh();Ml(c+1);const h=Wa(u,c);if(s.dirty&&function gu(s){return 4==(4&s[2])}(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const p=h.crossesNgTemplate?oa(u,o,c,[]):hh(u,o,h,c);s.reset(p,n0),s.notifyOnChanges()}return!0}return!1}function tE(s,o,u,c){const h=rn();if(h.firstCreatePass){const p=ur();(function ss(s,o,u){null===s.queries&&(s.queries=new sa),s.queries.track(new fp(o,u))})(h,new eE(o,u,c),p.index),function ES(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(h,s),2==(2&u)&&(h.staticContentQueries=!0)}!function cI(s,o,u){const c=new Qv(4==(4&u));cT(s,o,c,c.destroy),null===o[19]&&(o[19]=new zm),o[19].queries.push(new hp(c))}(h,ve(),u)}function Wm(){return function vS(s,o){return s[19].queries[o].queryList}(ve(),qh())}function Wa(s,o){return s.queries.getByIndex(o)}function nE(s,o){return ia(s,o)}function Mc(...s){}const An=new gn("Application Initializer");let vp=(()=>{class s{constructor(u){this.appInits=u,this.resolve=Mc,this.reject=Mc,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,h)=>{this.resolve=c,this.reject=h})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const p=this.appInits[h]();if(nv(p))u.push(p);else if(iv(p)){const _=new Promise((b,I)=>{p.subscribe({complete:b,error:I})});u.push(_)}}Promise.all(u).then(()=>{c()}).catch(h=>{this.reject(h)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(Ge(An,8))},s.\u0275prov=ut({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Rc=new gn("AppId",{providedIn:"root",factory:function Ki(){return`${ey()}${ey()}${ey()}`}});function ey(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Fn=new gn("Platform Initializer"),TS=new gn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),ty=new gn("appBootstrapListener"),Ep=new gn("AnimationModuleType");let ny=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=ut({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const wp=new gn("LocaleId",{providedIn:"root",factory:()=>st(wp,dt.Optional|dt.SkipSelf)||function ry(){return typeof $localize<"u"&&$localize.locale||vc}()}),vI=new gn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class EI{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let hE=(()=>{class s{compileModuleSync(u){return new Lm(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const c=this.compileModuleSync(u),p=Gu($r(u).declarations).reduce((_,b)=>{const I=hn(b);return I&&_.push(new Bd(I)),_},[]);return new EI(c,p)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=ut({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const bI=(()=>Promise.resolve(0))();function Ip(s){typeof Zone>"u"?bI.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class As{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new rs(!1),this.onMicrotaskEmpty=new rs(!1),this.onStable=new rs(!1),this.onError=new rs(!1),typeof Zone>"u")throw new ye(908,!1);Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!c&&u,h.shouldCoalesceRunChangeDetection=c,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function Dp(){let s=Ut.requestAnimationFrame,o=Ut.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function DI(s){const o=()=>{!function II(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Ut,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,yh(s),s.isCheckStableRunning=!0,oy(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),yh(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,h,p,_,b)=>{try{return CI(s),u.invokeTask(h,p,_,b)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),TI(s)}},onInvoke:(u,c,h,p,_,b,I)=>{try{return CI(s),u.invoke(h,p,_,b,I)}finally{s.shouldCoalesceRunChangeDetection&&o(),TI(s)}},onHasTask:(u,c,h,p)=>{u.hasTask(h,p),c===h&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,yh(s),oy(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(u,c,h,p)=>(u.handleError(h,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!As.isInAngularZone())throw new ye(909,!1)}static assertNotInAngularZone(){if(As.isInAngularZone())throw new ye(909,!1)}run(o,u,c){return this._inner.run(o,u,c)}runTask(o,u,c,h){const p=this._inner,_=p.scheduleEventTask("NgZoneEvent: "+h,o,MS,Mc,Mc);try{return p.runTask(_,u,c)}finally{p.cancelTask(_)}}runGuarded(o,u,c){return this._inner.runGuarded(o,u,c)}runOutsideAngular(o){return this._outer.run(o)}}const MS={};function oy(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function yh(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function CI(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function TI(s){s._nesting--,oy(s)}class SI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new rs,this.onMicrotaskEmpty=new rs,this.onStable=new rs,this.onError=new rs}run(o,u,c){return o.apply(u,c)}runGuarded(o,u,c){return o.apply(u,c)}runOutsideAngular(o){return o()}runTask(o,u,c,h){return o.apply(u,c)}}const Oc=new gn(""),rl=new gn("");let sl,AI=(()=>{class s{constructor(u,c,h){this._ngZone=u,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,sl||(function MI(s){sl=s}(h),h.addToWindow(c)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{As.assertNotInAngularZone(),Ip(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ip(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,h){let p=-1;c&&c>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==p),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:p,updateCb:h})}whenStable(u,c,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,c,h){return[]}}return s.\u0275fac=function(u){return new(u||s)(Ge(As),Ge(il),Ge(rl))},s.\u0275prov=ut({token:s,factory:s.\u0275fac}),s})(),il=(()=>{class s{constructor(){this._applications=new Map}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return sl?.findTestabilityInTree(this,u,c)??null}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=ut({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),Ya=null;const pE=new gn("AllowMultipleToken"),Nc=new gn("PlatformDestroyListeners");class uy{constructor(o,u){this.name=o,this.token=u}}function gE(s,o,u=[]){const c=`Platform: ${o}`,h=new gn(c);return(p=[])=>{let _=ly();if(!_||_.injector.get(pE,!1)){const b=[...u,...p,{provide:h,useValue:!0}];s?s(b):function RI(s){if(Ya&&!Ya.get(pE,!1))throw new ye(400,!1);Ya=s;const o=s.get(mE);(function _h(s){const o=s.get(Fn,null);o&&o.forEach(u=>u())})(s)}(function ua(s=[],o){return rc.create({name:o,providers:[{provide:Ad,useValue:"platform"},{provide:Nc,useValue:new Set([()=>Ya=null])},...s]})}(b,c))}return function vh(s){const o=ly();if(!o)throw new ye(401,!1);return o}()}}function ly(){return Ya?.get(mE)??null}let mE=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const h=function cy(s,o){let u;return u="noop"===s?new SI:("zone.js"===s?void 0:s)||new As(o),u}(c?.ngZone,function Pc(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(c)),p=[{provide:As,useValue:h}];return h.run(()=>{const _=rc.create({providers:p,parent:this.injector,name:u.moduleType.name}),b=u.create(_),I=b.injector.get(Af,null);if(!I)throw new ye(402,!1);return h.runOutsideAngular(()=>{const S=h.onError.subscribe({next:O=>{I.handleError(O)}});b.onDestroy(()=>{Cp(this._modules,b),S.unsubscribe()})}),function xI(s,o,u){try{const c=u();return nv(c)?c.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(I,h,()=>{const S=b.injector.get(vp);return S.runInitializers(),S.donePromise.then(()=>(function Ov(s){it(s,"Expected localeId to be defined"),"string"==typeof s&&(Xd=s.toLowerCase().replace(/_/g,"-"))}(b.injector.get(wp,vc)||vc),this._moduleDoBootstrap(b),b))})})}bootstrapModule(u,c=[]){const h=Dr({},c);return function RS(s,o,u){const c=new Lm(u);return Promise.resolve(c)}(0,0,u).then(p=>this.bootstrapModuleFactory(p,h))}_moduleDoBootstrap(u){const c=u.injector.get(cn);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(h=>c.bootstrap(h));else{if(!u.instance.ngDoBootstrap)throw new ye(-403,!1);u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ye(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const u=this._injector.get(Nc,null);u&&(u.forEach(c=>c()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(Ge(rc))},s.\u0275prov=ut({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function Dr(s,o){return Array.isArray(o)?o.reduce(Dr,s):{...s,...o}}let cn=(()=>{class s{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(u,c,h){this._zone=u,this._injector=c,this._exceptionHandler=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const p=new P.y(b=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{b.next(this._stable),b.complete()})}),_=new P.y(b=>{let I;this._zone.runOutsideAngular(()=>{I=this._zone.onStable.subscribe(()=>{As.assertNotInAngularZone(),Ip(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,b.next(!0))})})});const S=this._zone.onUnstable.subscribe(()=>{As.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{b.next(!1)}))});return()=>{I.unsubscribe(),S.unsubscribe()}});this.isStable=(0,ie.T)(p,_.pipe((0,ue.B)()))}bootstrap(u,c){const h=u instanceof Jw;if(!this._injector.get(vp).done)throw!h&&Hn(u),new ye(405,false);let _;_=h?u:this._injector.get(Md).resolveComponentFactory(u),this.componentTypes.push(_.componentType);const b=function ay(s){return s.isBoundToModule}(_)?void 0:this._injector.get(wc),S=_.create(rc.NULL,[],c||_.selector,b),O=S.location.nativeElement,U=S.injector.get(Oc,null);return U?.registerApplication(O),S.onDestroy(()=>{this.detachView(S.hostView),Cp(this.components,S),U?.unregisterApplication(O)}),this._loadComponent(S),S}tick(){if(this._runningTick)throw new ye(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;Cp(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u);const c=this._injector.get(ty,[]);c.push(...this._bootstrapListeners),c.forEach(h=>h(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>Cp(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new ye(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(u){return new(u||s)(Ge(As),Ge(ec),Ge(Af))},s.\u0275prov=ut({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Cp(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}function NS(){return!1}let la=(()=>{class s{}return s.__NG_ELEMENT_ID__=OI,s})();function OI(s){return function Tp(s,o,u){if(_a(s)&&!u){const c=ar(s.index,o);return new Ku(c,c)}return 47&s.type?new Ku(o[16],o):null}(ur(),ve(),16==(16&s))}class my{constructor(){}supports(o){return em(o)}create(o){return new Mp(o)}}const kI=(s,o)=>o;class Mp{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||kI}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,c=this._removalsHead,h=0,p=null;for(;u||c;){const _=!c||u&&u.currentIndex<Eh(c,h,p)?u:c,b=Eh(_,h,p),I=_.currentIndex;if(_===c)h--,c=c._nextRemoved;else if(u=u._next,null==_.previousIndex)h++;else{p||(p=[]);const S=b-h,O=I-h;if(S!=O){for(let Y=0;Y<S;Y++){const re=Y<p.length?p[Y]:p[Y]=0,De=re+Y;O<=De&&De<S&&(p[Y]=re+1)}p[_.previousIndex]=O-S}}b!==I&&o(_,b,I)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!em(o))throw new ye(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,p,_,u=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let b=0;b<this.length;b++)p=o[b],_=this._trackByFn(b,p),null!==u&&Object.is(u.trackById,_)?(c&&(u=this._verifyReinsertion(u,p,_,b)),Object.is(u.item,p)||this._addIdentityChange(u,p)):(u=this._mismatch(u,p,_,b),c=!0),u=u._next}else h=0,function MT(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[sc()]();let c;for(;!(c=u.next()).done;)o(c.value)}}(o,b=>{_=this._trackByFn(h,b),null!==u&&Object.is(u.trackById,_)?(c&&(u=this._verifyReinsertion(u,b,_,h)),Object.is(u.item,b)||this._addIdentityChange(u,b)):(u=this._mismatch(u,b,_,h),c=!0),u=u._next,h++}),this.length=h;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,c,h){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,p,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,h))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,p,h)):o=this._addAfter(new ca(u,c),p,h),o}_verifyReinsertion(o,u,c,h){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==p?o=this._reinsertAfter(p,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,p=o._nextRemoved;return null===h?this._removalsHead=p:h._nextRemoved=p,null===p?this._removalsTail=h:p._prevRemoved=h,this._insertAfter(o,u,c),this._addToMoves(o,c),o}_moveAfter(o,u,c){return this._unlink(o),this._insertAfter(o,u,c),this._addToMoves(o,c),o}_addAfter(o,u,c){return this._insertAfter(o,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,c){const h=null===u?this._itHead:u._next;return o._next=h,o._prev=u,null===h?this._itTail=o:h._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new DE),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,c=o._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new DE),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class ca{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class IE{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const u=o._prevDup,c=o._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class DE{constructor(){this.map=new Map}put(o){const u=o.trackById;let c=this.map.get(u);c||(c=new IE,this.map.set(u,c)),c.add(o)}get(o,u){const h=this.map.get(o);return h?h.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Eh(s,o,u){const c=s.previousIndex;if(null===c)return c;let h=0;return u&&c<u.length&&(h=u[c]),c+o+h}class CE{constructor(){}supports(o){return o instanceof Map||W_(o)}create(){return new FI}}class FI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||W_(o)))throw new ye(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,h)=>{if(u&&u.key===h)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const p=this._getOrCreateRecordForKey(h,c);u=this._insertBeforeOrAppend(u,p)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const c=o._prev;return u._next=o,u._prev=c,o._prev=u,c&&(c._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,u);const p=h._prev,_=h._next;return p&&(p._next=_),_&&(_._prev=p),h._next=null,h._prev=null,h}const c=new LI(o);return this._records.set(o,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(c=>u(o[c],c))}}class LI{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function UI(){return new TE([new my])}let TE=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const h=c.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||UI()),deps:[[s,new D,new zs]]}}find(u){const c=this.factories.find(h=>h.supports(u));if(null!=c)return c;throw new ye(901,!1)}}return s.\u0275prov=ut({token:s,providedIn:"root",factory:UI}),s})();function _y(){return new SE([new CE])}let SE=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const h=c.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||_y()),deps:[[s,new D,new zs]]}}find(u){const c=this.factories.find(h=>h.supports(u));if(c)return c;throw new ye(901,!1)}}return s.\u0275prov=ut({token:s,providedIn:"root",factory:_y}),s})();const BI=gE(null,"core",[]);let US=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(Ge(cn))},s.\u0275mod=To({type:s}),s.\u0275inj=Mn({}),s})();function VS(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(Et,Se,F)=>{F.d(Se,{Z:()=>Ke});var d=F(2090),j=F(4859),P=F(9681),ie=F(1877);class ue{constructor(ye,Ae){this._delegate=ye,this.firebase=Ae,(0,P._addComponent)(ye,new j.wA("app-compat",()=>this,"PUBLIC")),this.container=ye.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ye){this._delegate.automaticDataCollectionEnabled=ye}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ye=>{this._delegate.checkDestroyed(),ye()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(ye,Ae=P._DEFAULT_ENTRY_NAME){var Te;this._delegate.checkDestroyed();const Le=this._delegate.container.getProvider(ye);return!Le.isInitialized()&&"EXPLICIT"===(null===(Te=Le.getComponent())||void 0===Te?void 0:Te.instantiationMode)&&Le.initialize(),Le.getImmediate({identifier:Ae})}_removeServiceInstance(ye,Ae=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ye).clearInstance(Ae)}_addComponent(ye){(0,P._addComponent)(this._delegate,ye)}_addOrOverwriteComponent(ye){(0,P._addOrOverwriteComponent)(this._delegate,ye)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const _e=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),K=function me(){const ct=function he(ct){const ye={},Ae={__esModule:!0,initializeApp:function xe(ee,le={}){const we=P.initializeApp(ee,le);if((0,d.r3)(ye,we.name))return ye[we.name];const Ye=new ct(we,Ae);return ye[we.name]=Ye,Ye},app:Le,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function Me(ee){const le=ee.name,we=le.replace("-compat","");if(P._registerComponent(ee)&&"PUBLIC"===ee.type){const Ye=(qe=Le())=>{if("function"!=typeof qe[we])throw _e.create("invalid-app-argument",{appName:le});return qe[we]()};void 0!==ee.serviceProps&&(0,d.ZB)(Ye,ee.serviceProps),Ae[we]=Ye,ct.prototype[we]=function(...qe){return this._getService.bind(this,le).apply(this,ee.multipleInstances?qe:[])}}return"PUBLIC"===ee.type?Ae[we]:null},removeApp:function Te(ee){delete ye[ee]},useAsService:function He(ee,le){return"serverAuth"===le?null:le},modularAPIs:P}};function Le(ee){if(!(0,d.r3)(ye,ee=ee||P._DEFAULT_ENTRY_NAME))throw _e.create("no-app",{appName:ee});return ye[ee]}return Ae.default=Ae,Object.defineProperty(Ae,"apps",{get:function Pe(){return Object.keys(ye).map(ee=>ye[ee])}}),Le.App=ct,Ae}(ue);return ct.INTERNAL=Object.assign(Object.assign({},ct.INTERNAL),{createFirebaseNamespace:me,extendNamespace:function ye(Ae){(0,d.ZB)(ct,Ae)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),ct}(),q=new ie.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){q.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ct=self.firebase.SDK_VERSION;ct&&ct.indexOf("LITE")>=0&&q.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ke=K;!function Re(ct){(0,P.registerVersion)("@firebase/app-compat","0.2.3",ct)}()},9681:(Et,Se,F)=>{F.r(Se),F.d(Se,{FirebaseError:()=>ie.ZR,SDK_VERSION:()=>Jr,_DEFAULT_ENTRY_NAME:()=>Be,_addComponent:()=>_n,_addOrOverwriteComponent:()=>Mt,_apps:()=>it,_clearComponents:()=>Mn,_components:()=>Qe,_getProvider:()=>ut,_registerComponent:()=>Ct,_removeServiceInstance:()=>fn,deleteApp:()=>Li,getApp:()=>Zn,getApps:()=>di,initializeApp:()=>Fi,onLog:()=>dt,registerVersion:()=>pr,setLogLevel:()=>gr});var d=F(5861),j=F(4859),P=F(1877),ie=F(2090),ue=F(8766);class se{constructor(Ce){this.container=Ce}getPlatformInfoString(){return this.container.getProviders().map(st=>{if(function _e(Ge){return"VERSION"===Ge.getComponent()?.type}(st)){const Rt=st.getImmediate();return`${Rt.library}/${Rt.version}`}return null}).filter(st=>st).join(" ")}}const he="@firebase/app",K=new P.Yd("@firebase/app"),Be="[DEFAULT]",$e={[he]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},it=new Map,Qe=new Map;function _n(Ge,Ce){try{Ge.container.addComponent(Ce)}catch(st){K.debug(`Component ${Ce.name} failed to register with FirebaseApp ${Ge.name}`,st)}}function Mt(Ge,Ce){Ge.container.addOrOverwriteComponent(Ce)}function Ct(Ge){const Ce=Ge.name;if(Qe.has(Ce))return K.debug(`There were multiple attempts to register component ${Ce}.`),!1;Qe.set(Ce,Ge);for(const st of it.values())_n(st,Ge);return!0}function ut(Ge,Ce){const st=Ge.container.getProvider("heartbeat").getImmediate({optional:!0});return st&&st.triggerHeartbeat(),Ge.container.getProvider(Ce)}function fn(Ge,Ce,st=Be){ut(Ge,Ce).clearInstance(st)}function Mn(){Qe.clear()}const pn=new ie.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class rr{constructor(Ce,st,Rt){this._isDeleted=!1,this._options=Object.assign({},Ce),this._config=Object.assign({},st),this._name=st.name,this._automaticDataCollectionEnabled=st.automaticDataCollectionEnabled,this._container=Rt,this.container.addComponent(new j.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ce){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ce}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ce){this._isDeleted=Ce}checkDestroyed(){if(this.isDeleted)throw pn.create("app-deleted",{appName:this._name})}}const Jr="9.17.1";function Fi(Ge,Ce={}){let st=Ge;"object"!=typeof Ce&&(Ce={name:Ce});const Rt=Object.assign({name:Be,automaticDataCollectionEnabled:!1},Ce),Nt=Rt.name;if("string"!=typeof Nt||!Nt)throw pn.create("bad-app-name",{appName:String(Nt)});if(st||(st=(0,ie.aH)()),!st)throw pn.create("no-options");const nn=it.get(Nt);if(nn){if((0,ie.vZ)(st,nn.options)&&(0,ie.vZ)(Rt,nn.config))return nn;throw pn.create("duplicate-app",{appName:Nt})}const G=new j.H0(Nt);for(const Q of Qe.values())G.addComponent(Q);const H=new rr(st,Rt,G);return it.set(Nt,H),H}function Zn(Ge=Be){const Ce=it.get(Ge);if(!Ce&&Ge===Be)return Fi();if(!Ce)throw pn.create("no-app",{appName:Ge});return Ce}function di(){return Array.from(it.values())}function Li(Ge){return wn.apply(this,arguments)}function wn(){return(wn=(0,d.Z)(function*(Ge){const Ce=Ge.name;it.has(Ce)&&(it.delete(Ce),yield Promise.all(Ge.container.getProviders().map(st=>st.delete())),Ge.isDeleted=!0)})).apply(this,arguments)}function pr(Ge,Ce,st){var Rt;let Nt=null!==(Rt=$e[Ge])&&void 0!==Rt?Rt:Ge;st&&(Nt+=`-${st}`);const nn=Nt.match(/\s|\//),G=Ce.match(/\s|\//);if(nn||G){const H=[`Unable to register library "${Nt}" with version "${Ce}":`];return nn&&H.push(`library name "${Nt}" contains illegal characters (whitespace or "/")`),nn&&G&&H.push("and"),G&&H.push(`version name "${Ce}" contains illegal characters (whitespace or "/")`),void K.warn(H.join(" "))}Ct(new j.wA(`${Nt}-version`,()=>({library:Nt,version:Ce}),"VERSION"))}function dt(Ge,Ce){if(null!==Ge&&"function"!=typeof Ge)throw pn.create("invalid-log-argument");(0,P.Am)(Ge,Ce)}function gr(Ge){(0,P.Ub)(Ge)}const Qn="firebase-heartbeat-store";let ei=null;function Ut(){return ei||(ei=(0,ue.X3)("firebase-heartbeat-database",1,{upgrade:(Ge,Ce)=>{0===Ce&&Ge.createObjectStore(Qn)}}).catch(Ge=>{throw pn.create("idb-open",{originalErrorMessage:Ge.message})})),ei}function kt(){return(kt=(0,d.Z)(function*(Ge){try{return(yield Ut()).transaction(Qn).objectStore(Qn).get(Nn(Ge))}catch(Ce){if(Ce instanceof ie.ZR)K.warn(Ce.message);else{const st=pn.create("idb-get",{originalErrorMessage:Ce?.message});K.warn(st.message)}}})).apply(this,arguments)}function In(Ge,Ce){return ir.apply(this,arguments)}function ir(){return(ir=(0,d.Z)(function*(Ge,Ce){try{const Rt=(yield Ut()).transaction(Qn,"readwrite");return yield Rt.objectStore(Qn).put(Ce,Nn(Ge)),Rt.done}catch(st){if(st instanceof ie.ZR)K.warn(st.message);else{const Rt=pn.create("idb-set",{originalErrorMessage:st?.message});K.warn(Rt.message)}}})).apply(this,arguments)}function Nn(Ge){return`${Ge.name}!${Ge.options.appId}`}class Ui{constructor(Ce){this.container=Ce,this._heartbeatsCache=null;const st=this.container.getProvider("app").getImmediate();this._storage=new Qt(st),this._heartbeatsCachePromise=this._storage.read().then(Rt=>(this._heartbeatsCache=Rt,Rt))}triggerHeartbeat(){var Ce=this;return(0,d.Z)(function*(){const Rt=Ce.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Nt=Wt();if(null===Ce._heartbeatsCache&&(Ce._heartbeatsCache=yield Ce._heartbeatsCachePromise),Ce._heartbeatsCache.lastSentHeartbeatDate!==Nt&&!Ce._heartbeatsCache.heartbeats.some(nn=>nn.date===Nt))return Ce._heartbeatsCache.heartbeats.push({date:Nt,agent:Rt}),Ce._heartbeatsCache.heartbeats=Ce._heartbeatsCache.heartbeats.filter(nn=>{const G=new Date(nn.date).valueOf();return Date.now()-G<=2592e6}),Ce._storage.overwrite(Ce._heartbeatsCache)})()}getHeartbeatsHeader(){var Ce=this;return(0,d.Z)(function*(){if(null===Ce._heartbeatsCache&&(yield Ce._heartbeatsCachePromise),null===Ce._heartbeatsCache||0===Ce._heartbeatsCache.heartbeats.length)return"";const st=Wt(),{heartbeatsToSend:Rt,unsentEntries:Nt}=function Vi(Ge,Ce=1024){const st=[];let Rt=Ge.slice();for(const Nt of Ge){const nn=st.find(G=>G.agent===Nt.agent);if(nn){if(nn.dates.push(Nt.date),Vr(st)>Ce){nn.dates.pop();break}}else if(st.push({agent:Nt.agent,dates:[Nt.date]}),Vr(st)>Ce){st.pop();break}Rt=Rt.slice(1)}return{heartbeatsToSend:st,unsentEntries:Rt}}(Ce._heartbeatsCache.heartbeats),nn=(0,ie.L)(JSON.stringify({version:2,heartbeats:Rt}));return Ce._heartbeatsCache.lastSentHeartbeatDate=st,Nt.length>0?(Ce._heartbeatsCache.heartbeats=Nt,yield Ce._storage.overwrite(Ce._heartbeatsCache)):(Ce._heartbeatsCache.heartbeats=[],Ce._storage.overwrite(Ce._heartbeatsCache)),nn})()}}function Wt(){return(new Date).toISOString().substring(0,10)}class Qt{constructor(Ce){this.app=Ce,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,ie.hl)()&&(0,ie.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ce=this;return(0,d.Z)(function*(){return(yield Ce._canUseIndexedDBPromise)&&(yield function wt(Ge){return kt.apply(this,arguments)}(Ce.app))||{heartbeats:[]}})()}overwrite(Ce){var st=this;return(0,d.Z)(function*(){var Rt;if(yield st._canUseIndexedDBPromise){const nn=yield st.read();return In(st.app,{lastSentHeartbeatDate:null!==(Rt=Ce.lastSentHeartbeatDate)&&void 0!==Rt?Rt:nn.lastSentHeartbeatDate,heartbeats:Ce.heartbeats})}})()}add(Ce){var st=this;return(0,d.Z)(function*(){var Rt;if(yield st._canUseIndexedDBPromise){const nn=yield st.read();return In(st.app,{lastSentHeartbeatDate:null!==(Rt=Ce.lastSentHeartbeatDate)&&void 0!==Rt?Rt:nn.lastSentHeartbeatDate,heartbeats:[...nn.heartbeats,...Ce.heartbeats]})}})()}}function Vr(Ge){return(0,ie.L)(JSON.stringify({version:2,heartbeats:Ge})).length}!function jn(Ge){Ct(new j.wA("platform-logger",Ce=>new se(Ce),"PRIVATE")),Ct(new j.wA("heartbeat",Ce=>new Ui(Ce),"PRIVATE")),pr(he,"0.9.3",Ge),pr(he,"0.9.3","esm2017"),pr("fire-js","")}("")},4859:(Et,Se,F)=>{F.d(Se,{H0:()=>he,wA:()=>P});var d=F(5861),j=F(2090);class P{constructor(K,q,J){this.name=K,this.instanceFactory=q,this.type=J,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(K){return this.instantiationMode=K,this}setMultipleInstances(K){return this.multipleInstances=K,this}setServiceProps(K){return this.serviceProps=K,this}setInstanceCreatedCallback(K){return this.onInstanceCreated=K,this}}const ie="[DEFAULT]";class ue{constructor(K,q){this.name=K,this.container=q,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(K){const q=this.normalizeInstanceIdentifier(K);if(!this.instancesDeferred.has(q)){const J=new j.BH;if(this.instancesDeferred.set(q,J),this.isInitialized(q)||this.shouldAutoInitialize())try{const ze=this.getOrInitializeService({instanceIdentifier:q});ze&&J.resolve(ze)}catch{}}return this.instancesDeferred.get(q).promise}getImmediate(K){var q;const J=this.normalizeInstanceIdentifier(K?.identifier),ze=null!==(q=K?.optional)&&void 0!==q&&q;if(!this.isInitialized(J)&&!this.shouldAutoInitialize()){if(ze)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:J})}catch(Re){if(ze)return null;throw Re}}getComponent(){return this.component}setComponent(K){if(K.name!==this.name)throw Error(`Mismatching Component ${K.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=K,this.shouldAutoInitialize()){if(function _e(me){return"EAGER"===me.instantiationMode}(K))try{this.getOrInitializeService({instanceIdentifier:ie})}catch{}for(const[q,J]of this.instancesDeferred.entries()){const ze=this.normalizeInstanceIdentifier(q);try{const Re=this.getOrInitializeService({instanceIdentifier:ze});J.resolve(Re)}catch{}}}}clearInstance(K=ie){this.instancesDeferred.delete(K),this.instancesOptions.delete(K),this.instances.delete(K)}delete(){var K=this;return(0,d.Z)(function*(){const q=Array.from(K.instances.values());yield Promise.all([...q.filter(J=>"INTERNAL"in J).map(J=>J.INTERNAL.delete()),...q.filter(J=>"_delete"in J).map(J=>J._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(K=ie){return this.instances.has(K)}getOptions(K=ie){return this.instancesOptions.get(K)||{}}initialize(K={}){const{options:q={}}=K,J=this.normalizeInstanceIdentifier(K.instanceIdentifier);if(this.isInitialized(J))throw Error(`${this.name}(${J}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ze=this.getOrInitializeService({instanceIdentifier:J,options:q});for(const[Re,Ke]of this.instancesDeferred.entries())J===this.normalizeInstanceIdentifier(Re)&&Ke.resolve(ze);return ze}onInit(K,q){var J;const ze=this.normalizeInstanceIdentifier(q),Re=null!==(J=this.onInitCallbacks.get(ze))&&void 0!==J?J:new Set;Re.add(K),this.onInitCallbacks.set(ze,Re);const Ke=this.instances.get(ze);return Ke&&K(Ke,ze),()=>{Re.delete(K)}}invokeOnInitCallbacks(K,q){const J=this.onInitCallbacks.get(q);if(J)for(const ze of J)try{ze(K,q)}catch{}}getOrInitializeService({instanceIdentifier:K,options:q={}}){let J=this.instances.get(K);if(!J&&this.component&&(J=this.component.instanceFactory(this.container,{instanceIdentifier:(me=K,me===ie?void 0:me),options:q}),this.instances.set(K,J),this.instancesOptions.set(K,q),this.invokeOnInitCallbacks(J,K),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,K,J)}catch{}var me;return J||null}normalizeInstanceIdentifier(K=ie){return this.component?this.component.multipleInstances?K:ie:K}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class he{constructor(K){this.name=K,this.providers=new Map}addComponent(K){const q=this.getProvider(K.name);if(q.isComponentSet())throw new Error(`Component ${K.name} has already been registered with ${this.name}`);q.setComponent(K)}addOrOverwriteComponent(K){this.getProvider(K.name).isComponentSet()&&this.providers.delete(K.name),this.addComponent(K)}getProvider(K){if(this.providers.has(K))return this.providers.get(K);const q=new ue(K,this);return this.providers.set(K,q),q}getProviders(){return Array.from(this.providers.values())}}},1877:(Et,Se,F)=>{F.d(Se,{Am:()=>me,Ub:()=>he,Yd:()=>_e,in:()=>j});const d=[];var j=(()=>{return(K=j||(j={}))[K.DEBUG=0]="DEBUG",K[K.VERBOSE=1]="VERBOSE",K[K.INFO=2]="INFO",K[K.WARN=3]="WARN",K[K.ERROR=4]="ERROR",K[K.SILENT=5]="SILENT",j;var K})();const P={debug:j.DEBUG,verbose:j.VERBOSE,info:j.INFO,warn:j.WARN,error:j.ERROR,silent:j.SILENT},ie=j.INFO,ue={[j.DEBUG]:"log",[j.VERBOSE]:"log",[j.INFO]:"info",[j.WARN]:"warn",[j.ERROR]:"error"},se=(K,q,...J)=>{if(q<K.logLevel)return;const ze=(new Date).toISOString(),Re=ue[q];if(!Re)throw new Error(`Attempted to log a message with an invalid logType (value: ${q})`);console[Re](`[${ze}]  ${K.name}:`,...J)};class _e{constructor(q){this.name=q,this._logLevel=ie,this._logHandler=se,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(q){if(!(q in j))throw new TypeError(`Invalid value "${q}" assigned to \`logLevel\``);this._logLevel=q}setLogLevel(q){this._logLevel="string"==typeof q?P[q]:q}get logHandler(){return this._logHandler}set logHandler(q){if("function"!=typeof q)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=q}get userLogHandler(){return this._userLogHandler}set userLogHandler(q){this._userLogHandler=q}debug(...q){this._userLogHandler&&this._userLogHandler(this,j.DEBUG,...q),this._logHandler(this,j.DEBUG,...q)}log(...q){this._userLogHandler&&this._userLogHandler(this,j.VERBOSE,...q),this._logHandler(this,j.VERBOSE,...q)}info(...q){this._userLogHandler&&this._userLogHandler(this,j.INFO,...q),this._logHandler(this,j.INFO,...q)}warn(...q){this._userLogHandler&&this._userLogHandler(this,j.WARN,...q),this._logHandler(this,j.WARN,...q)}error(...q){this._userLogHandler&&this._userLogHandler(this,j.ERROR,...q),this._logHandler(this,j.ERROR,...q)}}function he(K){d.forEach(q=>{q.setLogLevel(K)})}function me(K,q){for(const J of d){let ze=null;q&&q.level&&(ze=P[q.level]),J.userLogHandler=null===K?null:(Re,Ke,...ct)=>{const ye=ct.map(Ae=>{if(null==Ae)return null;if("string"==typeof Ae)return Ae;if("number"==typeof Ae||"boolean"==typeof Ae)return Ae.toString();if(Ae instanceof Error)return Ae.message;try{return JSON.stringify(Ae)}catch{return null}}).filter(Ae=>Ae).join(" ");Ke>=(ze??Re.logLevel)&&K({level:j[Ke].toLowerCase(),message:ye,args:ct,type:Re.name})}}}},259:(Et,Se,F)=>{F.d(Se,{C6:()=>d.getApps,KN:()=>d.registerVersion,Mq:()=>d.getApp,ZF:()=>d.initializeApp});var d=F(9681);(0,d.registerVersion)("firebase","9.17.1","app")},9260:(Et,Se,F)=>{F.d(Se,{Z:()=>d.Z});var d=F(3942);d.Z.registerVersion("firebase","9.17.1","app-compat")},9568:(Et,Se,F)=>{F.r(Se);var d=F(5861),j=F(3942),P=F(2722),ie=F(2090),_e=(F(9681),F(1877),F(4859));function he(){return window}function q(){return(q=(0,d.Z)(function*(B,N,V){var ae;const{BuildInfo:Oe}=he();(0,P.ap)(N.sessionId,"AuthEvent did not contain a session ID");const mt=yield Ae(N.sessionId),Ze={};return(0,P.aq)()?Ze.ibi=Oe.packageName:(0,P.ar)()?Ze.apn=Oe.packageName:(0,P.as)(B,"operation-not-supported-in-this-environment"),Oe.displayName&&(Ze.appDisplayName=Oe.displayName),Ze.sessionId=mt,(0,P.at)(B,V,N.type,void 0,null!==(ae=N.eventId)&&void 0!==ae?ae:void 0,Ze)})).apply(this,arguments)}function ze(){return(ze=(0,d.Z)(function*(B){const{BuildInfo:N}=he(),V={};(0,P.aq)()?V.iosBundleId=N.packageName:(0,P.ar)()?V.androidPackageName=N.packageName:(0,P.as)(B,"operation-not-supported-in-this-environment"),yield(0,P.au)(B,V)})).apply(this,arguments)}function ct(){return(ct=(0,d.Z)(function*(B,N,V){const{cordova:ae}=he();let Oe=()=>{};try{yield new Promise((mt,Ze)=>{let jt=null;function vt(){var Bt;mt();const Br=null===(Bt=ae.plugins.browsertab)||void 0===Bt?void 0:Bt.close;"function"==typeof Br&&Br(),"function"==typeof V?.close&&V.close()}function Cn(){jt||(jt=window.setTimeout(()=>{Ze((0,P.aw)(B,"redirect-cancelled-by-user"))},2e3))}function mr(){"visible"===document?.visibilityState&&Cn()}N.addPassiveListener(vt),document.addEventListener("resume",Cn,!1),(0,P.ar)()&&document.addEventListener("visibilitychange",mr,!1),Oe=()=>{N.removePassiveListener(vt),document.removeEventListener("resume",Cn,!1),document.removeEventListener("visibilitychange",mr,!1),jt&&window.clearTimeout(jt)}})}finally{Oe()}})).apply(this,arguments)}function Ae(B){return Te.apply(this,arguments)}function Te(){return(Te=(0,d.Z)(function*(B){const N=Le(B),V=yield crypto.subtle.digest("SHA-256",N);return Array.from(new Uint8Array(V)).map(Oe=>Oe.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Le(B){if((0,P.ap)(/[0-9a-zA-Z]+/.test(B),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(B);const N=new ArrayBuffer(B.length),V=new Uint8Array(N);for(let ae=0;ae<B.length;ae++)V[ae]=B.charCodeAt(ae);return V}class Pe extends P.ay{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(N=>{this.resolveInialized=N})}addPassiveListener(N){this.passiveListeners.add(N)}removePassiveListener(N){this.passiveListeners.delete(N)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(N){return this.resolveInialized(),this.passiveListeners.forEach(V=>V(N)),super.onEvent(N)}initialized(){var N=this;return(0,d.Z)(function*(){yield N.initPromise})()}}function ee(B){return le.apply(this,arguments)}function le(){return(le=(0,d.Z)(function*(B){const N=yield qe()._get(Pt(B));return N&&(yield qe()._remove(Pt(B))),N})).apply(this,arguments)}function Ye(){const B=[],N="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let V=0;V<20;V++){const ae=Math.floor(Math.random()*N.length);B.push(N.charAt(ae))}return B.join("")}function qe(){return(0,P.az)(P.b)}function Pt(B){return(0,P.aA)("authEvent",B.config.apiKey,B.name)}function ge(B){if(!B?.includes("?"))return{};const[N,...V]=B.split("?");return(0,ie.zd)(V.join("?"))}const Be=class ke{constructor(){this._redirectPersistence=P.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=P.aB,this._overrideRedirectResult=P.aC}_initialize(N){var V=this;return(0,d.Z)(function*(){const ae=N._key();let Oe=V.eventManagers.get(ae);return Oe||(Oe=new Pe(N),V.eventManagers.set(ae,Oe),V.attachCallbackListeners(N,Oe)),Oe})()}_openPopup(N){(0,P.as)(N,"operation-not-supported-in-this-environment")}_openRedirect(N,V,ae,Oe){var mt=this;return(0,d.Z)(function*(){!function ye(B){var N,V,ae,Oe,mt,Ze,jt,vt,Cn,mr;const Bt=he();(0,P.ax)("function"==typeof(null===(N=Bt?.universalLinks)||void 0===N?void 0:N.subscribe),B,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,P.ax)(typeof(null===(V=Bt?.BuildInfo)||void 0===V?void 0:V.packageName)<"u",B,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,P.ax)("function"==typeof(null===(mt=null===(Oe=null===(ae=Bt?.cordova)||void 0===ae?void 0:ae.plugins)||void 0===Oe?void 0:Oe.browsertab)||void 0===mt?void 0:mt.openUrl),B,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,P.ax)("function"==typeof(null===(vt=null===(jt=null===(Ze=Bt?.cordova)||void 0===Ze?void 0:Ze.plugins)||void 0===jt?void 0:jt.browsertab)||void 0===vt?void 0:vt.isAvailable),B,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,P.ax)("function"==typeof(null===(mr=null===(Cn=Bt?.cordova)||void 0===Cn?void 0:Cn.InAppBrowser)||void 0===mr?void 0:mr.open),B,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(N);const Ze=yield mt._initialize(N);yield Ze.initialized(),Ze.resetRedirect(),(0,P.aD)(),yield mt._originValidation(N);const jt=function Me(B,N,V=null){return{type:N,eventId:V,urlResponse:null,sessionId:Ye(),postBody:null,tenantId:B.tenantId,error:(0,P.aw)(B,"no-auth-event")}}(N,ae,Oe);yield function He(B,N){return qe()._set(Pt(B),N)}(N,jt);const vt=yield function K(B,N,V){return q.apply(this,arguments)}(N,jt,V),Cn=yield function Re(B){const{cordova:N}=he();return new Promise(V=>{N.plugins.browsertab.isAvailable(ae=>{let Oe=null;ae?N.plugins.browsertab.openUrl(B):Oe=N.InAppBrowser.open(B,(0,P.av)()?"_blank":"_system","location=yes"),V(Oe)})})}(vt);return function Ke(B,N,V){return ct.apply(this,arguments)}(N,Ze,Cn)})()}_isIframeWebStorageSupported(N,V){throw new Error("Method not implemented.")}_originValidation(N){const V=N._key();return this.originValidationPromises[V]||(this.originValidationPromises[V]=function J(B){return ze.apply(this,arguments)}(N)),this.originValidationPromises[V]}attachCallbackListeners(N,V){const{universalLinks:ae,handleOpenURL:Oe,BuildInfo:mt}=he(),Ze=setTimeout((0,d.Z)(function*(){yield ee(N),V.onEvent($e())}),500),jt=function(){var mr=(0,d.Z)(function*(Bt){clearTimeout(Ze);const Br=yield ee(N);let ml=null;Br&&Bt?.url&&(ml=function we(B,N){var V,ae;const Oe=function ce(B){const N=ge(B),V=N.link?decodeURIComponent(N.link):void 0,ae=ge(V).link,Oe=N.deep_link_id?decodeURIComponent(N.deep_link_id):void 0;return ge(Oe).link||Oe||ae||V||B}(N);if(Oe.includes("/__/auth/callback")){const mt=ge(Oe),Ze=mt.firebaseError?function rt(B){try{return JSON.parse(B)}catch{return null}}(decodeURIComponent(mt.firebaseError)):null,jt=null===(ae=null===(V=Ze?.code)||void 0===V?void 0:V.split("auth/"))||void 0===ae?void 0:ae[1],vt=jt?(0,P.aw)(jt):null;return vt?{type:B.type,eventId:B.eventId,tenantId:B.tenantId,error:vt,urlResponse:null,sessionId:null,postBody:null}:{type:B.type,eventId:B.eventId,tenantId:B.tenantId,sessionId:B.sessionId,urlResponse:Oe,postBody:null}}return null}(Br,Bt.url)),V.onEvent(ml||$e())});return function(Br){return mr.apply(this,arguments)}}();typeof ae<"u"&&"function"==typeof ae.subscribe&&ae.subscribe(null,jt);const vt=Oe,Cn=`${mt.packageName.toLowerCase()}://`;he().handleOpenURL=function(){var mr=(0,d.Z)(function*(Bt){if(Bt.toLowerCase().startsWith(Cn)&&jt({url:Bt}),"function"==typeof vt)try{vt(Bt)}catch(Br){console.error(Br)}});return function(Bt){return mr.apply(this,arguments)}}()}};function $e(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,P.aw)("no-auth-event")}}function Ct(){var B;return(null===(B=self?.location)||void 0===B?void 0:B.protocol)||null}function fn(B=(0,ie.z$)()){return!("file:"!==Ct()&&"ionic:"!==Ct()&&"capacitor:"!==Ct()||!B.toLowerCase().match(/iphone|ipad|ipod|android/))}function Jr(){try{const B=self.localStorage,N=P.aI();if(B)return B.setItem(N,"1"),B.removeItem(N),!function rr(B=(0,ie.z$)()){return function Dn(){return(0,ie.w1)()&&11===document?.documentMode}()||function pn(B=(0,ie.z$)()){return/Edge\/\d+/.test(B)}(B)}()||(0,ie.hl)()}catch{return Fi()&&(0,ie.hl)()}return!1}function Fi(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Zn(){return(function ut(){return"http:"===Ct()||"https:"===Ct()}()||(0,ie.ru)()||fn())&&!function Mn(){return(0,ie.b$)()||(0,ie.UG)()}()&&Jr()&&!Fi()}function di(){return fn()&&typeof document<"u"}function wn(){return(wn=(0,d.Z)(function*(){return!!di()&&new Promise(B=>{const N=setTimeout(()=>{B(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(N),B(!0)})})})).apply(this,arguments)}const dt={LOCAL:"local",NONE:"none",SESSION:"session"},gr=P.ax,Sr="persistence";function Qn(B){return ei.apply(this,arguments)}function ei(){return(ei=(0,d.Z)(function*(B){yield B._initializationPromise;const N=wt(),V=P.aA(Sr,B.config.apiKey,B.name);N&&N.setItem(V,B._getPersistence())})).apply(this,arguments)}function wt(){var B;try{return(null===(B=function pr(){return typeof window<"u"?window:null}())||void 0===B?void 0:B.sessionStorage)||null}catch{return null}}const kt=P.ax;class In{constructor(){this.browserResolver=P.az(P.k),this.cordovaResolver=P.az(Be),this.underlyingResolver=null,this._redirectPersistence=P.a,this._completeRedirectFn=P.aB,this._overrideRedirectResult=P.aC}_initialize(N){var V=this;return(0,d.Z)(function*(){return yield V.selectUnderlyingResolver(),V.assertedUnderlyingResolver._initialize(N)})()}_openPopup(N,V,ae,Oe){var mt=this;return(0,d.Z)(function*(){return yield mt.selectUnderlyingResolver(),mt.assertedUnderlyingResolver._openPopup(N,V,ae,Oe)})()}_openRedirect(N,V,ae,Oe){var mt=this;return(0,d.Z)(function*(){return yield mt.selectUnderlyingResolver(),mt.assertedUnderlyingResolver._openRedirect(N,V,ae,Oe)})()}_isIframeWebStorageSupported(N,V){this.assertedUnderlyingResolver._isIframeWebStorageSupported(N,V)}_originValidation(N){return this.assertedUnderlyingResolver._originValidation(N)}get _shouldInitProactively(){return di()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return kt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var N=this;return(0,d.Z)(function*(){if(N.underlyingResolver)return;const V=yield function Li(){return wn.apply(this,arguments)}();N.underlyingResolver=V?N.cordovaResolver:N.browserResolver})()}}function ir(B){return B.unwrap()}function hi(B){return Ui(B)}function Ui(B){const{_tokenResponse:N}=B instanceof ie.ZR?B.customData:B;if(!N)return null;if(!(B instanceof ie.ZR)&&"temporaryProof"in N&&"phoneNumber"in N)return P.P.credentialFromResult(B);const V=N.providerId;if(!V||V===P.o.PASSWORD)return null;let ae;switch(V){case P.o.GOOGLE:ae=P.Q;break;case P.o.FACEBOOK:ae=P.N;break;case P.o.GITHUB:ae=P.T;break;case P.o.TWITTER:ae=P.W;break;default:const{oauthIdToken:Oe,oauthAccessToken:mt,oauthTokenSecret:Ze,pendingToken:jt,nonce:vt}=N;return mt||Ze||Oe||jt?jt?V.startsWith("saml.")?P.aL._create(V,jt):P.J._fromParams({providerId:V,signInMethod:V,pendingToken:jt,idToken:Oe,accessToken:mt}):new P.U(V).credential({idToken:Oe,accessToken:mt,rawNonce:vt}):null}return B instanceof ie.ZR?ae.credentialFromError(B):ae.credentialFromResult(B)}function Wt(B,N){return N.catch(V=>{throw V instanceof ie.ZR&&function sr(B,N){var V;const ae=null===(V=N.customData)||void 0===V?void 0:V._tokenResponse;if("auth/multi-factor-auth-required"===N?.code)N.resolver=new Vr(B,P.an(B,N));else if(ae){const Oe=Ui(N),mt=N;Oe&&(mt.credential=Oe,mt.tenantId=ae.tenantId||void 0,mt.email=ae.email||void 0,mt.phoneNumber=ae.phoneNumber||void 0)}}(B,V),V}).then(V=>{const Oe=V.user;return{operationType:V.operationType,credential:hi(V),additionalUserInfo:P.al(V),user:jn.getOrCreate(Oe)}})}function Vi(B,N){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,d.Z)(function*(B,N){const V=yield N;return{verificationId:V.verificationId,confirm:ae=>Wt(B,V.confirm(ae))}})).apply(this,arguments)}class Vr{constructor(N,V){this.resolver=V,this.auth=function Nn(B){return B.wrapped()}(N)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(N){return Wt(ir(this.auth),this.resolver.resolveSignIn(N))}}class jn{constructor(N){this._delegate=N,this.multiFactor=P.ao(N)}static getOrCreate(N){return jn.USER_MAP.has(N)||jn.USER_MAP.set(N,new jn(N)),jn.USER_MAP.get(N)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(N){return this._delegate.getIdTokenResult(N)}getIdToken(N){return this._delegate.getIdToken(N)}linkAndRetrieveDataWithCredential(N){return this.linkWithCredential(N)}linkWithCredential(N){var V=this;return(0,d.Z)(function*(){return Wt(V.auth,P.Z(V._delegate,N))})()}linkWithPhoneNumber(N,V){var ae=this;return(0,d.Z)(function*(){return Vi(ae.auth,P.l(ae._delegate,N,V))})()}linkWithPopup(N){var V=this;return(0,d.Z)(function*(){return Wt(V.auth,P.d(V._delegate,N,In))})()}linkWithRedirect(N){var V=this;return(0,d.Z)(function*(){return yield Qn(P.aE(V.auth)),P.g(V._delegate,N,In)})()}reauthenticateAndRetrieveDataWithCredential(N){return this.reauthenticateWithCredential(N)}reauthenticateWithCredential(N){var V=this;return(0,d.Z)(function*(){return Wt(V.auth,P._(V._delegate,N))})()}reauthenticateWithPhoneNumber(N,V){return Vi(this.auth,P.r(this._delegate,N,V))}reauthenticateWithPopup(N){return Wt(this.auth,P.e(this._delegate,N,In))}reauthenticateWithRedirect(N){var V=this;return(0,d.Z)(function*(){return yield Qn(P.aE(V.auth)),P.h(V._delegate,N,In)})()}sendEmailVerification(N){return P.ab(this._delegate,N)}unlink(N){var V=this;return(0,d.Z)(function*(){return yield P.ak(V._delegate,N),V})()}updateEmail(N){return P.ag(this._delegate,N)}updatePassword(N){return P.ah(this._delegate,N)}updatePhoneNumber(N){return P.u(this._delegate,N)}updateProfile(N){return P.af(this._delegate,N)}verifyBeforeUpdateEmail(N,V){return P.ac(this._delegate,N,V)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}jn.USER_MAP=new WeakMap;const Ge=P.ax;let Ce=(()=>{class B{constructor(V,ae){if(this.app=V,ae.isInitialized())return this._delegate=ae.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Oe}=V.options;Ge(Oe,"invalid-api-key",{appName:V.name}),Ge(Oe,"invalid-api-key",{appName:V.name});const mt=typeof window<"u"?In:void 0;this._delegate=ae.initialize({options:{persistence:Rt(Oe,V.name),popupRedirectResolver:mt}}),this._delegate._updateErrorMap(P.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?jn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(V){this._delegate.languageCode=V}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(V){this._delegate.tenantId=V}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(V,ae){P.G(this._delegate,V,ae)}applyActionCode(V){return P.a2(this._delegate,V)}checkActionCode(V){return P.a3(this._delegate,V)}confirmPasswordReset(V,ae){return P.a1(this._delegate,V,ae)}createUserWithEmailAndPassword(V,ae){var Oe=this;return(0,d.Z)(function*(){return Wt(Oe._delegate,P.a5(Oe._delegate,V,ae))})()}fetchProvidersForEmail(V){return this.fetchSignInMethodsForEmail(V)}fetchSignInMethodsForEmail(V){return P.aa(this._delegate,V)}isSignInWithEmailLink(V){return P.a8(this._delegate,V)}getRedirectResult(){var V=this;return(0,d.Z)(function*(){Ge(Zn(),V._delegate,"operation-not-supported-in-this-environment");const ae=yield P.j(V._delegate,In);return ae?Wt(V._delegate,Promise.resolve(ae)):{credential:null,user:null}})()}addFrameworkForLogging(V){!function it(B,N){(0,P.aE)(B)._logFramework(N)}(this._delegate,V)}onAuthStateChanged(V,ae,Oe){const{next:mt,error:Ze,complete:jt}=st(V,ae,Oe);return this._delegate.onAuthStateChanged(mt,Ze,jt)}onIdTokenChanged(V,ae,Oe){const{next:mt,error:Ze,complete:jt}=st(V,ae,Oe);return this._delegate.onIdTokenChanged(mt,Ze,jt)}sendSignInLinkToEmail(V,ae){return P.a7(this._delegate,V,ae)}sendPasswordResetEmail(V,ae){return P.a0(this._delegate,V,ae||void 0)}setPersistence(V){var ae=this;return(0,d.Z)(function*(){let Oe;switch(function Yn(B,N){gr(Object.values(dt).includes(N),B,"invalid-persistence-type"),(0,ie.b$)()?gr(N!==dt.SESSION,B,"unsupported-persistence-type"):(0,ie.UG)()?gr(N===dt.NONE,B,"unsupported-persistence-type"):Fi()?gr(N===dt.NONE||N===dt.LOCAL&&(0,ie.hl)(),B,"unsupported-persistence-type"):gr(N===dt.NONE||Jr(),B,"unsupported-persistence-type")}(ae._delegate,V),V){case dt.SESSION:Oe=P.a;break;case dt.LOCAL:Oe=(yield P.az(P.i)._isAvailable())?P.i:P.b;break;case dt.NONE:Oe=P.L;break;default:return P.as("argument-error",{appName:ae._delegate.name})}return ae._delegate.setPersistence(Oe)})()}signInAndRetrieveDataWithCredential(V){return this.signInWithCredential(V)}signInAnonymously(){return Wt(this._delegate,P.X(this._delegate))}signInWithCredential(V){return Wt(this._delegate,P.Y(this._delegate,V))}signInWithCustomToken(V){return Wt(this._delegate,P.$(this._delegate,V))}signInWithEmailAndPassword(V,ae){return Wt(this._delegate,P.a6(this._delegate,V,ae))}signInWithEmailLink(V,ae){return Wt(this._delegate,P.a9(this._delegate,V,ae))}signInWithPhoneNumber(V,ae){return Vi(this._delegate,P.s(this._delegate,V,ae))}signInWithPopup(V){var ae=this;return(0,d.Z)(function*(){return Ge(Zn(),ae._delegate,"operation-not-supported-in-this-environment"),Wt(ae._delegate,P.c(ae._delegate,V,In))})()}signInWithRedirect(V){var ae=this;return(0,d.Z)(function*(){return Ge(Zn(),ae._delegate,"operation-not-supported-in-this-environment"),yield Qn(ae._delegate),P.f(ae._delegate,V,In)})()}updateCurrentUser(V){return this._delegate.updateCurrentUser(V)}verifyPasswordResetCode(V){return P.a4(this._delegate,V)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return B.Persistence=dt,B})();function st(B,N,V){let ae=B;"function"!=typeof B&&({next:ae,error:N,complete:V}=B);const Oe=ae;return{next:Ze=>Oe(Ze&&jn.getOrCreate(Ze)),error:N,complete:V}}function Rt(B,N){const V=function Ut(B,N){const V=wt();if(!V)return[];const ae=P.aA(Sr,B,N);switch(V.getItem(ae)){case dt.NONE:return[P.L];case dt.LOCAL:return[P.i,P.a];case dt.SESSION:return[P.a];default:return[]}}(B,N);if(typeof self<"u"&&!V.includes(P.i)&&V.push(P.i),typeof window<"u")for(const ae of[P.b,P.a])V.includes(ae)||V.push(ae);return V.includes(P.L)||V.push(P.L),V}class Nt{constructor(){this.providerId="phone",this._delegate=new P.P(ir(j.Z.auth()))}static credential(N,V){return P.P.credential(N,V)}verifyPhoneNumber(N,V){return this._delegate.verifyPhoneNumber(N,V)}unwrap(){return this._delegate}}Nt.PHONE_SIGN_IN_METHOD=P.P.PHONE_SIGN_IN_METHOD,Nt.PROVIDER_ID=P.P.PROVIDER_ID;const nn=P.ax;class G{constructor(N,V,ae=j.Z.app()){var Oe;nn(null===(Oe=ae.options)||void 0===Oe?void 0:Oe.apiKey,"invalid-api-key",{appName:ae.name}),this._delegate=new P.R(N,V,ae.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Q(B){B.INTERNAL.registerComponent(new _e.wA("auth-compat",N=>{const V=N.getProvider("app-compat").getImmediate(),ae=N.getProvider("auth");return new Ce(V,ae)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:P.A.EMAIL_SIGNIN,PASSWORD_RESET:P.A.PASSWORD_RESET,RECOVER_EMAIL:P.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:P.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:P.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:P.A.VERIFY_EMAIL}},EmailAuthProvider:P.M,FacebookAuthProvider:P.N,GithubAuthProvider:P.T,GoogleAuthProvider:P.Q,OAuthProvider:P.U,SAMLAuthProvider:P.V,PhoneAuthProvider:Nt,PhoneMultiFactorGenerator:P.m,RecaptchaVerifier:G,TwitterAuthProvider:P.W,Auth:Ce,AuthCredential:P.H,Error:ie.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),B.registerVersion("@firebase/auth-compat","0.3.3")}(j.Z)},8766:(Et,Se,F)=>{F.d(Se,{Lj:()=>xe,X3:()=>Le});var d=F(5861);let P,ie;const _e=new WeakMap,he=new WeakMap,me=new WeakMap,K=new WeakMap,q=new WeakMap;let Re={get(le,we,Ye){if(le instanceof IDBTransaction){if("done"===we)return he.get(le);if("objectStoreNames"===we)return le.objectStoreNames||me.get(le);if("store"===we)return Ye.objectStoreNames[1]?void 0:Ye.objectStore(Ye.objectStoreNames[0])}return Ae(le[we])},set:(le,we,Ye)=>(le[we]=Ye,!0),has:(le,we)=>le instanceof IDBTransaction&&("done"===we||"store"===we)||we in le};function ye(le){return"function"==typeof le?function ct(le){return le!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function se(){return ie||(ie=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(le)?function(...we){return le.apply(Te(this),we),Ae(_e.get(this))}:function(...we){return Ae(le.apply(Te(this),we))}:function(we,...Ye){const qe=le.call(Te(this),we,...Ye);return me.set(qe,we.sort?we.sort():[we]),Ae(qe)}}(le):(le instanceof IDBTransaction&&function ze(le){if(he.has(le))return;const we=new Promise((Ye,qe)=>{const Pt=()=>{le.removeEventListener("complete",rt),le.removeEventListener("error",ce),le.removeEventListener("abort",ce)},rt=()=>{Ye(),Pt()},ce=()=>{qe(le.error||new DOMException("AbortError","AbortError")),Pt()};le.addEventListener("complete",rt),le.addEventListener("error",ce),le.addEventListener("abort",ce)});he.set(le,we)}(le),((le,we)=>we.some(Ye=>le instanceof Ye))(le,function ue(){return P||(P=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(le,Re):le)}function Ae(le){if(le instanceof IDBRequest)return function J(le){const we=new Promise((Ye,qe)=>{const Pt=()=>{le.removeEventListener("success",rt),le.removeEventListener("error",ce)},rt=()=>{Ye(Ae(le.result)),Pt()},ce=()=>{qe(le.error),Pt()};le.addEventListener("success",rt),le.addEventListener("error",ce)});return we.then(Ye=>{Ye instanceof IDBCursor&&_e.set(Ye,le)}).catch(()=>{}),q.set(we,le),we}(le);if(K.has(le))return K.get(le);const we=ye(le);return we!==le&&(K.set(le,we),q.set(we,le)),we}const Te=le=>q.get(le);function Le(le,we,{blocked:Ye,upgrade:qe,blocking:Pt,terminated:rt}={}){const ce=indexedDB.open(le,we),ge=Ae(ce);return qe&&ce.addEventListener("upgradeneeded",be=>{qe(Ae(ce.result),be.oldVersion,be.newVersion,Ae(ce.transaction))}),Ye&&ce.addEventListener("blocked",()=>Ye()),ge.then(be=>{rt&&be.addEventListener("close",()=>rt()),Pt&&be.addEventListener("versionchange",()=>Pt())}).catch(()=>{}),ge}function xe(le,{blocked:we}={}){const Ye=indexedDB.deleteDatabase(le);return we&&Ye.addEventListener("blocked",()=>we()),Ae(Ye).then(()=>{})}const Pe=["get","getKey","getAll","getAllKeys","count"],Me=["put","add","delete","clear"],He=new Map;function ee(le,we){if(!(le instanceof IDBDatabase)||we in le||"string"!=typeof we)return;if(He.get(we))return He.get(we);const Ye=we.replace(/FromIndex$/,""),qe=we!==Ye,Pt=Me.includes(Ye);if(!(Ye in(qe?IDBIndex:IDBObjectStore).prototype)||!Pt&&!Pe.includes(Ye))return;const rt=function(){var ce=(0,d.Z)(function*(ge,...be){const ke=this.transaction(ge,Pt?"readwrite":"readonly");let Be=ke.store;return qe&&(Be=Be.index(be.shift())),(yield Promise.all([Be[Ye](...be),Pt&&ke.done]))[0]});return function(be){return ce.apply(this,arguments)}}();return He.set(we,rt),rt}!function Ke(le){Re=le(Re)}(le=>({...le,get:(we,Ye,qe)=>ee(we,Ye)||le.get(we,Ye,qe),has:(we,Ye)=>!!ee(we,Ye)||le.has(we,Ye)}))},5861:(Et,Se,F)=>{function d(P,ie,ue,se,_e,he,me){try{var K=P[he](me),q=K.value}catch(J){return void ue(J)}K.done?ie(q):Promise.resolve(q).then(se,_e)}function j(P){return function(){var ie=this,ue=arguments;return new Promise(function(se,_e){var he=P.apply(ie,ue);function me(q){d(he,se,_e,me,K,"next",q)}function K(q){d(he,se,_e,me,K,"throw",q)}me(void 0)})}}F.d(Se,{Z:()=>j})}},Et=>{Et(Et.s=491)}]);